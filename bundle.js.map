{"version":3,"file":"bundle.js","mappings":"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AAAooH,GAAAxoH,EAAAI,EAAA,CAgBG2/F,CAAA0oB,EAAAhrB,GAhBHr9F,EAgBGqoH,EAhBH9oH,EAgBG,EAAAhqB,IAAA,QAAA7F,OAhBHmwB,EAgBGstF,KAAA3sF,EAED,SAAA2uF,IAAA,IAAAs5B,EAAA/oB,EAAA,OAAAvS,KAAAjqG,EAAA,SAAA9M,GAAA,cAAAA,EAAAypB,GAAA,OA8TgD,OA7T9C+5E,GAAOx3B,UAAU,SAAU,CACzBmD,OAAQ,qBACRmjE,MAAO,oBACPjnB,WAAY,2BAGd7nB,GAAOx3B,UAAU,YAAa,CAC5B,MAAO,wCAGTw3B,GAAOx3B,UAAU,QAAS,CACxB,EAAG,uBAGLw3B,GAAOx3B,UAAU,UAAW,CAC1B,KAAO,oCACP,MAAO,oCACP,MAAO,sCAGTw3B,GAAOx3B,UAAU,SAAU,CACzB,IAAO,mCACP,MAAO,qCAGHqmE,EAAW,CACf,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAGF7uC,GAAOx3B,UACL,WACAqmE,EAASt7H,OACP,SAACC,EAAK+S,GAAC,OAAA+lG,GAAAA,GAAA,GACF94G,GAAG,GAAAs6H,GAAA,GACLvnH,EAAC,mBAAArZ,OAAsBqZ,EAAC,oBAE3B,CAAC,IAICu/F,EAAS,CACb,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QAGF9lB,GAAOx3B,UACL,SACAs9C,EAAOvyG,OACL,SAACC,EAAK+S,GAAC,OAAA+lG,GAAAA,GAAA,GACF94G,GAAG,GAAAs6H,GAAA,GACLvnH,EAAC,iBAAArZ,OAAoBqZ,EAAC,WAEzB,CAAC,IAILvxB,KAAKo4H,WAAW/lC,UAAY,mBAAkB7qF,EAAAypB,EAAA,EACxC+5E,GAAOgB,WAAW,UAAS,OACgB,OAAjDhsG,KAAKo4H,WAAW/lC,UAAY,sBAAqB7qF,EAAAypB,EAAA,EAC3C+5E,GAAOgB,WAAW,aAAY,OACS,OAA7ChsG,KAAKo4H,WAAW/lC,UAAY,kBAAiB7qF,EAAAypB,EAAA,EACvC+5E,GAAOgB,WAAW,SAAQ,OACe,OAA/ChsG,KAAKo4H,WAAW/lC,UAAY,oBAAmB7qF,EAAAypB,EAAA,EACzC+5E,GAAOgB,WAAW,WAAU,OACY,OAA9ChsG,KAAKo4H,WAAW/lC,UAAY,mBAAkB7qF,EAAAypB,EAAA,EACxC+5E,GAAOgB,WAAW,UAAS,OACe,OAAhDhsG,KAAKo4H,WAAW/lC,UAAY,qBAAoB7qF,EAAAypB,EAAA,EAC1C+5E,GAAOgB,WAAW,YAAW,OACW,OAA9ChsG,KAAKo4H,WAAW/lC,UAAY,mBAAkB7qF,EAAAypB,EAAA,EACxC+5E,GAAOgB,WAAW,UAAS,OAEjChsG,KAAKgtG,aAAY,cAAAxlG,EAAAyC,EAAA,KAAAs2G,EAAA,QA/UlBtN,EAhBH,eAAAjiF,EAAA,KAAAI,EAAAxJ,UAAA,WAAAvqB,QAAA,SAAAszB,EAAAa,GAAA,IAAAvnB,EAAAgnB,EAAAnJ,MAAAkJ,EAAAI,GAAA,SAAA0wE,EAAA7wE,GAAAwtF,GAAAx0G,EAAA0mB,EAAAa,EAAAswE,EAAA0e,EAAA,OAAAvvF,EAAA,UAAAuvF,EAAAvvF,GAAAwtF,GAAAx0G,EAAA0mB,EAAAa,EAAAswE,EAAA0e,EAAA,QAAAvvF,EAAA,CAAA6wE,OAAA,MAgWG,WA9UU,OAAAmR,EAAAnrF,MAAC,KAADF,UAAA,KAAAjhB,IAAA,aAAA7F,MAgVX,WACEd,KAAKo4H,WAAW3oG,SAChBzvB,KAAK07F,MACP,GAAC,CAAA/0F,IAAA,WAAA7F,MAED,WAA8B,IAArBoU,EAAQ0S,UAAA5kB,OAAA,QAAA6kB,IAAAD,UAAA,GAAAA,UAAA,GAAG,WAAO,EACzB5nB,KAAK07F,KAAOxmF,CACd,IAzWFyb,GAAAqoH,GAAA5nH,EAAA3vB,UAAAkvB,GAAAjsB,OAAAuY,eAAAmU,EAAA,aAAAsrF,UAAA,IAAAtrF,EAAA,IAAAA,EAAAT,EAAAM,EAgBGgiF,CAyVA,CAlW8B,CAASpqC,EAAAA,I,cCP1C,IAAAz3C,EAAAJ,EAAAL,EAAA,mBAAA0rE,OAAAA,OAAA,GAAAprE,EAAAN,EAAAmtF,UAAA,aAAAtsF,EAAAb,EAAA2rE,aAAA,yBAAAr5F,EAAA0tB,EAAAM,EAAAO,EAAAvuB,GAAA,IAAAgF,EAAAgpB,GAAAA,EAAAxvB,qBAAAs8G,EAAA9sF,EAAA8sF,EAAA1sF,EAAA3sB,OAAAC,OAAAsD,EAAAxG,WAAA,OAAAu8G,GAAA3sF,EAAA,mBAAAV,EAAAM,EAAAO,GAAA,IAAAvuB,EAAAgF,EAAAopB,EAAAK,EAAA,EAAAC,EAAAH,GAAA,GAAAxnB,GAAA,EAAAi0G,EAAA,CAAAtsF,EAAA,EAAAV,EAAA,EAAAQ,EAAAL,EAAAnnB,EAAAG,EAAAsnB,EAAAtnB,EAAA43B,KAAA5Q,EAAA,GAAAhnB,EAAA,SAAA4mB,EAAAL,GAAA,OAAA1tB,EAAA+tB,EAAA/oB,EAAA,EAAAopB,EAAAD,EAAA6sF,EAAAhtF,EAAAN,EAAA1mB,CAAA,YAAAG,EAAAumB,EAAAM,GAAA,IAAAhpB,EAAA0oB,EAAAU,EAAAJ,EAAAD,EAAA,GAAAhnB,GAAA0nB,IAAAF,GAAAR,EAAAW,EAAA3uB,OAAAguB,IAAA,KAAAQ,EAAAvuB,EAAA0uB,EAAAX,GAAA5mB,EAAA6zG,EAAAtsF,EAAAzK,EAAAjkB,EAAA,GAAA0tB,EAAA,GAAAa,EAAAtK,IAAA+J,KAAAI,EAAApuB,GAAAgF,EAAAhF,EAAA,OAAAgF,EAAA,MAAAhF,EAAA,GAAAA,EAAA,GAAAmuB,GAAAnuB,EAAA,IAAAmH,KAAAonB,EAAAb,EAAA,GAAAvmB,EAAAnH,EAAA,KAAAgF,EAAA,EAAAg2G,EAAAxsF,EAAAR,EAAAgtF,EAAAhtF,EAAAhuB,EAAA,IAAAmH,EAAA8c,IAAAsK,EAAAb,EAAA,GAAA1tB,EAAA,GAAAguB,GAAAA,EAAA/J,KAAAjkB,EAAA,GAAA0tB,EAAA1tB,EAAA,GAAAguB,EAAAgtF,EAAAhtF,EAAA/J,EAAAjf,EAAA,OAAAupB,GAAAb,EAAA,SAAA1mB,EAAA,MAAAD,GAAA,EAAAinB,CAAA,iBAAAO,EAAAG,EAAAzK,GAAA,GAAAwK,EAAA,QAAAtL,UAAA,oCAAApc,GAAA,IAAA2nB,GAAAvnB,EAAAunB,EAAAzK,GAAAjf,EAAA0pB,EAAAN,EAAAnK,GAAA8J,EAAA/oB,EAAA,EAAAmpB,EAAAC,KAAArnB,GAAA,CAAA/G,IAAAgF,EAAAA,EAAA,GAAAA,EAAA,IAAAg2G,EAAAhtF,GAAA,GAAA7mB,EAAAnC,EAAAopB,IAAA4sF,EAAAhtF,EAAAI,EAAA4sF,EAAAxsF,EAAAJ,GAAA,OAAAK,EAAA,EAAAzuB,EAAA,IAAAgF,IAAAupB,EAAA,QAAAR,EAAA/tB,EAAAuuB,GAAA,MAAAR,EAAAA,EAAA7b,KAAAlS,EAAAouB,IAAA,MAAAjL,UAAA,wCAAA4K,EAAA0qE,KAAA,OAAA1qE,EAAAK,EAAAL,EAAAlwB,MAAAmH,EAAA,IAAAA,EAAA,YAAAA,IAAA+oB,EAAA/tB,EAAA,SAAA+tB,EAAA7b,KAAAlS,GAAAgF,EAAA,IAAAopB,EAAAjL,UAAA,oCAAAoL,EAAA,YAAAvpB,EAAA,GAAAhF,EAAAmuB,CAAA,UAAAJ,GAAAhnB,EAAAi0G,EAAAhtF,EAAA,GAAAI,EAAAV,EAAAxb,KAAA8b,EAAAgtF,MAAAh0G,EAAA,YAAA+mB,GAAA/tB,EAAAmuB,EAAAnpB,EAAA,EAAAopB,EAAAL,CAAA,SAAAU,EAAA,UAAA5wB,MAAAkwB,EAAA0qE,KAAA1xF,EAAA,GAAA2mB,EAAAa,EAAAvuB,IAAA,GAAAouB,CAAA,KAAApnB,EAAA,YAAA8zG,IAAA,UAAAG,IAAA,UAAAC,IAAA,CAAAntF,EAAAtsB,OAAA05G,eAAA,IAAAn2G,EAAA,GAAAgpB,GAAAD,EAAAA,EAAA,GAAAC,QAAA+sF,GAAAhtF,EAAA,GAAAC,EAAA,yBAAAD,GAAAK,EAAA8sF,EAAA18G,UAAAs8G,EAAAt8G,UAAAiD,OAAAC,OAAAsD,GAAA,SAAAypB,EAAAN,GAAA,OAAA1sB,OAAA25G,eAAA35G,OAAA25G,eAAAjtF,EAAA+sF,IAAA/sF,EAAAzK,UAAAw3F,EAAAH,GAAA5sF,EAAAI,EAAA,sBAAAJ,EAAA3vB,UAAAiD,OAAAC,OAAA0sB,GAAAD,CAAA,QAAA8sF,EAAAz8G,UAAA08G,EAAAH,GAAA3sF,EAAA,cAAA8sF,GAAAH,GAAAG,EAAA,cAAAD,GAAAA,EAAAI,YAAA,oBAAAN,GAAAG,EAAA3sF,EAAA,qBAAAwsF,GAAA3sF,GAAA2sF,GAAA3sF,EAAAG,EAAA,aAAAwsF,GAAA3sF,EAAAJ,EAAA,yBAAA+sF,GAAA3sF,EAAA,oDAAAktF,GAAA,kBAAAjqG,EAAArR,EAAA2uB,EAAAF,EAAA,cAAAssF,GAAA5sF,EAAAT,EAAAM,EAAAD,GAAA,IAAA/tB,EAAAyB,OAAAuY,eAAA,IAAAha,EAAA,gBAAAmuB,GAAAnuB,EAAA,EAAA+6G,GAAA,SAAA5sF,EAAAT,EAAAM,EAAAD,GAAA,SAAAQ,EAAAb,EAAAM,GAAA+sF,GAAA5sF,EAAAT,EAAA,SAAAS,GAAA,YAAAotF,QAAA7tF,EAAAM,EAAAG,EAAA,GAAAT,EAAA1tB,EAAAA,EAAAmuB,EAAAT,EAAA,CAAA7vB,MAAAmwB,EAAA8pE,YAAA/pE,EAAAgqE,cAAAhqE,EAAA0rF,UAAA1rF,IAAAI,EAAAT,GAAAM,GAAAO,EAAA,UAAAA,EAAA,WAAAA,EAAA,cAAAwsF,GAAA5sF,EAAAT,EAAAM,EAAAD,EAAA,UAAAytF,GAAAxtF,EAAAD,EAAAI,EAAAT,EAAAa,EAAAvnB,EAAAhC,GAAA,QAAAhF,EAAAguB,EAAAhnB,GAAAhC,GAAAopB,EAAApuB,EAAAnC,KAAA,OAAAmwB,GAAA,YAAAG,EAAAH,EAAA,CAAAhuB,EAAAy4F,KAAA1qE,EAAAK,GAAAh0B,QAAAC,QAAA+zB,GAAA+6E,KAAAz7E,EAAAa,EAAA,EAAAP,GAGCstF,KAAA3sF,EAAC,SAAA2uF,IAAA,IAAA2wB,EAAAO,EAAA36H,EAAA,OAAAynG,KAAAjqG,EAAA,SAAA9M,GAAA,cAAAA,EAAAypB,GAAA,OAIA,OAFMigH,EAAM,IAAI/wD,EAEhB34E,EAAAypB,EAAA,EACMigH,EAAIrkI,KAAK,CACbvM,MAAOwxD,OAAO4pD,WACdn7G,OAAQuxD,OAAO6pD,YACfzjC,WAAY,EACZ6hE,SAAUjoF,OACVzZ,WAAW,EACXxnC,WAAYihD,OAAOkoF,kBAAoB,EACvCppI,aAAa,EACbqpI,gBAAiB,qBACjB,OAG6C,GAAzCxI,EAAUj0I,SAASktH,eAAe,QAC1B,CAAFljH,EAAAypB,EAAA,QAC+B,OAAzC4hC,QAAQiqC,MAAM,4BAA2Bt1F,EAAAyC,EAAA,UAG3CwnI,EAAQ5nF,YAAYqnF,EAAIjvI,QAGlB6U,EAAS,IAAIssF,GACnB8tC,EAAI3yC,MAAMnxF,SAAS0J,GACnBA,EAAO+M,QAGP/M,EAAOojI,SAAS,WACd,IAAMC,EAAO,IAAInD,GAAK9F,EAAKO,GAC3BP,EAAI3yC,MAAM5vF,YAAYmI,GACtBo6H,EAAI3yC,MAAMnxF,SAAS+sI,EACrB,GAGAjJ,EAAI3yC,MAAMx2E,GAAG,cAAe,SAAA5B,GAC1B,GACA,cAAA3e,EAAAyC,EAAA,KAAAs2G,EAAA,GA1CJ,eAAAvvF,EAAA,KAAAI,EAAAxJ,UAAA,WAAAvqB,QAAA,SAAAszB,EAAAa,GAAA,IAAAvnB,EAAAgnB,GAAAnJ,MAAAkJ,EAAAI,GAAA,SAAA0wE,EAAA7wE,GAAAwtF,GAAAx0G,EAAA0mB,EAAAa,EAAAswE,EAAA0e,EAAA,OAAAvvF,EAAA,UAAAuvF,EAAAvvF,GAAAwtF,GAAAx0G,EAAA0mB,EAAAa,EAAAswE,EAAA0e,EAAA,QAAAvvF,EAAA,CAAA6wE,OAAA,Q","sources":["webpack://rts-game/webpack/runtime/load script","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/fill/FillPattern.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text/canvas/CanvasTextMetrics.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/RenderGroup.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/bounds/utils/matrixAndBoundsPool.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text/canvas/utils/fontStringFromTextStyle.mjs","webpack://rts-game/./node_modules/.pnpm/eventemitter3@5.0.1/node_modules/eventemitter3/index.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/spritesheet/Spritesheet.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/spritesheet/spritesheetAsset.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/spritesheet/init.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/utils/multiplyColors.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/data/updateQuadBounds.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureStyle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/shader-bits/roundPixelsBit.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/shader/Shader.mjs","webpack://rts-game/./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getTestContext.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/shader/types.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/shader/UniformGroup.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/shader/const.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuProgram.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs","webpack://rts-game/./node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs","webpack://rts-game/./node_modules/.pnpm/eventemitter3@5.0.1/node_modules/eventemitter3/index.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/shader-bits/colorBit.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs","webpack://rts-game/./node_modules/.pnpm/tiny-lru@11.4.5/node_modules/tiny-lru/dist/tiny-lru.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/buffer/Buffer.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/extensions/Extensions.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+colord@2.9.6/node_modules/@pixi/colord/index.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/color/Color.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+colord@2.9.6/node_modules/@pixi/colord/plugins/names.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/pool/Pool.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/VideoSource.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/transformVertices.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildCircle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/const.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildLine.mjs","webpack://rts-game/./node_modules/.pnpm/earcut@3.0.2/node_modules/earcut/src/earcut.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/utils.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/utils/triangulateWithHoles.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPolygon.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildRectangle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildTriangle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/utils/generateTextureFillMatrix.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/utils/buildContextBatches.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPixelLine.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/utils/getOrientationOfPoints.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/buildUvs.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContextSystem.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/filters/Filter.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/const.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/misc/squaredDistanceToLineSegment.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/shapes/Polygon.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/TexturePool.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/gl/utils/maxRecommendedTextures.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/shared/BatchTextureArray.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/shared/BatchGeometry.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/shared/DefaultShader.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/shared/DefaultBatcher.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text/canvas/utils/getCanvasFillStyle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text/TextStyle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/point/ObservablePoint.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/ImageSource.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/BufferImageSource.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs","webpack://rts-game/./node_modules/.pnpm/parse-svg-path@0.1.2/node_modules/parse-svg-path/index.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/utils/copySearchParams.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/data/removeItems.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/misc/NOOP.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs","webpack://rts-game/./node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/browser/unsafeEvalSupported.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/matrix/Matrix.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/utils/getBitmapTextLayout.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/data/uid.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/environment/adapter.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/environment-browser/BrowserAdapter.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/logging/warn.mjs","webpack://rts-game/./node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/batcher/gpu/getTextureBatchBindGroup.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/CanvasPool.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/LoaderParser.mjs","webpack://rts-game/./node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/runtime/api.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/point/Point.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/misc/pow2.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/ticker/const.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/instructions/InstructionSet.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/BatchableGraphics.mjs","webpack://rts-game/./node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/cache/Cache.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/sprite/Sprite.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/fill/FillGradient.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs","webpack://rts-game/./node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/utils/createIdFromString.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/ticker/TickerListener.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/ticker/Ticker.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/matrix/groupD8.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/cacheAsTextureMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/childrenHelperMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/collectRenderablesMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/mask/MaskEffectManager.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/effectsMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/findMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/getFastGlobalBoundsMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/getGlobalMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/utils/checkChildrenDidChange.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/measureMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/onRenderMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/sortMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/container-mixins/toLocalGlobalMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/Container.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/utils/assignWithIgnore.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/culling/cullingMixin.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/geometry/Geometry.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/DynamicBitmapFont.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/BitmapFontManager.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/utils/resolveCharacters.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/utils/createStringVariations.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/resolver/Resolver.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/buffer/const.mjs","webpack://rts-game/./app/styles.css","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/view/ViewContainer.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/environment/autoDetectEnvironment.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/system/AbstractRenderer.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/utils/convertFillInputToFillStyle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/utils/multiplyHexColors.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/container/utils/definedProps.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgram.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/buffer/utils/fastCopy.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/misc/const.mjs","webpack://rts-game/./node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/global/globalHooks.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/addBits.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileHooks.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileInputs.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileOutputs.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/injectBits.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compiler/compileHighShader.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/defaultProgramTemplate.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/shader-bits/globalUniformsBit.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/compileHighShaderToProgram.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/shapes/Circle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/shapes/Ellipse.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/maths/shapes/RoundedRectangle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArc.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcToSvg.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/path/ShapePath.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcTo.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/path/roundShape.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/path/GraphicsPath.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGPath.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGFloatAttribute.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGDefinitions.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/extractSvgUrlId.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGStyle.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/pathOperations.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGParser.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/fillOperations.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContext.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/utils/isSingleItem.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/types.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/data/ViewableBuffer.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/utils/convertToList.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/mask/utils/addMaskBounds.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/mask/utils/addMaskLocalBounds.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMask.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/mask/color/ColorMask.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/mask/stencil/StencilMask.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/init.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/pool/GlobalResourceRegistry.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/high-shader/shader-bits/generateTextureBatchBit.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/textureFrom.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/path.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/AbstractBitmapFont.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/logging/deprecation.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/filters/FilterEffect.mjs","webpack://rts-game/webpack/bootstrap","webpack://rts-game/webpack/runtime/compat get default export","webpack://rts-game/webpack/runtime/define property getters","webpack://rts-game/webpack/runtime/ensure chunk","webpack://rts-game/webpack/runtime/get javascript chunk filename","webpack://rts-game/webpack/runtime/global","webpack://rts-game/webpack/runtime/hasOwnProperty shorthand","webpack://rts-game/webpack/runtime/make namespace object","webpack://rts-game/webpack/runtime/publicPath","webpack://rts-game/webpack/runtime/jsonp chunk loading","webpack://rts-game/webpack/runtime/nonce","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/environment-browser/browserExt.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/environment-webworker/webworkerExt.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/browser/isWebGLSupported.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/browser/isWebGPUSupported.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/rendering/renderers/autoDetectRenderer.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/app/Application.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/BitmapFont.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontTextParser.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLParser.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/text-bitmap/asset/loadBitmapFont.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/BackgroundLoader.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/cache/parsers/cacheTextureArray.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/utils/testImageFormat.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/parsers/detectAvif.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/parsers/detectDefaults.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/utils/testVideoFormat.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/parsers/detectMp4.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/parsers/detectOgv.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/parsers/detectWebm.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/detections/parsers/detectWebp.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/Loader.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/utils/checkDataUrl.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/utils/checkExtension.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/loadJson.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/loadTxt.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/loadWebFont.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/utils/network/getResolutionOfUrl.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/textures/utils/createTexture.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/textures/loadSVG.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/_virtual/checkImageBitmap.worker.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/_virtual/loadImageBitmap.worker.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/workers/WorkerManager.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/textures/loadTextures.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/loader/parsers/textures/loadVideoTextures.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/resolver/parsers/resolveTextureUrl.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/resolver/parsers/resolveJsonUrl.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/assets/Assets.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/scene/sprite-animated/AnimatedSprite.mjs","webpack://rts-game/./node_modules/.pnpm/pixi.js@8.13.2/node_modules/pixi.js/lib/index.mjs","webpack://rts-game/./app/styles.css?5553","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/instance.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/filters/Filter.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/webaudio/WebAudioUtils.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/filters/EqualizerFilter.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioContext.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioInstance.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/htmlaudio/HTMLAudioMedia.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/SoundSprite.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/utils/supported.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/webaudio/WebAudioInstance.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/Filterable.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/webaudio/WebAudioNodes.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/webaudio/WebAudioMedia.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/Sound.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/webaudio/WebAudioContext.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/soundAsset.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/index.mjs","webpack://rts-game/./node_modules/.pnpm/@pixi+sound@6.0.1_pixi.js@8.13.2/node_modules/@pixi/sound/lib/SoundLibrary.mjs","webpack://rts-game/./app/constants/index.js","webpack://rts-game/./node_modules/.pnpm/pixi-filters@6.1.4_pixi.js@8.13.2/node_modules/pixi-filters/lib/multi-color-replace/MultiColorReplaceFilter.mjs","webpack://rts-game/./node_modules/.pnpm/pixi-filters@6.1.4_pixi.js@8.13.2/node_modules/pixi-filters/lib/defaults/default2.mjs","webpack://rts-game/./node_modules/.pnpm/pixi-filters@6.1.4_pixi.js@8.13.2/node_modules/pixi-filters/lib/multi-color-replace/multi-color-replace2.mjs","webpack://rts-game/./node_modules/.pnpm/pixi-filters@6.1.4_pixi.js@8.13.2/node_modules/pixi-filters/lib/defaults/default.mjs","webpack://rts-game/./node_modules/.pnpm/pixi-filters@6.1.4_pixi.js@8.13.2/node_modules/pixi-filters/lib/multi-color-replace/multi-color-replace.mjs","webpack://rts-game/./app/lib/graphics.js","webpack://rts-game/./app/lib/accounting.js","webpack://rts-game/./app/lib/maths.js","webpack://rts-game/./app/lib/grid.js","webpack://rts-game/./app/lib/extra.js","webpack://rts-game/./app/classes/resource.js","webpack://rts-game/./app/classes/projectile.js","webpack://rts-game/./app/classes/building.js","webpack://rts-game/./app/classes/unit.js","webpack://rts-game/./app/classes/players/player.js","webpack://rts-game/./app/classes/players/ai.js","webpack://rts-game/./app/classes/animal.js","webpack://rts-game/./app/classes/players/gaia.js","webpack://rts-game/./app/classes/players/human.js","webpack://rts-game/./app/classes/cell.js","webpack://rts-game/./app/classes/map.js","webpack://rts-game/./app/classes/menu.js","webpack://rts-game/./app/classes/controls.js","webpack://rts-game/./app/screens/Game.js","webpack://rts-game/./app/screens/Loader.js","webpack://rts-game/./app/entry.js"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"rts-game:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = DOMAdapter.get().createCanvas(1, 1);\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst repetitionMap = {\n  repeat: {\n    addressModeU: \"repeat\",\n    addressModeV: \"repeat\"\n  },\n  \"repeat-x\": {\n    addressModeU: \"repeat\",\n    addressModeV: \"clamp-to-edge\"\n  },\n  \"repeat-y\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"repeat\"\n  },\n  \"no-repeat\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"clamp-to-edge\"\n  }\n};\nclass FillPattern {\n  constructor(texture, repetition) {\n    /**\n     * unique id for this fill pattern\n     * @internal\n     */\n    this.uid = uid(\"fillPattern\");\n    /**\n     * Internal tick counter to track changes in the pattern.\n     * This is used to invalidate the pattern when the texture or transform changes.\n     * @internal\n     */\n    this._tick = 0;\n    /** The transform matrix applied to the pattern */\n    this.transform = new Matrix();\n    this.texture = texture;\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    if (repetition) {\n      texture.source.style.addressModeU = repetitionMap[repetition].addressModeU;\n      texture.source.style.addressModeV = repetitionMap[repetition].addressModeV;\n    }\n  }\n  /**\n   * Sets the transform for the pattern\n   * @param transform - The transform matrix to apply to the pattern.\n   * If not provided, the pattern will use the default transform.\n   */\n  setTransform(transform) {\n    const texture = this.texture;\n    this.transform.copyFrom(transform);\n    this.transform.invert();\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    this._tick++;\n  }\n  /** Internal texture used to render the gradient */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this._texture === value)\n      return;\n    this._texture = value;\n    this._tick++;\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `fill-pattern-${this.uid}-${this._tick}`;\n  }\n  /** Destroys the fill pattern, releasing resources. This will also destroy the internal texture. */\n  destroy() {\n    this.texture.destroy(true);\n    this.texture = null;\n  }\n}\n\nexport { FillPattern };\n//# sourceMappingURL=FillPattern.mjs.map\n","import { lru } from 'tiny-lru';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\n\n\"use strict\";\nconst contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: true\n};\nconst _CanvasTextMetrics = class _CanvasTextMetrics {\n  /**\n   * Checking that we can use modern canvas 2D API.\n   *\n   * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n   * @see TextMetrics.experimentalLetterSpacing\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n   * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n   */\n  static get experimentalLetterSpacingSupported() {\n    let result = _CanvasTextMetrics._experimentalLetterSpacingSupported;\n    if (result === void 0) {\n      const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n      result = _CanvasTextMetrics._experimentalLetterSpacingSupported = \"letterSpacing\" in proto || \"textLetterSpacing\" in proto;\n    }\n    return result;\n  }\n  /**\n   * @param text - the text that was measured\n   * @param style - the style that was measured\n   * @param width - the measured width of the text\n   * @param height - the measured height of the text\n   * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n   * @param lineWidths - an array of the line widths for each line matched to `lines`\n   * @param lineHeight - the measured line height for this style\n   * @param maxLineWidth - the maximum line width for all measured lines\n   * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n   */\n  constructor(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines;\n    this.lineWidths = lineWidths;\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n  }\n  /**\n   * Measures the supplied string of text and returns a Rectangle.\n   * @param text - The text to measure.\n   * @param style - The text style to use for measuring\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @param wordWrap\n   * @returns Measured width and height of the text.\n   */\n  static measureText(text = \" \", style, canvas = _CanvasTextMetrics._canvas, wordWrap = style.wordWrap) {\n    const textKey = `${text}-${style.styleKey}-wordWrap-${wordWrap}`;\n    if (_CanvasTextMetrics._measurementCache.has(textKey)) {\n      return _CanvasTextMetrics._measurementCache.get(textKey);\n    }\n    const font = fontStringFromTextStyle(style);\n    const fontProperties = _CanvasTextMetrics.measureFont(font);\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n    const context = _CanvasTextMetrics.__context;\n    context.font = font;\n    const outputText = wordWrap ? _CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = _CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n    const strokeWidth = style._stroke?.width || 0;\n    let width = maxLineWidth + strokeWidth;\n    if (style.dropShadow) {\n      width += style.dropShadow.distance;\n    }\n    const lineHeight = style.lineHeight || fontProperties.fontSize;\n    let height = Math.max(lineHeight, fontProperties.fontSize + strokeWidth) + (lines.length - 1) * (lineHeight + style.leading);\n    if (style.dropShadow) {\n      height += style.dropShadow.distance;\n    }\n    const measurements = new _CanvasTextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n    _CanvasTextMetrics._measurementCache.set(textKey, measurements);\n    return measurements;\n  }\n  static _measureText(text, letterSpacing, context) {\n    let useExperimentalLetterSpacing = false;\n    if (_CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (_CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    const metrics = context.measureText(text);\n    let metricWidth = metrics.width;\n    const actualBoundingBoxLeft = -metrics.actualBoundingBoxLeft;\n    const actualBoundingBoxRight = metrics.actualBoundingBoxRight;\n    let boundsWidth = actualBoundingBoxRight - actualBoundingBoxLeft;\n    if (metricWidth > 0) {\n      if (useExperimentalLetterSpacing) {\n        metricWidth -= letterSpacing;\n        boundsWidth -= letterSpacing;\n      } else {\n        const val = (_CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n        metricWidth += val;\n        boundsWidth += val;\n      }\n    }\n    return Math.max(metricWidth, boundsWidth);\n  }\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   * @param text - String to apply word wrapping to\n   * @param style - the style to use when wrapping\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @returns New string with new lines applied where required\n   */\n  static _wordWrap(text, style, canvas = _CanvasTextMetrics._canvas) {\n    const context = canvas.getContext(\"2d\", contextSettings);\n    let width = 0;\n    let line = \"\";\n    let lines = \"\";\n    const cache = /* @__PURE__ */ Object.create(null);\n    const { letterSpacing, whiteSpace } = style;\n    const collapseSpaces = _CanvasTextMetrics._collapseSpaces(whiteSpace);\n    const collapseNewlines = _CanvasTextMetrics._collapseNewlines(whiteSpace);\n    let canPrependSpaces = !collapseSpaces;\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n    const tokens = _CanvasTextMetrics._tokenize(text);\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n      if (_CanvasTextMetrics._isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += _CanvasTextMetrics._addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = \"\";\n          width = 0;\n          continue;\n        }\n        token = \" \";\n      }\n      if (collapseSpaces) {\n        const currIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n      const tokenWidth = _CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n      if (tokenWidth > wordWrapWidth) {\n        if (line !== \"\") {\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (_CanvasTextMetrics.canBreakWords(token, style.breakWords)) {\n          const characters = _CanvasTextMetrics.wordWrapSplit(token);\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n            let lastChar = char;\n            let k = 1;\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              if (!_CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                char += nextChar;\n              } else {\n                break;\n              }\n              lastChar = nextChar;\n              k++;\n            }\n            j += k - 1;\n            const characterWidth = _CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n            if (characterWidth + width > wordWrapWidth) {\n              lines += _CanvasTextMetrics._addLine(line);\n              canPrependSpaces = false;\n              line = \"\";\n              width = 0;\n            }\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          if (line.length > 0) {\n            lines += _CanvasTextMetrics._addLine(line);\n            line = \"\";\n            width = 0;\n          }\n          const isLastToken = i === tokens.length - 1;\n          lines += _CanvasTextMetrics._addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = \"\";\n          width = 0;\n        }\n      } else {\n        if (tokenWidth + width > wordWrapWidth) {\n          canPrependSpaces = false;\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (line.length > 0 || !_CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          line += token;\n          width += tokenWidth;\n        }\n      }\n    }\n    lines += _CanvasTextMetrics._addLine(line, false);\n    return lines;\n  }\n  /**\n   * Convenience function for logging each line added during the wordWrap method.\n   * @param line    - The line of text to add\n   * @param newLine - Add new line character to end\n   * @returns A formatted line\n   */\n  static _addLine(line, newLine = true) {\n    line = _CanvasTextMetrics._trimRight(line);\n    line = newLine ? `${line}\n` : line;\n    return line;\n  }\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   * @param key            - The key\n   * @param letterSpacing  - The letter spacing\n   * @param cache          - The cache\n   * @param context        - The canvas context\n   * @returns The from cache.\n   */\n  static _getFromCache(key, letterSpacing, cache, context) {\n    let width = cache[key];\n    if (typeof width !== \"number\") {\n      width = _CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n      cache[key] = width;\n    }\n    return width;\n  }\n  /**\n   * Determines whether we should collapse breaking spaces.\n   * @param whiteSpace - The TextStyle property whiteSpace\n   * @returns Should collapse\n   */\n  static _collapseSpaces(whiteSpace) {\n    return whiteSpace === \"normal\" || whiteSpace === \"pre-line\";\n  }\n  /**\n   * Determines whether we should collapse newLine chars.\n   * @param whiteSpace - The white space\n   * @returns should collapse\n   */\n  static _collapseNewlines(whiteSpace) {\n    return whiteSpace === \"normal\";\n  }\n  /**\n   * Trims breaking whitespaces from string.\n   * @param text - The text\n   * @returns Trimmed string\n   */\n  static _trimRight(text) {\n    if (typeof text !== \"string\") {\n      return \"\";\n    }\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n      if (!_CanvasTextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n      text = text.slice(0, -1);\n    }\n    return text;\n  }\n  /**\n   * Determines if char is a newline.\n   * @param char - The character\n   * @returns True if newline, False otherwise.\n   */\n  static _isNewline(char) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n  }\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * It allows one to determine whether char should be a breaking whitespace\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param char - The character\n   * @param [_nextChar] - The next character\n   * @returns True if whitespace, False otherwise.\n   */\n  static isBreakingSpace(char, _nextChar) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n  }\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   * @param text - The text\n   * @returns A tokenized array\n   */\n  static _tokenize(text) {\n    const tokens = [];\n    let token = \"\";\n    if (typeof text !== \"string\") {\n      return tokens;\n    }\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const nextChar = text[i + 1];\n      if (_CanvasTextMetrics.isBreakingSpace(char, nextChar) || _CanvasTextMetrics._isNewline(char)) {\n        if (token !== \"\") {\n          tokens.push(token);\n          token = \"\";\n        }\n        if (char === \"\\r\" && nextChar === \"\\n\") {\n          tokens.push(\"\\r\\n\");\n          i++;\n        } else {\n          tokens.push(char);\n        }\n        continue;\n      }\n      token += char;\n    }\n    if (token !== \"\") {\n      tokens.push(token);\n    }\n    return tokens;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   * @param _token - The token\n   * @param breakWords - The style attr break words\n   * @returns Whether to break word or not\n   */\n  static canBreakWords(_token, breakWords) {\n    return breakWords;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to determine whether a pair of characters\n   * should be broken by newlines\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param _char - The character\n   * @param _nextChar - The next character\n   * @param _token - The token/word the characters are from\n   * @param _index - The index in the token of the char\n   * @param _breakWords - The style attr break words\n   * @returns whether to break word or not\n   */\n  static canBreakChars(_char, _nextChar, _token, _index, _breakWords) {\n    return true;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It is called when a token (usually a word) has to be split into separate pieces\n   * in order to determine the point to break a word.\n   * It must return an array of characters.\n   * @param token - The token to split\n   * @returns The characters of the token\n   * @see CanvasTextMetrics.graphemeSegmenter\n   */\n  static wordWrapSplit(token) {\n    return _CanvasTextMetrics.graphemeSegmenter(token);\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * @param font - String representing the style of the font\n   * @returns Font properties object\n   */\n  static measureFont(font) {\n    if (_CanvasTextMetrics._fonts[font]) {\n      return _CanvasTextMetrics._fonts[font];\n    }\n    const context = _CanvasTextMetrics._context;\n    context.font = font;\n    const metrics = context.measureText(_CanvasTextMetrics.METRICS_STRING + _CanvasTextMetrics.BASELINE_SYMBOL);\n    const properties = {\n      ascent: metrics.actualBoundingBoxAscent,\n      descent: metrics.actualBoundingBoxDescent,\n      fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n    };\n    _CanvasTextMetrics._fonts[font] = properties;\n    return properties;\n  }\n  /**\n   * Clear font metrics in metrics cache.\n   * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n   */\n  static clearMetrics(font = \"\") {\n    if (font) {\n      delete _CanvasTextMetrics._fonts[font];\n    } else {\n      _CanvasTextMetrics._fonts = {};\n    }\n  }\n  /**\n   * Cached canvas element for measuring text\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _canvas() {\n    if (!_CanvasTextMetrics.__canvas) {\n      let canvas;\n      try {\n        const c = new OffscreenCanvas(0, 0);\n        const context = c.getContext(\"2d\", contextSettings);\n        if (context?.measureText) {\n          _CanvasTextMetrics.__canvas = c;\n          return c;\n        }\n        canvas = DOMAdapter.get().createCanvas();\n      } catch (_cx) {\n        canvas = DOMAdapter.get().createCanvas();\n      }\n      canvas.width = canvas.height = 10;\n      _CanvasTextMetrics.__canvas = canvas;\n    }\n    return _CanvasTextMetrics.__canvas;\n  }\n  /**\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _context() {\n    if (!_CanvasTextMetrics.__context) {\n      _CanvasTextMetrics.__context = _CanvasTextMetrics._canvas.getContext(\"2d\", contextSettings);\n    }\n    return _CanvasTextMetrics.__context;\n  }\n};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n */\n_CanvasTextMetrics.METRICS_STRING = \"|\\xC9q\\xC5\";\n/** Baseline symbol for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_SYMBOL = \"M\";\n/** Baseline multiplier for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/** Height multiplier for setting height of canvas to calculate font metrics. */\n_CanvasTextMetrics.HEIGHT_MULTIPLIER = 2;\n/**\n * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n */\n_CanvasTextMetrics.graphemeSegmenter = (() => {\n  if (typeof Intl?.Segmenter === \"function\") {\n    const segmenter = new Intl.Segmenter();\n    return (s) => {\n      const segments = segmenter.segment(s);\n      const result = [];\n      let i = 0;\n      for (const segment of segments) {\n        result[i++] = segment.segment;\n      }\n      return result;\n    };\n  }\n  return (s) => [...s];\n})();\n/**\n * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n * lead to more accurate letter-spacing results because it does not try to manually draw\n * each character. However, this Chrome API is experimental and may not serve all cases yet.\n * @see TextMetrics.experimentalLetterSpacingSupported\n */\n_CanvasTextMetrics.experimentalLetterSpacing = false;\n/** Cache of {@link TextMetrics.FontMetrics} objects. */\n_CanvasTextMetrics._fonts = {};\n/** Cache of new line chars. */\n_CanvasTextMetrics._newlines = [\n  10,\n  // line feed\n  13\n  // carriage return\n];\n/** Cache of breaking spaces. */\n_CanvasTextMetrics._breakingSpaces = [\n  9,\n  // character tabulation\n  32,\n  // space\n  8192,\n  // en quad\n  8193,\n  // em quad\n  8194,\n  // en space\n  8195,\n  // em space\n  8196,\n  // three-per-em space\n  8197,\n  // four-per-em space\n  8198,\n  // six-per-em space\n  8200,\n  // punctuation space\n  8201,\n  // thin space\n  8202,\n  // hair space\n  8287,\n  // medium mathematical space\n  12288\n  // ideographic space\n];\n/** Cache for measured text metrics */\n_CanvasTextMetrics._measurementCache = lru(1e3);\nlet CanvasTextMetrics = _CanvasTextMetrics;\n\nexport { CanvasTextMetrics };\n//# sourceMappingURL=CanvasTextMetrics.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempMat = new Matrix();\nclass TextureMatrix {\n  /**\n   * @param texture - observed texture\n   * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n   */\n  constructor(texture, clampMargin) {\n    this.mapCoord = new Matrix();\n    this.uClampFrame = new Float32Array(4);\n    this.uClampOffset = new Float32Array(2);\n    this._textureID = -1;\n    this._updateID = 0;\n    this.clampOffset = 0;\n    if (typeof clampMargin === \"undefined\") {\n      this.clampMargin = texture.width < 10 ? 0 : 0.5;\n    } else {\n      this.clampMargin = clampMargin;\n    }\n    this.isSimple = false;\n    this.texture = texture;\n  }\n  /** Texture property. */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this.texture === value)\n      return;\n    this._texture?.removeListener(\"update\", this.update, this);\n    this._texture = value;\n    this._texture.addListener(\"update\", this.update, this);\n    this.update();\n  }\n  /**\n   * Multiplies uvs array to transform\n   * @param uvs - mesh uvs\n   * @param [out=uvs] - output\n   * @returns - output\n   */\n  multiplyUvs(uvs, out) {\n    if (out === void 0) {\n      out = uvs;\n    }\n    const mat = this.mapCoord;\n    for (let i = 0; i < uvs.length; i += 2) {\n      const x = uvs[i];\n      const y = uvs[i + 1];\n      out[i] = x * mat.a + y * mat.c + mat.tx;\n      out[i + 1] = x * mat.b + y * mat.d + mat.ty;\n    }\n    return out;\n  }\n  /**\n   * Updates matrices if texture was changed\n   * @returns - whether or not it was updated\n   */\n  update() {\n    const tex = this._texture;\n    this._updateID++;\n    const uvs = tex.uvs;\n    this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n    const orig = tex.orig;\n    const trim = tex.trim;\n    if (trim) {\n      tempMat.set(\n        orig.width / trim.width,\n        0,\n        0,\n        orig.height / trim.height,\n        -trim.x / trim.width,\n        -trim.y / trim.height\n      );\n      this.mapCoord.append(tempMat);\n    }\n    const texBase = tex.source;\n    const frame = this.uClampFrame;\n    const margin = this.clampMargin / texBase._resolution;\n    const offset = this.clampOffset / texBase._resolution;\n    frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n    frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n    frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n    frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n    this.uClampOffset[0] = this.clampOffset / texBase.pixelWidth;\n    this.uClampOffset[1] = this.clampOffset / texBase.pixelHeight;\n    this.isSimple = tex.frame.width === texBase.width && tex.frame.height === texBase.height && tex.rotate === 0;\n    return true;\n  }\n}\n\nexport { TextureMatrix };\n//# sourceMappingURL=TextureMatrix.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\n\n\"use strict\";\nclass RenderGroup {\n  constructor() {\n    this.renderPipeId = \"renderGroup\";\n    this.root = null;\n    this.canBundle = false;\n    this.renderGroupParent = null;\n    this.renderGroupChildren = [];\n    this.worldTransform = new Matrix();\n    this.worldColorAlpha = 4294967295;\n    this.worldColor = 16777215;\n    this.worldAlpha = 1;\n    // these updates are transform changes..\n    this.childrenToUpdate = /* @__PURE__ */ Object.create(null);\n    this.updateTick = 0;\n    this.gcTick = 0;\n    // these update are renderable changes..\n    this.childrenRenderablesToUpdate = { list: [], index: 0 };\n    // other\n    this.structureDidChange = true;\n    this.instructionSet = new InstructionSet();\n    this._onRenderContainers = [];\n    /**\n     * Indicates if the cached texture needs to be updated.\n     * @default true\n     */\n    this.textureNeedsUpdate = true;\n    /**\n     * Indicates if the container should be cached as a texture.\n     * @default false\n     */\n    this.isCachedAsTexture = false;\n    this._matrixDirty = 7;\n  }\n  init(root) {\n    this.root = root;\n    if (root._onRender)\n      this.addOnRender(root);\n    root.didChange = true;\n    const children = root.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      child._updateFlags = 15;\n      this.addChild(child);\n    }\n  }\n  enableCacheAsTexture(options = {}) {\n    this.textureOptions = options;\n    this.isCachedAsTexture = true;\n    this.textureNeedsUpdate = true;\n  }\n  disableCacheAsTexture() {\n    this.isCachedAsTexture = false;\n    if (this.texture) {\n      TexturePool.returnTexture(this.texture, true);\n      this.texture = null;\n    }\n  }\n  updateCacheTexture() {\n    this.textureNeedsUpdate = true;\n    const cachedParent = this._parentCacheAsTextureRenderGroup;\n    if (cachedParent && !cachedParent.textureNeedsUpdate) {\n      cachedParent.updateCacheTexture();\n    }\n  }\n  reset() {\n    this.renderGroupChildren.length = 0;\n    for (const i in this.childrenToUpdate) {\n      const childrenAtDepth = this.childrenToUpdate[i];\n      childrenAtDepth.list.fill(null);\n      childrenAtDepth.index = 0;\n    }\n    this.childrenRenderablesToUpdate.index = 0;\n    this.childrenRenderablesToUpdate.list.fill(null);\n    this.root = null;\n    this.updateTick = 0;\n    this.structureDidChange = true;\n    this._onRenderContainers.length = 0;\n    this.renderGroupParent = null;\n    this.disableCacheAsTexture();\n  }\n  get localTransform() {\n    return this.root.localTransform;\n  }\n  addRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.renderGroupParent) {\n      renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n    }\n    renderGroupChild.renderGroupParent = this;\n    this.renderGroupChildren.push(renderGroupChild);\n  }\n  _removeRenderGroupChild(renderGroupChild) {\n    const index = this.renderGroupChildren.indexOf(renderGroupChild);\n    if (index > -1) {\n      this.renderGroupChildren.splice(index, 1);\n    }\n    renderGroupChild.renderGroupParent = null;\n  }\n  addChild(child) {\n    this.structureDidChange = true;\n    child.parentRenderGroup = this;\n    child.updateTick = -1;\n    if (child.parent === this.root) {\n      child.relativeRenderGroupDepth = 1;\n    } else {\n      child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n    }\n    child.didChange = true;\n    this.onChildUpdate(child);\n    if (child.renderGroup) {\n      this.addRenderGroupChild(child.renderGroup);\n      return;\n    }\n    if (child._onRender)\n      this.addOnRender(child);\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  removeChild(child) {\n    this.structureDidChange = true;\n    if (child._onRender) {\n      if (!child.renderGroup) {\n        this.removeOnRender(child);\n      }\n    }\n    child.parentRenderGroup = null;\n    if (child.renderGroup) {\n      this._removeRenderGroupChild(child.renderGroup);\n      return;\n    }\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  removeChildren(children) {\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  onChildUpdate(child) {\n    let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n        index: 0,\n        list: []\n      };\n    }\n    childrenToUpdate.list[childrenToUpdate.index++] = child;\n  }\n  updateRenderable(renderable) {\n    if (renderable.globalDisplayStatus < 7)\n      return;\n    this.instructionSet.renderPipes[renderable.renderPipeId].updateRenderable(renderable);\n    renderable.didViewUpdate = false;\n  }\n  onChildViewUpdate(child) {\n    this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n  }\n  get isRenderable() {\n    return this.root.localDisplayStatus === 7 && this.worldAlpha > 0;\n  }\n  /**\n   * adding a container to the onRender list will make sure the user function\n   * passed in to the user defined 'onRender` callBack\n   * @param container - the container to add to the onRender list\n   */\n  addOnRender(container) {\n    this._onRenderContainers.push(container);\n  }\n  removeOnRender(container) {\n    this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n  }\n  runOnRender(renderer) {\n    for (let i = 0; i < this._onRenderContainers.length; i++) {\n      this._onRenderContainers[i]._onRender(renderer);\n    }\n  }\n  destroy() {\n    this.disableCacheAsTexture();\n    this.renderGroupParent = null;\n    this.root = null;\n    this.childrenRenderablesToUpdate = null;\n    this.childrenToUpdate = null;\n    this.renderGroupChildren = null;\n    this._onRenderContainers = null;\n    this.instructionSet = null;\n  }\n  getChildren(out = []) {\n    const children = this.root.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  _getChildren(container, out = []) {\n    out.push(container);\n    if (container.renderGroup)\n      return out;\n    const children = container.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  invalidateMatrices() {\n    this._matrixDirty = 7;\n  }\n  /**\n   * Returns the inverse of the world transform matrix.\n   * @returns {Matrix} The inverse of the world transform matrix.\n   */\n  get inverseWorldTransform() {\n    if ((this._matrixDirty & 1) === 0)\n      return this._inverseWorldTransform;\n    this._matrixDirty &= ~1;\n    this._inverseWorldTransform || (this._inverseWorldTransform = new Matrix());\n    return this._inverseWorldTransform.copyFrom(this.worldTransform).invert();\n  }\n  /**\n   * Returns the inverse of the texture offset transform matrix.\n   * @returns {Matrix} The inverse of the texture offset transform matrix.\n   */\n  get textureOffsetInverseTransform() {\n    if ((this._matrixDirty & 2) === 0)\n      return this._textureOffsetInverseTransform;\n    this._matrixDirty &= ~2;\n    this._textureOffsetInverseTransform || (this._textureOffsetInverseTransform = new Matrix());\n    return this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(\n      -this._textureBounds.x,\n      -this._textureBounds.y\n    );\n  }\n  /**\n   * Returns the inverse of the parent texture transform matrix.\n   * This is used to properly transform coordinates when rendering into cached textures.\n   * @returns {Matrix} The inverse of the parent texture transform matrix.\n   */\n  get inverseParentTextureTransform() {\n    if ((this._matrixDirty & 4) === 0)\n      return this._inverseParentTextureTransform;\n    this._matrixDirty &= ~4;\n    const parentCacheAsTexture = this._parentCacheAsTextureRenderGroup;\n    if (parentCacheAsTexture) {\n      this._inverseParentTextureTransform || (this._inverseParentTextureTransform = new Matrix());\n      return this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(parentCacheAsTexture.inverseWorldTransform).translate(\n        -parentCacheAsTexture._textureBounds.x,\n        -parentCacheAsTexture._textureBounds.y\n      );\n    }\n    return this.worldTransform;\n  }\n  /**\n   * Returns a matrix that transforms coordinates to the correct coordinate space of the texture being rendered to.\n   * This is the texture offset inverse transform of the closest parent RenderGroup that is cached as a texture.\n   * @returns {Matrix | null} The transform matrix for the cached texture coordinate space,\n   * or null if no parent is cached as texture.\n   */\n  get cacheToLocalTransform() {\n    if (this.isCachedAsTexture) {\n      return this.textureOffsetInverseTransform;\n    }\n    if (!this._parentCacheAsTextureRenderGroup)\n      return null;\n    return this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform;\n  }\n}\n\nexport { RenderGroup };\n//# sourceMappingURL=RenderGroup.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { Bounds } from '../Bounds.mjs';\n\n\"use strict\";\nconst matrixPool = BigPool.getPool(Matrix);\nconst boundsPool = BigPool.getPool(Bounds);\n\nexport { boundsPool, matrixPool };\n//# sourceMappingURL=matrixAndBoundsPool.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass CanvasSource extends TextureSource {\n  constructor(options) {\n    if (!options.resource) {\n      options.resource = DOMAdapter.get().createCanvas();\n    }\n    if (!options.width) {\n      options.width = options.resource.width;\n      if (!options.autoDensity) {\n        options.width /= options.resolution;\n      }\n    }\n    if (!options.height) {\n      options.height = options.resource.height;\n      if (!options.autoDensity) {\n        options.height /= options.resolution;\n      }\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoDensity = options.autoDensity;\n    this.resizeCanvas();\n    this.transparent = !!options.transparent;\n  }\n  resizeCanvas() {\n    if (this.autoDensity && \"style\" in this.resource) {\n      this.resource.style.width = `${this.width}px`;\n      this.resource.style.height = `${this.height}px`;\n    }\n    if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight) {\n      this.resource.width = this.pixelWidth;\n      this.resource.height = this.pixelHeight;\n    }\n  }\n  resize(width = this.width, height = this.height, resolution = this._resolution) {\n    const didResize = super.resize(width, height, resolution);\n    if (didResize) {\n      this.resizeCanvas();\n    }\n    return didResize;\n  }\n  static test(resource) {\n    return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement || globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas;\n  }\n  /**\n   * Returns the 2D rendering context for the canvas.\n   * Caches the context after creating it.\n   * @returns The 2D rendering context of the canvas.\n   */\n  get context2D() {\n    return this._context2D || (this._context2D = this.resource.getContext(\"2d\"));\n  }\n}\nCanvasSource.extension = ExtensionType.TextureSource;\n\nexport { CanvasSource };\n//# sourceMappingURL=CanvasSource.mjs.map\n","\"use strict\";\nconst genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n];\nfunction fontStringFromTextStyle(style) {\n  const fontSizeString = typeof style.fontSize === \"number\" ? `${style.fontSize}px` : style.fontSize;\n  let fontFamilies = style.fontFamily;\n  if (!Array.isArray(style.fontFamily)) {\n    fontFamilies = style.fontFamily.split(\",\");\n  }\n  for (let i = fontFamilies.length - 1; i >= 0; i--) {\n    let fontFamily = fontFamilies[i].trim();\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontFamily) && !genericFontFamilies.includes(fontFamily)) {\n      fontFamily = `\"${fontFamily}\"`;\n    }\n    fontFamilies[i] = fontFamily;\n  }\n  return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${fontFamilies.join(\",\")}`;\n}\n\nexport { fontStringFromTextStyle };\n//# sourceMappingURL=fontStringFromTextStyle.mjs.map\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","import { Rectangle } from '../maths/shapes/Rectangle.mjs';\nimport { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst _Spritesheet = class _Spritesheet {\n  constructor(optionsOrTexture, arg1) {\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    this.linkedSheets = [];\n    let options = optionsOrTexture;\n    if (optionsOrTexture?.source instanceof TextureSource) {\n      options = {\n        texture: optionsOrTexture,\n        data: arg1\n      };\n    }\n    const { texture, data, cachePrefix = \"\" } = options;\n    this.cachePrefix = cachePrefix;\n    this._texture = texture instanceof Texture ? texture : null;\n    this.textureSource = texture.source;\n    this.textures = {};\n    this.animations = {};\n    this.data = data;\n    const metaResolution = parseFloat(data.meta.scale);\n    if (metaResolution) {\n      this.resolution = metaResolution;\n      texture.source.resolution = this.resolution;\n    } else {\n      this.resolution = texture.source._resolution;\n    }\n    this._frames = this.data.frames;\n    this._frameKeys = Object.keys(this._frames);\n    this._batchIndex = 0;\n    this._callback = null;\n  }\n  /**\n   * Parser spritesheet from loaded data. This is done asynchronously\n   * to prevent creating too many Texture within a single process.\n   */\n  parse() {\n    return new Promise((resolve) => {\n      this._callback = resolve;\n      this._batchIndex = 0;\n      if (this._frameKeys.length <= _Spritesheet.BATCH_SIZE) {\n        this._processFrames(0);\n        this._processAnimations();\n        this._parseComplete();\n      } else {\n        this._nextBatch();\n      }\n    });\n  }\n  /**\n   * Process a batch of frames\n   * @param initialFrameIndex - The index of frame to start.\n   */\n  _processFrames(initialFrameIndex) {\n    let frameIndex = initialFrameIndex;\n    const maxFrames = _Spritesheet.BATCH_SIZE;\n    while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n      const i = this._frameKeys[frameIndex];\n      const data = this._frames[i];\n      const rect = data.frame;\n      if (rect) {\n        let frame = null;\n        let trim = null;\n        const sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;\n        const orig = new Rectangle(\n          0,\n          0,\n          Math.floor(sourceSize.w) / this.resolution,\n          Math.floor(sourceSize.h) / this.resolution\n        );\n        if (data.rotated) {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.h) / this.resolution,\n            Math.floor(rect.w) / this.resolution\n          );\n        } else {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        if (data.trimmed !== false && data.spriteSourceSize) {\n          trim = new Rectangle(\n            Math.floor(data.spriteSourceSize.x) / this.resolution,\n            Math.floor(data.spriteSourceSize.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        this.textures[i] = new Texture({\n          source: this.textureSource,\n          frame,\n          orig,\n          trim,\n          rotate: data.rotated ? 2 : 0,\n          defaultAnchor: data.anchor,\n          defaultBorders: data.borders,\n          label: i.toString()\n        });\n      }\n      frameIndex++;\n    }\n  }\n  /** Parse animations config. */\n  _processAnimations() {\n    const animations = this.data.animations || {};\n    for (const animName in animations) {\n      this.animations[animName] = [];\n      for (let i = 0; i < animations[animName].length; i++) {\n        const frameName = animations[animName][i];\n        this.animations[animName].push(this.textures[frameName]);\n      }\n    }\n  }\n  /** The parse has completed. */\n  _parseComplete() {\n    const callback = this._callback;\n    this._callback = null;\n    this._batchIndex = 0;\n    callback.call(this, this.textures);\n  }\n  /** Begin the next batch of textures. */\n  _nextBatch() {\n    this._processFrames(this._batchIndex * _Spritesheet.BATCH_SIZE);\n    this._batchIndex++;\n    setTimeout(() => {\n      if (this._batchIndex * _Spritesheet.BATCH_SIZE < this._frameKeys.length) {\n        this._nextBatch();\n      } else {\n        this._processAnimations();\n        this._parseComplete();\n      }\n    }, 0);\n  }\n  /**\n   * Destroy Spritesheet and don't use after this.\n   * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n   */\n  destroy(destroyBase = false) {\n    for (const i in this.textures) {\n      this.textures[i].destroy();\n    }\n    this._frames = null;\n    this._frameKeys = null;\n    this.data = null;\n    this.textures = null;\n    if (destroyBase) {\n      this._texture?.destroy();\n      this.textureSource.destroy();\n    }\n    this._texture = null;\n    this.textureSource = null;\n    this.linkedSheets = [];\n  }\n};\n/**\n * The maximum number of Textures to build per process.\n * @advanced\n */\n_Spritesheet.BATCH_SIZE = 1e3;\nlet Spritesheet = _Spritesheet;\n\nexport { Spritesheet };\n//# sourceMappingURL=Spritesheet.mjs.map\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser.mjs';\nimport { Resolver } from '../assets/resolver/Resolver.mjs';\nimport { copySearchParams } from '../assets/utils/copySearchParams.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { path } from '../utils/path.mjs';\nimport { Spritesheet } from './Spritesheet.mjs';\n\n\"use strict\";\nconst validImages = [\n  \"jpg\",\n  \"png\",\n  \"jpeg\",\n  \"avif\",\n  \"webp\",\n  \"basis\",\n  \"etc2\",\n  \"bc7\",\n  \"bc6h\",\n  \"bc5\",\n  \"bc4\",\n  \"bc3\",\n  \"bc2\",\n  \"bc1\",\n  \"eac\",\n  \"astc\"\n];\nfunction getCacheableAssets(keys, asset, ignoreMultiPack) {\n  const out = {};\n  keys.forEach((key) => {\n    out[key] = asset;\n  });\n  Object.keys(asset.textures).forEach((key) => {\n    out[`${asset.cachePrefix}${key}`] = asset.textures[key];\n  });\n  if (!ignoreMultiPack) {\n    const basePath = path.dirname(keys[0]);\n    asset.linkedSheets.forEach((item, i) => {\n      const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n      Object.assign(out, out2);\n    });\n  }\n  return out;\n}\nconst spritesheetAsset = {\n  extension: ExtensionType.Asset,\n  /** Handle the caching of the related Spritesheet Textures */\n  cache: {\n    test: (asset) => asset instanceof Spritesheet,\n    getCacheableAssets: (keys, asset) => getCacheableAssets(keys, asset, false)\n  },\n  /** Resolve the resolution of the asset. */\n  resolver: {\n    extension: {\n      type: ExtensionType.ResolveParser,\n      name: \"resolveSpritesheet\"\n    },\n    test: (value) => {\n      const tempURL = value.split(\"?\")[0];\n      const split = tempURL.split(\".\");\n      const extension = split.pop();\n      const format = split.pop();\n      return extension === \"json\" && validImages.includes(format);\n    },\n    parse: (value) => {\n      const split = value.split(\".\");\n      return {\n        resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n        format: split[split.length - 2],\n        src: value\n      };\n    }\n  },\n  /**\n   * Loader plugin that parses sprite sheets!\n   * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n   * If it is, we load the spritesheets image and parse the data into Spritesheet\n   * All textures in the sprite sheet are then added to the cache\n   */\n  loader: {\n    /** used for deprecation purposes */\n    name: \"spritesheetLoader\",\n    id: \"spritesheet\",\n    extension: {\n      type: ExtensionType.LoadParser,\n      priority: LoaderParserPriority.Normal,\n      name: \"spritesheetLoader\"\n    },\n    async testParse(asset, options) {\n      return path.extname(options.src).toLowerCase() === \".json\" && !!asset.frames;\n    },\n    async parse(asset, options, loader) {\n      const {\n        texture: imageTexture,\n        // if user need to use preloaded texture\n        imageFilename,\n        // if user need to use custom filename (not from jsonFile.meta.image)\n        textureOptions,\n        // if user need to set texture options on texture\n        cachePrefix\n        // if user need to use custom cache prefix\n      } = options?.data ?? {};\n      let basePath = path.dirname(options.src);\n      if (basePath && basePath.lastIndexOf(\"/\") !== basePath.length - 1) {\n        basePath += \"/\";\n      }\n      let texture;\n      if (imageTexture instanceof Texture) {\n        texture = imageTexture;\n      } else {\n        const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n        const assets = await loader.load([{ src: imagePath, data: textureOptions }]);\n        texture = assets[imagePath];\n      }\n      const spritesheet = new Spritesheet({\n        texture: texture.source,\n        data: asset,\n        cachePrefix\n      });\n      await spritesheet.parse();\n      const multiPacks = asset?.meta?.related_multi_packs;\n      if (Array.isArray(multiPacks)) {\n        const promises = [];\n        for (const item of multiPacks) {\n          if (typeof item !== \"string\") {\n            continue;\n          }\n          let itemUrl = basePath + item;\n          if (options.data?.ignoreMultiPack) {\n            continue;\n          }\n          itemUrl = copySearchParams(itemUrl, options.src);\n          promises.push(loader.load({\n            src: itemUrl,\n            data: {\n              textureOptions,\n              ignoreMultiPack: true\n            }\n          }));\n        }\n        const res = await Promise.all(promises);\n        spritesheet.linkedSheets = res;\n        res.forEach((item) => {\n          item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => sp !== item));\n        });\n      }\n      return spritesheet;\n    },\n    async unload(spritesheet, _resolvedAsset, loader) {\n      await loader.unload(spritesheet.textureSource._sourceOrigin);\n      spritesheet.destroy(false);\n    }\n  }\n};\n\nexport { spritesheetAsset };\n//# sourceMappingURL=spritesheetAsset.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { spritesheetAsset } from './spritesheetAsset.mjs';\n\n\"use strict\";\nextensions.add(spritesheetAsset);\n//# sourceMappingURL=init.mjs.map\n","import { multiplyHexColors } from './multiplyHexColors.mjs';\n\n\"use strict\";\nconst WHITE_BGR = 16777215;\nfunction multiplyColors(localBGRColor, parentBGRColor) {\n  if (localBGRColor === WHITE_BGR) {\n    return parentBGRColor;\n  }\n  if (parentBGRColor === WHITE_BGR) {\n    return localBGRColor;\n  }\n  return multiplyHexColors(localBGRColor, parentBGRColor);\n}\n\nexport { multiplyColors };\n//# sourceMappingURL=multiplyColors.mjs.map\n","\"use strict\";\nfunction updateQuadBounds(bounds, anchor, texture) {\n  const { width, height } = texture.orig;\n  const trim = texture.trim;\n  if (trim) {\n    const sourceWidth = trim.width;\n    const sourceHeight = trim.height;\n    bounds.minX = trim.x - anchor._x * width;\n    bounds.maxX = bounds.minX + sourceWidth;\n    bounds.minY = trim.y - anchor._y * height;\n    bounds.maxY = bounds.minY + sourceHeight;\n  } else {\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n}\n\nexport { updateQuadBounds };\n//# sourceMappingURL=updateQuadBounds.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createResourceIdFromString(value) {\n  const id = idHash[value];\n  if (id === void 0) {\n    idHash[value] = uid(\"resource\");\n  }\n  return id;\n}\nconst _TextureStyle = class _TextureStyle extends EventEmitter {\n  /**\n   * @param options - options for the style\n   */\n  constructor(options = {}) {\n    super();\n    /** @internal */\n    this._resourceType = \"textureSampler\";\n    /** @internal */\n    this._touched = 0;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link TextureStyle#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link TextureStyle#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     */\n    this._maxAnisotropy = 1;\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    options = { ..._TextureStyle.defaultOptions, ...options };\n    this.addressMode = options.addressMode;\n    this.addressModeU = options.addressModeU ?? this.addressModeU;\n    this.addressModeV = options.addressModeV ?? this.addressModeV;\n    this.addressModeW = options.addressModeW ?? this.addressModeW;\n    this.scaleMode = options.scaleMode;\n    this.magFilter = options.magFilter ?? this.magFilter;\n    this.minFilter = options.minFilter ?? this.minFilter;\n    this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n    this.lodMinClamp = options.lodMinClamp;\n    this.lodMaxClamp = options.lodMaxClamp;\n    this.compare = options.compare;\n    this.maxAnisotropy = options.maxAnisotropy ?? 1;\n  }\n  set addressMode(value) {\n    this.addressModeU = value;\n    this.addressModeV = value;\n    this.addressModeW = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this.addressModeU;\n  }\n  set wrapMode(value) {\n    deprecation(v8_0_0, \"TextureStyle.wrapMode is now TextureStyle.addressMode\");\n    this.addressMode = value;\n  }\n  get wrapMode() {\n    return this.addressMode;\n  }\n  set scaleMode(value) {\n    this.magFilter = value;\n    this.minFilter = value;\n    this.mipmapFilter = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this.magFilter;\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._maxAnisotropy = Math.min(value, 16);\n    if (this._maxAnisotropy > 1) {\n      this.scaleMode = \"linear\";\n    }\n  }\n  get maxAnisotropy() {\n    return this._maxAnisotropy;\n  }\n  // TODO - move this to WebGL?\n  get _resourceId() {\n    return this._sharedResourceId || this._generateResourceId();\n  }\n  update() {\n    this.emit(\"change\", this);\n    this._sharedResourceId = null;\n  }\n  _generateResourceId() {\n    const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n    this._sharedResourceId = createResourceIdFromString(bigKey);\n    return this._resourceId;\n  }\n  /** Destroys the style */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this.removeAllListeners();\n  }\n};\n/** default options for the style */\n_TextureStyle.defaultOptions = {\n  addressMode: \"clamp-to-edge\",\n  scaleMode: \"linear\"\n};\nlet TextureStyle = _TextureStyle;\n\nexport { TextureStyle };\n//# sourceMappingURL=TextureStyle.mjs.map\n","\"use strict\";\nconst roundPixelsBit = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\nconst roundPixelsBitGl = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\n\nexport { roundPixelsBit, roundPixelsBitGl };\n//# sourceMappingURL=roundPixelsBit.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { GlProgram } from '../../gl/shader/GlProgram.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { GpuProgram } from '../../gpu/shader/GpuProgram.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from './UniformGroup.mjs';\n\n\"use strict\";\nclass Shader extends EventEmitter {\n  constructor(options) {\n    super();\n    /** A unique identifier for the shader */\n    this.uid = uid(\"shader\");\n    /**\n     * A record of the uniform groups and resources used by the shader.\n     * This is used by WebGL renderer to sync uniform data.\n     * @internal\n     */\n    this._uniformBindMap = /* @__PURE__ */ Object.create(null);\n    this._ownedBindGroups = [];\n    let {\n      gpuProgram,\n      glProgram,\n      groups,\n      resources,\n      compatibleRenderers,\n      groupMap\n    } = options;\n    this.gpuProgram = gpuProgram;\n    this.glProgram = glProgram;\n    if (compatibleRenderers === void 0) {\n      compatibleRenderers = 0;\n      if (gpuProgram)\n        compatibleRenderers |= RendererType.WEBGPU;\n      if (glProgram)\n        compatibleRenderers |= RendererType.WEBGL;\n    }\n    this.compatibleRenderers = compatibleRenderers;\n    const nameHash = {};\n    if (!resources && !groups) {\n      resources = {};\n    }\n    if (resources && groups) {\n      throw new Error(\"[Shader] Cannot have both resources and groups\");\n    } else if (!gpuProgram && groups && !groupMap) {\n      throw new Error(\"[Shader] No group map or WebGPU shader provided - consider using resources instead.\");\n    } else if (!gpuProgram && groups && groupMap) {\n      for (const i in groupMap) {\n        for (const j in groupMap[i]) {\n          const uniformName = groupMap[i][j];\n          nameHash[uniformName] = {\n            group: i,\n            binding: j,\n            name: uniformName\n          };\n        }\n      }\n    } else if (gpuProgram && groups && !groupMap) {\n      const groupData = gpuProgram.structsAndGroups.groups;\n      groupMap = {};\n      groupData.forEach((data) => {\n        groupMap[data.group] = groupMap[data.group] || {};\n        groupMap[data.group][data.binding] = data.name;\n        nameHash[data.name] = data;\n      });\n    } else if (resources) {\n      groups = {};\n      groupMap = {};\n      if (gpuProgram) {\n        const groupData = gpuProgram.structsAndGroups.groups;\n        groupData.forEach((data) => {\n          groupMap[data.group] = groupMap[data.group] || {};\n          groupMap[data.group][data.binding] = data.name;\n          nameHash[data.name] = data;\n        });\n      }\n      let bindTick = 0;\n      for (const i in resources) {\n        if (nameHash[i])\n          continue;\n        if (!groups[99]) {\n          groups[99] = new BindGroup();\n          this._ownedBindGroups.push(groups[99]);\n        }\n        nameHash[i] = { group: 99, binding: bindTick, name: i };\n        groupMap[99] = groupMap[99] || {};\n        groupMap[99][bindTick] = i;\n        bindTick++;\n      }\n      for (const i in resources) {\n        const name = i;\n        let value = resources[i];\n        if (!value.source && !value._resourceType) {\n          value = new UniformGroup(value);\n        }\n        const data = nameHash[name];\n        if (data) {\n          if (!groups[data.group]) {\n            groups[data.group] = new BindGroup();\n            this._ownedBindGroups.push(groups[data.group]);\n          }\n          groups[data.group].setResource(value, data.binding);\n        }\n      }\n    }\n    this.groups = groups;\n    this._uniformBindMap = groupMap;\n    this.resources = this._buildResourceAccessor(groups, nameHash);\n  }\n  /**\n   * Sometimes a resource group will be provided later (for example global uniforms)\n   * In such cases, this method can be used to let the shader know about the group.\n   * @param name - the name of the resource group\n   * @param groupIndex - the index of the group (should match the webGPU shader group location)\n   * @param bindIndex - the index of the bind point (should match the webGPU shader bind point)\n   */\n  addResource(name, groupIndex, bindIndex) {\n    var _a, _b;\n    (_a = this._uniformBindMap)[groupIndex] || (_a[groupIndex] = {});\n    (_b = this._uniformBindMap[groupIndex])[bindIndex] || (_b[bindIndex] = name);\n    if (!this.groups[groupIndex]) {\n      this.groups[groupIndex] = new BindGroup();\n      this._ownedBindGroups.push(this.groups[groupIndex]);\n    }\n  }\n  _buildResourceAccessor(groups, nameHash) {\n    const uniformsOut = {};\n    for (const i in nameHash) {\n      const data = nameHash[i];\n      Object.defineProperty(uniformsOut, data.name, {\n        get() {\n          return groups[data.group].getResource(data.binding);\n        },\n        set(value) {\n          groups[data.group].setResource(value, data.binding);\n        }\n      });\n    }\n    return uniformsOut;\n  }\n  /**\n   * Use to destroy the shader when its not longer needed.\n   * It will destroy the resources and remove listeners.\n   * @param destroyPrograms - if the programs should be destroyed as well.\n   * Make sure its not being used by other shaders!\n   */\n  destroy(destroyPrograms = false) {\n    this.emit(\"destroy\", this);\n    if (destroyPrograms) {\n      this.gpuProgram?.destroy();\n      this.glProgram?.destroy();\n    }\n    this.gpuProgram = null;\n    this.glProgram = null;\n    this.removeAllListeners();\n    this._uniformBindMap = null;\n    this._ownedBindGroups.forEach((bindGroup) => {\n      bindGroup.destroy();\n    });\n    this._ownedBindGroups = null;\n    this.resources = null;\n    this.groups = null;\n  }\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new Shader({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n}\n\nexport { Shader };\n//# sourceMappingURL=Shader.mjs.map\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nlet context;\nfunction getTestContext() {\n  if (!context || context?.isContextLost()) {\n    const canvas = DOMAdapter.get().createCanvas();\n    context = canvas.getContext(\"webgl\", {});\n  }\n  return context;\n}\n\nexport { getTestContext };\n//# sourceMappingURL=getTestContext.mjs.map\n","\"use strict\";\nconst UNIFORM_TYPES_VALUES = [\n  \"f32\",\n  \"i32\",\n  \"vec2<f32>\",\n  \"vec3<f32>\",\n  \"vec4<f32>\",\n  \"mat2x2<f32>\",\n  \"mat3x3<f32>\",\n  \"mat4x4<f32>\",\n  \"mat3x2<f32>\",\n  \"mat4x2<f32>\",\n  \"mat2x3<f32>\",\n  \"mat4x3<f32>\",\n  \"mat2x4<f32>\",\n  \"mat3x4<f32>\",\n  \"vec2<i32>\",\n  \"vec3<i32>\",\n  \"vec4<i32>\"\n];\nconst UNIFORM_TYPES_MAP = UNIFORM_TYPES_VALUES.reduce((acc, type) => {\n  acc[type] = true;\n  return acc;\n}, {});\n\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES };\n//# sourceMappingURL=types.mjs.map\n","\"use strict\";\nfunction getDefaultUniformValue(type, size) {\n  switch (type) {\n    case \"f32\":\n      return 0;\n    case \"vec2<f32>\":\n      return new Float32Array(2 * size);\n    case \"vec3<f32>\":\n      return new Float32Array(3 * size);\n    case \"vec4<f32>\":\n      return new Float32Array(4 * size);\n    case \"mat2x2<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3x3<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4x4<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { getDefaultUniformValue };\n//# sourceMappingURL=getDefaultUniformValue.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { createIdFromString } from '../utils/createIdFromString.mjs';\nimport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './types.mjs';\nimport { getDefaultUniformValue } from './utils/getDefaultUniformValue.mjs';\n\n\"use strict\";\nconst _UniformGroup = class _UniformGroup {\n  /**\n   * Create a new Uniform group\n   * @param uniformStructures - The structures of the uniform group\n   * @param options - The optional parameters of this uniform group\n   */\n  constructor(uniformStructures, options) {\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"uniform\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"uniformGroup\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /** used ito identify if this is a uniform group */\n    this.isUniformGroup = true;\n    /**\n     * used to flag if this Uniform groups data is different from what it has stored in its buffer / on the GPU\n     * @internal\n     */\n    this._dirtyId = 0;\n    // implementing the interface - UniformGroup are not destroyed\n    this.destroyed = false;\n    options = { ..._UniformGroup.defaultOptions, ...options };\n    this.uniformStructures = uniformStructures;\n    const uniforms = {};\n    for (const i in uniformStructures) {\n      const uniformData = uniformStructures[i];\n      uniformData.name = i;\n      uniformData.size = uniformData.size ?? 1;\n      if (!UNIFORM_TYPES_MAP[uniformData.type]) {\n        const arrayMatch = uniformData.type.match(/^array<(\\w+(?:<\\w+>)?),\\s*(\\d+)>$/);\n        if (arrayMatch) {\n          const [, innerType, size] = arrayMatch;\n          throw new Error(\n            `Uniform type ${uniformData.type} is not supported. Use type: '${innerType}', size: ${size} instead.`\n          );\n        }\n        throw new Error(`Uniform type ${uniformData.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(\", \")}`);\n      }\n      uniformData.value ?? (uniformData.value = getDefaultUniformValue(uniformData.type, uniformData.size));\n      uniforms[i] = uniformData.value;\n    }\n    this.uniforms = uniforms;\n    this._dirtyId = 1;\n    this.ubo = options.ubo;\n    this.isStatic = options.isStatic;\n    this._signature = createIdFromString(Object.keys(uniforms).map(\n      (i) => `${i}-${uniformStructures[i].type}`\n    ).join(\"-\"), \"uniform-group\");\n  }\n  /** Call this if you want the uniform groups data to be uploaded to the GPU only useful if `isStatic` is true. */\n  update() {\n    this._dirtyId++;\n  }\n};\n/** The default options used by the uniform group. */\n_UniformGroup.defaultOptions = {\n  /** if true the UniformGroup is handled as an Uniform buffer object. */\n  ubo: false,\n  /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n  isStatic: false\n};\nlet UniformGroup = _UniformGroup;\n\nexport { UniformGroup };\n//# sourceMappingURL=UniformGroup.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nconst WGSL_TO_VERTEX_TYPES = {\n  f32: \"float32\",\n  \"vec2<f32>\": \"float32x2\",\n  \"vec3<f32>\": \"float32x3\",\n  \"vec4<f32>\": \"float32x4\",\n  vec2f: \"float32x2\",\n  vec3f: \"float32x3\",\n  vec4f: \"float32x4\",\n  i32: \"sint32\",\n  \"vec2<i32>\": \"sint32x2\",\n  \"vec3<i32>\": \"sint32x3\",\n  \"vec4<i32>\": \"sint32x4\",\n  u32: \"uint32\",\n  \"vec2<u32>\": \"uint32x2\",\n  \"vec3<u32>\": \"uint32x3\",\n  \"vec4<u32>\": \"uint32x4\",\n  bool: \"uint32\",\n  \"vec2<bool>\": \"uint32x2\",\n  \"vec3<bool>\": \"uint32x3\",\n  \"vec4<bool>\": \"uint32x4\"\n};\nfunction extractAttributesFromGpuProgram({ source, entryPoint }) {\n  const results = {};\n  const mainVertStart = source.indexOf(`fn ${entryPoint}`);\n  if (mainVertStart !== -1) {\n    const arrowFunctionStart = source.indexOf(\"->\", mainVertStart);\n    if (arrowFunctionStart !== -1) {\n      const functionArgsSubstring = source.substring(mainVertStart, arrowFunctionStart);\n      const inputsRegex = /@location\\((\\d+)\\)\\s+([a-zA-Z0-9_]+)\\s*:\\s*([a-zA-Z0-9_<>]+)(?:,|\\s|$)/g;\n      let match;\n      while ((match = inputsRegex.exec(functionArgsSubstring)) !== null) {\n        const format = WGSL_TO_VERTEX_TYPES[match[3]] ?? \"float32\";\n        results[match[2]] = {\n          location: parseInt(match[1], 10),\n          format,\n          stride: getAttributeInfoFromFormat(format).stride,\n          offset: 0,\n          instance: false,\n          start: 0\n        };\n      }\n    }\n  }\n  return results;\n}\n\nexport { extractAttributesFromGpuProgram };\n//# sourceMappingURL=extractAttributesFromGpuProgram.mjs.map\n","\"use strict\";\nfunction extractStructAndGroups(wgsl) {\n  const linePattern = /(^|[^/])@(group|binding)\\(\\d+\\)[^;]+;/g;\n  const groupPattern = /@group\\((\\d+)\\)/;\n  const bindingPattern = /@binding\\((\\d+)\\)/;\n  const namePattern = /var(<[^>]+>)? (\\w+)/;\n  const typePattern = /:\\s*(\\w+)/;\n  const structPattern = /struct\\s+(\\w+)\\s*{([^}]+)}/g;\n  const structMemberPattern = /(\\w+)\\s*:\\s*([\\w\\<\\>]+)/g;\n  const structName = /struct\\s+(\\w+)/;\n  const groups = wgsl.match(linePattern)?.map((item) => ({\n    group: parseInt(item.match(groupPattern)[1], 10),\n    binding: parseInt(item.match(bindingPattern)[1], 10),\n    name: item.match(namePattern)[2],\n    isUniform: item.match(namePattern)[1] === \"<uniform>\",\n    type: item.match(typePattern)[1]\n  }));\n  if (!groups) {\n    return {\n      groups: [],\n      structs: []\n    };\n  }\n  const structs = wgsl.match(structPattern)?.map((struct) => {\n    const name = struct.match(structName)[1];\n    const members = struct.match(structMemberPattern).reduce((acc, member) => {\n      const [name2, type] = member.split(\":\");\n      acc[name2.trim()] = type.trim();\n      return acc;\n    }, {});\n    if (!members) {\n      return null;\n    }\n    return { name, members };\n  }).filter(({ name }) => groups.some((group) => group.type === name)) ?? [];\n  return {\n    groups,\n    structs\n  };\n}\n\nexport { extractStructAndGroups };\n//# sourceMappingURL=extractStructAndGroups.mjs.map\n","\"use strict\";\nvar ShaderStage = /* @__PURE__ */ ((ShaderStage2) => {\n  ShaderStage2[ShaderStage2[\"VERTEX\"] = 1] = \"VERTEX\";\n  ShaderStage2[ShaderStage2[\"FRAGMENT\"] = 2] = \"FRAGMENT\";\n  ShaderStage2[ShaderStage2[\"COMPUTE\"] = 4] = \"COMPUTE\";\n  return ShaderStage2;\n})(ShaderStage || {});\n\nexport { ShaderStage };\n//# sourceMappingURL=const.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { extractAttributesFromGpuProgram } from './utils/extractAttributesFromGpuProgram.mjs';\nimport { extractStructAndGroups } from './utils/extractStructAndGroups.mjs';\nimport { generateGpuLayoutGroups } from './utils/generateGpuLayoutGroups.mjs';\nimport { generateLayoutHash } from './utils/generateLayoutHash.mjs';\nimport { removeStructAndGroupDuplicates } from './utils/removeStructAndGroupDuplicates.mjs';\n\n\"use strict\";\nconst programCache = /* @__PURE__ */ Object.create(null);\nclass GpuProgram {\n  /**\n   * Create a new GpuProgram\n   * @param options - The options for the gpu program\n   */\n  constructor(options) {\n    /** @internal */\n    this._layoutKey = 0;\n    /** @internal */\n    this._attributeLocationsKey = 0;\n    const { fragment, vertex, layout, gpuLayout, name } = options;\n    this.name = name;\n    this.fragment = fragment;\n    this.vertex = vertex;\n    if (fragment.source === vertex.source) {\n      const structsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = structsAndGroups;\n    } else {\n      const vertexStructsAndGroups = extractStructAndGroups(vertex.source);\n      const fragmentStructsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups);\n    }\n    this.layout = layout ?? generateLayoutHash(this.structsAndGroups);\n    this.gpuLayout = gpuLayout ?? generateGpuLayoutGroups(this.structsAndGroups);\n    this.autoAssignGlobalUniforms = !!(this.layout[0]?.globalUniforms !== void 0);\n    this.autoAssignLocalUniforms = !!(this.layout[1]?.localUniforms !== void 0);\n    this._generateProgramKey();\n  }\n  // TODO maker this pure\n  _generateProgramKey() {\n    const { vertex, fragment } = this;\n    const bigKey = vertex.source + fragment.source + vertex.entryPoint + fragment.entryPoint;\n    this._layoutKey = createIdFromString(bigKey, \"program\");\n  }\n  get attributeData() {\n    this._attributeData ?? (this._attributeData = extractAttributesFromGpuProgram(this.vertex));\n    return this._attributeData;\n  }\n  /** destroys the program */\n  destroy() {\n    this.gpuLayout = null;\n    this.layout = null;\n    this.structsAndGroups = null;\n    this.fragment = null;\n    this.vertex = null;\n    programCache[this._cacheKey] = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex.source}:${options.fragment.source}:${options.fragment.entryPoint}:${options.vertex.entryPoint}`;\n    if (!programCache[key]) {\n      programCache[key] = new GpuProgram(options);\n      programCache[key]._cacheKey = key;\n    }\n    return programCache[key];\n  }\n}\n\nexport { GpuProgram };\n//# sourceMappingURL=GpuProgram.mjs.map\n","\"use strict\";\nfunction removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups) {\n  const structNameSet = /* @__PURE__ */ new Set();\n  const dupeGroupKeySet = /* @__PURE__ */ new Set();\n  const structs = [...vertexStructsAndGroups.structs, ...fragmentStructsAndGroups.structs].filter((struct) => {\n    if (structNameSet.has(struct.name)) {\n      return false;\n    }\n    structNameSet.add(struct.name);\n    return true;\n  });\n  const groups = [...vertexStructsAndGroups.groups, ...fragmentStructsAndGroups.groups].filter((group) => {\n    const key = `${group.name}-${group.binding}`;\n    if (dupeGroupKeySet.has(key)) {\n      return false;\n    }\n    dupeGroupKeySet.add(key);\n    return true;\n  });\n  return { structs, groups };\n}\n\nexport { removeStructAndGroupDuplicates };\n//# sourceMappingURL=removeStructAndGroupDuplicates.mjs.map\n","\"use strict\";\nfunction generateLayoutHash({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = {};\n    }\n    layout[group.group][group.name] = group.binding;\n  }\n  return layout;\n}\n\nexport { generateLayoutHash };\n//# sourceMappingURL=generateLayoutHash.mjs.map\n","import { ShaderStage } from '../../../shared/shader/const.mjs';\n\n\"use strict\";\nfunction generateGpuLayoutGroups({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = [];\n    }\n    if (group.isUniform) {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.VERTEX | ShaderStage.FRAGMENT,\n        buffer: {\n          type: \"uniform\"\n        }\n      });\n    } else if (group.type === \"sampler\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        sampler: {\n          type: \"filtering\"\n        }\n      });\n    } else if (group.type === \"texture_2d\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        texture: {\n          sampleType: \"float\",\n          viewDimension: \"2d\",\n          multisampled: false\n        }\n      });\n    }\n  }\n  return layout;\n}\n\nexport { generateGpuLayoutGroups };\n//# sourceMappingURL=generateGpuLayoutGroups.mjs.map\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    const renderableBounds = target.bounds;\n    if (renderableBounds && !renderableBounds.isEmpty()) {\n      bounds.matrix = worldTransform;\n      bounds.addBounds(renderableBounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nconst defaultMatrix = new Matrix();\nclass Bounds {\n  /**\n   * Creates a new Bounds object.\n   * @param minX - The minimum X coordinate of the bounds.\n   * @param minY - The minimum Y coordinate of the bounds.\n   * @param maxX - The maximum X coordinate of the bounds.\n   * @param maxY - The maximum Y coordinate of the bounds.\n   */\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /**\n     * The minimum X coordinate of the bounds.\n     * Represents the leftmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set left edge\n     * bounds.minX = 100;\n     * ```\n     * @default Infinity\n     */\n    this.minX = Infinity;\n    /**\n     * The minimum Y coordinate of the bounds.\n     * Represents the topmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set top edge\n     * bounds.minY = 100;\n     * ```\n     * @default Infinity\n     */\n    this.minY = Infinity;\n    /**\n     * The maximum X coordinate of the bounds.\n     * Represents the rightmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set right edge\n     * bounds.maxX = 200;\n     * // Get width\n     * const width = bounds.maxX - bounds.minX;\n     * ```\n     * @default -Infinity\n     */\n    this.maxX = -Infinity;\n    /**\n     * The maximum Y coordinate of the bounds.\n     * Represents the bottommost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set bottom edge\n     * bounds.maxY = 200;\n     * // Get height\n     * const height = bounds.maxY - bounds.minY;\n     * ```\n     * @default -Infinity\n     */\n    this.maxY = -Infinity;\n    /**\n     * The transformation matrix applied to this bounds object.\n     * Used when calculating bounds with transforms.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     *\n     * // Apply translation matrix\n     * bounds.matrix = new Matrix()\n     *     .translate(100, 100);\n     *\n     * // Combine transformations\n     * bounds.matrix = new Matrix()\n     *     .translate(50, 50)\n     *     .rotate(Math.PI / 4)\n     *     .scale(2, 2);\n     *\n     * // Use in bounds calculations\n     * bounds.addFrame(0, 0, 100, 100); // Uses current matrix\n     * bounds.addFrame(0, 0, 100, 100, customMatrix); // Override matrix\n     * ```\n     * @advanced\n     */\n    this.matrix = defaultMatrix;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if bounds are empty, meaning either width or height is zero or negative.\n   * Empty bounds occur when min values exceed max values on either axis.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Check if newly created bounds are empty\n   * console.log(bounds.isEmpty()); // true, default bounds are empty\n   *\n   * // Add frame and check again\n   * bounds.addFrame(0, 0, 100, 100);\n   * console.log(bounds.isEmpty()); // false, bounds now have area\n   *\n   * // Clear bounds\n   * bounds.clear();\n   * console.log(bounds.isEmpty()); // true, bounds are empty again\n   * ```\n   * @returns True if bounds are empty (have no area)\n   * @see {@link Bounds#clear} For resetting bounds\n   * @see {@link Bounds#isValid} For checking validity\n   */\n  isEmpty() {\n    return this.minX > this.maxX || this.minY > this.maxY;\n  }\n  /**\n   * The bounding rectangle representation of these bounds.\n   * Lazily creates and updates a Rectangle instance based on the current bounds.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Get rectangle representation\n   * const rect = bounds.rectangle;\n   * console.log(rect.x, rect.y, rect.width, rect.height);\n   *\n   * // Use for hit testing\n   * if (bounds.rectangle.contains(mouseX, mouseY)) {\n   *     console.log('Mouse is inside bounds!');\n   * }\n   * ```\n   * @see {@link Rectangle} For rectangle methods\n   * @see {@link Bounds.isEmpty} For bounds validation\n   */\n  get rectangle() {\n    if (!this._rectangle) {\n      this._rectangle = new Rectangle();\n    }\n    const rectangle = this._rectangle;\n    if (this.minX > this.maxX || this.minY > this.maxY) {\n      rectangle.x = 0;\n      rectangle.y = 0;\n      rectangle.width = 0;\n      rectangle.height = 0;\n    } else {\n      rectangle.copyFromBounds(this);\n    }\n    return rectangle;\n  }\n  /**\n   * Clears the bounds and resets all coordinates to their default values.\n   * Resets the transformation matrix back to identity.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.isEmpty()); // false\n   * // Clear the bounds\n   * bounds.clear();\n   * console.log(bounds.isEmpty()); // true\n   * ```\n   * @returns This bounds object for chaining\n   */\n  clear() {\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = -Infinity;\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    return this;\n  }\n  /**\n   * Sets the bounds directly using coordinate values.\n   * Provides a way to set all bounds values at once.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.set(0, 0, 100, 100);\n   * ```\n   * @param x0 - Left X coordinate of frame\n   * @param y0 - Top Y coordinate of frame\n   * @param x1 - Right X coordinate of frame\n   * @param y1 - Bottom Y coordinate of frame\n   * @see {@link Bounds#addFrame} For matrix-aware bounds setting\n   * @see {@link Bounds#clear} For resetting bounds\n   */\n  set(x0, y0, x1, y1) {\n    this.minX = x0;\n    this.minY = y0;\n    this.maxX = x1;\n    this.maxY = y1;\n  }\n  /**\n   * Adds a rectangular frame to the bounds, optionally transformed by a matrix.\n   * Updates the bounds to encompass the new frame coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.addFrame(0, 0, 100, 100);\n   *\n   * // Add transformed frame\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addFrame(0, 0, 100, 100, matrix);\n   * ```\n   * @param x0 - Left X coordinate of frame\n   * @param y0 - Top Y coordinate of frame\n   * @param x1 - Right X coordinate of frame\n   * @param y1 - Bottom Y coordinate of frame\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addRect} For adding Rectangle objects\n   * @see {@link Bounds#addBounds} For adding other Bounds\n   */\n  addFrame(x0, y0, x1, y1, matrix) {\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    let x = a * x0 + c * y0 + tx;\n    let y = b * x0 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y0 + tx;\n    y = b * x1 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x0 + c * y1 + tx;\n    y = b * x0 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y1 + tx;\n    y = b * x1 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Adds a rectangle to the bounds, optionally transformed by a matrix.\n   * Updates the bounds to encompass the given rectangle.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * // Add simple rectangle\n   * const rect = new Rectangle(0, 0, 100, 100);\n   * bounds.addRect(rect);\n   *\n   * // Add transformed rectangle\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addRect(rect, matrix);\n   * ```\n   * @param rect - The rectangle to be added\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding raw coordinates\n   * @see {@link Bounds#addBounds} For adding other bounds\n   */\n  addRect(rect, matrix) {\n    this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n  }\n  /**\n   * Adds another bounds object to this one, optionally transformed by a matrix.\n   * Expands the bounds to include the given bounds' area.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Add child bounds\n   * const childBounds = sprite.getBounds();\n   * bounds.addBounds(childBounds);\n   *\n   * // Add transformed bounds\n   * const matrix = new Matrix()\n   *     .scale(2, 2);\n   * bounds.addBounds(childBounds, matrix);\n   * ```\n   * @param bounds - The bounds to be added\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding raw coordinates\n   * @see {@link Bounds#addRect} For adding rectangles\n   */\n  addBounds(bounds, matrix) {\n    this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n  }\n  /**\n   * Adds other Bounds as a mask, creating an intersection of the two bounds.\n   * Only keeps the overlapping region between current bounds and mask bounds.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Create mask bounds\n   * const mask = new Bounds();\n   * mask.addFrame(50, 50, 150, 150);\n   * // Apply mask - results in bounds of (50,50,100,100)\n   * bounds.addBoundsMask(mask);\n   * ```\n   * @param mask - The Bounds to use as a mask\n   * @see {@link Bounds#addBounds} For union operation\n   * @see {@link Bounds#fit} For fitting to rectangle\n   */\n  addBoundsMask(mask) {\n    this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n    this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n    this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n    this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n  }\n  /**\n   * Applies a transformation matrix to the bounds, updating its coordinates.\n   * Transforms all corners of the bounds using the given matrix.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Apply translation\n   * const translateMatrix = new Matrix()\n   *     .translate(50, 50);\n   * bounds.applyMatrix(translateMatrix);\n   * ```\n   * @param matrix - The matrix to apply to the bounds\n   * @see {@link Matrix} For matrix operations\n   * @see {@link Bounds#addFrame} For adding transformed frames\n   */\n  applyMatrix(matrix) {\n    const minX = this.minX;\n    const minY = this.minY;\n    const maxX = this.maxX;\n    const maxY = this.maxY;\n    const { a, b, c, d, tx, ty } = matrix;\n    let x = a * minX + c * minY + tx;\n    let y = b * minX + d * minY + ty;\n    this.minX = x;\n    this.minY = y;\n    this.maxX = x;\n    this.maxY = y;\n    x = a * maxX + c * minY + tx;\n    y = b * maxX + d * minY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * minX + c * maxY + tx;\n    y = b * minX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * maxX + c * maxY + tx;\n    y = b * maxX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n  }\n  /**\n   * Resizes the bounds object to fit within the given rectangle.\n   * Clips the bounds if they extend beyond the rectangle's edges.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 200, 200);\n   * // Fit within viewport\n   * const viewport = new Rectangle(50, 50, 100, 100);\n   * bounds.fit(viewport);\n   * // bounds are now (50, 50, 150, 150)\n   * ```\n   * @param rect - The rectangle to fit within\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#addBoundsMask} For intersection\n   * @see {@link Bounds#pad} For expanding bounds\n   */\n  fit(rect) {\n    if (this.minX < rect.left)\n      this.minX = rect.left;\n    if (this.maxX > rect.right)\n      this.maxX = rect.right;\n    if (this.minY < rect.top)\n      this.minY = rect.top;\n    if (this.maxY > rect.bottom)\n      this.maxY = rect.bottom;\n    return this;\n  }\n  /**\n   * Resizes the bounds object to include the given bounds.\n   * Similar to fit() but works with raw coordinate values instead of a Rectangle.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 200, 200);\n   * // Fit to specific coordinates\n   * bounds.fitBounds(50, 150, 50, 150);\n   * // bounds are now (50, 50, 150, 150)\n   * ```\n   * @param left - The left value of the bounds\n   * @param right - The right value of the bounds\n   * @param top - The top value of the bounds\n   * @param bottom - The bottom value of the bounds\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#fit} For fitting to Rectangle\n   * @see {@link Bounds#addBoundsMask} For intersection\n   */\n  fitBounds(left, right, top, bottom) {\n    if (this.minX < left)\n      this.minX = left;\n    if (this.maxX > right)\n      this.maxX = right;\n    if (this.minY < top)\n      this.minY = top;\n    if (this.maxY > bottom)\n      this.maxY = bottom;\n    return this;\n  }\n  /**\n   * Pads bounds object, making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Add equal padding\n   * bounds.pad(10);\n   * // bounds are now (-10, -10, 110, 110)\n   *\n   * // Add different padding for x and y\n   * bounds.pad(20, 10);\n   * // bounds are now (-30, -20, 130, 120)\n   * ```\n   * @param paddingX - The horizontal padding amount\n   * @param paddingY - The vertical padding amount\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#fit} For constraining bounds\n   * @see {@link Bounds#scale} For uniform scaling\n   */\n  pad(paddingX, paddingY = paddingX) {\n    this.minX -= paddingX;\n    this.maxX += paddingX;\n    this.minY -= paddingY;\n    this.maxY += paddingY;\n    return this;\n  }\n  /**\n   * Ceils the bounds by rounding up max values and rounding down min values.\n   * Useful for pixel-perfect calculations and avoiding fractional pixels.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.set(10.2, 10.9, 50.1, 50.8);\n   *\n   * // Round to whole pixels\n   * bounds.ceil();\n   * // bounds are now (10, 10, 51, 51)\n   * ```\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#scale} For size adjustments\n   * @see {@link Bounds#fit} For constraining bounds\n   */\n  ceil() {\n    this.minX = Math.floor(this.minX);\n    this.minY = Math.floor(this.minY);\n    this.maxX = Math.ceil(this.maxX);\n    this.maxY = Math.ceil(this.maxY);\n    return this;\n  }\n  /**\n   * Creates a new Bounds instance with the same values.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Create a copy\n   * const copy = bounds.clone();\n   *\n   * // Original and copy are independent\n   * bounds.pad(10);\n   * console.log(copy.width === bounds.width); // false\n   * ```\n   * @returns A new Bounds instance with the same values\n   * @see {@link Bounds#copyFrom} For reusing existing bounds\n   */\n  clone() {\n    return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n  }\n  /**\n   * Scales the bounds by the given values, adjusting all edges proportionally.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Scale uniformly\n   * bounds.scale(2);\n   * // bounds are now (0, 0, 200, 200)\n   *\n   * // Scale non-uniformly\n   * bounds.scale(0.5, 2);\n   * // bounds are now (0, 0, 100, 400)\n   * ```\n   * @param x - The X value to scale by\n   * @param y - The Y value to scale by (defaults to x)\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#pad} For adding padding\n   * @see {@link Bounds#fit} For constraining size\n   */\n  scale(x, y = x) {\n    this.minX *= x;\n    this.minY *= y;\n    this.maxX *= x;\n    this.maxY *= y;\n    return this;\n  }\n  /**\n   * The x position of the bounds in local space.\n   * Setting this value will move the bounds while maintaining its width.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get x position\n   * console.log(bounds.x); // 0\n   *\n   * // Move bounds horizontally\n   * bounds.x = 50;\n   * console.log(bounds.minX, bounds.maxX); // 50, 150\n   *\n   * // Width stays the same\n   * console.log(bounds.width); // Still 100\n   * ```\n   */\n  get x() {\n    return this.minX;\n  }\n  set x(value) {\n    const width = this.maxX - this.minX;\n    this.minX = value;\n    this.maxX = value + width;\n  }\n  /**\n   * The y position of the bounds in local space.\n   * Setting this value will move the bounds while maintaining its height.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get y position\n   * console.log(bounds.y); // 0\n   *\n   * // Move bounds vertically\n   * bounds.y = 50;\n   * console.log(bounds.minY, bounds.maxY); // 50, 150\n   *\n   * // Height stays the same\n   * console.log(bounds.height); // Still 100\n   * ```\n   */\n  get y() {\n    return this.minY;\n  }\n  set y(value) {\n    const height = this.maxY - this.minY;\n    this.minY = value;\n    this.maxY = value + height;\n  }\n  /**\n   * The width value of the bounds.\n   * Represents the distance between minX and maxX coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get width\n   * console.log(bounds.width); // 100\n   * // Resize width\n   * bounds.width = 200;\n   * console.log(bounds.maxX - bounds.minX); // 200\n   * ```\n   */\n  get width() {\n    return this.maxX - this.minX;\n  }\n  set width(value) {\n    this.maxX = this.minX + value;\n  }\n  /**\n   * The height value of the bounds.\n   * Represents the distance between minY and maxY coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get height\n   * console.log(bounds.height); // 100\n   * // Resize height\n   * bounds.height = 150;\n   * console.log(bounds.maxY - bounds.minY); // 150\n   * ```\n   */\n  get height() {\n    return this.maxY - this.minY;\n  }\n  set height(value) {\n    this.maxY = this.minY + value;\n  }\n  /**\n   * The left edge coordinate of the bounds.\n   * Alias for minX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(50, 0, 150, 100);\n   * console.log(bounds.left); // 50\n   * console.log(bounds.left === bounds.minX); // true\n   * ```\n   * @readonly\n   */\n  get left() {\n    return this.minX;\n  }\n  /**\n   * The right edge coordinate of the bounds.\n   * Alias for maxX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.right); // 100\n   * console.log(bounds.right === bounds.maxX); // true\n   * ```\n   * @readonly\n   */\n  get right() {\n    return this.maxX;\n  }\n  /**\n   * The top edge coordinate of the bounds.\n   * Alias for minY.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 25, 100, 125);\n   * console.log(bounds.top); // 25\n   * console.log(bounds.top === bounds.minY); // true\n   * ```\n   * @readonly\n   */\n  get top() {\n    return this.minY;\n  }\n  /**\n   * The bottom edge coordinate of the bounds.\n   * Alias for maxY.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 200);\n   * console.log(bounds.bottom); // 200\n   * console.log(bounds.bottom === bounds.maxY); // true\n   * ```\n   * @readonly\n   */\n  get bottom() {\n    return this.maxY;\n  }\n  /**\n   * Whether the bounds has positive width and height.\n   * Checks if both dimensions are greater than zero.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Check if bounds are positive\n   * console.log(bounds.isPositive); // true\n   *\n   * // Negative bounds\n   * bounds.maxX = bounds.minX;\n   * console.log(bounds.isPositive); // false, width is 0\n   * ```\n   * @readonly\n   * @see {@link Bounds#isEmpty} For checking empty state\n   * @see {@link Bounds#isValid} For checking validity\n   */\n  get isPositive() {\n    return this.maxX - this.minX > 0 && this.maxY - this.minY > 0;\n  }\n  /**\n   * Whether the bounds has valid coordinates.\n   * Checks if the bounds has been initialized with real values.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * console.log(bounds.isValid); // false, default state\n   *\n   * // Set valid bounds\n   * bounds.addFrame(0, 0, 100, 100);\n   * console.log(bounds.isValid); // true\n   * ```\n   * @readonly\n   * @see {@link Bounds#isEmpty} For checking empty state\n   * @see {@link Bounds#isPositive} For checking dimensions\n   */\n  get isValid() {\n    return this.minX + this.minY !== Infinity;\n  }\n  /**\n   * Adds vertices from a Float32Array to the bounds, optionally transformed by a matrix.\n   * Used for efficiently updating bounds from raw vertex data.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Add vertices from geometry\n   * const vertices = new Float32Array([\n   *     0, 0,    // Vertex 1\n   *     100, 0,  // Vertex 2\n   *     100, 100 // Vertex 3\n   * ]);\n   * bounds.addVertexData(vertices, 0, 6);\n   *\n   * // Add transformed vertices\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addVertexData(vertices, 0, 6, matrix);\n   *\n   * // Add subset of vertices\n   * bounds.addVertexData(vertices, 2, 4); // Only second vertex\n   * ```\n   * @param vertexData - The array of vertices to add\n   * @param beginOffset - Starting index in the vertex array\n   * @param endOffset - Ending index in the vertex array (excluded)\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding rectangular frames\n   * @see {@link Matrix} For transformation details\n   */\n  addVertexData(vertexData, beginOffset, endOffset, matrix) {\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    for (let i = beginOffset; i < endOffset; i += 2) {\n      const localX = vertexData[i];\n      const localY = vertexData[i + 1];\n      const x = a * localX + c * localY + tx;\n      const y = b * localX + d * localY + ty;\n      minX = x < minX ? x : minX;\n      minY = y < minY ? y : minY;\n      maxX = x > maxX ? x : maxX;\n      maxY = y > maxY ? y : maxY;\n    }\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if a point is contained within the bounds.\n   * Returns true if the point's coordinates fall within the bounds' area.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Basic point check\n   * console.log(bounds.containsPoint(50, 50)); // true\n   * console.log(bounds.containsPoint(150, 150)); // false\n   *\n   * // Check edges\n   * console.log(bounds.containsPoint(0, 0));   // true, includes edges\n   * console.log(bounds.containsPoint(100, 100)); // true, includes edges\n   * ```\n   * @param x - x coordinate to check\n   * @param y - y coordinate to check\n   * @returns True if the point is inside the bounds\n   * @see {@link Bounds#isPositive} For valid bounds check\n   * @see {@link Bounds#rectangle} For Rectangle representation\n   */\n  containsPoint(x, y) {\n    if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y) {\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Returns a string representation of the bounds.\n   * Useful for debugging and logging bounds information.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.toString()); // \"[pixi.js:Bounds minX=0 minY=0 maxX=100 maxY=100 width=100 height=100]\"\n   * ```\n   * @returns A string describing the bounds\n   * @see {@link Bounds#copyFrom} For copying bounds\n   * @see {@link Bounds#clone} For creating a new instance\n   */\n  toString() {\n    return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n  }\n  /**\n   * Copies the bounds from another bounds object.\n   * Useful for reusing bounds objects and avoiding allocations.\n   * @example\n   * ```ts\n   * const sourceBounds = new Bounds(0, 0, 100, 100);\n   * // Copy bounds\n   * const targetBounds = new Bounds();\n   * targetBounds.copyFrom(sourceBounds);\n   * ```\n   * @param bounds - The bounds to copy from\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#clone} For creating new instances\n   */\n  copyFrom(bounds) {\n    this.minX = bounds.minX;\n    this.minY = bounds.minY;\n    this.maxX = bounds.maxX;\n    this.maxY = bounds.maxY;\n    return this;\n  }\n}\n\nexport { Bounds };\n//# sourceMappingURL=Bounds.mjs.map\n","\"use strict\";\nconst colorBit = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            @in aColor: vec4<f32>;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\nconst colorBitGl = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            in vec4 aColor;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\n\nexport { colorBit, colorBitGl };\n//# sourceMappingURL=colorBit.mjs.map\n","import { Point } from '../point/Point.mjs';\n\n\"use strict\";\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\nclass Rectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Rectangle(0, 0, 100, 100);\n     * console.log(shape.type); // 'rectangle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'rectangle') {\n     *     console.log(shape.width, shape.height);\n     * }\n     * ```\n     * @readonly\n     * @default 'rectangle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"rectangle\";\n    this.x = Number(x);\n    this.y = Number(y);\n    this.width = Number(width);\n    this.height = Number(height);\n  }\n  /**\n   * Returns the left edge (x-coordinate) of the rectangle.\n   * @example\n   * ```ts\n   * // Get left edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.left); // 100\n   *\n   * // Use in alignment calculations\n   * sprite.x = rect.left + padding;\n   *\n   * // Compare positions\n   * if (point.x > rect.left) {\n   *     console.log('Point is right of rectangle');\n   * }\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the left edge\n   * @see {@link Rectangle.right} For right edge position\n   * @see {@link Rectangle.x} For direct x-coordinate access\n   */\n  get left() {\n    return this.x;\n  }\n  /**\n   * Returns the right edge (x + width) of the rectangle.\n   * @example\n   * ```ts\n   * // Get right edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.right); // 300\n   *\n   * // Align to right edge\n   * sprite.x = rect.right - sprite.width;\n   *\n   * // Check boundaries\n   * if (point.x < rect.right) {\n   *     console.log('Point is inside right bound');\n   * }\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the right edge\n   * @see {@link Rectangle.left} For left edge position\n   * @see {@link Rectangle.width} For width value\n   */\n  get right() {\n    return this.x + this.width;\n  }\n  /**\n   * Returns the top edge (y-coordinate) of the rectangle.\n   * @example\n   * ```ts\n   * // Get top edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.top); // 100\n   *\n   * // Position above rectangle\n   * sprite.y = rect.top - sprite.height;\n   *\n   * // Check vertical position\n   * if (point.y > rect.top) {\n   *     console.log('Point is below top edge');\n   * }\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the top edge\n   * @see {@link Rectangle.bottom} For bottom edge position\n   * @see {@link Rectangle.y} For direct y-coordinate access\n   */\n  get top() {\n    return this.y;\n  }\n  /**\n   * Returns the bottom edge (y + height) of the rectangle.\n   * @example\n   * ```ts\n   * // Get bottom edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.bottom); // 250\n   *\n   * // Stack below rectangle\n   * sprite.y = rect.bottom + margin;\n   *\n   * // Check vertical bounds\n   * if (point.y < rect.bottom) {\n   *     console.log('Point is above bottom edge');\n   * }\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the bottom edge\n   * @see {@link Rectangle.top} For top edge position\n   * @see {@link Rectangle.height} For height value\n   */\n  get bottom() {\n    return this.y + this.height;\n  }\n  /**\n   * Determines whether the Rectangle is empty (has no area).\n   * @example\n   * ```ts\n   * // Check zero dimensions\n   * const rect = new Rectangle(100, 100, 0, 50);\n   * console.log(rect.isEmpty()); // true\n   * ```\n   * @returns True if the rectangle has no area\n   * @see {@link Rectangle.width} For width value\n   * @see {@link Rectangle.height} For height value\n   */\n  isEmpty() {\n    return this.left === this.right || this.top === this.bottom;\n  }\n  /**\n   * A constant empty rectangle. This is a new object every time the property is accessed.\n   * @example\n   * ```ts\n   * // Get fresh empty rectangle\n   * const empty = Rectangle.EMPTY;\n   * console.log(empty.isEmpty()); // true\n   * ```\n   * @returns A new empty rectangle instance\n   * @see {@link Rectangle.isEmpty} For empty state testing\n   */\n  static get EMPTY() {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  /**\n   * Creates a clone of this Rectangle\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Rectangle(100, 100, 200, 150);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.width *= 2;\n   * modified.height += 50;\n   *\n   * // Verify independence\n   * console.log(original.width);  // 200\n   * console.log(modified.width);  // 400\n   * ```\n   * @returns A copy of the rectangle\n   * @see {@link Rectangle.copyFrom} For copying into existing rectangle\n   * @see {@link Rectangle.copyTo} For copying to another rectangle\n   */\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n  /**\n   * Converts a Bounds object to a Rectangle object.\n   * @example\n   * ```ts\n   * // Convert bounds to rectangle\n   * const bounds = container.getBounds();\n   * const rect = new Rectangle().copyFromBounds(bounds);\n   * ```\n   * @param bounds - The bounds to copy and convert to a rectangle\n   * @returns Returns itself\n   * @see {@link Bounds} For bounds object structure\n   * @see {@link Rectangle.getBounds} For getting rectangle bounds\n   */\n  copyFromBounds(bounds) {\n    this.x = bounds.minX;\n    this.y = bounds.minY;\n    this.width = bounds.maxX - bounds.minX;\n    this.height = bounds.maxY - bounds.minY;\n    return this;\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Rectangle(100, 100, 200, 150);\n   * const target = new Rectangle();\n   * target.copyFrom(source);\n   *\n   * // Chain with other operations\n   * const rect = new Rectangle()\n   *     .copyFrom(source)\n   *     .pad(10);\n   * ```\n   * @param rectangle - The rectangle to copy from\n   * @returns Returns itself\n   * @see {@link Rectangle.copyTo} For copying to another rectangle\n   * @see {@link Rectangle.clone} For creating new rectangle copy\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Rectangle(100, 100, 200, 150);\n   * const target = new Rectangle();\n   * source.copyTo(target);\n   *\n   * // Chain with other operations\n   * const result = source\n   *     .copyTo(new Rectangle())\n   *     .getBounds();\n   * ```\n   * @param rectangle - The rectangle to copy to\n   * @returns Returns given parameter\n   * @see {@link Rectangle.copyFrom} For copying from another rectangle\n   * @see {@link Rectangle.clone} For creating new rectangle copy\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rectangle\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const isInside = rect.contains(150, 125); // true\n   * // Check edge cases\n   * console.log(rect.contains(100, 100)); // true (on edge)\n   * console.log(rect.contains(300, 250)); // false (outside)\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rectangle\n   * @see {@link Rectangle.containsRect} For rectangle containment\n   * @see {@link Rectangle.strokeContains} For checking stroke intersection\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x < this.x + this.width) {\n      if (y >= this.y && y < this.y + this.height) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const isOnStroke = rect.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = rect.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = rect.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = rect.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this rectangle's stroke\n   * @see {@link Rectangle.contains} For checking fill containment\n   * @see {@link Rectangle.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const { width, height } = this;\n    if (width <= 0 || height <= 0)\n      return false;\n    const _x = this.x;\n    const _y = this.y;\n    const strokeWidthOuter = strokeWidth * (1 - alignment);\n    const strokeWidthInner = strokeWidth - strokeWidthOuter;\n    const outerLeft = _x - strokeWidthOuter;\n    const outerRight = _x + width + strokeWidthOuter;\n    const outerTop = _y - strokeWidthOuter;\n    const outerBottom = _y + height + strokeWidthOuter;\n    const innerLeft = _x + strokeWidthInner;\n    const innerRight = _x + width - strokeWidthInner;\n    const innerTop = _y + strokeWidthInner;\n    const innerBottom = _y + height - strokeWidthInner;\n    return x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n  }\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   * Returns true only if the area of the intersection is >0, this means that Rectangles\n   * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n   * (width or height equal to zero) can't intersect any other rectangle.\n   * @param {Rectangle} other - The Rectangle to intersect with `this`.\n   * @param {Matrix} transform - The transformation matrix of `other`.\n   * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n   */\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   *\n   * Returns true only if the area of the intersection is greater than 0.\n   * This means that rectangles sharing only a side are not considered intersecting.\n   * @example\n   * ```ts\n   * // Basic intersection check\n   * const rect1 = new Rectangle(0, 0, 100, 100);\n   * const rect2 = new Rectangle(50, 50, 100, 100);\n   * console.log(rect1.intersects(rect2)); // true\n   *\n   * // With transformation matrix\n   * const matrix = new Matrix();\n   * matrix.rotate(Math.PI / 4); // 45 degrees\n   * console.log(rect1.intersects(rect2, matrix)); // Checks with rotation\n   *\n   * // Edge cases\n   * const zeroWidth = new Rectangle(0, 0, 0, 100);\n   * console.log(rect1.intersects(zeroWidth)); // false (no area)\n   * ```\n   * @remarks\n   * - Returns true only if intersection area is > 0\n   * - Rectangles sharing only a side are not intersecting\n   * - Zero-area rectangles cannot intersect anything\n   * - Supports optional transformation matrix\n   * @param other - The Rectangle to intersect with `this`\n   * @param transform - Optional transformation matrix of `other`\n   * @returns True if the transformed `other` Rectangle intersects with `this`\n   * @see {@link Rectangle.containsRect} For containment testing\n   * @see {@link Rectangle.contains} For point testing\n   */\n  intersects(other, transform) {\n    if (!transform) {\n      const x02 = this.x < other.x ? other.x : this.x;\n      const x12 = this.right > other.right ? other.right : this.right;\n      if (x12 <= x02) {\n        return false;\n      }\n      const y02 = this.y < other.y ? other.y : this.y;\n      const y12 = this.bottom > other.bottom ? other.bottom : this.bottom;\n      return y12 > y02;\n    }\n    const x0 = this.left;\n    const x1 = this.right;\n    const y0 = this.top;\n    const y1 = this.bottom;\n    if (x1 <= x0 || y1 <= y0) {\n      return false;\n    }\n    const lt = tempPoints[0].set(other.left, other.top);\n    const lb = tempPoints[1].set(other.left, other.bottom);\n    const rt = tempPoints[2].set(other.right, other.top);\n    const rb = tempPoints[3].set(other.right, other.bottom);\n    if (rt.x <= lt.x || lb.y <= lt.y) {\n      return false;\n    }\n    const s = Math.sign(transform.a * transform.d - transform.b * transform.c);\n    if (s === 0) {\n      return false;\n    }\n    transform.apply(lt, lt);\n    transform.apply(lb, lb);\n    transform.apply(rt, rt);\n    transform.apply(rb, rb);\n    if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0 || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1 || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0 || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1) {\n      return false;\n    }\n    const nx = s * (lb.y - lt.y);\n    const ny = s * (lt.x - lb.x);\n    const n00 = nx * x0 + ny * y0;\n    const n10 = nx * x1 + ny * y0;\n    const n01 = nx * x0 + ny * y1;\n    const n11 = nx * x1 + ny * y1;\n    if (Math.max(n00, n10, n01, n11) <= nx * lt.x + ny * lt.y || Math.min(n00, n10, n01, n11) >= nx * rb.x + ny * rb.y) {\n      return false;\n    }\n    const mx = s * (lt.y - rt.y);\n    const my = s * (rt.x - lt.x);\n    const m00 = mx * x0 + my * y0;\n    const m10 = mx * x1 + my * y0;\n    const m01 = mx * x0 + my * y1;\n    const m11 = mx * x1 + my * y1;\n    if (Math.max(m00, m10, m01, m11) <= mx * lt.x + my * lt.y || Math.min(m00, m10, m01, m11) >= mx * rb.x + my * rb.y) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Pads the rectangle making it grow in all directions.\n   *\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @example\n   * ```ts\n   * // Basic padding\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * rect.pad(10); // Adds 10px padding on all sides\n   *\n   * // Different horizontal and vertical padding\n   * const uiRect = new Rectangle(0, 0, 100, 50);\n   * uiRect.pad(20, 10); // 20px horizontal, 10px vertical\n   * ```\n   * @remarks\n   * - Adjusts x/y by subtracting padding\n   * - Increases width/height by padding * 2\n   * - Common in UI layout calculations\n   * - Chainable with other methods\n   * @param paddingX - The horizontal padding amount\n   * @param paddingY - The vertical padding amount\n   * @returns Returns itself\n   * @see {@link Rectangle.enlarge} For growing to include another rectangle\n   * @see {@link Rectangle.fit} For shrinking to fit within another rectangle\n   */\n  pad(paddingX = 0, paddingY = paddingX) {\n    this.x -= paddingX;\n    this.y -= paddingY;\n    this.width += paddingX * 2;\n    this.height += paddingY * 2;\n    return this;\n  }\n  /**\n   * Fits this rectangle around the passed one.\n   * @example\n   * ```ts\n   * // Basic fitting\n   * const container = new Rectangle(0, 0, 100, 100);\n   * const content = new Rectangle(25, 25, 200, 200);\n   * content.fit(container); // Clips to container bounds\n   * ```\n   * @param rectangle - The rectangle to fit around\n   * @returns Returns itself\n   * @see {@link Rectangle.enlarge} For growing to include another rectangle\n   * @see {@link Rectangle.pad} For adding padding around the rectangle\n   */\n  fit(rectangle) {\n    const x1 = Math.max(this.x, rectangle.x);\n    const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.max(this.y, rectangle.y);\n    const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = Math.max(x2 - x1, 0);\n    this.y = y1;\n    this.height = Math.max(y2 - y1, 0);\n    return this;\n  }\n  /**\n   * Enlarges rectangle so that its corners lie on a grid defined by resolution.\n   * @example\n   * ```ts\n   * // Basic grid alignment\n   * const rect = new Rectangle(10.2, 10.6, 100.8, 100.4);\n   * rect.ceil(); // Aligns to whole pixels\n   *\n   * // Custom resolution grid\n   * const uiRect = new Rectangle(5.3, 5.7, 50.2, 50.8);\n   * uiRect.ceil(0.5); // Aligns to half pixels\n   *\n   * // Use with precision value\n   * const preciseRect = new Rectangle(20.001, 20.999, 100.001, 100.999);\n   * preciseRect.ceil(1, 0.01); // Handles small decimal variations\n   * ```\n   * @param resolution - The grid size to align to (1 = whole pixels)\n   * @param eps - Small number to prevent floating point errors\n   * @returns Returns itself\n   * @see {@link Rectangle.fit} For constraining to bounds\n   * @see {@link Rectangle.enlarge} For growing dimensions\n   */\n  ceil(resolution = 1, eps = 1e-3) {\n    const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n    const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n    this.x = Math.floor((this.x + eps) * resolution) / resolution;\n    this.y = Math.floor((this.y + eps) * resolution) / resolution;\n    this.width = x2 - this.x;\n    this.height = y2 - this.y;\n    return this;\n  }\n  /**\n   * Scales the rectangle's dimensions and position by the specified factors.\n   * @example\n   * ```ts\n   * const rect = new Rectangle(50, 50, 100, 100);\n   *\n   * // Scale uniformly\n   * rect.scale(0.5, 0.5);\n   * // rect is now: x=25, y=25, width=50, height=50\n   *\n   * // non-uniformly\n   * rect.scale(0.5, 1);\n   * // rect is now: x=25, y=50, width=50, height=100\n   * ```\n   * @param x - The factor by which to scale the horizontal properties (x, width).\n   * @param y - The factor by which to scale the vertical properties (y, height).\n   * @returns Returns itself\n   */\n  scale(x, y = x) {\n    this.x *= x;\n    this.y *= y;\n    this.width *= x;\n    this.height *= y;\n    return this;\n  }\n  /**\n   * Enlarges this rectangle to include the passed rectangle.\n   * @example\n   * ```ts\n   * // Basic enlargement\n   * const rect = new Rectangle(50, 50, 100, 100);\n   * const other = new Rectangle(0, 0, 200, 75);\n   * rect.enlarge(other);\n   * // rect is now: x=0, y=0, width=200, height=150\n   *\n   * // Use for bounding box calculation\n   * const bounds = new Rectangle();\n   * objects.forEach((obj) => {\n   *     bounds.enlarge(obj.getBounds());\n   * });\n   * ```\n   * @param rectangle - The rectangle to include\n   * @returns Returns itself\n   * @see {@link Rectangle.fit} For shrinking to fit within another rectangle\n   * @see {@link Rectangle.pad} For adding padding around the rectangle\n   */\n  enlarge(rectangle) {\n    const x1 = Math.min(this.x, rectangle.x);\n    const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.min(this.y, rectangle.y);\n    const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = x2 - x1;\n    this.y = y1;\n    this.height = y2 - y1;\n    return this;\n  }\n  /**\n   * Returns the framing rectangle of the rectangle as a Rectangle object\n   * @example\n   * ```ts\n   * // Basic bounds retrieval\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const bounds = rect.getBounds();\n   *\n   * // Reuse existing rectangle\n   * const out = new Rectangle();\n   * rect.getBounds(out);\n   * ```\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle.copyFrom} For direct copying\n   * @see {@link Rectangle.clone} For creating new copy\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.copyFrom(this);\n    return out;\n  }\n  /**\n   * Determines whether another Rectangle is fully contained within this Rectangle.\n   *\n   * Rectangles that occupy the same space are considered to be containing each other.\n   *\n   * Rectangles without area (width or height equal to zero) can't contain anything,\n   * not even other arealess rectangles.\n   * @example\n   * ```ts\n   * // Check if one rectangle contains another\n   * const container = new Rectangle(0, 0, 100, 100);\n   * const inner = new Rectangle(25, 25, 50, 50);\n   *\n   * console.log(container.containsRect(inner)); // true\n   *\n   * // Check overlapping rectangles\n   * const partial = new Rectangle(75, 75, 50, 50);\n   * console.log(container.containsRect(partial)); // false\n   *\n   * // Zero-area rectangles\n   * const empty = new Rectangle(0, 0, 0, 100);\n   * console.log(container.containsRect(empty)); // false\n   * ```\n   * @param other - The Rectangle to check for containment\n   * @returns True if other is fully contained within this Rectangle\n   * @see {@link Rectangle.contains} For point containment\n   * @see {@link Rectangle.intersects} For overlap testing\n   */\n  containsRect(other) {\n    if (this.width <= 0 || this.height <= 0)\n      return false;\n    const x1 = other.x;\n    const y1 = other.y;\n    const x2 = other.x + other.width;\n    const y2 = other.y + other.height;\n    return x1 >= this.x && x1 < this.x + this.width && y1 >= this.y && y1 < this.y + this.height && x2 >= this.x && x2 < this.x + this.width && y2 >= this.y && y2 < this.y + this.height;\n  }\n  /**\n   * Sets the position and dimensions of the rectangle.\n   * @example\n   * ```ts\n   * // Basic usage\n   * const rect = new Rectangle();\n   * rect.set(100, 100, 200, 150);\n   *\n   * // Chain with other operations\n   * const bounds = new Rectangle()\n   *     .set(0, 0, 100, 100)\n   *     .pad(10);\n   * ```\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   * @returns Returns itself for method chaining\n   * @see {@link Rectangle.copyFrom} For copying from another rectangle\n   * @see {@link Rectangle.clone} For creating a new copy\n   */\n  set(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Rectangle };\n//# sourceMappingURL=Rectangle.mjs.map\n","/**\n * tiny-lru\n *\n * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>\n * @license BSD-3-Clause\n * @version 11.4.5\n */\n/**\n * A high-performance Least Recently Used (LRU) cache implementation with optional TTL support.\n * Items are automatically evicted when the cache reaches its maximum size,\n * removing the least recently used items first. All core operations (get, set, delete) are O(1).\n *\n * @class LRU\n * @example\n * // Create a cache with max 100 items\n * const cache = new LRU(100);\n * cache.set('key1', 'value1');\n * console.log(cache.get('key1')); // 'value1'\n *\n * @example\n * // Create a cache with TTL\n * const cache = new LRU(100, 5000); // 5 second TTL\n * cache.set('key1', 'value1');\n * // After 5 seconds, key1 will be expired\n */\nclass LRU {\n\t/**\n\t * Creates a new LRU cache instance.\n\t * Note: Constructor does not validate parameters. Use lru() factory function for parameter validation.\n\t *\n\t * @constructor\n\t * @param {number} [max=0] - Maximum number of items to store. 0 means unlimited.\n\t * @param {number} [ttl=0] - Time to live in milliseconds. 0 means no expiration.\n\t * @param {boolean} [resetTtl=false] - Whether to reset TTL when accessing existing items via get().\n\t * @example\n\t * const cache = new LRU(1000, 60000, true); // 1000 items, 1 minute TTL, reset on access\n\t * @see {@link lru} For parameter validation\n\t * @since 1.0.0\n\t */\n\tconstructor (max = 0, ttl = 0, resetTtl = false) {\n\t\tthis.first = null;\n\t\tthis.items = Object.create(null);\n\t\tthis.last = null;\n\t\tthis.max = max;\n\t\tthis.resetTtl = resetTtl;\n\t\tthis.size = 0;\n\t\tthis.ttl = ttl;\n\t}\n\n\t/**\n\t * Removes all items from the cache.\n\t *\n\t * @method clear\n\t * @memberof LRU\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.clear();\n\t * console.log(cache.size); // 0\n\t * @since 1.0.0\n\t */\n\tclear () {\n\t\tthis.first = null;\n\t\tthis.items = Object.create(null);\n\t\tthis.last = null;\n\t\tthis.size = 0;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes an item from the cache by key.\n\t *\n\t * @method delete\n\t * @memberof LRU\n\t * @param {string} key - The key of the item to delete.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * cache.delete('key1');\n\t * console.log(cache.has('key1')); // false\n\t * @see {@link LRU#has}\n\t * @see {@link LRU#clear}\n\t * @since 1.0.0\n\t */\n\tdelete (key) {\n\t\tif (this.has(key)) {\n\t\t\tconst item = this.items[key];\n\n\t\t\tdelete this.items[key];\n\t\t\tthis.size--;\n\n\t\t\tif (item.prev !== null) {\n\t\t\t\titem.prev.next = item.next;\n\t\t\t}\n\n\t\t\tif (item.next !== null) {\n\t\t\t\titem.next.prev = item.prev;\n\t\t\t}\n\n\t\t\tif (this.first === item) {\n\t\t\t\tthis.first = item.next;\n\t\t\t}\n\n\t\t\tif (this.last === item) {\n\t\t\t\tthis.last = item.prev;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of [key, value] pairs for the specified keys.\n\t * Order follows LRU order (least to most recently used).\n\t *\n\t * @method entries\n\t * @memberof LRU\n\t * @param {string[]} [keys=this.keys()] - Array of keys to get entries for. Defaults to all keys.\n\t * @returns {Array<Array<*>>} Array of [key, value] pairs in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * console.log(cache.entries()); // [['a', 1], ['b', 2]]\n\t * console.log(cache.entries(['a'])); // [['a', 1]]\n\t * @see {@link LRU#keys}\n\t * @see {@link LRU#values}\n\t * @since 11.1.0\n\t */\n\tentries (keys = this.keys()) {\n\t\treturn keys.map(key => [key, this.get(key)]);\n\t}\n\n\t/**\n\t * Removes the least recently used item from the cache.\n\t *\n\t * @method evict\n\t * @memberof LRU\n\t * @param {boolean} [bypass=false] - Whether to force eviction even when cache is empty.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('old', 'value').set('new', 'value');\n\t * cache.evict(); // Removes 'old' item\n\t * @see {@link LRU#setWithEvicted}\n\t * @since 1.0.0\n\t */\n\tevict (bypass = false) {\n\t\tif (bypass || this.size > 0) {\n\t\t\tconst item = this.first;\n\n\t\t\tdelete this.items[item.key];\n\n\t\t\tif (--this.size === 0) {\n\t\t\t\tthis.first = null;\n\t\t\t\tthis.last = null;\n\t\t\t} else {\n\t\t\t\tthis.first = item.next;\n\t\t\t\tthis.first.prev = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns the expiration timestamp for a given key.\n\t *\n\t * @method expiresAt\n\t * @memberof LRU\n\t * @param {string} key - The key to check expiration for.\n\t * @returns {number|undefined} The expiration timestamp in milliseconds, or undefined if key doesn't exist.\n\t * @example\n\t * const cache = new LRU(100, 5000); // 5 second TTL\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.expiresAt('key1')); // timestamp 5 seconds from now\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#has}\n\t * @since 1.0.0\n\t */\n\texpiresAt (key) {\n\t\tlet result;\n\n\t\tif (this.has(key)) {\n\t\t\tresult = this.items[key].expiry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Retrieves a value from the cache by key. Updates the item's position to most recently used.\n\t *\n\t * @method get\n\t * @memberof LRU\n\t * @param {string} key - The key to retrieve.\n\t * @returns {*} The value associated with the key, or undefined if not found or expired.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.get('key1')); // 'value1'\n\t * console.log(cache.get('nonexistent')); // undefined\n\t * @see {@link LRU#set}\n\t * @see {@link LRU#has}\n\t * @since 1.0.0\n\t */\n\tget (key) {\n\t\tconst item = this.items[key];\n\n\t\tif (item !== undefined) {\n\t\t\t// Check TTL only if enabled to avoid unnecessary Date.now() calls\n\t\t\tif (this.ttl > 0) {\n\t\t\t\tif (item.expiry <= Date.now()) {\n\t\t\t\t\tthis.delete(key);\n\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fast LRU update without full set() overhead\n\t\t\tthis.moveToEnd(item);\n\n\t\t\treturn item.value;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Checks if a key exists in the cache.\n\t *\n\t * @method has\n\t * @memberof LRU\n\t * @param {string} key - The key to check for.\n\t * @returns {boolean} True if the key exists, false otherwise.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.has('key1')); // true\n\t * console.log(cache.has('nonexistent')); // false\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#delete}\n\t * @since 9.0.0\n\t */\n\thas (key) {\n\t\treturn key in this.items;\n\t}\n\n\t/**\n\t * Efficiently moves an item to the end of the LRU list (most recently used position).\n\t * This is an internal optimization method that avoids the overhead of the full set() operation\n\t * when only LRU position needs to be updated.\n\t *\n\t * @method moveToEnd\n\t * @memberof LRU\n\t * @param {Object} item - The cache item with prev/next pointers to reposition.\n\t * @private\n\t * @since 11.3.5\n\t */\n\tmoveToEnd (item) {\n\t\t// If already at the end, nothing to do\n\t\tif (this.last === item) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove item from current position in the list\n\t\tif (item.prev !== null) {\n\t\t\titem.prev.next = item.next;\n\t\t}\n\n\t\tif (item.next !== null) {\n\t\t\titem.next.prev = item.prev;\n\t\t}\n\n\t\t// Update first pointer if this was the first item\n\t\tif (this.first === item) {\n\t\t\tthis.first = item.next;\n\t\t}\n\n\t\t// Add item to the end\n\t\titem.prev = this.last;\n\t\titem.next = null;\n\n\t\tif (this.last !== null) {\n\t\t\tthis.last.next = item;\n\t\t}\n\n\t\tthis.last = item;\n\n\t\t// Handle edge case: if this was the only item, it's also first\n\t\tif (this.first === null) {\n\t\t\tthis.first = item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an array of all keys in the cache, ordered from least to most recently used.\n\t *\n\t * @method keys\n\t * @memberof LRU\n\t * @returns {string[]} Array of keys in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * cache.get('a'); // Move 'a' to most recent\n\t * console.log(cache.keys()); // ['b', 'a']\n\t * @see {@link LRU#values}\n\t * @see {@link LRU#entries}\n\t * @since 9.0.0\n\t */\n\tkeys () {\n\t\tconst result = [];\n\t\tlet x = this.first;\n\n\t\twhile (x !== null) {\n\t\t\tresult.push(x.key);\n\t\t\tx = x.next;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Sets a value in the cache and returns any evicted item.\n\t *\n\t * @method setWithEvicted\n\t * @memberof LRU\n\t * @param {string} key - The key to set.\n\t * @param {*} value - The value to store.\n\t * @param {boolean} [resetTtl=this.resetTtl] - Whether to reset the TTL for this operation.\n\t * @returns {Object|null} The evicted item (if any) with shape {key, value, expiry, prev, next}, or null.\n\t * @example\n\t * const cache = new LRU(2);\n\t * cache.set('a', 1).set('b', 2);\n\t * const evicted = cache.setWithEvicted('c', 3); // evicted = {key: 'a', value: 1, ...}\n\t * @see {@link LRU#set}\n\t * @see {@link LRU#evict}\n\t * @since 11.3.0\n\t */\n\tsetWithEvicted (key, value, resetTtl = this.resetTtl) {\n\t\tlet evicted = null;\n\n\t\tif (this.has(key)) {\n\t\t\tthis.set(key, value, true, resetTtl);\n\t\t} else {\n\t\t\tif (this.max > 0 && this.size === this.max) {\n\t\t\t\tevicted = {...this.first};\n\t\t\t\tthis.evict(true);\n\t\t\t}\n\n\t\t\tlet item = this.items[key] = {\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n\t\t\t\tkey: key,\n\t\t\t\tprev: this.last,\n\t\t\t\tnext: null,\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tif (++this.size === 1) {\n\t\t\t\tthis.first = item;\n\t\t\t} else {\n\t\t\t\tthis.last.next = item;\n\t\t\t}\n\n\t\t\tthis.last = item;\n\t\t}\n\n\t\treturn evicted;\n\t}\n\n\t/**\n\t * Sets a value in the cache. Updates the item's position to most recently used.\n\t *\n\t * @method set\n\t * @memberof LRU\n\t * @param {string} key - The key to set.\n\t * @param {*} value - The value to store.\n\t * @param {boolean} [bypass=false] - Internal parameter for setWithEvicted method.\n\t * @param {boolean} [resetTtl=this.resetTtl] - Whether to reset the TTL for this operation.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('key1', 'value1')\n\t *      .set('key2', 'value2')\n\t *      .set('key3', 'value3');\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#setWithEvicted}\n\t * @since 1.0.0\n\t */\n\tset (key, value, bypass = false, resetTtl = this.resetTtl) {\n\t\tlet item = this.items[key];\n\n\t\tif (bypass || item !== undefined) {\n\t\t\t// Existing item: update value and position\n\t\t\titem.value = value;\n\n\t\t\tif (bypass === false && resetTtl) {\n\t\t\t\titem.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl;\n\t\t\t}\n\n\t\t\t// Always move to end, but the bypass parameter affects TTL reset behavior\n\t\t\tthis.moveToEnd(item);\n\t\t} else {\n\t\t\t// New item: check for eviction and create\n\t\t\tif (this.max > 0 && this.size === this.max) {\n\t\t\t\tthis.evict(true);\n\t\t\t}\n\n\t\t\titem = this.items[key] = {\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n\t\t\t\tkey: key,\n\t\t\t\tprev: this.last,\n\t\t\t\tnext: null,\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tif (++this.size === 1) {\n\t\t\t\tthis.first = item;\n\t\t\t} else {\n\t\t\t\tthis.last.next = item;\n\t\t\t}\n\n\t\t\tthis.last = item;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of all values in the cache for the specified keys.\n\t * Order follows LRU order (least to most recently used).\n\t *\n\t * @method values\n\t * @memberof LRU\n\t * @param {string[]} [keys=this.keys()] - Array of keys to get values for. Defaults to all keys.\n\t * @returns {Array<*>} Array of values corresponding to the keys in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * console.log(cache.values()); // [1, 2]\n\t * console.log(cache.values(['a'])); // [1]\n\t * @see {@link LRU#keys}\n\t * @see {@link LRU#entries}\n\t * @since 11.1.0\n\t */\n\tvalues (keys = this.keys()) {\n\t\treturn keys.map(key => this.get(key));\n\t}\n}\n\n/**\n * Factory function to create a new LRU cache instance with parameter validation.\n *\n * @function lru\n * @param {number} [max=1000] - Maximum number of items to store. Must be >= 0. Use 0 for unlimited size.\n * @param {number} [ttl=0] - Time to live in milliseconds. Must be >= 0. Use 0 for no expiration.\n * @param {boolean} [resetTtl=false] - Whether to reset TTL when accessing existing items via get().\n * @returns {LRU} A new LRU cache instance.\n * @throws {TypeError} When parameters are invalid (negative numbers or wrong types).\n * @example\n * // Create cache with factory function\n * const cache = lru(100, 5000, true);\n * cache.set('key', 'value');\n *\n * @example\n * // Error handling\n * try {\n *   const cache = lru(-1); // Invalid max\n * } catch (error) {\n *   console.error(error.message); // \"Invalid max value\"\n * }\n * @see {@link LRU}\n * @since 1.0.0\n */\nfunction lru (max = 1000, ttl = 0, resetTtl = false) {\n\tif (isNaN(max) || max < 0) {\n\t\tthrow new TypeError(\"Invalid max value\");\n\t}\n\n\tif (isNaN(ttl) || ttl < 0) {\n\t\tthrow new TypeError(\"Invalid ttl value\");\n\t}\n\n\tif (typeof resetTtl !== \"boolean\") {\n\t\tthrow new TypeError(\"Invalid resetTtl value\");\n\t}\n\n\treturn new LRU(max, ttl, resetTtl);\n}export{LRU,lru};","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { BufferUsage } from './const.mjs';\n\n\"use strict\";\nclass Buffer extends EventEmitter {\n  /**\n   * Creates a new Buffer with the given options\n   * @param options - the options for the buffer\n   */\n  constructor(options) {\n    let { data, size } = options;\n    const { usage, label, shrinkToFit } = options;\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"buffer\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /** @internal */\n    this._updateID = 1;\n    this._dataInt32 = null;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    this.shrinkToFit = true;\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    if (data instanceof Array) {\n      data = new Float32Array(data);\n    }\n    this._data = data;\n    size ?? (size = data?.byteLength);\n    const mappedAtCreation = !!data;\n    this.descriptor = {\n      size,\n      usage,\n      mappedAtCreation,\n      label\n    };\n    this.shrinkToFit = shrinkToFit ?? true;\n  }\n  /** the data in the buffer */\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    this.setDataWithSize(value, value.length, true);\n  }\n  get dataInt32() {\n    if (!this._dataInt32) {\n      this._dataInt32 = new Int32Array(this.data.buffer);\n    }\n    return this._dataInt32;\n  }\n  /** whether the buffer is static or not */\n  get static() {\n    return !!(this.descriptor.usage & BufferUsage.STATIC);\n  }\n  set static(value) {\n    if (value) {\n      this.descriptor.usage |= BufferUsage.STATIC;\n    } else {\n      this.descriptor.usage &= ~BufferUsage.STATIC;\n    }\n  }\n  /**\n   * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n   * If you only want to update a subset of the buffer, you can pass in the size of the data.\n   * @param value - the data to set\n   * @param size - the size of the data in bytes\n   * @param syncGPU - should the buffer be updated on the GPU immediately?\n   */\n  setDataWithSize(value, size, syncGPU) {\n    this._updateID++;\n    this._updateSize = size * value.BYTES_PER_ELEMENT;\n    if (this._data === value) {\n      if (syncGPU)\n        this.emit(\"update\", this);\n      return;\n    }\n    const oldData = this._data;\n    this._data = value;\n    this._dataInt32 = null;\n    if (!oldData || oldData.length !== value.length) {\n      if (!this.shrinkToFit && oldData && value.byteLength < oldData.byteLength) {\n        if (syncGPU)\n          this.emit(\"update\", this);\n      } else {\n        this.descriptor.size = value.byteLength;\n        this._resourceId = uid(\"resource\");\n        this.emit(\"change\", this);\n      }\n      return;\n    }\n    if (syncGPU)\n      this.emit(\"update\", this);\n  }\n  /**\n   * updates the buffer on the GPU to reflect the data in the buffer.\n   * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n   * you can pass in the size of the buffer to update.\n   * @param sizeInBytes - the new size of the buffer in bytes\n   */\n  update(sizeInBytes) {\n    this._updateSize = sizeInBytes ?? this._updateSize;\n    this._updateID++;\n    this.emit(\"update\", this);\n  }\n  /** Destroys the buffer */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this._data = null;\n    this.descriptor = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { Buffer };\n//# sourceMappingURL=Buffer.mjs.map\n","\"use strict\";\nvar ExtensionType = /* @__PURE__ */ ((ExtensionType2) => {\n  ExtensionType2[\"Application\"] = \"application\";\n  ExtensionType2[\"WebGLPipes\"] = \"webgl-pipes\";\n  ExtensionType2[\"WebGLPipesAdaptor\"] = \"webgl-pipes-adaptor\";\n  ExtensionType2[\"WebGLSystem\"] = \"webgl-system\";\n  ExtensionType2[\"WebGPUPipes\"] = \"webgpu-pipes\";\n  ExtensionType2[\"WebGPUPipesAdaptor\"] = \"webgpu-pipes-adaptor\";\n  ExtensionType2[\"WebGPUSystem\"] = \"webgpu-system\";\n  ExtensionType2[\"CanvasSystem\"] = \"canvas-system\";\n  ExtensionType2[\"CanvasPipesAdaptor\"] = \"canvas-pipes-adaptor\";\n  ExtensionType2[\"CanvasPipes\"] = \"canvas-pipes\";\n  ExtensionType2[\"Asset\"] = \"asset\";\n  ExtensionType2[\"LoadParser\"] = \"load-parser\";\n  ExtensionType2[\"ResolveParser\"] = \"resolve-parser\";\n  ExtensionType2[\"CacheParser\"] = \"cache-parser\";\n  ExtensionType2[\"DetectionParser\"] = \"detection-parser\";\n  ExtensionType2[\"MaskEffect\"] = \"mask-effect\";\n  ExtensionType2[\"BlendMode\"] = \"blend-mode\";\n  ExtensionType2[\"TextureSource\"] = \"texture-source\";\n  ExtensionType2[\"Environment\"] = \"environment\";\n  ExtensionType2[\"ShapeBuilder\"] = \"shape-builder\";\n  ExtensionType2[\"Batcher\"] = \"batcher\";\n  return ExtensionType2;\n})(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext === \"function\" || typeof ext === \"object\" && ext.extension) {\n    if (!ext.extension) {\n      throw new Error(\"Extension class must have an extension object\");\n    }\n    const metadata = typeof ext.extension !== \"object\" ? { type: ext.extension } : ext.extension;\n    ext = { ...metadata, ref: ext };\n  }\n  if (typeof ext === \"object\") {\n    ext = { ...ext };\n  } else {\n    throw new Error(\"Invalid extension type\");\n  }\n  if (typeof ext.type === \"string\") {\n    ext.type = [ext.type];\n  }\n  return ext;\n};\nconst normalizeExtensionPriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority;\nconst extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed. Can be:\n   * - Extension class with static `extension` property\n   * - Extension format object with `type` and `ref`\n   * - Multiple extensions as separate arguments\n   * @returns {extensions} this for chaining\n   * @example\n   * ```ts\n   * // Remove a single extension\n   * extensions.remove(MyRendererPlugin);\n   *\n   * // Remove multiple extensions\n   * extensions.remove(\n   *     MyRendererPlugin,\n   *     MySystemPlugin\n   * );\n   * ```\n   * @see {@link ExtensionType} For available extension types\n   * @see {@link ExtensionFormat} For extension format details\n   */\n  remove(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    });\n    return this;\n  },\n  /**\n   * Register new extensions with PixiJS. Extensions can be registered in multiple formats:\n   * - As a class with a static `extension` property\n   * - As an extension format object\n   * - As multiple extensions passed as separate arguments\n   * @param extensions - Extensions to add to PixiJS. Each can be:\n   * - A class with static `extension` property\n   * - An extension format object with `type` and `ref`\n   * - Multiple extensions as separate arguments\n   * @returns This extensions instance for chaining\n   * @example\n   * ```ts\n   * // Register a simple extension\n   * extensions.add(MyRendererPlugin);\n   *\n   * // Register multiple extensions\n   * extensions.add(\n   *     MyRendererPlugin,\n   *     MySystemPlugin,\n   * });\n   * ```\n   * @see {@link ExtensionType} For available extension types\n   * @see {@link ExtensionFormat} For extension format details\n   * @see {@link extensions.remove} For removing registered extensions\n   */\n  add(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers;\n        const queue = this._queue;\n        if (!handlers[type]) {\n          queue[type] = queue[type] || [];\n          queue[type]?.push(ext);\n        } else {\n          handlers[type]?.(ext);\n        }\n      });\n    });\n    return this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n   * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n   * @returns this for chaining.\n   * @internal\n   * @ignore\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers;\n    const removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type]) {\n      throw new Error(`Extension type ${type} already has a handler`);\n    }\n    addHandlers[type] = onAdd;\n    removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    if (queue[type]) {\n      queue[type]?.forEach((ext) => onAdd(ext));\n      delete queue[type];\n    }\n    return this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (extension.name) {\n          map[extension.name] = extension.ref;\n        }\n      },\n      (extension) => {\n        if (extension.name) {\n          delete map[extension.name];\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions with a `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The array of named extensions.\n   * @param defaultPriority - Fallback priority if none is defined.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByNamedList(type, map, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index >= 0)\n          return;\n        map.push({ name: extension.name, value: extension.ref });\n        map.sort((a, b) => normalizeExtensionPriority(b.value, defaultPriority) - normalizeExtensionPriority(a.value, defaultPriority));\n      },\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index !== -1) {\n          map.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (list.includes(extension.ref)) {\n          return;\n        }\n        list.push(extension.ref);\n        list.sort((a, b) => normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Mixin the source object(s) properties into the target class's prototype.\n   * Copies all property descriptors from source objects to the target's prototype.\n   * @param Target - The target class to mix properties into\n   * @param sources - One or more source objects containing properties to mix in\n   * @example\n   * ```ts\n   * // Create a mixin with shared properties\n   * const moveable = {\n   *     x: 0,\n   *     y: 0,\n   *     move(x: number, y: number) {\n   *         this.x += x;\n   *         this.y += y;\n   *     }\n   * };\n   *\n   * // Create a mixin with computed properties\n   * const scalable = {\n   *     scale: 1,\n   *     get scaled() {\n   *         return this.scale > 1;\n   *     }\n   * };\n   *\n   * // Apply mixins to a class\n   * extensions.mixin(Sprite, moveable, scalable);\n   *\n   * // Use mixed-in properties\n   * const sprite = new Sprite();\n   * sprite.move(10, 20);\n   * console.log(sprite.x, sprite.y); // 10, 20\n   * ```\n   * @remarks\n   * - Copies all properties including getters/setters\n   * - Does not modify source objects\n   * - Preserves property descriptors\n   * @see {@link Object.defineProperties} For details on property descriptors\n   * @see {@link Object.getOwnPropertyDescriptors} For details on property copying\n   */\n  mixin(Target, ...sources) {\n    for (const source of sources) {\n      Object.defineProperties(Target.prototype, Object.getOwnPropertyDescriptors(source));\n    }\n  }\n};\n\nexport { ExtensionType, extensions, normalizeExtensionPriority };\n//# sourceMappingURL=Extensions.mjs.map\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","import { extend, colord } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\n\"use strict\";\nextend([namesPlugin]);\nconst _Color = class _Color {\n  /**\n   * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n   */\n  constructor(value = 16777215) {\n    this._value = null;\n    this._components = new Float32Array(4);\n    this._components.fill(1);\n    this._int = 16777215;\n    this.value = value;\n  }\n  /**\n   * Get the red component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('red');\n   * console.log(color.red); // 1\n   *\n   * const green = new Color('#00ff00');\n   * console.log(green.red); // 0\n   * ```\n   */\n  get red() {\n    return this._components[0];\n  }\n  /**\n   * Get the green component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('lime');\n   * console.log(color.green); // 1\n   *\n   * const red = new Color('#ff0000');\n   * console.log(red.green); // 0\n   * ```\n   */\n  get green() {\n    return this._components[1];\n  }\n  /**\n   * Get the blue component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('blue');\n   * console.log(color.blue); // 1\n   *\n   * const yellow = new Color('#ffff00');\n   * console.log(yellow.blue); // 0\n   * ```\n   */\n  get blue() {\n    return this._components[2];\n  }\n  /**\n   * Get the alpha component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('red');\n   * console.log(color.alpha); // 1 (fully opaque)\n   *\n   * const transparent = new Color('rgba(255, 0, 0, 0.5)');\n   * console.log(transparent.alpha); // 0.5 (semi-transparent)\n   * ```\n   */\n  get alpha() {\n    return this._components[3];\n  }\n  /**\n   * Sets the color value and returns the instance for chaining.\n   *\n   * This is a chainable version of setting the `value` property.\n   * @param value - The color to set. Accepts various formats:\n   * - Hex strings/numbers (e.g., '#ff0000', 0xff0000)\n   * - RGB/RGBA values (arrays, objects)\n   * - CSS color names\n   * - HSL/HSLA values\n   * - HSV/HSVA values\n   * @returns The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic usage\n   * const color = new Color();\n   * color.setValue('#ff0000')\n   *     .setAlpha(0.5)\n   *     .premultiply(0.8);\n   *\n   * // Different formats\n   * color.setValue(0xff0000);          // Hex number\n   * color.setValue('#ff0000');         // Hex string\n   * color.setValue([1, 0, 0]);         // RGB array\n   * color.setValue([1, 0, 0, 0.5]);    // RGBA array\n   * color.setValue({ r: 1, g: 0, b: 0 }); // RGB object\n   *\n   * // Copy from another color\n   * const red = new Color('red');\n   * color.setValue(red);\n   * ```\n   * @throws {Error} If the color value is invalid or null\n   * @see {@link Color.value} For the underlying value property\n   */\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  /**\n   * The current color source. This property allows getting and setting the color value\n   * while preserving the original format where possible.\n   * @remarks\n   * When setting:\n   * - Setting to a `Color` instance copies its source and components\n   * - Setting to other valid sources normalizes and stores the value\n   * - Setting to `null` throws an Error\n   * - The color remains unchanged if normalization fails\n   *\n   * When getting:\n   * - Returns `null` if color was modified by {@link Color.multiply} or {@link Color.premultiply}\n   * - Otherwise returns the original color source\n   * @example\n   * ```ts\n   * // Setting different color formats\n   * const color = new Color();\n   *\n   * color.value = 0xff0000;         // Hex number\n   * color.value = '#ff0000';        // Hex string\n   * color.value = [1, 0, 0];        // RGB array\n   * color.value = [1, 0, 0, 0.5];   // RGBA array\n   * color.value = { r: 1, g: 0, b: 0 }; // RGB object\n   *\n   * // Copying from another color\n   * const red = new Color('red');\n   * color.value = red;  // Copies red's components\n   *\n   * // Getting the value\n   * console.log(color.value);  // Returns original format\n   *\n   * // After modifications\n   * color.multiply([0.5, 0.5, 0.5]);\n   * console.log(color.value);  // Returns null\n   * ```\n   * @throws {Error} When attempting to set `null`\n   */\n  set value(value) {\n    if (value instanceof _Color) {\n      this._value = this._cloneSource(value._value);\n      this._int = value._int;\n      this._components.set(value._components);\n    } else if (value === null) {\n      throw new Error(\"Cannot set Color#value to null\");\n    } else if (this._value === null || !this._isSourceEqual(this._value, value)) {\n      this._value = this._cloneSource(value);\n      this._normalize(this._value);\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  /**\n   * Copy a color source internally.\n   * @param value - Color source\n   */\n  _cloneSource(value) {\n    if (typeof value === \"string\" || typeof value === \"number\" || value instanceof Number || value === null) {\n      return value;\n    } else if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n      return value.slice(0);\n    } else if (typeof value === \"object\" && value !== null) {\n      return { ...value };\n    }\n    return value;\n  }\n  /**\n   * Equality check for color sources.\n   * @param value1 - First color source\n   * @param value2 - Second color source\n   * @returns `true` if the color sources are equal, `false` otherwise.\n   */\n  _isSourceEqual(value1, value2) {\n    const type1 = typeof value1;\n    const type2 = typeof value2;\n    if (type1 !== type2) {\n      return false;\n    } else if (type1 === \"number\" || type1 === \"string\" || value1 instanceof Number) {\n      return value1 === value2;\n    } else if (Array.isArray(value1) && Array.isArray(value2) || ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2)) {\n      if (value1.length !== value2.length) {\n        return false;\n      }\n      return value1.every((v, i) => v === value2[i]);\n    } else if (value1 !== null && value2 !== null) {\n      const keys1 = Object.keys(value1);\n      const keys2 = Object.keys(value2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      return keys1.every((key) => value1[key] === value2[key]);\n    }\n    return value1 === value2;\n  }\n  /**\n   * Convert to a RGBA color object with normalized components (0-1).\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGBA objects\n   * new Color('white').toRgba();     // returns { r: 1, g: 1, b: 1, a: 1 }\n   * new Color('#ff0000').toRgba();   // returns { r: 1, g: 0, b: 0, a: 1 }\n   *\n   * // With transparency\n   * new Color('rgba(255,0,0,0.5)').toRgba(); // returns { r: 1, g: 0, b: 0, a: 0.5 }\n   * ```\n   * @returns An RGBA object with normalized components\n   */\n  toRgba() {\n    const [r, g, b, a] = this._components;\n    return { r, g, b, a };\n  }\n  /**\n   * Convert to a RGB color object with normalized components (0-1).\n   *\n   * Alpha component is omitted in the output.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGB objects\n   * new Color('white').toRgb();     // returns { r: 1, g: 1, b: 1 }\n   * new Color('#ff0000').toRgb();   // returns { r: 1, g: 0, b: 0 }\n   *\n   * // Alpha is ignored\n   * new Color('rgba(255,0,0,0.5)').toRgb(); // returns { r: 1, g: 0, b: 0 }\n   * ```\n   * @returns An RGB object with normalized components\n   */\n  toRgb() {\n    const [r, g, b] = this._components;\n    return { r, g, b };\n  }\n  /**\n   * Convert to a CSS-style rgba string representation.\n   *\n   * RGB components are scaled to 0-255 range, alpha remains 0-1.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGBA strings\n   * new Color('white').toRgbaString();     // returns \"rgba(255,255,255,1)\"\n   * new Color('#ff0000').toRgbaString();   // returns \"rgba(255,0,0,1)\"\n   *\n   * // With transparency\n   * new Color([1, 0, 0, 0.5]).toRgbaString(); // returns \"rgba(255,0,0,0.5)\"\n   * ```\n   * @returns A CSS-compatible rgba string\n   */\n  toRgbaString() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return `rgba(${r},${g},${b},${this.alpha})`;\n  }\n  /**\n   * Convert to an [R, G, B] array of clamped uint8 values (0 to 255).\n   * @param {number[]|Uint8Array|Uint8ClampedArray} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGB components as integers between 0-255\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toUint8RgbArray(); // returns [255, 255, 255]\n   * new Color('#ff0000').toUint8RgbArray(); // returns [255, 0, 0]\n   *\n   * // Using custom output array\n   * const rgb = new Uint8Array(3);\n   * new Color('blue').toUint8RgbArray(rgb); // rgb is now [0, 0, 255]\n   *\n   * // Using different array types\n   * new Color('red').toUint8RgbArray(new Uint8ClampedArray(3)); // [255, 0, 0]\n   * new Color('red').toUint8RgbArray([]); // [255, 0, 0]\n   * ```\n   * @remarks\n   * - Output values are always clamped between 0-255\n   * - Alpha component is not included in output\n   * - Reuses internal cache array if no output array provided\n   */\n  toUint8RgbArray(out) {\n    const [r, g, b] = this._components;\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out || (out = this._arrayRgb);\n    out[0] = Math.round(r * 255);\n    out[1] = Math.round(g * 255);\n    out[2] = Math.round(b * 255);\n    return out;\n  }\n  /**\n   * Convert to an [R, G, B, A] array of normalized floats (numbers from 0.0 to 1.0).\n   * @param {number[]|Float32Array} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGBA components as floats between 0-1\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toArray();  // returns [1, 1, 1, 1]\n   * new Color('red').toArray();    // returns [1, 0, 0, 1]\n   *\n   * // With alpha\n   * new Color('rgba(255,0,0,0.5)').toArray(); // returns [1, 0, 0, 0.5]\n   *\n   * // Using custom output array\n   * const rgba = new Float32Array(4);\n   * new Color('blue').toArray(rgba); // rgba is now [0, 0, 1, 1]\n   * ```\n   * @remarks\n   * - Output values are normalized between 0-1\n   * - Includes alpha component as the fourth value\n   * - Reuses internal cache array if no output array provided\n   */\n  toArray(out) {\n    if (!this._arrayRgba) {\n      this._arrayRgba = [];\n    }\n    out || (out = this._arrayRgba);\n    const [r, g, b, a] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n  /**\n   * Convert to an [R, G, B] array of normalized floats (numbers from 0.0 to 1.0).\n   * @param {number[]|Float32Array} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGB components as floats between 0-1\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toRgbArray(); // returns [1, 1, 1]\n   * new Color('red').toRgbArray();   // returns [1, 0, 0]\n   *\n   * // Using custom output array\n   * const rgb = new Float32Array(3);\n   * new Color('blue').toRgbArray(rgb); // rgb is now [0, 0, 1]\n   * ```\n   * @remarks\n   * - Output values are normalized between 0-1\n   * - Alpha component is omitted from output\n   * - Reuses internal cache array if no output array provided\n   */\n  toRgbArray(out) {\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out || (out = this._arrayRgb);\n    const [r, g, b] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    return out;\n  }\n  /**\n   * Convert to a hexadecimal number.\n   * @returns The color as a 24-bit RGB integer\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toNumber(); // returns 0xffffff\n   * new Color('red').toNumber();   // returns 0xff0000\n   *\n   * // Store as hex\n   * const color = new Color('blue');\n   * const hex = color.toNumber(); // 0x0000ff\n   * ```\n   */\n  toNumber() {\n    return this._int;\n  }\n  /**\n   * Convert to a BGR number.\n   *\n   * Useful for platforms that expect colors in BGR format.\n   * @returns The color as a 24-bit BGR integer\n   * @example\n   * ```ts\n   * // Convert RGB to BGR\n   * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n   *\n   * // Common use case: platform-specific color format\n   * const color = new Color('orange');\n   * const bgrColor = color.toBgrNumber(); // Color with swapped R/B channels\n   * ```\n   * @remarks\n   * This swaps the red and blue channels compared to the normal RGB format:\n   * - RGB 0xRRGGBB becomes BGR 0xBBGGRR\n   */\n  toBgrNumber() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return (b << 16) + (g << 8) + r;\n  }\n  /**\n   * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n   *\n   * Useful for platforms that expect colors in little endian byte order.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert RGB color to little endian format\n   * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n   *\n   * // Common use cases:\n   * const color = new Color('orange');\n   * const leColor = color.toLittleEndianNumber(); // Swaps byte order for LE systems\n   *\n   * // Multiple conversions\n   * const colors = {\n   *     normal: 0xffcc99,\n   *     littleEndian: new Color(0xffcc99).toLittleEndianNumber(), // 0x99ccff\n   *     backToNormal: new Color(0x99ccff).toLittleEndianNumber()  // 0xffcc99\n   * };\n   * ```\n   * @remarks\n   * - Swaps R and B channels in the color value\n   * - RGB 0xRRGGBB becomes 0xBBGGRR\n   * - Useful for systems that use little endian byte order\n   * - Can be used to convert back and forth between formats\n   * @returns The color as a number in little endian format (BBGGRR)\n   * @see {@link Color.toBgrNumber} For BGR format without byte swapping\n   */\n  toLittleEndianNumber() {\n    const value = this._int;\n    return (value >> 16) + (value & 65280) + ((value & 255) << 16);\n  }\n  /**\n   * Multiply with another color.\n   *\n   * This action is destructive and modifies the original color.\n   * @param {ColorSource} value - The color to multiply by. Accepts any valid color format:\n   * - Hex strings/numbers (e.g., '#ff0000', 0xff0000)\n   * - RGB/RGBA arrays ([1, 0, 0], [1, 0, 0, 1])\n   * - Color objects ({ r: 1, g: 0, b: 0 })\n   * - CSS color names ('red', 'blue')\n   * @returns this - The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic multiplication\n   * const color = new Color('#ff0000');\n   * color.multiply(0x808080); // 50% darker red\n   *\n   * // With transparency\n   * color.multiply([1, 1, 1, 0.5]); // 50% transparent\n   *\n   * // Chain operations\n   * color\n   *     .multiply('#808080')\n   *     .multiply({ r: 1, g: 1, b: 1, a: 0.5 });\n   * ```\n   * @remarks\n   * - Multiplies each RGB component and alpha separately\n   * - Values are clamped between 0-1\n   * - Original color format is lost (value becomes null)\n   * - Operation cannot be undone\n   */\n  multiply(value) {\n    const [r, g, b, a] = _Color._temp.setValue(value)._components;\n    this._components[0] *= r;\n    this._components[1] *= g;\n    this._components[2] *= b;\n    this._components[3] *= a;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Converts color to a premultiplied alpha format.\n   *\n   * This action is destructive and modifies the original color.\n   * @param alpha - The alpha value to multiply by (0-1)\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels\n   * @returns {Color} The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic premultiplication\n   * const color = new Color('red');\n   * color.premultiply(0.5); // 50% transparent red with premultiplied RGB\n   *\n   * // Alpha only (RGB unchanged)\n   * color.premultiply(0.5, false); // 50% transparent, original RGB\n   *\n   * // Chain with other operations\n   * color\n   *     .multiply(0x808080)\n   *     .premultiply(0.5)\n   *     .toNumber();\n   * ```\n   * @remarks\n   * - RGB channels are multiplied by alpha when applyToRGB is true\n   * - Alpha is always set to the provided value\n   * - Values are clamped between 0-1\n   * - Original color format is lost (value becomes null)\n   * - Operation cannot be undone\n   */\n  premultiply(alpha, applyToRGB = true) {\n    if (applyToRGB) {\n      this._components[0] *= alpha;\n      this._components[1] *= alpha;\n      this._components[2] *= alpha;\n    }\n    this._components[3] = alpha;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Returns the color as a 32-bit premultiplied alpha integer.\n   *\n   * Format: 0xAARRGGBB\n   * @param {number} alpha - The alpha value to multiply by (0-1)\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels\n   * @returns {number} The premultiplied color as a 32-bit integer\n   * @example\n   * ```ts\n   * // Convert to premultiplied format\n   * const color = new Color('red');\n   *\n   * // Full opacity (0xFFRRGGBB)\n   * color.toPremultiplied(1.0); // 0xFFFF0000\n   *\n   * // 50% transparency with premultiplied RGB\n   * color.toPremultiplied(0.5); // 0x7F7F0000\n   *\n   * // 50% transparency without RGB premultiplication\n   * color.toPremultiplied(0.5, false); // 0x7FFF0000\n   * ```\n   * @remarks\n   * - Returns full opacity (0xFF000000) when alpha is 1.0\n   * - Returns 0 when alpha is 0.0 and applyToRGB is true\n   * - RGB values are rounded during premultiplication\n   */\n  toPremultiplied(alpha, applyToRGB = true) {\n    if (alpha === 1) {\n      return (255 << 24) + this._int;\n    }\n    if (alpha === 0) {\n      return applyToRGB ? 0 : this._int;\n    }\n    let r = this._int >> 16 & 255;\n    let g = this._int >> 8 & 255;\n    let b = this._int & 255;\n    if (applyToRGB) {\n      r = r * alpha + 0.5 | 0;\n      g = g * alpha + 0.5 | 0;\n      b = b * alpha + 0.5 | 0;\n    }\n    return (alpha * 255 << 24) + (r << 16) + (g << 8) + b;\n  }\n  /**\n   * Convert to a hexadecimal string (6 characters).\n   * @returns A CSS-compatible hex color string (e.g., \"#ff0000\")\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Basic colors\n   * new Color('red').toHex();    // returns \"#ff0000\"\n   * new Color('white').toHex();  // returns \"#ffffff\"\n   * new Color('black').toHex();  // returns \"#000000\"\n   *\n   * // From different formats\n   * new Color(0xff0000).toHex(); // returns \"#ff0000\"\n   * new Color([1, 0, 0]).toHex(); // returns \"#ff0000\"\n   * new Color({ r: 1, g: 0, b: 0 }).toHex(); // returns \"#ff0000\"\n   * ```\n   * @remarks\n   * - Always returns a 6-character hex string\n   * - Includes leading \"#\" character\n   * - Alpha channel is ignored\n   * - Values are rounded to nearest hex value\n   */\n  toHex() {\n    const hexString = this._int.toString(16);\n    return `#${\"000000\".substring(0, 6 - hexString.length) + hexString}`;\n  }\n  /**\n   * Convert to a hexadecimal string with alpha (8 characters).\n   * @returns A CSS-compatible hex color string with alpha (e.g., \"#ff0000ff\")\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Fully opaque colors\n   * new Color('red').toHexa();   // returns \"#ff0000ff\"\n   * new Color('white').toHexa(); // returns \"#ffffffff\"\n   *\n   * // With transparency\n   * new Color('rgba(255, 0, 0, 0.5)').toHexa(); // returns \"#ff00007f\"\n   * new Color([1, 0, 0, 0]).toHexa(); // returns \"#ff000000\"\n   * ```\n   * @remarks\n   * - Returns an 8-character hex string\n   * - Includes leading \"#\" character\n   * - Alpha is encoded in last two characters\n   * - Values are rounded to nearest hex value\n   */\n  toHexa() {\n    const alphaValue = Math.round(this._components[3] * 255);\n    const alphaString = alphaValue.toString(16);\n    return this.toHex() + \"00\".substring(0, 2 - alphaString.length) + alphaString;\n  }\n  /**\n   * Set alpha (transparency) value while preserving color components.\n   *\n   * Provides a chainable interface for setting alpha.\n   * @param alpha - Alpha value between 0 (fully transparent) and 1 (fully opaque)\n   * @returns The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic alpha setting\n   * const color = new Color('red');\n   * color.setAlpha(0.5);  // 50% transparent red\n   *\n   * // Chain with other operations\n   * color\n   *     .setValue('#ff0000')\n   *     .setAlpha(0.8)    // 80% opaque\n   *     .premultiply(0.5); // Further modify alpha\n   *\n   * // Reset to fully opaque\n   * color.setAlpha(1);\n   * ```\n   * @remarks\n   * - Alpha value is clamped between 0-1\n   * - Can be chained with other color operations\n   */\n  setAlpha(alpha) {\n    this._components[3] = this._clamp(alpha);\n    return this;\n  }\n  /**\n   * Normalize the input value into rgba\n   * @param value - Input value\n   */\n  _normalize(value) {\n    let r;\n    let g;\n    let b;\n    let a;\n    if ((typeof value === \"number\" || value instanceof Number) && value >= 0 && value <= 16777215) {\n      const int = value;\n      r = (int >> 16 & 255) / 255;\n      g = (int >> 8 & 255) / 255;\n      b = (int & 255) / 255;\n      a = 1;\n    } else if ((Array.isArray(value) || value instanceof Float32Array) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value);\n      [r, g, b, a = 1] = value;\n    } else if ((value instanceof Uint8Array || value instanceof Uint8ClampedArray) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value, 0, 255);\n      [r, g, b, a = 255] = value;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      a /= 255;\n    } else if (typeof value === \"string\" || typeof value === \"object\") {\n      if (typeof value === \"string\") {\n        const match = _Color.HEX_PATTERN.exec(value);\n        if (match) {\n          value = `#${match[2]}`;\n        }\n      }\n      const color = colord(value);\n      if (color.isValid()) {\n        ({ r, g, b, a } = color.rgba);\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n    }\n    if (r !== void 0) {\n      this._components[0] = r;\n      this._components[1] = g;\n      this._components[2] = b;\n      this._components[3] = a;\n      this._refreshInt();\n    } else {\n      throw new Error(`Unable to convert color ${value}`);\n    }\n  }\n  /** Refresh the internal color rgb number */\n  _refreshInt() {\n    this._clamp(this._components);\n    const [r, g, b] = this._components;\n    this._int = (r * 255 << 16) + (g * 255 << 8) + (b * 255 | 0);\n  }\n  /**\n   * Clamps values to a range. Will override original values\n   * @param value - Value(s) to clamp\n   * @param min - Minimum value\n   * @param max - Maximum value\n   */\n  _clamp(value, min = 0, max = 1) {\n    if (typeof value === \"number\") {\n      return Math.min(Math.max(value, min), max);\n    }\n    value.forEach((v, i) => {\n      value[i] = Math.min(Math.max(v, min), max);\n    });\n    return value;\n  }\n  /**\n   * Check if a value can be interpreted as a valid color format.\n   * Supports all color formats that can be used with the Color class.\n   * @param value - Value to check\n   * @returns True if the value can be used as a color\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // CSS colors and hex values\n   * Color.isColorLike('red');          // true\n   * Color.isColorLike('#ff0000');      // true\n   * Color.isColorLike(0xff0000);       // true\n   *\n   * // Arrays (RGB/RGBA)\n   * Color.isColorLike([1, 0, 0]);      // true\n   * Color.isColorLike([1, 0, 0, 0.5]); // true\n   *\n   * // TypedArrays\n   * Color.isColorLike(new Float32Array([1, 0, 0]));          // true\n   * Color.isColorLike(new Uint8Array([255, 0, 0]));          // true\n   * Color.isColorLike(new Uint8ClampedArray([255, 0, 0]));   // true\n   *\n   * // Object formats\n   * Color.isColorLike({ r: 1, g: 0, b: 0 });            // true (RGB)\n   * Color.isColorLike({ r: 1, g: 0, b: 0, a: 0.5 });    // true (RGBA)\n   * Color.isColorLike({ h: 0, s: 100, l: 50 });         // true (HSL)\n   * Color.isColorLike({ h: 0, s: 100, l: 50, a: 0.5 }); // true (HSLA)\n   * Color.isColorLike({ h: 0, s: 100, v: 100 });        // true (HSV)\n   * Color.isColorLike({ h: 0, s: 100, v: 100, a: 0.5 });// true (HSVA)\n   *\n   * // Color instances\n   * Color.isColorLike(new Color('red')); // true\n   *\n   * // Invalid values\n   * Color.isColorLike(null);           // false\n   * Color.isColorLike(undefined);      // false\n   * Color.isColorLike({});             // false\n   * Color.isColorLike([]);             // false\n   * Color.isColorLike('not-a-color');  // false\n   * ```\n   * @remarks\n   * Checks for the following formats:\n   * - Numbers (0x000000 to 0xffffff)\n   * - CSS color strings\n   * - RGB/RGBA arrays and objects\n   * - HSL/HSLA objects\n   * - HSV/HSVA objects\n   * - TypedArrays (Float32Array, Uint8Array, Uint8ClampedArray)\n   * - Color instances\n   * @see {@link ColorSource} For supported color format types\n   * @see {@link Color.setValue} For setting color values\n   * @category utility\n   */\n  static isColorLike(value) {\n    return typeof value === \"number\" || typeof value === \"string\" || value instanceof Number || value instanceof _Color || Array.isArray(value) || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Float32Array || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 && value.a !== void 0;\n  }\n};\n/**\n * Static shared Color instance used for utility operations. This is a singleton color object\n * that can be reused to avoid creating unnecessary Color instances.\n * > [!IMPORTANT] You should be careful when using this shared instance, as it is mutable and can be\n * > changed by any code that uses it.\n * >\n * > It is best used for one-off color operations or temporary transformations.\n * > For persistent colors, create your own Color instance instead.\n * @example\n * ```ts\n * import { Color } from 'pixi.js';\n *\n * // Use shared instance for one-off color operations\n * Color.shared.setValue(0xff0000);\n * const redHex = Color.shared.toHex();     // \"#ff0000\"\n * const redRgb = Color.shared.toRgbArray(); // [1, 0, 0]\n *\n * // Temporary color transformations\n * const colorNumber = Color.shared\n *     .setValue('#ff0000')     // Set to red\n *     .setAlpha(0.5)          // Make semi-transparent\n *     .premultiply(0.8)       // Apply premultiplication\n *     .toNumber();            // Convert to number\n *\n * // Chain multiple operations\n * const result = Color.shared\n *     .setValue(someColor)\n *     .multiply(tintColor)\n *     .toPremultiplied(alpha);\n * ```\n * @remarks\n * - This is a shared instance - be careful about multiple code paths using it simultaneously\n * - Use for temporary color operations to avoid allocating new Color instances\n * - The value is preserved between operations, so reset if needed\n * - For persistent colors, create your own Color instance instead\n */\n_Color.shared = new _Color();\n/**\n * Temporary Color object for static uses internally.\n * As to not conflict with Color.shared.\n * @ignore\n */\n_Color._temp = new _Color();\n/** Pattern for hex strings */\n// eslint-disable-next-line @typescript-eslint/naming-convention\n_Color.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\nlet Color = _Color;\n\nexport { Color };\n//# sourceMappingURL=Color.mjs.map\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getLocalBounds(target, bounds, relativeMatrix) {\n  bounds.clear();\n  relativeMatrix || (relativeMatrix = Matrix.IDENTITY);\n  _getLocalBounds(target, bounds, relativeMatrix, target, true);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getLocalBounds(target, bounds, parentTransform, rootContainer, isRoot) {\n  let relativeTransform;\n  if (!isRoot) {\n    if (!target.visible || !target.measurable)\n      return;\n    target.updateLocalTransform();\n    const localTransform = target.localTransform;\n    relativeTransform = matrixPool.get();\n    relativeTransform.appendFrom(localTransform, parentTransform);\n  } else {\n    relativeTransform = matrixPool.get();\n    relativeTransform = parentTransform.copyTo(relativeTransform);\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, relativeTransform);\n  } else {\n    if (target.renderPipeId) {\n      bounds.matrix = relativeTransform;\n      bounds.addBounds(target.bounds);\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addLocalBounds?.(bounds, rootContainer);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  matrixPool.return(relativeTransform);\n}\n\nexport { getLocalBounds };\n//# sourceMappingURL=getLocalBounds.mjs.map\n","\"use strict\";\nclass Pool {\n  /**\n   * Constructs a new Pool.\n   * @param ClassType - The constructor of the items in the pool.\n   * @param {number} [initialSize] - The initial size of the pool.\n   */\n  constructor(ClassType, initialSize) {\n    this._pool = [];\n    this._count = 0;\n    this._index = 0;\n    this._classType = ClassType;\n    if (initialSize) {\n      this.prepopulate(initialSize);\n    }\n  }\n  /**\n   * Prepopulates the pool with a given number of items.\n   * @param total - The number of items to add to the pool.\n   */\n  prepopulate(total) {\n    for (let i = 0; i < total; i++) {\n      this._pool[this._index++] = new this._classType();\n    }\n    this._count += total;\n  }\n  /**\n   * Gets an item from the pool. Calls the item's `init` method if it exists.\n   * If there are no items left in the pool, a new one will be created.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(data) {\n    let item;\n    if (this._index > 0) {\n      item = this._pool[--this._index];\n    } else {\n      item = new this._classType();\n    }\n    item.init?.(data);\n    return item;\n  }\n  /**\n   * Returns an item to the pool. Calls the item's `reset` method if it exists.\n   * @param {T} item - The item to return to the pool.\n   */\n  return(item) {\n    item.reset?.();\n    this._pool[this._index++] = item;\n  }\n  /**\n   * Gets the number of items in the pool.\n   * @readonly\n   */\n  get totalSize() {\n    return this._count;\n  }\n  /**\n   * Gets the number of items in the pool that are free to use without needing to create more.\n   * @readonly\n   */\n  get totalFree() {\n    return this._index;\n  }\n  /**\n   * Gets the number of items in the pool that are currently in use.\n   * @readonly\n   */\n  get totalUsed() {\n    return this._count - this._index;\n  }\n  /** clears the pool */\n  clear() {\n    if (this._pool.length > 0 && this._pool[0].destroy) {\n      for (let i = 0; i < this._index; i++) {\n        this._pool[i].destroy();\n      }\n    }\n    this._pool.length = 0;\n    this._count = 0;\n    this._index = 0;\n  }\n}\n\nexport { Pool };\n//# sourceMappingURL=Pool.mjs.map\n","import { GlobalResourceRegistry } from './GlobalResourceRegistry.mjs';\nimport { Pool } from './Pool.mjs';\n\n\"use strict\";\nclass PoolGroupClass {\n  constructor() {\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    this._poolsByClass = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Prepopulates a specific pool with a given number of items.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {number} total - The number of items to add to the pool.\n   */\n  prepopulate(Class, total) {\n    const classPool = this.getPool(Class);\n    classPool.prepopulate(total);\n  }\n  /**\n   * Gets an item from a specific pool.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(Class, data) {\n    const pool = this.getPool(Class);\n    return pool.get(data);\n  }\n  /**\n   * Returns an item to its respective pool.\n   * @param {PoolItem} item - The item to return to the pool.\n   */\n  return(item) {\n    const pool = this.getPool(item.constructor);\n    pool.return(item);\n  }\n  /**\n   * Gets a specific pool based on the class type.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n   * @returns {Pool<T>} The pool of the given class type.\n   */\n  getPool(ClassType) {\n    if (!this._poolsByClass.has(ClassType)) {\n      this._poolsByClass.set(ClassType, new Pool(ClassType));\n    }\n    return this._poolsByClass.get(ClassType);\n  }\n  /** gets the usage stats of each pool in the system */\n  stats() {\n    const stats = {};\n    this._poolsByClass.forEach((pool) => {\n      const name = stats[pool._classType.name] ? pool._classType.name + pool._classType.ID : pool._classType.name;\n      stats[name] = {\n        free: pool.totalFree,\n        used: pool.totalUsed,\n        size: pool.totalSize\n      };\n    });\n    return stats;\n  }\n  /** Clears all pools in the group. This will reset all pools and free their resources. */\n  clear() {\n    this._poolsByClass.forEach((pool) => pool.clear());\n    this._poolsByClass.clear();\n  }\n}\nconst BigPool = new PoolGroupClass();\nGlobalResourceRegistry.register(BigPool);\n\nexport { BigPool, PoolGroupClass };\n//# sourceMappingURL=PoolGroup.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../../../ticker/Ticker.mjs';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nconst _VideoSource = class _VideoSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    // Public\n    /** Whether or not the video is ready to play. */\n    this.isReady = false;\n    /** The upload method for this texture. */\n    this.uploadMethodId = \"video\";\n    options = {\n      ..._VideoSource.defaultOptions,\n      ...options\n    };\n    this._autoUpdate = true;\n    this._isConnectedToTicker = false;\n    this._updateFPS = options.updateFPS || 0;\n    this._msToNextUpdate = 0;\n    this.autoPlay = options.autoPlay !== false;\n    this.alphaMode = options.alphaMode ?? \"premultiply-alpha-on-upload\";\n    this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n    this._videoFrameRequestCallbackHandle = null;\n    this._load = null;\n    this._resolve = null;\n    this._reject = null;\n    this._onCanPlay = this._onCanPlay.bind(this);\n    this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onPlayStart = this._onPlayStart.bind(this);\n    this._onPlayStop = this._onPlayStop.bind(this);\n    this._onSeeked = this._onSeeked.bind(this);\n    if (options.autoLoad !== false) {\n      void this.load();\n    }\n  }\n  /** Update the video frame if the source is not destroyed and meets certain conditions. */\n  updateFrame() {\n    if (this.destroyed) {\n      return;\n    }\n    if (this._updateFPS) {\n      const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n      this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n    }\n    if (!this._updateFPS || this._msToNextUpdate <= 0) {\n      this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;\n    }\n    if (this.isValid) {\n      this.update();\n    }\n  }\n  /** Callback to update the video frame and potentially request the next frame update. */\n  _videoFrameRequestCallback() {\n    this.updateFrame();\n    if (this.destroyed) {\n      this._videoFrameRequestCallbackHandle = null;\n    } else {\n      this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n        this._videoFrameRequestCallback\n      );\n    }\n  }\n  /**\n   * Checks if the resource has valid dimensions.\n   * @returns {boolean} True if width and height are set, otherwise false.\n   */\n  get isValid() {\n    return !!this.resource.videoWidth && !!this.resource.videoHeight;\n  }\n  /**\n   * Start preloading the video resource.\n   * @returns {Promise<this>} Handle the validate event\n   */\n  async load() {\n    if (this._load) {\n      return this._load;\n    }\n    const source = this.resource;\n    const options = this.options;\n    if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {\n      source.complete = true;\n    }\n    source.addEventListener(\"play\", this._onPlayStart);\n    source.addEventListener(\"pause\", this._onPlayStop);\n    source.addEventListener(\"seeked\", this._onSeeked);\n    if (!this._isSourceReady()) {\n      if (!options.preload) {\n        source.addEventListener(\"canplay\", this._onCanPlay);\n      }\n      source.addEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.addEventListener(\"error\", this._onError, true);\n    } else {\n      this._mediaReady();\n    }\n    this.alphaMode = await detectVideoAlphaMode();\n    this._load = new Promise((resolve, reject) => {\n      if (this.isValid) {\n        resolve(this);\n      } else {\n        this._resolve = resolve;\n        this._reject = reject;\n        if (options.preloadTimeoutMs !== void 0) {\n          this._preloadTimeout = setTimeout(() => {\n            this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n          });\n        }\n        source.load();\n      }\n    });\n    return this._load;\n  }\n  /**\n   * Handle video error events.\n   * @param event - The error event\n   */\n  _onError(event) {\n    this.resource.removeEventListener(\"error\", this._onError, true);\n    this.emit(\"error\", event);\n    if (this._reject) {\n      this._reject(event);\n      this._reject = null;\n      this._resolve = null;\n    }\n  }\n  /**\n   * Checks if the underlying source is playing.\n   * @returns True if playing.\n   */\n  _isSourcePlaying() {\n    const source = this.resource;\n    return !source.paused && !source.ended;\n  }\n  /**\n   * Checks if the underlying source is ready for playing.\n   * @returns True if ready.\n   */\n  _isSourceReady() {\n    const source = this.resource;\n    return source.readyState > 2;\n  }\n  /** Runs the update loop when the video is ready to play. */\n  _onPlayStart() {\n    if (!this.isValid) {\n      this._mediaReady();\n    }\n    this._configureAutoUpdate();\n  }\n  /** Stops the update loop when a pause event is triggered. */\n  _onPlayStop() {\n    this._configureAutoUpdate();\n  }\n  /** Handles behavior when the video completes seeking to the current playback position. */\n  _onSeeked() {\n    if (this._autoUpdate && !this._isSourcePlaying()) {\n      this._msToNextUpdate = 0;\n      this.updateFrame();\n      this._msToNextUpdate = 0;\n    }\n  }\n  _onCanPlay() {\n    const source = this.resource;\n    source.removeEventListener(\"canplay\", this._onCanPlay);\n    this._mediaReady();\n  }\n  _onCanPlayThrough() {\n    const source = this.resource;\n    source.removeEventListener(\"canplaythrough\", this._onCanPlay);\n    if (this._preloadTimeout) {\n      clearTimeout(this._preloadTimeout);\n      this._preloadTimeout = void 0;\n    }\n    this._mediaReady();\n  }\n  /** Fired when the video is loaded and ready to play. */\n  _mediaReady() {\n    const source = this.resource;\n    if (this.isValid) {\n      this.isReady = true;\n      this.resize(source.videoWidth, source.videoHeight);\n    }\n    this._msToNextUpdate = 0;\n    this.updateFrame();\n    this._msToNextUpdate = 0;\n    if (this._resolve) {\n      this._resolve(this);\n      this._resolve = null;\n      this._reject = null;\n    }\n    if (this._isSourcePlaying()) {\n      this._onPlayStart();\n    } else if (this.autoPlay) {\n      void this.resource.play();\n    }\n  }\n  /** Cleans up resources and event listeners associated with this texture. */\n  destroy() {\n    this._configureAutoUpdate();\n    const source = this.resource;\n    if (source) {\n      source.removeEventListener(\"play\", this._onPlayStart);\n      source.removeEventListener(\"pause\", this._onPlayStop);\n      source.removeEventListener(\"seeked\", this._onSeeked);\n      source.removeEventListener(\"canplay\", this._onCanPlay);\n      source.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.removeEventListener(\"error\", this._onError, true);\n      source.pause();\n      source.src = \"\";\n      source.load();\n    }\n    super.destroy();\n  }\n  /** Should the base texture automatically update itself, set to true by default. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * How many times a second to update the texture from the video.\n   * Leave at 0 to update at every render.\n   * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n   */\n  get updateFPS() {\n    return this._updateFPS;\n  }\n  set updateFPS(value) {\n    if (value !== this._updateFPS) {\n      this._updateFPS = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * Configures the updating mechanism based on the current state and settings.\n   *\n   * This method decides between using the browser's native video frame callback or a custom ticker\n   * for updating the video frame. It ensures optimal performance and responsiveness\n   * based on the video's state, playback status, and the desired frames-per-second setting.\n   *\n   * - If `_autoUpdate` is enabled and the video source is playing:\n   *   - It will prefer the native video frame callback if available and no specific FPS is set.\n   *   - Otherwise, it will use a custom ticker for manual updates.\n   * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n   */\n  _configureAutoUpdate() {\n    if (this._autoUpdate && this._isSourcePlaying()) {\n      if (!this._updateFPS && this.resource.requestVideoFrameCallback) {\n        if (this._isConnectedToTicker) {\n          Ticker.shared.remove(this.updateFrame, this);\n          this._isConnectedToTicker = false;\n          this._msToNextUpdate = 0;\n        }\n        if (this._videoFrameRequestCallbackHandle === null) {\n          this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n            this._videoFrameRequestCallback\n          );\n        }\n      } else {\n        if (this._videoFrameRequestCallbackHandle !== null) {\n          this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n          this._videoFrameRequestCallbackHandle = null;\n        }\n        if (!this._isConnectedToTicker) {\n          Ticker.shared.add(this.updateFrame, this);\n          this._isConnectedToTicker = true;\n          this._msToNextUpdate = 0;\n        }\n      }\n    } else {\n      if (this._videoFrameRequestCallbackHandle !== null) {\n        this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n        this._videoFrameRequestCallbackHandle = null;\n      }\n      if (this._isConnectedToTicker) {\n        Ticker.shared.remove(this.updateFrame, this);\n        this._isConnectedToTicker = false;\n        this._msToNextUpdate = 0;\n      }\n    }\n  }\n  static test(resource) {\n    return globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement;\n  }\n};\n_VideoSource.extension = ExtensionType.TextureSource;\n/** The default options for video sources. */\n_VideoSource.defaultOptions = {\n  ...TextureSource.defaultOptions,\n  /** If true, the video will start loading immediately. */\n  autoLoad: true,\n  /** If true, the video will start playing as soon as it is loaded. */\n  autoPlay: true,\n  /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n  updateFPS: 0,\n  /** If true, the video will be loaded with the `crossorigin` attribute. */\n  crossorigin: true,\n  /** If true, the video will loop when it ends. */\n  loop: false,\n  /** If true, the video will be muted. */\n  muted: true,\n  /** If true, the video will play inline. */\n  playsinline: true,\n  /** If true, the video will be preloaded. */\n  preload: false\n};\n/**\n * Map of video MIME types that can't be directly derived from file extensions.\n * @readonly\n */\n_VideoSource.MIME_TYPES = {\n  ogv: \"video/ogg\",\n  mov: \"video/quicktime\",\n  m4v: \"video/mp4\"\n};\nlet VideoSource = _VideoSource;\n\nexport { VideoSource };\n//# sourceMappingURL=VideoSource.mjs.map\n","\"use strict\";\nfunction transformVertices(vertices, m, offset, stride, size) {\n  const a = m.a;\n  const b = m.b;\n  const c = m.c;\n  const d = m.d;\n  const tx = m.tx;\n  const ty = m.ty;\n  offset || (offset = 0);\n  stride || (stride = 2);\n  size || (size = vertices.length / stride - offset);\n  let index = offset * stride;\n  for (let i = 0; i < size; i++) {\n    const x = vertices[index];\n    const y = vertices[index + 1];\n    vertices[index] = a * x + c * y + tx;\n    vertices[index + 1] = b * x + d * y + ty;\n    index += stride;\n  }\n}\n\nexport { transformVertices };\n//# sourceMappingURL=transformVertices.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildCircle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"circle\"\n  },\n  build(shape, points) {\n    let x;\n    let y;\n    let dx;\n    let dy;\n    let rx;\n    let ry;\n    if (shape.type === \"circle\") {\n      const circle = shape;\n      rx = ry = circle.radius;\n      if (rx <= 0) {\n        return false;\n      }\n      x = circle.x;\n      y = circle.y;\n      dx = dy = 0;\n    } else if (shape.type === \"ellipse\") {\n      const ellipse = shape;\n      rx = ellipse.halfWidth;\n      ry = ellipse.halfHeight;\n      if (rx <= 0 || ry <= 0) {\n        return false;\n      }\n      x = ellipse.x;\n      y = ellipse.y;\n      dx = dy = 0;\n    } else {\n      const roundedRect = shape;\n      const halfWidth = roundedRect.width / 2;\n      const halfHeight = roundedRect.height / 2;\n      x = roundedRect.x + halfWidth;\n      y = roundedRect.y + halfHeight;\n      rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n      dx = halfWidth - rx;\n      dy = halfHeight - ry;\n    }\n    if (dx < 0 || dy < 0) {\n      return false;\n    }\n    const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n    const m = n * 8 + (dx ? 4 : 0) + (dy ? 4 : 0);\n    if (m === 0) {\n      return false;\n    }\n    if (n === 0) {\n      points[0] = points[6] = x + dx;\n      points[1] = points[3] = y + dy;\n      points[2] = points[4] = x - dx;\n      points[5] = points[7] = y - dy;\n      return true;\n    }\n    let j1 = 0;\n    let j2 = n * 4 + (dx ? 2 : 0) + 2;\n    let j3 = j2;\n    let j4 = m;\n    let x0 = dx + rx;\n    let y0 = dy;\n    let x1 = x + x0;\n    let x2 = x - x0;\n    let y1 = y + y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j2] = y1;\n    points[--j2] = x2;\n    if (dy) {\n      const y22 = y - y0;\n      points[j3++] = x2;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x1;\n    }\n    for (let i = 1; i < n; i++) {\n      const a = Math.PI / 2 * (i / n);\n      const x02 = dx + Math.cos(a) * rx;\n      const y02 = dy + Math.sin(a) * ry;\n      const x12 = x + x02;\n      const x22 = x - x02;\n      const y12 = y + y02;\n      const y22 = y - y02;\n      points[j1++] = x12;\n      points[j1++] = y12;\n      points[--j2] = y12;\n      points[--j2] = x22;\n      points[j3++] = x22;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x12;\n    }\n    x0 = dx;\n    y0 = dy + ry;\n    x1 = x + x0;\n    x2 = x - x0;\n    y1 = y + y0;\n    const y2 = y - y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j4] = y2;\n    points[--j4] = x1;\n    if (dx) {\n      points[j1++] = x2;\n      points[j1++] = y1;\n      points[--j4] = y2;\n      points[--j4] = x2;\n    }\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    if (points.length === 0) {\n      return;\n    }\n    let centerX = 0;\n    let centerY = 0;\n    for (let i = 0; i < points.length; i += 2) {\n      centerX += points[i];\n      centerY += points[i + 1];\n    }\n    centerX /= points.length / 2;\n    centerY /= points.length / 2;\n    let count = verticesOffset;\n    vertices[count * verticesStride] = centerX;\n    vertices[count * verticesStride + 1] = centerY;\n    const centerIndex = count++;\n    for (let i = 0; i < points.length; i += 2) {\n      vertices[count * verticesStride] = points[i];\n      vertices[count * verticesStride + 1] = points[i + 1];\n      if (i > 0) {\n        indices[indicesOffset++] = count;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n      }\n      count++;\n    }\n    indices[indicesOffset++] = centerIndex + 1;\n    indices[indicesOffset++] = centerIndex;\n    indices[indicesOffset++] = count - 1;\n  }\n};\nconst buildEllipse = { ...buildCircle, extension: { ...buildCircle.extension, name: \"ellipse\" } };\nconst buildRoundedRectangle = { ...buildCircle, extension: { ...buildCircle.extension, name: \"roundedRectangle\" } };\n\nexport { buildCircle, buildEllipse, buildRoundedRectangle };\n//# sourceMappingURL=buildCircle.mjs.map\n","\"use strict\";\nconst closePointEps = 1e-4;\nconst curveEps = 1e-4;\n\nexport { closePointEps, curveEps };\n//# sourceMappingURL=const.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { closePointEps, curveEps } from '../const.mjs';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints.mjs';\n\n\"use strict\";\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {\n  const ix = x - nx * innerWeight;\n  const iy = y - ny * innerWeight;\n  const ox = x + nx * outerWeight;\n  const oy = y + ny * outerWeight;\n  let exx;\n  let eyy;\n  if (clockwise) {\n    exx = ny;\n    eyy = -nx;\n  } else {\n    exx = -ny;\n    eyy = nx;\n  }\n  const eix = ix + exx;\n  const eiy = iy + eyy;\n  const eox = ox + exx;\n  const eoy = oy + eyy;\n  verts.push(eix, eiy);\n  verts.push(eox, eoy);\n  return 2;\n}\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n  const cx2p0x = sx - cx;\n  const cy2p0y = sy - cy;\n  let angle0 = Math.atan2(cx2p0x, cy2p0y);\n  let angle1 = Math.atan2(ex - cx, ey - cy);\n  if (clockwise && angle0 < angle1) {\n    angle0 += Math.PI * 2;\n  } else if (!clockwise && angle0 > angle1) {\n    angle1 += Math.PI * 2;\n  }\n  let startAngle = angle0;\n  const angleDiff = angle1 - angle0;\n  const absAngleDiff = Math.abs(angleDiff);\n  const radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);\n  const segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;\n  const angleInc = angleDiff / segCount;\n  startAngle += angleInc;\n  if (clockwise) {\n    verts.push(cx, cy);\n    verts.push(sx, sy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(cx, cy);\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n    }\n    verts.push(cx, cy);\n    verts.push(ex, ey);\n  } else {\n    verts.push(sx, sy);\n    verts.push(cx, cy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n      verts.push(cx, cy);\n    }\n    verts.push(ex, ey);\n    verts.push(cx, cy);\n  }\n  return segCount * 2;\n}\nfunction buildLine(points, lineStyle, flipAlignment, closed, vertices, indices) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const style = lineStyle;\n  let alignment = style.alignment;\n  if (lineStyle.alignment !== 0.5) {\n    let orientation = getOrientationOfPoints(points);\n    if (flipAlignment)\n      orientation *= -1;\n    alignment = (alignment - 0.5) * orientation + 0.5;\n  }\n  const firstPoint = new Point(points[0], points[1]);\n  const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n  const closedShape = closed;\n  const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;\n  if (closedShape) {\n    points = points.slice();\n    if (closedPath) {\n      points.pop();\n      points.pop();\n      lastPoint.set(points[points.length - 2], points[points.length - 1]);\n    }\n    const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n    const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n    points.unshift(midPointX, midPointY);\n    points.push(midPointX, midPointY);\n  }\n  const verts = vertices;\n  const length = points.length / 2;\n  let indexCount = points.length;\n  const indexStart = verts.length / 2;\n  const width = style.width / 2;\n  const widthSquared = width * width;\n  const miterLimitSquared = style.miterLimit * style.miterLimit;\n  let x0 = points[0];\n  let y0 = points[1];\n  let x1 = points[2];\n  let y1 = points[3];\n  let x2 = 0;\n  let y2 = 0;\n  let perpX = -(y0 - y1);\n  let perpY = x0 - x1;\n  let perp1x = 0;\n  let perp1y = 0;\n  let dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  const ratio = alignment;\n  const innerWeight = (1 - ratio) * 2;\n  const outerWeight = ratio * 2;\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x0 - perpX * (innerWeight - outerWeight) * 0.5,\n        y0 - perpY * (innerWeight - outerWeight) * 0.5,\n        x0 - perpX * innerWeight,\n        y0 - perpY * innerWeight,\n        x0 + perpX * outerWeight,\n        y0 + perpY * outerWeight,\n        verts,\n        true\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n    }\n  }\n  verts.push(\n    x0 - perpX * innerWeight,\n    y0 - perpY * innerWeight\n  );\n  verts.push(\n    x0 + perpX * outerWeight,\n    y0 + perpY * outerWeight\n  );\n  for (let i = 1; i < length - 1; ++i) {\n    x0 = points[(i - 1) * 2];\n    y0 = points[(i - 1) * 2 + 1];\n    x1 = points[i * 2];\n    y1 = points[i * 2 + 1];\n    x2 = points[(i + 1) * 2];\n    y2 = points[(i + 1) * 2 + 1];\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n    dist = Math.sqrt(perpX * perpX + perpY * perpY);\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n    perp1x = -(y1 - y2);\n    perp1y = x1 - x2;\n    dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);\n    perp1x /= dist;\n    perp1y /= dist;\n    perp1x *= width;\n    perp1y *= width;\n    const dx0 = x1 - x0;\n    const dy0 = y0 - y1;\n    const dx1 = x1 - x2;\n    const dy1 = y2 - y1;\n    const dot = dx0 * dx1 + dy0 * dy1;\n    const cross = dy0 * dx1 - dy1 * dx0;\n    const clockwise = cross < 0;\n    if (Math.abs(cross) < 1e-3 * Math.abs(dot)) {\n      verts.push(\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight\n      );\n      verts.push(\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight\n      );\n      if (dot >= 0) {\n        if (style.join === \"round\") {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n        } else {\n          indexCount += 2;\n        }\n        verts.push(\n          x1 - perp1x * outerWeight,\n          y1 - perp1y * outerWeight\n        );\n        verts.push(\n          x1 + perp1x * innerWeight,\n          y1 + perp1y * innerWeight\n        );\n      }\n      continue;\n    }\n    const c1 = (-perpX + x0) * (-perpY + y1) - (-perpX + x1) * (-perpY + y0);\n    const c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);\n    const px = (dx0 * c2 - dx1 * c1) / cross;\n    const py = (dy1 * c1 - dy0 * c2) / cross;\n    const pDist = (px - x1) * (px - x1) + (py - y1) * (py - y1);\n    const imx = x1 + (px - x1) * innerWeight;\n    const imy = y1 + (py - y1) * innerWeight;\n    const omx = x1 - (px - x1) * outerWeight;\n    const omy = y1 - (py - y1) * outerWeight;\n    const smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);\n    const insideWeight = clockwise ? innerWeight : outerWeight;\n    const smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;\n    const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n    if (insideMiterOk) {\n      if (style.join === \"bevel\" || pDist / widthSquared > miterLimitSquared) {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n        indexCount += 2;\n      } else if (style.join === \"round\") {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 4;\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n      } else {\n        verts.push(imx, imy);\n        verts.push(omx, omy);\n      }\n    } else {\n      verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n      verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n      if (style.join === \"round\") {\n        if (clockwise) {\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 2;\n        } else {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 2;\n        }\n      } else if (style.join === \"miter\" && pDist / widthSquared <= miterLimitSquared) {\n        if (clockwise) {\n          verts.push(omx, omy);\n          verts.push(omx, omy);\n        } else {\n          verts.push(imx, imy);\n          verts.push(imx, imy);\n        }\n        indexCount += 2;\n      }\n      verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n      verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n      indexCount += 2;\n    }\n  }\n  x0 = points[(length - 2) * 2];\n  y0 = points[(length - 2) * 2 + 1];\n  x1 = points[(length - 1) * 2];\n  y1 = points[(length - 1) * 2 + 1];\n  perpX = -(y0 - y1);\n  perpY = x0 - x1;\n  dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n  verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x1 - perpX * (innerWeight - outerWeight) * 0.5,\n        y1 - perpY * (innerWeight - outerWeight) * 0.5,\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight,\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight,\n        verts,\n        false\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n    }\n  }\n  const eps2 = curveEps * curveEps;\n  for (let i = indexStart; i < indexCount + indexStart - 2; ++i) {\n    x0 = verts[i * 2];\n    y0 = verts[i * 2 + 1];\n    x1 = verts[(i + 1) * 2];\n    y1 = verts[(i + 1) * 2 + 1];\n    x2 = verts[(i + 2) * 2];\n    y2 = verts[(i + 2) * 2 + 1];\n    if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {\n      continue;\n    }\n    indices.push(i, i + 1, i + 2);\n  }\n}\n\nexport { buildLine };\n//# sourceMappingURL=buildLine.mjs.map\n","\nexport default function earcut(data, holeIndices, dim = 2) {\n\n    const hasHoles = holeIndices && holeIndices.length;\n    const outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n    let outerNode = linkedList(data, 0, outerLen, dim, true);\n    const triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    let minX, minY, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = data[0];\n        minY = data[1];\n        let maxX = minX;\n        let maxY = minY;\n\n        for (let i = dim; i < outerLen; i += dim) {\n            const x = data[i];\n            const y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    let last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (let i = start; i < end; i += dim) last = insertNode(i / dim | 0, data[i], data[i + 1], last);\n    } else {\n        for (let i = end - dim; i >= start; i -= dim) last = insertNode(i / dim | 0, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    let p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    let stop = ear;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        const prev = ear.prev;\n        const next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            triangles.push(prev.i, ear.i, next.i); // cut off the triangle\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    const a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    const ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox\n    const x0 = Math.min(ax, bx, cx),\n        y0 = Math.min(ay, by, cy),\n        x1 = Math.max(ax, bx, cx),\n        y1 = Math.max(ay, by, cy);\n\n    let p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    const a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    const ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox\n    const x0 = Math.min(ax, bx, cx),\n        y0 = Math.min(ay, by, cy),\n        x1 = Math.max(ax, bx, cx),\n        y1 = Math.max(ay, by, cy);\n\n    // z-order range for the current triangle bbox;\n    const minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    let p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles) {\n    let p = start;\n    do {\n        const a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i, p.i, b.i);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    let a = start;\n    do {\n        let b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                let c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    const queue = [];\n\n    for (let i = 0, len = holeIndices.length; i < len; i++) {\n        const start = holeIndices[i] * dim;\n        const end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        const list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareXYSlope);\n\n    // process holes from left to right\n    for (let i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareXYSlope(a, b) {\n    let result = a.x - b.x;\n    // when the left-most point of 2 holes meet at a vertex, sort the holes counterclockwise so that when we find\n    // the bridge to the outer shell is always the point that they meet at.\n    if (result === 0) {\n        result = a.y - b.y;\n        if (result === 0) {\n            const aSlope = (a.next.y - a.y) / (a.next.x - a.x);\n            const bSlope = (b.next.y - b.y) / (b.next.x - b.x);\n            result = aSlope - bSlope;\n        }\n    }\n    return result;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole(hole, outerNode) {\n    const bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    const bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    let p = outerNode;\n    const hx = hole.x;\n    const hy = hole.y;\n    let qx = -Infinity;\n    let m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    // unless they intersect at a vertex, then choose the vertex\n    if (equals(hole, p)) return p;\n    do {\n        if (equals(hole, p.next)) return p.next;\n        else if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            const x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    const stop = m;\n    const mx = m.x;\n    const my = m.y;\n    let tanMin = Infinity;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            const tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    let p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    let numMerges;\n    let inSize = 1;\n\n    do {\n        let p = list;\n        let e;\n        list = null;\n        let tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            let q = p;\n            let pSize = 0;\n            for (let i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            let qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    let p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a point lies within a convex triangle but false if its equal to the first point of the triangle\nfunction pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, px, py) {\n    return !(ax === px && ay === py) && pointInTriangle(ax, ay, bx, by, cx, cy, px, py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // doesn't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    const o1 = sign(area(p1, q1, p2));\n    const o2 = sign(area(p1, q1, q2));\n    const o3 = sign(area(p2, q2, p1));\n    const o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    let p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    let p = a;\n    let inside = false;\n    const px = (a.x + b.x) / 2;\n    const py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    const a2 = createNode(a.i, a.x, a.y),\n        b2 = createNode(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    const p = createNode(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction createNode(i, x, y) {\n    return {\n        i, // vertex index in coordinates array\n        x, y, // vertex coordinates\n        prev: null, // previous and next vertex nodes in a polygon ring\n        next: null,\n        z: 0, // z-order curve value\n        prevZ: null, // previous and next nodes in z-order\n        nextZ: null,\n        steiner: false // indicates whether this is a steiner point\n    };\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nexport function deviation(data, holeIndices, dim, triangles) {\n    const hasHoles = holeIndices && holeIndices.length;\n    const outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    let polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (let i = 0, len = holeIndices.length; i < len; i++) {\n            const start = holeIndices[i] * dim;\n            const end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    let trianglesArea = 0;\n    for (let i = 0; i < triangles.length; i += 3) {\n        const a = triangles[i] * dim;\n        const b = triangles[i + 1] * dim;\n        const c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n}\n\nfunction signedArea(data, start, end, dim) {\n    let sum = 0;\n    for (let i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nexport function flatten(data) {\n    const vertices = [];\n    const holes = [];\n    const dimensions = data[0][0].length;\n    let holeIndex = 0;\n    let prevLen = 0;\n\n    for (const ring of data) {\n        for (const p of ring) {\n            for (let d = 0; d < dimensions; d++) vertices.push(p[d]);\n        }\n        if (prevLen) {\n            holeIndex += prevLen;\n            holes.push(holeIndex);\n        }\n        prevLen = ring.length;\n    }\n    return {vertices, holes, dimensions};\n}\n","import earcutModule from 'earcut';\nexport { default as EventEmitter } from 'eventemitter3';\n\n\"use strict\";\nconst earcut = earcutModule.default || earcutModule;\n\nexport { earcut };\n//# sourceMappingURL=utils.mjs.map\n","import { earcut } from '../../../../utils/utils.mjs';\n\n\"use strict\";\nfunction triangulateWithHoles(points, holes, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n  const triangles = earcut(points, holes, 2);\n  if (!triangles) {\n    return;\n  }\n  for (let i = 0; i < triangles.length; i += 3) {\n    indices[indicesOffset++] = triangles[i] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 1] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 2] + verticesOffset;\n  }\n  let index = verticesOffset * verticesStride;\n  for (let i = 0; i < points.length; i += 2) {\n    vertices[index] = points[i];\n    vertices[index + 1] = points[i + 1];\n    index += verticesStride;\n  }\n}\n\nexport { triangulateWithHoles };\n//# sourceMappingURL=triangulateWithHoles.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { triangulateWithHoles } from '../utils/triangulateWithHoles.mjs';\n\n\"use strict\";\nconst emptyArray = [];\nconst buildPolygon = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"polygon\"\n  },\n  build(shape, points) {\n    for (let i = 0; i < shape.points.length; i++) {\n      points[i] = shape.points[i];\n    }\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n  }\n};\n\nexport { buildPolygon };\n//# sourceMappingURL=buildPolygon.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildRectangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"rectangle\"\n  },\n  build(shape, points) {\n    const rectData = shape;\n    const x = rectData.x;\n    const y = rectData.y;\n    const width = rectData.width;\n    const height = rectData.height;\n    if (!(width > 0 && height > 0)) {\n      return false;\n    }\n    points[0] = x;\n    points[1] = y;\n    points[2] = x + width;\n    points[3] = y;\n    points[4] = x + width;\n    points[5] = y + height;\n    points[6] = x;\n    points[7] = y + height;\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[6];\n    vertices[verticesOffset + count + 1] = points[7];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    count += verticesStride;\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 3;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildRectangle };\n//# sourceMappingURL=buildRectangle.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildTriangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"triangle\"\n  },\n  build(shape, points) {\n    points[0] = shape.x;\n    points[1] = shape.y;\n    points[2] = shape.x2;\n    points[3] = shape.y2;\n    points[4] = shape.x3;\n    points[5] = shape.y3;\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildTriangle };\n//# sourceMappingURL=buildTriangle.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\n\n\"use strict\";\nconst tempTextureMatrix = new Matrix();\nconst tempRect = new Rectangle();\nfunction generateTextureMatrix(out, style, shape, matrix) {\n  const textureMatrix = style.matrix ? out.copyFrom(style.matrix).invert() : out.identity();\n  if (style.textureSpace === \"local\") {\n    const bounds = shape.getBounds(tempRect);\n    if (style.width) {\n      bounds.pad(style.width);\n    }\n    const { x: tx, y: ty } = bounds;\n    const sx = 1 / bounds.width;\n    const sy = 1 / bounds.height;\n    const mTx = -tx * sx;\n    const mTy = -ty * sy;\n    const a1 = textureMatrix.a;\n    const b1 = textureMatrix.b;\n    const c1 = textureMatrix.c;\n    const d1 = textureMatrix.d;\n    textureMatrix.a *= sx;\n    textureMatrix.b *= sx;\n    textureMatrix.c *= sy;\n    textureMatrix.d *= sy;\n    textureMatrix.tx = mTx * a1 + mTy * c1 + textureMatrix.tx;\n    textureMatrix.ty = mTx * b1 + mTy * d1 + textureMatrix.ty;\n  } else {\n    textureMatrix.translate(style.texture.frame.x, style.texture.frame.y);\n    textureMatrix.scale(1 / style.texture.source.width, 1 / style.texture.source.height);\n  }\n  const sourceStyle = style.texture.source.style;\n  if (!(style.fill instanceof FillGradient) && sourceStyle.addressMode === \"clamp-to-edge\") {\n    sourceStyle.addressMode = \"repeat\";\n    sourceStyle.update();\n  }\n  if (matrix) {\n    textureMatrix.append(tempTextureMatrix.copyFrom(matrix).invert());\n  }\n  return textureMatrix;\n}\n\nexport { generateTextureMatrix };\n//# sourceMappingURL=generateTextureFillMatrix.mjs.map\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { buildUvs, buildSimpleUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { BatchableGraphics } from '../BatchableGraphics.mjs';\nimport { buildCircle, buildEllipse, buildRoundedRectangle } from '../buildCommands/buildCircle.mjs';\nimport { buildLine } from '../buildCommands/buildLine.mjs';\nimport { buildPixelLine } from '../buildCommands/buildPixelLine.mjs';\nimport { buildPolygon } from '../buildCommands/buildPolygon.mjs';\nimport { buildRectangle } from '../buildCommands/buildRectangle.mjs';\nimport { buildTriangle } from '../buildCommands/buildTriangle.mjs';\nimport { generateTextureMatrix } from './generateTextureFillMatrix.mjs';\nimport { triangulateWithHoles } from './triangulateWithHoles.mjs';\n\n\"use strict\";\nconst shapeBuilders = {};\nextensions.handleByMap(ExtensionType.ShapeBuilder, shapeBuilders);\nextensions.add(buildRectangle, buildPolygon, buildTriangle, buildCircle, buildEllipse, buildRoundedRectangle);\nconst tempRect = new Rectangle();\nconst tempTextureMatrix = new Matrix();\nfunction buildContextBatches(context, gpuContext) {\n  const { geometryData, batches } = gpuContext;\n  batches.length = 0;\n  geometryData.indices.length = 0;\n  geometryData.vertices.length = 0;\n  geometryData.uvs.length = 0;\n  for (let i = 0; i < context.instructions.length; i++) {\n    const instruction = context.instructions[i];\n    if (instruction.action === \"texture\") {\n      addTextureToGeometryData(instruction.data, batches, geometryData);\n    } else if (instruction.action === \"fill\" || instruction.action === \"stroke\") {\n      const isStroke = instruction.action === \"stroke\";\n      const shapePath = instruction.data.path.shapePath;\n      const style = instruction.data.style;\n      const hole = instruction.data.hole;\n      if (isStroke && hole) {\n        addShapePathToGeometryData(hole.shapePath, style, true, batches, geometryData);\n      }\n      if (hole) {\n        shapePath.shapePrimitives[shapePath.shapePrimitives.length - 1].holes = hole.shapePath.shapePrimitives;\n      }\n      addShapePathToGeometryData(shapePath, style, isStroke, batches, geometryData);\n    }\n  }\n}\nfunction addTextureToGeometryData(data, batches, geometryData) {\n  const points = [];\n  const build = shapeBuilders.rectangle;\n  const rect = tempRect;\n  rect.x = data.dx;\n  rect.y = data.dy;\n  rect.width = data.dw;\n  rect.height = data.dh;\n  const matrix = data.transform;\n  if (!build.build(rect, points)) {\n    return;\n  }\n  const { vertices, uvs, indices } = geometryData;\n  const indexOffset = indices.length;\n  const vertOffset = vertices.length / 2;\n  if (matrix) {\n    transformVertices(points, matrix);\n  }\n  build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n  const texture = data.image;\n  const textureUvs = texture.uvs;\n  uvs.push(\n    textureUvs.x0,\n    textureUvs.y0,\n    textureUvs.x1,\n    textureUvs.y1,\n    textureUvs.x3,\n    textureUvs.y3,\n    textureUvs.x2,\n    textureUvs.y2\n  );\n  const graphicsBatch = BigPool.get(BatchableGraphics);\n  graphicsBatch.indexOffset = indexOffset;\n  graphicsBatch.indexSize = indices.length - indexOffset;\n  graphicsBatch.attributeOffset = vertOffset;\n  graphicsBatch.attributeSize = vertices.length / 2 - vertOffset;\n  graphicsBatch.baseColor = data.style;\n  graphicsBatch.alpha = data.alpha;\n  graphicsBatch.texture = texture;\n  graphicsBatch.geometryData = geometryData;\n  batches.push(graphicsBatch);\n}\nfunction addShapePathToGeometryData(shapePath, style, isStroke, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  shapePath.shapePrimitives.forEach(({ shape, transform: matrix, holes }) => {\n    const points = [];\n    const build = shapeBuilders[shape.type];\n    if (!build.build(shape, points)) {\n      return;\n    }\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n    let topology = \"triangle-list\";\n    if (matrix) {\n      transformVertices(points, matrix);\n    }\n    if (!isStroke) {\n      if (holes) {\n        const holeIndices = [];\n        const otherPoints = points.slice();\n        const holeArrays = getHoleArrays(holes);\n        holeArrays.forEach((holePoints) => {\n          holeIndices.push(otherPoints.length / 2);\n          otherPoints.push(...holePoints);\n        });\n        triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n      } else {\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n      }\n    } else {\n      const close = shape.closePath ?? true;\n      const lineStyle = style;\n      if (!lineStyle.pixelLine) {\n        buildLine(points, lineStyle, false, close, vertices, indices);\n      } else {\n        buildPixelLine(points, close, vertices, indices);\n        topology = \"line-list\";\n      }\n    }\n    const uvsOffset = uvs.length / 2;\n    const texture = style.texture;\n    if (texture !== Texture.WHITE) {\n      const textureMatrix = generateTextureMatrix(tempTextureMatrix, style, shape, matrix);\n      buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, vertices.length / 2 - vertOffset, textureMatrix);\n    } else {\n      buildSimpleUvs(uvs, uvsOffset, 2, vertices.length / 2 - vertOffset);\n    }\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n    graphicsBatch.attributeOffset = vertOffset;\n    graphicsBatch.attributeSize = vertices.length / 2 - vertOffset;\n    graphicsBatch.baseColor = style.color;\n    graphicsBatch.alpha = style.alpha;\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n    graphicsBatch.topology = topology;\n    batches.push(graphicsBatch);\n  });\n}\nfunction getHoleArrays(holePrimitives) {\n  const holeArrays = [];\n  for (let k = 0; k < holePrimitives.length; k++) {\n    const holePrimitive = holePrimitives[k].shape;\n    const holePoints = [];\n    const holeBuilder = shapeBuilders[holePrimitive.type];\n    if (holeBuilder.build(holePrimitive, holePoints)) {\n      holeArrays.push(holePoints);\n    }\n  }\n  return holeArrays;\n}\n\nexport { buildContextBatches, shapeBuilders };\n//# sourceMappingURL=buildContextBatches.mjs.map\n","import { closePointEps } from '../const.mjs';\n\n\"use strict\";\nfunction buildPixelLine(points, closed, vertices, indices) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const fx = points[0];\n  const fy = points[1];\n  const lx = points[points.length - 2];\n  const ly = points[points.length - 1];\n  const closePath = closed || Math.abs(fx - lx) < eps && Math.abs(fy - ly) < eps;\n  const verts = vertices;\n  const length = points.length / 2;\n  const indexStart = verts.length / 2;\n  for (let i = 0; i < length; i++) {\n    verts.push(points[i * 2]);\n    verts.push(points[i * 2 + 1]);\n  }\n  for (let i = 0; i < length - 1; i++) {\n    indices.push(indexStart + i, indexStart + i + 1);\n  }\n  if (closePath) {\n    indices.push(indexStart + length - 1, indexStart);\n  }\n}\n\nexport { buildPixelLine };\n//# sourceMappingURL=buildPixelLine.mjs.map\n","\"use strict\";\nfunction getOrientationOfPoints(points) {\n  const m = points.length;\n  if (m < 6) {\n    return 1;\n  }\n  let area = 0;\n  for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n    const x2 = points[i];\n    const y2 = points[i + 1];\n    area += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  if (area < 0) {\n    return -1;\n  }\n  return 1;\n}\n\nexport { getOrientationOfPoints };\n//# sourceMappingURL=getOrientationOfPoints.mjs.map\n","\"use strict\";\nfunction buildUvs(vertices, verticesStride, verticesOffset, uvs, uvsOffset, uvsStride, size, matrix = null) {\n  let index = 0;\n  verticesOffset *= verticesStride;\n  uvsOffset *= uvsStride;\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  while (index < size) {\n    const x = vertices[verticesOffset];\n    const y = vertices[verticesOffset + 1];\n    uvs[uvsOffset] = a * x + c * y + tx;\n    uvs[uvsOffset + 1] = b * x + d * y + ty;\n    uvsOffset += uvsStride;\n    verticesOffset += verticesStride;\n    index++;\n  }\n}\nfunction buildSimpleUvs(uvs, uvsOffset, uvsStride, size) {\n  let index = 0;\n  uvsOffset *= uvsStride;\n  while (index < size) {\n    uvs[uvsOffset] = 0;\n    uvs[uvsOffset + 1] = 0;\n    uvsOffset += uvsStride;\n    index++;\n  }\n}\n\nexport { buildSimpleUvs, buildUvs };\n//# sourceMappingURL=buildUvs.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { DefaultBatcher } from '../../../rendering/batcher/shared/DefaultBatcher.mjs';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { deprecation, v8_3_4 } from '../../../utils/logging/deprecation.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { buildContextBatches } from './utils/buildContextBatches.mjs';\n\n\"use strict\";\nclass GpuGraphicsContext {\n  constructor() {\n    this.batches = [];\n    this.geometryData = {\n      vertices: [],\n      uvs: [],\n      indices: []\n    };\n  }\n}\nclass GraphicsContextRenderData {\n  constructor() {\n    this.instructions = new InstructionSet();\n  }\n  init(maxTextures) {\n    this.batcher = new DefaultBatcher({\n      maxTextures\n    });\n    this.instructions.reset();\n  }\n  /**\n   * @deprecated since version 8.0.0\n   * Use `batcher.geometry` instead.\n   * @see {Batcher#geometry}\n   */\n  get geometry() {\n    deprecation(v8_3_4, \"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead.\");\n    return this.batcher.geometry;\n  }\n  destroy() {\n    this.batcher.destroy();\n    this.instructions.destroy();\n    this.batcher = null;\n    this.instructions = null;\n  }\n}\nconst _GraphicsContextSystem = class _GraphicsContextSystem {\n  constructor(renderer) {\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    this._gpuContextHash = {};\n    // used for non-batchable graphics\n    this._graphicsDataContextHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    renderer.renderableGC.addManagedHash(this, \"_gpuContextHash\");\n    renderer.renderableGC.addManagedHash(this, \"_graphicsDataContextHash\");\n  }\n  /**\n   * Runner init called, update the default options\n   * @ignore\n   */\n  init(options) {\n    _GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness ?? _GraphicsContextSystem.defaultOptions.bezierSmoothness;\n  }\n  /**\n   * Returns the render data for a given GraphicsContext.\n   * @param context - The GraphicsContext to get the render data for.\n   * @internal\n   */\n  getContextRenderData(context) {\n    return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n  }\n  /**\n   * Updates the GPU context for a given GraphicsContext.\n   * If the context is dirty, it will rebuild the batches and geometry data.\n   * @param context - The GraphicsContext to update.\n   * @returns The updated GpuGraphicsContext.\n   * @internal\n   */\n  updateGpuContext(context) {\n    let gpuContext = this._gpuContextHash[context.uid] || this._initContext(context);\n    if (context.dirty) {\n      if (gpuContext) {\n        this._cleanGraphicsContextData(context);\n      } else {\n        gpuContext = this._initContext(context);\n      }\n      buildContextBatches(context, gpuContext);\n      const batchMode = context.batchMode;\n      if (context.customShader || batchMode === \"no-batch\") {\n        gpuContext.isBatchable = false;\n      } else if (batchMode === \"auto\") {\n        gpuContext.isBatchable = gpuContext.geometryData.vertices.length < 400;\n      } else {\n        gpuContext.isBatchable = true;\n      }\n      context.dirty = false;\n    }\n    return gpuContext;\n  }\n  /**\n   * Returns the GpuGraphicsContext for a given GraphicsContext.\n   * If it does not exist, it will initialize a new one.\n   * @param context - The GraphicsContext to get the GpuGraphicsContext for.\n   * @returns The GpuGraphicsContext for the given GraphicsContext.\n   * @internal\n   */\n  getGpuContext(context) {\n    return this._gpuContextHash[context.uid] || this._initContext(context);\n  }\n  _initContextRenderData(context) {\n    const graphicsData = BigPool.get(GraphicsContextRenderData, {\n      maxTextures: this._renderer.limits.maxBatchableTextures\n    });\n    const { batches, geometryData } = this._gpuContextHash[context.uid];\n    const vertexSize = geometryData.vertices.length;\n    const indexSize = geometryData.indices.length;\n    for (let i = 0; i < batches.length; i++) {\n      batches[i].applyTransform = false;\n    }\n    const batcher = graphicsData.batcher;\n    batcher.ensureAttributeBuffer(vertexSize);\n    batcher.ensureIndexBuffer(indexSize);\n    batcher.begin();\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batcher.add(batch);\n    }\n    batcher.finish(graphicsData.instructions);\n    const geometry = batcher.geometry;\n    geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n    geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n    const drawBatches = batcher.batches;\n    for (let i = 0; i < drawBatches.length; i++) {\n      const batch = drawBatches[i];\n      batch.bindGroup = getTextureBatchBindGroup(\n        batch.textures.textures,\n        batch.textures.count,\n        this._renderer.limits.maxBatchableTextures\n      );\n    }\n    this._graphicsDataContextHash[context.uid] = graphicsData;\n    return graphicsData;\n  }\n  _initContext(context) {\n    const gpuContext = new GpuGraphicsContext();\n    gpuContext.context = context;\n    this._gpuContextHash[context.uid] = gpuContext;\n    context.on(\"destroy\", this.onGraphicsContextDestroy, this);\n    return this._gpuContextHash[context.uid];\n  }\n  onGraphicsContextDestroy(context) {\n    this._cleanGraphicsContextData(context);\n    context.off(\"destroy\", this.onGraphicsContextDestroy, this);\n    this._gpuContextHash[context.uid] = null;\n  }\n  _cleanGraphicsContextData(context) {\n    const gpuContext = this._gpuContextHash[context.uid];\n    if (!gpuContext.isBatchable) {\n      if (this._graphicsDataContextHash[context.uid]) {\n        BigPool.return(this.getContextRenderData(context));\n        this._graphicsDataContextHash[context.uid] = null;\n      }\n    }\n    if (gpuContext.batches) {\n      gpuContext.batches.forEach((batch) => {\n        BigPool.return(batch);\n      });\n    }\n  }\n  destroy() {\n    for (const i in this._gpuContextHash) {\n      if (this._gpuContextHash[i]) {\n        this.onGraphicsContextDestroy(this._gpuContextHash[i].context);\n      }\n    }\n  }\n};\n/** @ignore */\n_GraphicsContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"graphicsContext\"\n};\n/** The default options for the GraphicsContextSystem. */\n_GraphicsContextSystem.defaultOptions = {\n  /**\n   * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n   * @default 0.5\n   */\n  bezierSmoothness: 0.5\n};\nlet GraphicsContextSystem = _GraphicsContextSystem;\n\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem };\n//# sourceMappingURL=GraphicsContextSystem.mjs.map\n","import { GlProgram } from '../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../rendering/renderers/shared/shader/Shader.mjs';\nimport { State } from '../rendering/renderers/shared/state/State.mjs';\n\n\"use strict\";\nconst _Filter = class _Filter extends Shader {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     */\n    this._state = State.for2d();\n    this.blendMode = options.blendMode;\n    this.padding = options.padding;\n    if (typeof options.antialias === \"boolean\") {\n      this.antialias = options.antialias ? \"on\" : \"off\";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.clipToViewport = options.clipToViewport;\n    this.addResource(\"uTexture\", 0, 1);\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default \"normal\"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/** The default filter settings */\n_Filter.defaultOptions = {\n  blendMode: \"normal\",\n  resolution: 1,\n  padding: 0,\n  antialias: \"off\",\n  blendRequired: false,\n  clipToViewport: true\n};\nlet Filter = _Filter;\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","export { default as EventEmitter } from 'eventemitter3';\n\n\"use strict\";\nconst DATA_URI = /^\\s*data:(?:([\\w-]+)\\/([\\w+.-]+))?(?:;charset=([\\w-]+))?(?:;(base64))?,(.*)/i;\nconst VERSION = \"8.13.2\";\n\nexport { DATA_URI, VERSION };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction squaredDistanceToLineSegment(x, y, x1, y1, x2, y2) {\n  const a = x - x1;\n  const b = y - y1;\n  const c = x2 - x1;\n  const d = y2 - y1;\n  const dot = a * c + b * d;\n  const lenSq = c * c + d * d;\n  let param = -1;\n  if (lenSq !== 0) {\n    param = dot / lenSq;\n  }\n  let xx;\n  let yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * c;\n    yy = y1 + param * d;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return dx * dx + dy * dy;\n}\n\nexport { squaredDistanceToLineSegment };\n//# sourceMappingURL=squaredDistanceToLineSegment.mjs.map\n","import { deprecation } from '../../utils/logging/deprecation.mjs';\nimport { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment.mjs';\nimport { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nlet tempRect;\nlet tempRect2;\nclass Polygon {\n  /**\n   * @param points - This can be an array of Points\n   *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n   *  the arguments passed can be all the points of the polygon e.g.\n   *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n   *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n   */\n  constructor(...points) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Polygon([0, 0, 100, 0, 50, 100]);\n     * console.log(shape.type); // 'polygon'\n     *\n     * // Use in type guards\n     * if (shape.type === 'polygon') {\n     *     // TypeScript knows this is a Polygon\n     *     console.log(shape.points.length);\n     * }\n     * ```\n     * @readonly\n     * @default 'polygon'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"polygon\";\n    let flat = Array.isArray(points[0]) ? points[0] : points;\n    if (typeof flat[0] !== \"number\") {\n      const p = [];\n      for (let i = 0, il = flat.length; i < il; i++) {\n        p.push(flat[i].x, flat[i].y);\n      }\n      flat = p;\n    }\n    this.points = flat;\n    this.closePath = true;\n  }\n  /**\n   * Determines whether the polygon's points are arranged in a clockwise direction.\n   * Uses the shoelace formula (surveyor's formula) to calculate the signed area.\n   *\n   * A positive area indicates clockwise winding, while negative indicates counter-clockwise.\n   *\n   * The formula sums up the cross products of adjacent vertices:\n   * For each pair of adjacent points (x1,y1) and (x2,y2), we calculate (x1*y2 - x2*y1)\n   * The final sum divided by 2 gives the signed area - positive for clockwise.\n   * @example\n   * ```ts\n   * // Check polygon winding\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * console.log(polygon.isClockwise()); // Check direction\n   *\n   * // Use in path construction\n   * const hole = new Polygon([25, 25, 75, 25, 75, 75, 25, 75]);\n   * if (hole.isClockwise() === shape.isClockwise()) {\n   *     hole.points.reverse(); // Reverse for proper hole winding\n   * }\n   * ```\n   * @returns `true` if the polygon's points are arranged clockwise, `false` if counter-clockwise\n   */\n  isClockwise() {\n    let area = 0;\n    const points = this.points;\n    const length = points.length;\n    for (let i = 0; i < length; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % length];\n      const y2 = points[(i + 3) % length];\n      area += (x2 - x1) * (y2 + y1);\n    }\n    return area < 0;\n  }\n  /**\n   * Checks if this polygon completely contains another polygon.\n   * Used for detecting holes in shapes, like when parsing SVG paths.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const outerSquare = new Polygon([0,0, 100,0, 100,100, 0,100]); // A square\n   * const innerSquare = new Polygon([25,25, 75,25, 75,75, 25,75]); // A smaller square inside\n   *\n   * outerSquare.containsPolygon(innerSquare); // Returns true\n   * innerSquare.containsPolygon(outerSquare); // Returns false\n   * ```\n   * @remarks\n   * - Uses bounds check for quick rejection\n   * - Tests all points for containment\n   * @param polygon - The polygon to test for containment\n   * @returns True if this polygon completely contains the other polygon\n   * @see {@link Polygon.contains} For single point testing\n   * @see {@link Polygon.getBounds} For bounds calculation\n   */\n  containsPolygon(polygon) {\n    const thisBounds = this.getBounds(tempRect);\n    const otherBounds = polygon.getBounds(tempRect2);\n    if (!thisBounds.containsRect(otherBounds)) {\n      return false;\n    }\n    const points = polygon.points;\n    for (let i = 0; i < points.length; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      if (!this.contains(x, y)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  /**\n   * Creates a clone of this polygon.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.points[0] = 10; // Modify first x coordinate\n   * ```\n   * @returns A copy of the polygon\n   * @see {@link Polygon.copyFrom} For copying into existing polygon\n   * @see {@link Polygon.copyTo} For copying to another polygon\n   */\n  clone() {\n    const points = this.points.slice();\n    const polygon = new Polygon(points);\n    polygon.closePath = this.closePath;\n    return polygon;\n  }\n  /**\n   * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n   * Uses raycasting algorithm for point-in-polygon testing.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const isInside = polygon.contains(25, 25); // true\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this polygon\n   * @see {@link Polygon.strokeContains} For checking stroke intersection\n   * @see {@link Polygon.containsPolygon} For polygon-in-polygon testing\n   */\n  contains(x, y) {\n    let inside = false;\n    const length = this.points.length / 2;\n    for (let i = 0, j = length - 1; i < length; j = i++) {\n      const xi = this.points[i * 2];\n      const yi = this.points[i * 2 + 1];\n      const xj = this.points[j * 2];\n      const yj = this.points[j * 2 + 1];\n      const intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const isOnStroke = polygon.strokeContains(25, 25, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = polygon.strokeContains(25, 25, 4, 1);   // Inside\n   * const centerStroke = polygon.strokeContains(25, 25, 4, 0.5); // Centered\n   * const outerStroke = polygon.strokeContains(25, 25, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this polygon's stroke\n   * @see {@link Polygon.contains} For checking fill containment\n   * @see {@link Polygon.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const strokeWidthSquared = strokeWidth * strokeWidth;\n    const rightWidthSquared = strokeWidthSquared * (1 - alignment);\n    const leftWidthSquared = strokeWidthSquared - rightWidthSquared;\n    const { points } = this;\n    const iterationLength = points.length - (this.closePath ? 0 : 2);\n    for (let i = 0; i < iterationLength; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % points.length];\n      const y2 = points[(i + 3) % points.length];\n      const distanceSquared = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n      const sign = Math.sign((x2 - x1) * (y - y1) - (y2 - y1) * (x - x1));\n      if (distanceSquared <= (sign < 0 ? leftWidthSquared : rightWidthSquared)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Returns the framing rectangle of the polygon as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const bounds = polygon.getBounds();\n   * // bounds: x=0, y=0, width=100, height=100\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * polygon.getBounds(rect);\n   * ```\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Polygon.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    const points = this.points;\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      minX = x < minX ? x : minX;\n      maxX = x > maxX ? x : maxX;\n      minY = y < minY ? y : minY;\n      maxY = y > maxY ? y : maxY;\n    }\n    out.x = minX;\n    out.width = maxX - minX;\n    out.y = minY;\n    out.height = maxY - minY;\n    return out;\n  }\n  /**\n   * Copies another polygon to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const target = new Polygon();\n   * target.copyFrom(source);\n   * ```\n   * @param polygon - The polygon to copy from\n   * @returns Returns itself\n   * @see {@link Polygon.copyTo} For copying to another polygon\n   * @see {@link Polygon.clone} For creating new polygon copy\n   */\n  copyFrom(polygon) {\n    this.points = polygon.points.slice();\n    this.closePath = polygon.closePath;\n    return this;\n  }\n  /**\n   * Copies this polygon to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const target = new Polygon();\n   * source.copyTo(target);\n   * ```\n   * @param polygon - The polygon to copy to\n   * @returns Returns given parameter\n   * @see {@link Polygon.copyFrom} For copying from another polygon\n   * @see {@link Polygon.clone} For creating new polygon copy\n   */\n  copyTo(polygon) {\n    polygon.copyFrom(this);\n    return polygon;\n  }\n  toString() {\n    return `[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, \"\")}]`;\n  }\n  /**\n   * Get the last X coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.lastX); // 300\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the last vertex\n   * @see {@link Polygon.lastY} For last Y coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get lastX() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.lastY); // 400\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the last vertex\n   * @see {@link Polygon.lastX} For last X coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get lastY() {\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the last X coordinate of the polygon.\n   * @readonly\n   * @deprecated since 8.11.0, use {@link Polygon.lastX} instead.\n   */\n  get x() {\n    deprecation(\"8.11.0\", \"Polygon.lastX is deprecated, please use Polygon.lastX instead.\");\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon.\n   * @readonly\n   * @deprecated since 8.11.0, use {@link Polygon.lastY} instead.\n   */\n  get y() {\n    deprecation(\"8.11.0\", \"Polygon.y is deprecated, please use Polygon.lastY instead.\");\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the first X coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.x); // 0\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the first vertex\n   * @see {@link Polygon.startY} For first Y coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get startX() {\n    return this.points[0];\n  }\n  /**\n   * Get the first Y coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.y); // 0\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the first vertex\n   * @see {@link Polygon.startX} For first X coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get startY() {\n    return this.points[1];\n  }\n}\n\nexport { Polygon };\n//# sourceMappingURL=Polygon.mjs.map\n","import { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\nimport { TextureStyle } from './TextureStyle.mjs';\n\n\"use strict\";\nlet count = 0;\nclass TexturePoolClass {\n  /**\n   * @param textureOptions - options that will be passed to BaseRenderTexture constructor\n   * @param {SCALE_MODE} [textureOptions.scaleMode] - See {@link SCALE_MODE} for possible values.\n   */\n  constructor(textureOptions) {\n    this._poolKeyHash = /* @__PURE__ */ Object.create(null);\n    this._texturePool = {};\n    this.textureOptions = textureOptions || {};\n    this.enableFullScreen = false;\n    this.textureStyle = new TextureStyle(this.textureOptions);\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   * @param antialias\n   */\n  createTexture(pixelWidth, pixelHeight, antialias) {\n    const textureSource = new TextureSource({\n      ...this.textureOptions,\n      width: pixelWidth,\n      height: pixelHeight,\n      resolution: 1,\n      antialias,\n      autoGarbageCollect: false\n    });\n    return new Texture({\n      source: textureSource,\n      label: `texturePool_${count++}`\n    });\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param frameWidth - The minimum width of the render texture.\n   * @param frameHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @param antialias\n   * @returns The new render texture.\n   */\n  getOptimalTexture(frameWidth, frameHeight, resolution = 1, antialias) {\n    let po2Width = Math.ceil(frameWidth * resolution - 1e-6);\n    let po2Height = Math.ceil(frameHeight * resolution - 1e-6);\n    po2Width = nextPow2(po2Width);\n    po2Height = nextPow2(po2Height);\n    const key = (po2Width << 17) + (po2Height << 1) + (antialias ? 1 : 0);\n    if (!this._texturePool[key]) {\n      this._texturePool[key] = [];\n    }\n    let texture = this._texturePool[key].pop();\n    if (!texture) {\n      texture = this.createTexture(po2Width, po2Height, antialias);\n    }\n    texture.source._resolution = resolution;\n    texture.source.width = po2Width / resolution;\n    texture.source.height = po2Height / resolution;\n    texture.source.pixelWidth = po2Width;\n    texture.source.pixelHeight = po2Height;\n    texture.frame.x = 0;\n    texture.frame.y = 0;\n    texture.frame.width = frameWidth;\n    texture.frame.height = frameHeight;\n    texture.updateUvs();\n    this._poolKeyHash[texture.uid] = key;\n    return texture;\n  }\n  /**\n   * Gets extra texture of the same size as input renderTexture\n   * @param texture - The texture to check what size it is.\n   * @param antialias - Whether to use antialias.\n   * @returns A texture that is a power of two\n   */\n  getSameSizeTexture(texture, antialias = false) {\n    const source = texture.source;\n    return this.getOptimalTexture(texture.width, texture.height, source._resolution, antialias);\n  }\n  /**\n   * Place a render texture back into the pool. Optionally reset the style of the texture to the default texture style.\n   * useful if you modified the style of the texture after getting it from the pool.\n   * @param renderTexture - The renderTexture to free\n   * @param resetStyle - Whether to reset the style of the texture to the default texture style\n   */\n  returnTexture(renderTexture, resetStyle = false) {\n    const key = this._poolKeyHash[renderTexture.uid];\n    if (resetStyle) {\n      renderTexture.source.style = this.textureStyle;\n    }\n    this._texturePool[key].push(renderTexture);\n  }\n  /**\n   * Clears the pool.\n   * @param destroyTextures - Destroy all stored textures.\n   */\n  clear(destroyTextures) {\n    destroyTextures = destroyTextures !== false;\n    if (destroyTextures) {\n      for (const i in this._texturePool) {\n        const textures = this._texturePool[i];\n        if (textures) {\n          for (let j = 0; j < textures.length; j++) {\n            textures[j].destroy(true);\n          }\n        }\n      }\n    }\n    this._texturePool = {};\n  }\n}\nconst TexturePool = new TexturePoolClass();\nGlobalResourceRegistry.register(TexturePool);\n\nexport { TexturePool, TexturePoolClass };\n//# sourceMappingURL=TexturePool.mjs.map\n","import { getTestContext } from '../../../renderers/gl/shader/program/getTestContext.mjs';\nimport { checkMaxIfStatementsInShader } from './checkMaxIfStatementsInShader.mjs';\n\n\"use strict\";\nlet maxTexturesPerBatchCache = null;\nfunction getMaxTexturesPerBatch() {\n  if (maxTexturesPerBatchCache)\n    return maxTexturesPerBatchCache;\n  const gl = getTestContext();\n  maxTexturesPerBatchCache = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n  maxTexturesPerBatchCache = checkMaxIfStatementsInShader(\n    maxTexturesPerBatchCache,\n    gl\n  );\n  gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n  return maxTexturesPerBatchCache;\n}\n\nexport { getMaxTexturesPerBatch };\n//# sourceMappingURL=maxRecommendedTextures.mjs.map\n","\"use strict\";\nclass BatchTextureArray {\n  constructor() {\n    /** Respective locations for textures. */\n    this.ids = /* @__PURE__ */ Object.create(null);\n    this.textures = [];\n    this.count = 0;\n  }\n  /** Clear the textures and their locations. */\n  clear() {\n    for (let i = 0; i < this.count; i++) {\n      const t = this.textures[i];\n      this.textures[i] = null;\n      this.ids[t.uid] = null;\n    }\n    this.count = 0;\n  }\n}\n\nexport { BatchTextureArray };\n//# sourceMappingURL=BatchTextureArray.mjs.map\n","import { uid } from '../../../utils/data/uid.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { deprecation } from '../../../utils/logging/deprecation.mjs';\nimport { GlobalResourceRegistry } from '../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy.mjs';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures.mjs';\nimport { BatchTextureArray } from './BatchTextureArray.mjs';\n\n\"use strict\";\nclass Batch {\n  constructor() {\n    this.renderPipeId = \"batch\";\n    this.action = \"startBatch\";\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n    // for drawing..\n    this.start = 0;\n    this.size = 0;\n    this.textures = new BatchTextureArray();\n    this.blendMode = \"normal\";\n    this.topology = \"triangle-strip\";\n    this.canBundle = true;\n  }\n  destroy() {\n    this.textures = null;\n    this.gpuBindGroup = null;\n    this.bindGroup = null;\n    this.batcher = null;\n  }\n}\nconst batchPool = [];\nlet batchPoolIndex = 0;\nGlobalResourceRegistry.register({\n  clear: () => {\n    if (batchPool.length > 0) {\n      for (const item of batchPool) {\n        if (item)\n          item.destroy();\n      }\n    }\n    batchPool.length = 0;\n    batchPoolIndex = 0;\n  }\n});\nfunction getBatchFromPool() {\n  return batchPoolIndex > 0 ? batchPool[--batchPoolIndex] : new Batch();\n}\nfunction returnBatchToPool(batch) {\n  batchPool[batchPoolIndex++] = batch;\n}\nlet BATCH_TICK = 0;\nconst _Batcher = class _Batcher {\n  constructor(options) {\n    /** unique id for this batcher */\n    this.uid = uid(\"batcher\");\n    /** Indicates whether the batch data has been modified and needs updating. */\n    this.dirty = true;\n    /** The current index of the batch being processed. */\n    this.batchIndex = 0;\n    /** An array of all batches created during the current rendering process. */\n    this.batches = [];\n    this._elements = [];\n    options = { ..._Batcher.defaultOptions, ...options };\n    if (!options.maxTextures) {\n      deprecation(\"v8.8.0\", \"maxTextures is a required option for Batcher now, please pass it in the options\");\n      options.maxTextures = getMaxTexturesPerBatch();\n    }\n    const { maxTextures, attributesInitialSize, indicesInitialSize } = options;\n    this.attributeBuffer = new ViewableBuffer(attributesInitialSize * 4);\n    this.indexBuffer = new Uint16Array(indicesInitialSize);\n    this.maxTextures = maxTextures;\n  }\n  begin() {\n    this.elementSize = 0;\n    this.elementStart = 0;\n    this.indexSize = 0;\n    this.attributeSize = 0;\n    for (let i = 0; i < this.batchIndex; i++) {\n      returnBatchToPool(this.batches[i]);\n    }\n    this.batchIndex = 0;\n    this._batchIndexStart = 0;\n    this._batchIndexSize = 0;\n    this.dirty = true;\n  }\n  add(batchableObject) {\n    this._elements[this.elementSize++] = batchableObject;\n    batchableObject._indexStart = this.indexSize;\n    batchableObject._attributeStart = this.attributeSize;\n    batchableObject._batcher = this;\n    this.indexSize += batchableObject.indexSize;\n    this.attributeSize += batchableObject.attributeSize * this.vertexSize;\n  }\n  checkAndUpdateTexture(batchableObject, texture) {\n    const textureId = batchableObject._batch.textures.ids[texture._source.uid];\n    if (!textureId && textureId !== 0)\n      return false;\n    batchableObject._textureId = textureId;\n    batchableObject.texture = texture;\n    return true;\n  }\n  updateElement(batchableObject) {\n    this.dirty = true;\n    const attributeBuffer = this.attributeBuffer;\n    if (batchableObject.packAsQuad) {\n      this.packQuadAttributes(\n        batchableObject,\n        attributeBuffer.float32View,\n        attributeBuffer.uint32View,\n        batchableObject._attributeStart,\n        batchableObject._textureId\n      );\n    } else {\n      this.packAttributes(\n        batchableObject,\n        attributeBuffer.float32View,\n        attributeBuffer.uint32View,\n        batchableObject._attributeStart,\n        batchableObject._textureId\n      );\n    }\n  }\n  /**\n   * breaks the batcher. This happens when a batch gets too big,\n   * or we need to switch to a different type of rendering (a filter for example)\n   * @param instructionSet\n   */\n  break(instructionSet) {\n    const elements = this._elements;\n    if (!elements[this.elementStart])\n      return;\n    let batch = getBatchFromPool();\n    let textureBatch = batch.textures;\n    textureBatch.clear();\n    const firstElement = elements[this.elementStart];\n    let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n    let topology = firstElement.topology;\n    if (this.attributeSize * 4 > this.attributeBuffer.size) {\n      this._resizeAttributeBuffer(this.attributeSize * 4);\n    }\n    if (this.indexSize > this.indexBuffer.length) {\n      this._resizeIndexBuffer(this.indexSize);\n    }\n    const f32 = this.attributeBuffer.float32View;\n    const u32 = this.attributeBuffer.uint32View;\n    const indexBuffer = this.indexBuffer;\n    let size = this._batchIndexSize;\n    let start = this._batchIndexStart;\n    let action = \"startBatch\";\n    const maxTextures = this.maxTextures;\n    for (let i = this.elementStart; i < this.elementSize; ++i) {\n      const element = elements[i];\n      elements[i] = null;\n      const texture = element.texture;\n      const source = texture._source;\n      const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n      const breakRequired = blendMode !== adjustedBlendMode || topology !== element.topology;\n      if (source._batchTick === BATCH_TICK && !breakRequired) {\n        element._textureId = source._textureBindLocation;\n        size += element.indexSize;\n        if (element.packAsQuad) {\n          this.packQuadAttributes(\n            element,\n            f32,\n            u32,\n            element._attributeStart,\n            element._textureId\n          );\n          this.packQuadIndex(\n            indexBuffer,\n            element._indexStart,\n            element._attributeStart / this.vertexSize\n          );\n        } else {\n          this.packAttributes(\n            element,\n            f32,\n            u32,\n            element._attributeStart,\n            element._textureId\n          );\n          this.packIndex(\n            element,\n            indexBuffer,\n            element._indexStart,\n            element._attributeStart / this.vertexSize\n          );\n        }\n        element._batch = batch;\n        continue;\n      }\n      source._batchTick = BATCH_TICK;\n      if (textureBatch.count >= maxTextures || breakRequired) {\n        this._finishBatch(\n          batch,\n          start,\n          size - start,\n          textureBatch,\n          blendMode,\n          topology,\n          instructionSet,\n          action\n        );\n        action = \"renderBatch\";\n        start = size;\n        blendMode = adjustedBlendMode;\n        topology = element.topology;\n        batch = getBatchFromPool();\n        textureBatch = batch.textures;\n        textureBatch.clear();\n        ++BATCH_TICK;\n      }\n      element._textureId = source._textureBindLocation = textureBatch.count;\n      textureBatch.ids[source.uid] = textureBatch.count;\n      textureBatch.textures[textureBatch.count++] = source;\n      element._batch = batch;\n      size += element.indexSize;\n      if (element.packAsQuad) {\n        this.packQuadAttributes(\n          element,\n          f32,\n          u32,\n          element._attributeStart,\n          element._textureId\n        );\n        this.packQuadIndex(\n          indexBuffer,\n          element._indexStart,\n          element._attributeStart / this.vertexSize\n        );\n      } else {\n        this.packAttributes(\n          element,\n          f32,\n          u32,\n          element._attributeStart,\n          element._textureId\n        );\n        this.packIndex(\n          element,\n          indexBuffer,\n          element._indexStart,\n          element._attributeStart / this.vertexSize\n        );\n      }\n    }\n    if (textureBatch.count > 0) {\n      this._finishBatch(\n        batch,\n        start,\n        size - start,\n        textureBatch,\n        blendMode,\n        topology,\n        instructionSet,\n        action\n      );\n      start = size;\n      ++BATCH_TICK;\n    }\n    this.elementStart = this.elementSize;\n    this._batchIndexStart = start;\n    this._batchIndexSize = size;\n  }\n  _finishBatch(batch, indexStart, indexSize, textureBatch, blendMode, topology, instructionSet, action) {\n    batch.gpuBindGroup = null;\n    batch.bindGroup = null;\n    batch.action = action;\n    batch.batcher = this;\n    batch.textures = textureBatch;\n    batch.blendMode = blendMode;\n    batch.topology = topology;\n    batch.start = indexStart;\n    batch.size = indexSize;\n    ++BATCH_TICK;\n    this.batches[this.batchIndex++] = batch;\n    instructionSet.add(batch);\n  }\n  finish(instructionSet) {\n    this.break(instructionSet);\n  }\n  /**\n   * Resizes the attribute buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureAttributeBuffer(size) {\n    if (size * 4 <= this.attributeBuffer.size)\n      return;\n    this._resizeAttributeBuffer(size * 4);\n  }\n  /**\n   * Resizes the index buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureIndexBuffer(size) {\n    if (size <= this.indexBuffer.length)\n      return;\n    this._resizeIndexBuffer(size);\n  }\n  _resizeAttributeBuffer(size) {\n    const newSize = Math.max(size, this.attributeBuffer.size * 2);\n    const newArrayBuffer = new ViewableBuffer(newSize);\n    fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n    this.attributeBuffer = newArrayBuffer;\n  }\n  _resizeIndexBuffer(size) {\n    const indexBuffer = this.indexBuffer;\n    let newSize = Math.max(size, indexBuffer.length * 1.5);\n    newSize += newSize % 2;\n    const newIndexBuffer = newSize > 65535 ? new Uint32Array(newSize) : new Uint16Array(newSize);\n    if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT) {\n      for (let i = 0; i < indexBuffer.length; i++) {\n        newIndexBuffer[i] = indexBuffer[i];\n      }\n    } else {\n      fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n    }\n    this.indexBuffer = newIndexBuffer;\n  }\n  packQuadIndex(indexBuffer, index, indicesOffset) {\n    indexBuffer[index] = indicesOffset + 0;\n    indexBuffer[index + 1] = indicesOffset + 1;\n    indexBuffer[index + 2] = indicesOffset + 2;\n    indexBuffer[index + 3] = indicesOffset + 0;\n    indexBuffer[index + 4] = indicesOffset + 2;\n    indexBuffer[index + 5] = indicesOffset + 3;\n  }\n  packIndex(element, indexBuffer, index, indicesOffset) {\n    const indices = element.indices;\n    const size = element.indexSize;\n    const indexOffset = element.indexOffset;\n    const attributeOffset = element.attributeOffset;\n    for (let i = 0; i < size; i++) {\n      indexBuffer[index++] = indicesOffset + indices[i + indexOffset] - attributeOffset;\n    }\n  }\n  destroy() {\n    if (this.batches === null)\n      return;\n    for (let i = 0; i < this.batches.length; i++) {\n      returnBatchToPool(this.batches[i]);\n    }\n    this.batches = null;\n    for (let i = 0; i < this._elements.length; i++) {\n      if (this._elements[i])\n        this._elements[i]._batch = null;\n    }\n    this._elements = null;\n    this.indexBuffer = null;\n    this.attributeBuffer.destroy();\n    this.attributeBuffer = null;\n  }\n};\n_Batcher.defaultOptions = {\n  maxTextures: null,\n  attributesInitialSize: 4,\n  indicesInitialSize: 6\n};\nlet Batcher = _Batcher;\n\nexport { Batch, Batcher };\n//# sourceMappingURL=Batcher.mjs.map\n","import { Buffer } from '../../renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry.mjs';\n\n\"use strict\";\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\nclass BatchGeometry extends Geometry {\n  constructor() {\n    const vertexSize = 6;\n    const attributeBuffer = new Buffer({\n      data: placeHolderBufferData,\n      label: \"attribute-batch-buffer\",\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n      shrinkToFit: false\n    });\n    const indexBuffer = new Buffer({\n      data: placeHolderIndexData,\n      label: \"index-batch-buffer\",\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n      // | BufferUsage.STATIC,\n      shrinkToFit: false\n    });\n    const stride = vertexSize * 4;\n    super({\n      attributes: {\n        aPosition: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 0\n        },\n        aUV: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 2 * 4\n        },\n        aColor: {\n          buffer: attributeBuffer,\n          format: \"unorm8x4\",\n          stride,\n          offset: 4 * 4\n        },\n        aTextureIdAndRound: {\n          buffer: attributeBuffer,\n          format: \"uint16x2\",\n          stride,\n          offset: 5 * 4\n        }\n      },\n      indexBuffer\n    });\n  }\n}\n\nexport { BatchGeometry };\n//# sourceMappingURL=BatchGeometry.mjs.map\n","import { compileHighShaderGlProgram, compileHighShaderGpuProgram } from '../../high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl, colorBit } from '../../high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl, generateTextureBatchBit } from '../../high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBitGl, roundPixelsBit } from '../../high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../renderers/shared/shader/Shader.mjs';\n\n\"use strict\";\nclass DefaultShader extends Shader {\n  constructor(maxTextures) {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"batch\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        roundPixelsBitGl\n      ]\n    });\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"batch\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(maxTextures),\n        roundPixelsBit\n      ]\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n  }\n}\n\nexport { DefaultShader };\n//# sourceMappingURL=DefaultShader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Batcher } from './Batcher.mjs';\nimport { BatchGeometry } from './BatchGeometry.mjs';\nimport { DefaultShader } from './DefaultShader.mjs';\n\n\"use strict\";\nlet defaultShader = null;\nconst _DefaultBatcher = class _DefaultBatcher extends Batcher {\n  constructor(options) {\n    super(options);\n    this.geometry = new BatchGeometry();\n    this.name = _DefaultBatcher.extension.name;\n    /** The size of one attribute. 1 = 32 bit. x, y, u, v, color, textureIdAndRound -> total = 6 */\n    this.vertexSize = 6;\n    defaultShader ?? (defaultShader = new DefaultShader(options.maxTextures));\n    this.shader = defaultShader;\n  }\n  /**\n   * Packs the attributes of a DefaultBatchableMeshElement into the provided views.\n   * @param element - The DefaultBatchableMeshElement to pack.\n   * @param float32View - The Float32Array view to pack into.\n   * @param uint32View - The Uint32Array view to pack into.\n   * @param index - The starting index in the views.\n   * @param textureId - The texture ID to use.\n   */\n  packAttributes(element, float32View, uint32View, index, textureId) {\n    const textureIdAndRound = textureId << 16 | element.roundPixels & 65535;\n    const wt = element.transform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const { positions, uvs } = element;\n    const argb = element.color;\n    const offset = element.attributeOffset;\n    const end = offset + element.attributeSize;\n    for (let i = offset; i < end; i++) {\n      const i2 = i * 2;\n      const x = positions[i2];\n      const y = positions[i2 + 1];\n      float32View[index++] = a * x + c * y + tx;\n      float32View[index++] = d * y + b * x + ty;\n      float32View[index++] = uvs[i2];\n      float32View[index++] = uvs[i2 + 1];\n      uint32View[index++] = argb;\n      uint32View[index++] = textureIdAndRound;\n    }\n  }\n  /**\n   * Packs the attributes of a DefaultBatchableQuadElement into the provided views.\n   * @param element - The DefaultBatchableQuadElement to pack.\n   * @param float32View - The Float32Array view to pack into.\n   * @param uint32View - The Uint32Array view to pack into.\n   * @param index - The starting index in the views.\n   * @param textureId - The texture ID to use.\n   */\n  packQuadAttributes(element, float32View, uint32View, index, textureId) {\n    const texture = element.texture;\n    const wt = element.transform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const bounds = element.bounds;\n    const w0 = bounds.maxX;\n    const w1 = bounds.minX;\n    const h0 = bounds.maxY;\n    const h1 = bounds.minY;\n    const uvs = texture.uvs;\n    const argb = element.color;\n    const textureIdAndRound = textureId << 16 | element.roundPixels & 65535;\n    float32View[index + 0] = a * w1 + c * h1 + tx;\n    float32View[index + 1] = d * h1 + b * w1 + ty;\n    float32View[index + 2] = uvs.x0;\n    float32View[index + 3] = uvs.y0;\n    uint32View[index + 4] = argb;\n    uint32View[index + 5] = textureIdAndRound;\n    float32View[index + 6] = a * w0 + c * h1 + tx;\n    float32View[index + 7] = d * h1 + b * w0 + ty;\n    float32View[index + 8] = uvs.x1;\n    float32View[index + 9] = uvs.y1;\n    uint32View[index + 10] = argb;\n    uint32View[index + 11] = textureIdAndRound;\n    float32View[index + 12] = a * w0 + c * h0 + tx;\n    float32View[index + 13] = d * h0 + b * w0 + ty;\n    float32View[index + 14] = uvs.x2;\n    float32View[index + 15] = uvs.y2;\n    uint32View[index + 16] = argb;\n    uint32View[index + 17] = textureIdAndRound;\n    float32View[index + 18] = a * w1 + c * h0 + tx;\n    float32View[index + 19] = d * h0 + b * w1 + ty;\n    float32View[index + 20] = uvs.x3;\n    float32View[index + 21] = uvs.y3;\n    uint32View[index + 22] = argb;\n    uint32View[index + 23] = textureIdAndRound;\n  }\n};\n/** @ignore */\n_DefaultBatcher.extension = {\n  type: [\n    ExtensionType.Batcher\n  ],\n  name: \"default\"\n};\nlet DefaultBatcher = _DefaultBatcher;\n\nexport { DefaultBatcher };\n//# sourceMappingURL=DefaultBatcher.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern.mjs';\n\n\"use strict\";\nconst PRECISION = 1e5;\nfunction getCanvasFillStyle(fillStyle, context, textMetrics, padding = 0) {\n  if (fillStyle.texture === Texture.WHITE && !fillStyle.fill) {\n    return Color.shared.setValue(fillStyle.color).setAlpha(fillStyle.alpha ?? 1).toHexa();\n  } else if (!fillStyle.fill) {\n    const pattern = context.createPattern(fillStyle.texture.source.resource, \"repeat\");\n    const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n    tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillPattern) {\n    const fillPattern = fillStyle.fill;\n    const pattern = context.createPattern(fillPattern.texture.source.resource, \"repeat\");\n    const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n    tempMatrix.scale(\n      fillPattern.texture.frame.width,\n      fillPattern.texture.frame.height\n    );\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillGradient) {\n    const fillGradient = fillStyle.fill;\n    const isLinear = fillGradient.type === \"linear\";\n    const isLocal = fillGradient.textureSpace === \"local\";\n    let width = 1;\n    let height = 1;\n    if (isLocal && textMetrics) {\n      width = textMetrics.width + padding;\n      height = textMetrics.height + padding;\n    }\n    let gradient;\n    let isNearlyVertical = false;\n    if (isLinear) {\n      const { start, end } = fillGradient;\n      gradient = context.createLinearGradient(\n        start.x * width,\n        start.y * height,\n        end.x * width,\n        end.y * height\n      );\n      isNearlyVertical = Math.abs(end.x - start.x) < Math.abs((end.y - start.y) * 0.1);\n    } else {\n      const { center, innerRadius, outerCenter, outerRadius } = fillGradient;\n      gradient = context.createRadialGradient(\n        center.x * width,\n        center.y * height,\n        innerRadius * width,\n        outerCenter.x * width,\n        outerCenter.y * height,\n        outerRadius * width\n      );\n    }\n    if (isNearlyVertical && isLocal && textMetrics) {\n      const ratio = textMetrics.lineHeight / height;\n      for (let i = 0; i < textMetrics.lines.length; i++) {\n        const start = (i * textMetrics.lineHeight + padding / 2) / height;\n        fillGradient.colorStops.forEach((stop) => {\n          const globalStop = start + stop.offset * ratio;\n          gradient.addColorStop(\n            // fix to 5 decimal places to avoid floating point precision issues\n            Math.floor(globalStop * PRECISION) / PRECISION,\n            Color.shared.setValue(stop.color).toHex()\n          );\n        });\n      }\n    } else {\n      fillGradient.colorStops.forEach((stop) => {\n        gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n      });\n    }\n    return gradient;\n  }\n  warn(\"FillStyle not recognised\", fillStyle);\n  return \"red\";\n}\n\nexport { getCanvasFillStyle };\n//# sourceMappingURL=getCanvasFillStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../graphics/shared/fill/FillPattern.mjs';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext.mjs';\nimport { toFillStyle, toStrokeStyle } from '../graphics/shared/utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst _TextStyle = class _TextStyle extends EventEmitter {\n  constructor(style = {}) {\n    super();\n    /**\n     * Unique identifier for the TextStyle class.\n     * This is used to track instances and ensure uniqueness.\n     * @internal\n     */\n    this.uid = uid(\"textStyle\");\n    /**\n     * Internal tick counter used to track updates and changes.\n     * This is incremented whenever the style is modified, allowing for efficient change detection.\n     * @internal\n     */\n    this._tick = 0;\n    convertV7Tov8Style(style);\n    const fullStyle = { ..._TextStyle.defaultTextStyle, ...style };\n    for (const key in fullStyle) {\n      const thisKey = key;\n      this[thisKey] = fullStyle[key];\n    }\n    this.update();\n    this._tick = 0;\n  }\n  /**\n   * Alignment for multiline text, does not affect single line text.\n   * @type {'left'|'center'|'right'|'justify'}\n   */\n  get align() {\n    return this._align;\n  }\n  set align(value) {\n    this._align = value;\n    this.update();\n  }\n  /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n  get breakWords() {\n    return this._breakWords;\n  }\n  set breakWords(value) {\n    this._breakWords = value;\n    this.update();\n  }\n  /** Set a drop shadow for the text. */\n  get dropShadow() {\n    return this._dropShadow;\n  }\n  set dropShadow(value) {\n    if (value !== null && typeof value === \"object\") {\n      this._dropShadow = this._createProxy({ ..._TextStyle.defaultDropShadow, ...value });\n    } else {\n      this._dropShadow = value ? this._createProxy({ ..._TextStyle.defaultDropShadow }) : null;\n    }\n    this.update();\n  }\n  /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n  get fontFamily() {\n    return this._fontFamily;\n  }\n  set fontFamily(value) {\n    this._fontFamily = value;\n    this.update();\n  }\n  /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n  get fontSize() {\n    return this._fontSize;\n  }\n  set fontSize(value) {\n    if (typeof value === \"string\") {\n      this._fontSize = parseInt(value, 10);\n    } else {\n      this._fontSize = value;\n    }\n    this.update();\n  }\n  /**\n   * The font style.\n   * @type {'normal'|'italic'|'oblique'}\n   */\n  get fontStyle() {\n    return this._fontStyle;\n  }\n  set fontStyle(value) {\n    this._fontStyle = value.toLowerCase();\n    this.update();\n  }\n  /**\n   * The font variant.\n   * @type {'normal'|'small-caps'}\n   */\n  get fontVariant() {\n    return this._fontVariant;\n  }\n  set fontVariant(value) {\n    this._fontVariant = value;\n    this.update();\n  }\n  /**\n   * The font weight.\n   * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  get fontWeight() {\n    return this._fontWeight;\n  }\n  set fontWeight(value) {\n    this._fontWeight = value;\n    this.update();\n  }\n  /** The space between lines. */\n  get leading() {\n    return this._leading;\n  }\n  set leading(value) {\n    this._leading = value;\n    this.update();\n  }\n  /** The amount of spacing between letters, default is 0. */\n  get letterSpacing() {\n    return this._letterSpacing;\n  }\n  set letterSpacing(value) {\n    this._letterSpacing = value;\n    this.update();\n  }\n  /** The line height, a number that represents the vertical space that a letter uses. */\n  get lineHeight() {\n    return this._lineHeight;\n  }\n  set lineHeight(value) {\n    this._lineHeight = value;\n    this.update();\n  }\n  /**\n   * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n   * by adding padding to all sides of the text.\n   * > [!NOTE] This will NOT affect the positioning or bounds of the text.\n   */\n  get padding() {\n    return this._padding;\n  }\n  set padding(value) {\n    this._padding = value;\n    this.update();\n  }\n  /**\n   * An optional filter or array of filters to apply to the text, allowing for advanced visual effects.\n   * These filters will be applied to the text as it is created, resulting in faster rendering for static text\n   * compared to applying the filter directly to the text object (which would be applied at run time).\n   * @default null\n   */\n  get filters() {\n    return this._filters;\n  }\n  set filters(value) {\n    this._filters = Object.freeze(value);\n    this.update();\n  }\n  /**\n   * Trim transparent borders from the text texture.\n   * > [!IMPORTANT] PERFORMANCE WARNING:\n   * > This is a costly operation as it requires scanning pixel alpha values.\n   * > Avoid using `trim: true` for dynamic text, as it could significantly impact performance.\n   */\n  get trim() {\n    return this._trim;\n  }\n  set trim(value) {\n    this._trim = value;\n    this.update();\n  }\n  /**\n   * The baseline of the text that is rendered.\n   * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  get textBaseline() {\n    return this._textBaseline;\n  }\n  set textBaseline(value) {\n    this._textBaseline = value;\n    this.update();\n  }\n  /**\n   * How newlines and spaces should be handled.\n   * Default is 'pre' (preserve, preserve).\n   *\n   *  value       | New lines     |   Spaces\n   *  ---         | ---           |   ---\n   * 'normal'     | Collapse      |   Collapse\n   * 'pre'        | Preserve      |   Preserve\n   * 'pre-line'   | Preserve      |   Collapse\n   * @type {'normal'|'pre'|'pre-line'}\n   */\n  get whiteSpace() {\n    return this._whiteSpace;\n  }\n  set whiteSpace(value) {\n    this._whiteSpace = value;\n    this.update();\n  }\n  /** Indicates if word wrap should be used. */\n  get wordWrap() {\n    return this._wordWrap;\n  }\n  set wordWrap(value) {\n    this._wordWrap = value;\n    this.update();\n  }\n  /** The width at which text will wrap, it needs wordWrap to be set to true. */\n  get wordWrapWidth() {\n    return this._wordWrapWidth;\n  }\n  set wordWrapWidth(value) {\n    this._wordWrapWidth = value;\n    this.update();\n  }\n  /**\n   * The fill style that will be used to color the text.\n   * This can be:\n   * - A color string like 'red', '#00FF00', or 'rgba(255,0,0,0.5)'\n   * - A hex number like 0xff0000 for red\n   * - A FillStyle object with properties like { color: 0xff0000, alpha: 0.5 }\n   * - A FillGradient for gradient fills\n   * - A FillPattern for pattern/texture fills\n   *\n   * When using a FillGradient, vertical gradients (angle of 90 degrees) are applied per line of text,\n   * while gradients at any other angle are spread across the entire text body as a whole.\n   * @example\n   * // Vertical gradient applied per line\n   * const verticalGradient = new FillGradient(0, 0, 0, 1)\n   *     .addColorStop(0, 0xff0000)\n   *     .addColorStop(1, 0x0000ff);\n   *\n   * const text = new Text({\n   *     text: 'Line 1\\nLine 2',\n   *     style: { fill: verticalGradient }\n   * });\n   *\n   * To manage the gradient in a global scope, set the textureSpace property of the FillGradient to 'global'.\n   * @type {string|number|FillStyle|FillGradient|FillPattern}\n   */\n  get fill() {\n    return this._originalFill;\n  }\n  set fill(value) {\n    if (value === this._originalFill)\n      return;\n    this._originalFill = value;\n    if (this._isFillStyle(value)) {\n      this._originalFill = this._createProxy({ ...GraphicsContext.defaultFillStyle, ...value }, () => {\n        this._fill = toFillStyle(\n          { ...this._originalFill },\n          GraphicsContext.defaultFillStyle\n        );\n      });\n    }\n    this._fill = toFillStyle(\n      value === 0 ? \"black\" : value,\n      GraphicsContext.defaultFillStyle\n    );\n    this.update();\n  }\n  /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n  get stroke() {\n    return this._originalStroke;\n  }\n  set stroke(value) {\n    if (value === this._originalStroke)\n      return;\n    this._originalStroke = value;\n    if (this._isFillStyle(value)) {\n      this._originalStroke = this._createProxy({ ...GraphicsContext.defaultStrokeStyle, ...value }, () => {\n        this._stroke = toStrokeStyle(\n          { ...this._originalStroke },\n          GraphicsContext.defaultStrokeStyle\n        );\n      });\n    }\n    this._stroke = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    this.update();\n  }\n  update() {\n    this._tick++;\n    this.emit(\"update\", this);\n  }\n  /** Resets all properties to the default values */\n  reset() {\n    const defaultStyle = _TextStyle.defaultTextStyle;\n    for (const key in defaultStyle) {\n      this[key] = defaultStyle[key];\n    }\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `${this.uid}-${this._tick}`;\n  }\n  /**\n   * Creates a new TextStyle object with the same values as this one.\n   * @returns New cloned TextStyle object\n   */\n  clone() {\n    return new _TextStyle({\n      align: this.align,\n      breakWords: this.breakWords,\n      dropShadow: this._dropShadow ? { ...this._dropShadow } : null,\n      fill: this._fill,\n      fontFamily: this.fontFamily,\n      fontSize: this.fontSize,\n      fontStyle: this.fontStyle,\n      fontVariant: this.fontVariant,\n      fontWeight: this.fontWeight,\n      leading: this.leading,\n      letterSpacing: this.letterSpacing,\n      lineHeight: this.lineHeight,\n      padding: this.padding,\n      stroke: this._stroke,\n      textBaseline: this.textBaseline,\n      whiteSpace: this.whiteSpace,\n      wordWrap: this.wordWrap,\n      wordWrapWidth: this.wordWrapWidth,\n      filters: this._filters ? [...this._filters] : void 0\n    });\n  }\n  /**\n   * Returns the final padding for the text style, taking into account any filters applied.\n   * Used internally for correct measurements\n   * @internal\n   * @returns {number} The final padding for the text style.\n   */\n  _getFinalPadding() {\n    let filterPadding = 0;\n    if (this._filters) {\n      for (let i = 0; i < this._filters.length; i++) {\n        filterPadding += this._filters[i].padding;\n      }\n    }\n    return Math.max(this._padding, filterPadding);\n  }\n  /**\n   * Destroys this text style.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * // Destroy the text style and its textures\n   * textStyle.destroy({ texture: true, textureSource: true });\n   * textStyle.destroy(true);\n   */\n  destroy(options = false) {\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fill?.texture) {\n        this._fill.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalFill?.texture) {\n        this._originalFill.texture.destroy(destroyTextureSource);\n      }\n      if (this._stroke?.texture) {\n        this._stroke.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalStroke?.texture) {\n        this._originalStroke.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fill = null;\n    this._stroke = null;\n    this.dropShadow = null;\n    this._originalStroke = null;\n    this._originalFill = null;\n  }\n  _createProxy(value, cb) {\n    return new Proxy(value, {\n      set: (target, property, newValue) => {\n        target[property] = newValue;\n        cb?.(property, newValue);\n        this.update();\n        return true;\n      }\n    });\n  }\n  _isFillStyle(value) {\n    return (value ?? null) !== null && !(Color.isColorLike(value) || value instanceof FillGradient || value instanceof FillPattern);\n  }\n};\n/**\n * Default drop shadow settings used when enabling drop shadows on text.\n * These values are used as the base configuration when drop shadows are enabled without specific settings.\n * @example\n * ```ts\n * // Customize default settings globally\n * TextStyle.defaultDropShadow.alpha = 0.5;    // 50% opacity for all shadows\n * TextStyle.defaultDropShadow.blur = 2;       // 2px blur for all shadows\n * TextStyle.defaultDropShadow.color = 'blue'; // Blue shadows by default\n * ```\n */\n_TextStyle.defaultDropShadow = {\n  alpha: 1,\n  angle: Math.PI / 6,\n  blur: 0,\n  color: \"black\",\n  distance: 5\n};\n/**\n * Default text style settings used when creating new text objects.\n * These values serve as the base configuration and can be customized globally.\n * @example\n * ```ts\n * // Customize default text style globally\n * TextStyle.defaultTextStyle.fontSize = 16;\n * TextStyle.defaultTextStyle.fill = 0x333333;\n * TextStyle.defaultTextStyle.fontFamily = ['Arial', 'Helvetica', 'sans-serif'];\n * ```\n */\n_TextStyle.defaultTextStyle = {\n  align: \"left\",\n  breakWords: false,\n  dropShadow: null,\n  fill: \"black\",\n  fontFamily: \"Arial\",\n  fontSize: 26,\n  fontStyle: \"normal\",\n  fontVariant: \"normal\",\n  fontWeight: \"normal\",\n  leading: 0,\n  letterSpacing: 0,\n  lineHeight: 0,\n  padding: 0,\n  stroke: null,\n  textBaseline: \"alphabetic\",\n  trim: false,\n  whiteSpace: \"pre\",\n  wordWrap: false,\n  wordWrapWidth: 100\n};\nlet TextStyle = _TextStyle;\nfunction convertV7Tov8Style(style) {\n  const oldStyle = style;\n  if (typeof oldStyle.dropShadow === \"boolean\" && oldStyle.dropShadow) {\n    const defaults = TextStyle.defaultDropShadow;\n    style.dropShadow = {\n      alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n      angle: oldStyle.dropShadowAngle ?? defaults.angle,\n      blur: oldStyle.dropShadowBlur ?? defaults.blur,\n      color: oldStyle.dropShadowColor ?? defaults.color,\n      distance: oldStyle.dropShadowDistance ?? defaults.distance\n    };\n  }\n  if (oldStyle.strokeThickness !== void 0) {\n    deprecation(v8_0_0, \"strokeThickness is now a part of stroke\");\n    const color = oldStyle.stroke;\n    let obj = {};\n    if (Color.isColorLike(color)) {\n      obj.color = color;\n    } else if (color instanceof FillGradient || color instanceof FillPattern) {\n      obj.fill = color;\n    } else if (Object.hasOwnProperty.call(color, \"color\") || Object.hasOwnProperty.call(color, \"fill\")) {\n      obj = color;\n    } else {\n      throw new Error(\"Invalid stroke value.\");\n    }\n    style.stroke = {\n      ...obj,\n      width: oldStyle.strokeThickness\n    };\n  }\n  if (Array.isArray(oldStyle.fillGradientStops)) {\n    deprecation(v8_0_0, \"gradient fill is now a fill pattern: `new FillGradient(...)`\");\n    if (!Array.isArray(oldStyle.fill) || oldStyle.fill.length === 0) {\n      throw new Error(\"Invalid fill value. Expected an array of colors for gradient fill.\");\n    }\n    if (oldStyle.fill.length !== oldStyle.fillGradientStops.length) {\n      warn(\"The number of fill colors must match the number of fill gradient stops.\");\n    }\n    const gradientFill = new FillGradient({\n      start: { x: 0, y: 0 },\n      end: { x: 0, y: 1 },\n      textureSpace: \"local\"\n    });\n    const fillGradientStops = oldStyle.fillGradientStops.slice();\n    const fills = oldStyle.fill.map((color) => Color.shared.setValue(color).toNumber());\n    fillGradientStops.forEach((stop, index) => {\n      gradientFill.addColorStop(stop, fills[index]);\n    });\n    style.fill = {\n      fill: gradientFill\n    };\n  }\n}\n\nexport { TextStyle };\n//# sourceMappingURL=TextStyle.mjs.map\n","\"use strict\";\nclass ObservablePoint {\n  /**\n   * Creates a new `ObservablePoint`\n   * @param observer - Observer to pass to listen for change events.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(observer, x, y) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._observer = observer;\n  }\n  /**\n   * Creates a clone of this point.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const point = new ObservablePoint(observer, 100, 200);\n   * const copy = point.clone();\n   *\n   * // Clone with new observer\n   * const newObserver = {\n   *     _onUpdate: (p) => console.log(`Clone updated: (${p.x}, ${p.y})`)\n   * };\n   * const watched = point.clone(newObserver);\n   *\n   * // Verify independence\n   * watched.set(300, 400); // Only triggers new observer\n   * ```\n   * @param observer - Optional observer to pass to the new observable point\n   * @returns A copy of this observable point\n   * @see {@link ObservablePoint.copyFrom} For copying into existing point\n   * @see {@link Observer} For observer interface details\n   */\n  clone(observer) {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n  }\n  /**\n   * Sets the point to a new x and y position.\n   *\n   * If y is omitted, both x and y will be set to x.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * const point = new ObservablePoint(observer);\n   * point.set(100, 200);\n   *\n   * // Set both x and y to same value\n   * point.set(50); // x=50, y=50\n   * ```\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis, defaults to x\n   * @returns The point instance itself\n   * @see {@link ObservablePoint.copyFrom} For copying from another point\n   * @see {@link ObservablePoint.equals} For comparing positions\n   */\n  set(x = 0, y = x) {\n    if (this._x !== x || this._y !== y) {\n      this._x = x;\n      this._y = y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies x and y from the given point into this point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new ObservablePoint(observer, 100, 200);\n   * const target = new ObservablePoint();\n   * target.copyFrom(source);\n   *\n   * // Copy and chain operations\n   * const point = new ObservablePoint()\n   *     .copyFrom(source)\n   *     .set(x + 50, y + 50);\n   *\n   * // Copy from any PointData\n   * const data = { x: 10, y: 20 };\n   * point.copyFrom(data);\n   * ```\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   * @see {@link ObservablePoint.copyTo} For copying to another point\n   * @see {@link ObservablePoint.clone} For creating new point copy\n   */\n  copyFrom(p) {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x;\n      this._y = p.y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new ObservablePoint(100, 200);\n   * const target = new ObservablePoint();\n   * source.copyTo(target);\n   * ```\n   * @param p - The point to copy to. Can be any type that is or extends `PointLike`\n   * @returns The point (`p`) with values updated\n   * @see {@link ObservablePoint.copyFrom} For copying from another point\n   * @see {@link ObservablePoint.clone} For creating new point copy\n   */\n  copyTo(p) {\n    p.set(this._x, this._y);\n    return p;\n  }\n  /**\n   * Checks if another point is equal to this point.\n   *\n   * Compares x and y values using strict equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const p1 = new ObservablePoint(100, 200);\n   * const p2 = new ObservablePoint(100, 200);\n   * console.log(p1.equals(p2)); // true\n   *\n   * // Compare with PointData\n   * const data = { x: 100, y: 200 };\n   * console.log(p1.equals(data)); // true\n   *\n   * // Check different points\n   * const p3 = new ObservablePoint(200, 300);\n   * console.log(p1.equals(p3)); // false\n   * ```\n   * @param p - The point to check\n   * @returns `true` if both `x` and `y` are equal\n   * @see {@link ObservablePoint.copyFrom} For making points equal\n   * @see {@link PointData} For point data interface\n   */\n  equals(p) {\n    return p.x === this._x && p.y === this._y;\n  }\n  toString() {\n    return `[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`;\n  }\n  /**\n   * Position of the observable point on the x axis.\n   * Triggers observer callback when value changes.\n   * @example\n   * ```ts\n   * // Basic x position\n   * const point = new ObservablePoint(observer);\n   * point.x = 100; // Triggers observer\n   *\n   * // Use in calculations\n   * const width = rightPoint.x - leftPoint.x;\n   * ```\n   * @default 0\n   */\n  get x() {\n    return this._x;\n  }\n  set x(value) {\n    if (this._x !== value) {\n      this._x = value;\n      this._observer._onUpdate(this);\n    }\n  }\n  /**\n   * Position of the observable point on the y axis.\n   * Triggers observer callback when value changes.\n   * @example\n   * ```ts\n   * // Basic y position\n   * const point = new ObservablePoint(observer);\n   * point.y = 200; // Triggers observer\n   *\n   * // Use in calculations\n   * const height = bottomPoint.y - topPoint.y;\n   * ```\n   * @default 0\n   */\n  get y() {\n    return this._y;\n  }\n  set y(value) {\n    if (this._y !== value) {\n      this._y = value;\n      this._observer._onUpdate(this);\n    }\n  }\n}\n\nexport { ObservablePoint };\n//# sourceMappingURL=ObservablePoint.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass ImageSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoGarbageCollect = true;\n  }\n  static test(resource) {\n    return globalThis.HTMLImageElement && resource instanceof HTMLImageElement || typeof ImageBitmap !== \"undefined\" && resource instanceof ImageBitmap || globalThis.VideoFrame && resource instanceof VideoFrame;\n  }\n}\nImageSource.extension = ExtensionType.TextureSource;\n\nexport { ImageSource };\n//# sourceMappingURL=ImageSource.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass BufferImageSource extends TextureSource {\n  constructor(options) {\n    const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n    let format = options.format;\n    if (!format) {\n      if (buffer instanceof Float32Array) {\n        format = \"rgba32float\";\n      } else if (buffer instanceof Int32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Uint32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Int16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Uint16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Int8Array) {\n        format = \"bgra8unorm\";\n      } else {\n        format = \"bgra8unorm\";\n      }\n    }\n    super({\n      ...options,\n      resource: buffer,\n      format\n    });\n    this.uploadMethodId = \"buffer\";\n  }\n  static test(resource) {\n    return resource instanceof Int8Array || resource instanceof Uint8Array || resource instanceof Uint8ClampedArray || resource instanceof Int16Array || resource instanceof Uint16Array || resource instanceof Int32Array || resource instanceof Uint32Array || resource instanceof Float32Array;\n  }\n}\nBufferImageSource.extension = ExtensionType.TextureSource;\n\nexport { BufferImageSource };\n//# sourceMappingURL=BufferImageSource.mjs.map\n","\"use strict\";\nconst fragTemplate = [\n  \"precision mediump float;\",\n  \"void main(void){\",\n  \"float test = 0.1;\",\n  \"%forloop%\",\n  \"gl_FragColor = vec4(0.0);\",\n  \"}\"\n].join(\"\\n\");\nfunction generateIfTestSrc(maxIfs) {\n  let src = \"\";\n  for (let i = 0; i < maxIfs; ++i) {\n    if (i > 0) {\n      src += \"\\nelse \";\n    }\n    if (i < maxIfs - 1) {\n      src += `if(test == ${i}.0){}`;\n    }\n  }\n  return src;\n}\nfunction checkMaxIfStatementsInShader(maxIfs, gl) {\n  if (maxIfs === 0) {\n    throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");\n  }\n  const shader = gl.createShader(gl.FRAGMENT_SHADER);\n  try {\n    while (true) {\n      const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n      gl.shaderSource(shader, fragmentSrc);\n      gl.compileShader(shader);\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        maxIfs = maxIfs / 2 | 0;\n      } else {\n        break;\n      }\n    }\n  } finally {\n    gl.deleteShader(shader);\n  }\n  return maxIfs;\n}\n\nexport { checkMaxIfStatementsInShader };\n//# sourceMappingURL=checkMaxIfStatementsInShader.mjs.map\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","\"use strict\";\nconst copySearchParams = (targetUrl, sourceUrl) => {\n  const searchParams = sourceUrl.split(\"?\")[1];\n  if (searchParams) {\n    targetUrl += `?${searchParams}`;\n  }\n  return targetUrl;\n};\n\nexport { copySearchParams };\n//# sourceMappingURL=copySearchParams.mjs.map\n","\"use strict\";\nfunction removeItems(arr, startIdx, removeCount) {\n  const length = arr.length;\n  let i;\n  if (startIdx >= length || removeCount === 0) {\n    return;\n  }\n  removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;\n  const len = length - removeCount;\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount];\n  }\n  arr.length = len;\n}\n\nexport { removeItems };\n//# sourceMappingURL=removeItems.mjs.map\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { NOOP } from '../../../../utils/misc/NOOP.mjs';\nimport { BufferImageSource } from './sources/BufferImageSource.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { TextureMatrix } from './TextureMatrix.mjs';\n\n\"use strict\";\nclass Texture extends EventEmitter {\n  /**\n   * @param {TextureOptions} options - Options for the texture\n   */\n  constructor({\n    source,\n    label,\n    frame,\n    orig,\n    trim,\n    defaultAnchor,\n    defaultBorders,\n    rotate,\n    dynamic\n  } = {}) {\n    super();\n    /** unique id for this texture */\n    this.uid = uid(\"texture\");\n    /** A uvs object based on the given frame and the texture source */\n    this.uvs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    this.frame = new Rectangle();\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    this.noFrame = false;\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    this.dynamic = false;\n    /** is it a texture? yes! used for type checking */\n    this.isTexture = true;\n    this.label = label;\n    this.source = source?.source ?? new TextureSource();\n    this.noFrame = !frame;\n    if (frame) {\n      this.frame.copyFrom(frame);\n    } else {\n      const { width, height } = this._source;\n      this.frame.width = width;\n      this.frame.height = height;\n    }\n    this.orig = orig || this.frame;\n    this.trim = trim;\n    this.rotate = rotate ?? 0;\n    this.defaultAnchor = defaultAnchor;\n    this.defaultBorders = defaultBorders;\n    this.destroyed = false;\n    this.dynamic = dynamic || false;\n    this.updateUvs();\n  }\n  set source(value) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n    }\n    this._source = value;\n    value.on(\"resize\", this.update, this);\n    this.emit(\"update\", this);\n  }\n  /** the underlying source of the texture (equivalent of baseTexture in v7) */\n  get source() {\n    return this._source;\n  }\n  /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n  get textureMatrix() {\n    if (!this._textureMatrix) {\n      this._textureMatrix = new TextureMatrix(this);\n    }\n    return this._textureMatrix;\n  }\n  /** The width of the Texture in pixels. */\n  get width() {\n    return this.orig.width;\n  }\n  /** The height of the Texture in pixels. */\n  get height() {\n    return this.orig.height;\n  }\n  /** Call this function when you have modified the frame of this texture. */\n  updateUvs() {\n    const { uvs, frame } = this;\n    const { width, height } = this._source;\n    const nX = frame.x / width;\n    const nY = frame.y / height;\n    const nW = frame.width / width;\n    const nH = frame.height / height;\n    let rotate = this.rotate;\n    if (rotate) {\n      const w2 = nW / 2;\n      const h2 = nH / 2;\n      const cX = nX + w2;\n      const cY = nY + h2;\n      rotate = groupD8.add(rotate, groupD8.NW);\n      uvs.x0 = cX + w2 * groupD8.uX(rotate);\n      uvs.y0 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x1 = cX + w2 * groupD8.uX(rotate);\n      uvs.y1 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x2 = cX + w2 * groupD8.uX(rotate);\n      uvs.y2 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x3 = cX + w2 * groupD8.uX(rotate);\n      uvs.y3 = cY + h2 * groupD8.uY(rotate);\n    } else {\n      uvs.x0 = nX;\n      uvs.y0 = nY;\n      uvs.x1 = nX + nW;\n      uvs.y1 = nY;\n      uvs.x2 = nX + nW;\n      uvs.y2 = nY + nH;\n      uvs.x3 = nX;\n      uvs.y3 = nY + nH;\n    }\n  }\n  /**\n   * Destroys this texture\n   * @param destroySource - Destroy the source when the texture is destroyed.\n   */\n  destroy(destroySource = false) {\n    if (this._source) {\n      if (destroySource) {\n        this._source.destroy();\n        this._source = null;\n      }\n    }\n    this._textureMatrix = null;\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n  }\n  /**\n   * Call this if you have modified the `texture outside` of the constructor.\n   *\n   * If you have modified this texture's source, you must separately call `texture.source.update()` to see those changes.\n   */\n  update() {\n    if (this.noFrame) {\n      this.frame.width = this._source.width;\n      this.frame.height = this._source.height;\n    }\n    this.updateUvs();\n    this.emit(\"update\", this);\n  }\n  /** @deprecated since 8.0.0 */\n  get baseTexture() {\n    deprecation(v8_0_0, \"Texture.baseTexture is now Texture.source\");\n    return this._source;\n  }\n}\nTexture.EMPTY = new Texture({\n  label: \"EMPTY\",\n  source: new TextureSource({\n    label: \"EMPTY\"\n  })\n});\nTexture.EMPTY.destroy = NOOP;\nTexture.WHITE = new Texture({\n  source: new BufferImageSource({\n    resource: new Uint8Array([255, 255, 255, 255]),\n    width: 1,\n    height: 1,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    label: \"WHITE\"\n  }),\n  label: \"WHITE\"\n});\nTexture.WHITE.destroy = NOOP;\n\nexport { Texture };\n//# sourceMappingURL=Texture.mjs.map\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\"use strict\";\nlet unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval === \"boolean\") {\n    return unsafeEval;\n  }\n  try {\n    const func = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = func({ a: \"b\" }, \"a\", \"b\") === true;\n  } catch (_e) {\n    unsafeEval = false;\n  }\n  return unsafeEval;\n}\n\nexport { unsafeEvalSupported };\n//# sourceMappingURL=unsafeEvalSupported.mjs.map\n","import { PI_2 } from '../misc/const.mjs';\nimport { Point } from '../point/Point.mjs';\n\n\"use strict\";\nclass Matrix {\n  /**\n   * @param a - x scale\n   * @param b - y skew\n   * @param c - x skew\n   * @param d - y scale\n   * @param tx - x translation\n   * @param ty - y translation\n   */\n  constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n    /**\n     * Array representation of the matrix.\n     * Only populated when `toArray()` is called.\n     * @default null\n     * @see {@link Matrix.toArray} For filling this array\n     */\n    this.array = null;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  }\n  /**\n   * Creates a Matrix object based on the given array.\n   * Populates matrix components from a flat array in column-major order.\n   *\n   * > [!NOTE] Array mapping order:\n   * > ```\n   * > array[0] = a  (x scale)\n   * > array[1] = b  (y skew)\n   * > array[2] = tx (x translation)\n   * > array[3] = c  (x skew)\n   * > array[4] = d  (y scale)\n   * > array[5] = ty (y translation)\n   * > ```\n   * @example\n   * ```ts\n   * // Create matrix from array\n   * const matrix = new Matrix();\n   * matrix.fromArray([\n   *     2, 0,  100,  // a, b, tx\n   *     0, 2,  100   // c, d, ty\n   * ]);\n   *\n   * // Create matrix from typed array\n   * const float32Array = new Float32Array([\n   *     1, 0, 0,     // Scale x1, no skew\n   *     0, 1, 0      // No skew, scale x1\n   * ]);\n   * matrix.fromArray(float32Array);\n   * ```\n   * @param array - The array to populate the matrix from\n   * @see {@link Matrix.toArray} For converting matrix to array\n   * @see {@link Matrix.set} For setting values directly\n   */\n  fromArray(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n  }\n  /**\n   * Sets the matrix properties directly.\n   * All matrix components can be set in one call.\n   * @example\n   * ```ts\n   * // Set to identity matrix\n   * matrix.set(1, 0, 0, 1, 0, 0);\n   *\n   * // Set to scale matrix\n   * matrix.set(2, 0, 0, 2, 0, 0); // Scale 2x\n   *\n   * // Set to translation matrix\n   * matrix.set(1, 0, 0, 1, 100, 50); // Move 100,50\n   * ```\n   * @param a - Scale on x axis\n   * @param b - Shear on y axis\n   * @param c - Shear on x axis\n   * @param d - Scale on y axis\n   * @param tx - Translation on x axis\n   * @param ty - Translation on y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.fromArray} For setting from array\n   */\n  set(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n    return this;\n  }\n  /**\n   * Creates an array from the current Matrix object.\n   *\n   * > [!NOTE] The array format is:\n   * > ```\n   * > Non-transposed:\n   * > [a, c, tx,\n   * > b, d, ty,\n   * > 0, 0, 1]\n   * >\n   * > Transposed:\n   * > [a, b, 0,\n   * > c, d, 0,\n   * > tx,ty,1]\n   * > ```\n   * @example\n   * ```ts\n   * // Basic array conversion\n   * const matrix = new Matrix(2, 0, 0, 2, 100, 100);\n   * const array = matrix.toArray();\n   *\n   * // Using existing array\n   * const float32Array = new Float32Array(9);\n   * matrix.toArray(false, float32Array);\n   *\n   * // Get transposed array\n   * const transposed = matrix.toArray(true);\n   * ```\n   * @param transpose - Whether to transpose the matrix\n   * @param out - Optional Float32Array to store the result\n   * @returns The array containing the matrix values\n   * @see {@link Matrix.fromArray} For creating matrix from array\n   * @see {@link Matrix.array} For cached array storage\n   */\n  toArray(transpose, out) {\n    if (!this.array) {\n      this.array = new Float32Array(9);\n    }\n    const array = out || this.array;\n    if (transpose) {\n      array[0] = this.a;\n      array[1] = this.b;\n      array[2] = 0;\n      array[3] = this.c;\n      array[4] = this.d;\n      array[5] = 0;\n      array[6] = this.tx;\n      array[7] = this.ty;\n      array[8] = 1;\n    } else {\n      array[0] = this.a;\n      array[1] = this.c;\n      array[2] = this.tx;\n      array[3] = this.b;\n      array[4] = this.d;\n      array[5] = this.ty;\n      array[6] = 0;\n      array[7] = 0;\n      array[8] = 1;\n    }\n    return array;\n  }\n  /**\n   * Get a new position with the current transformation applied.\n   *\n   * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n   * @example\n   * ```ts\n   * // Basic point transformation\n   * const matrix = new Matrix().translate(100, 50).rotate(Math.PI / 4);\n   * const point = new Point(10, 20);\n   * const transformed = matrix.apply(point);\n   *\n   * // Reuse existing point\n   * const output = new Point();\n   * matrix.apply(point, output);\n   * ```\n   * @param pos - The origin point to transform\n   * @param newPos - Optional point to store the result\n   * @returns The transformed point\n   * @see {@link Matrix.applyInverse} For inverse transformation\n   * @see {@link Point} For point operations\n   */\n  apply(pos, newPos) {\n    newPos = newPos || new Point();\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = this.a * x + this.c * y + this.tx;\n    newPos.y = this.b * x + this.d * y + this.ty;\n    return newPos;\n  }\n  /**\n   * Get a new position with the inverse of the current transformation applied.\n   *\n   * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n   * @example\n   * ```ts\n   * // Basic inverse transformation\n   * const matrix = new Matrix().translate(100, 50).rotate(Math.PI / 4);\n   * const worldPoint = new Point(150, 100);\n   * const localPoint = matrix.applyInverse(worldPoint);\n   *\n   * // Reuse existing point\n   * const output = new Point();\n   * matrix.applyInverse(worldPoint, output);\n   *\n   * // Convert mouse position to local space\n   * const mousePoint = new Point(mouseX, mouseY);\n   * const localMouse = matrix.applyInverse(mousePoint);\n   * ```\n   * @param pos - The origin point to inverse-transform\n   * @param newPos - Optional point to store the result\n   * @returns The inverse-transformed point\n   * @see {@link Matrix.apply} For forward transformation\n   * @see {@link Matrix.invert} For getting inverse matrix\n   */\n  applyInverse(pos, newPos) {\n    newPos = newPos || new Point();\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const tx = this.tx;\n    const ty = this.ty;\n    const id = 1 / (a * d + c * -b);\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = d * id * x + -c * id * y + (ty * c - tx * d) * id;\n    newPos.y = a * id * y + -b * id * x + (-ty * a + tx * b) * id;\n    return newPos;\n  }\n  /**\n   * Translates the matrix on the x and y axes.\n   * Adds to the position values while preserving scale, rotation and skew.\n   * @example\n   * ```ts\n   * // Basic translation\n   * const matrix = new Matrix();\n   * matrix.translate(100, 50); // Move right 100, down 50\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .scale(2, 2)\n   *     .translate(100, 0)\n   *     .rotate(Math.PI / 4);\n   * ```\n   * @param x - How much to translate on the x axis\n   * @param y - How much to translate on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.set} For setting position directly\n   * @see {@link Matrix.setTransform} For complete transform setup\n   */\n  translate(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n  }\n  /**\n   * Applies a scale transformation to the matrix.\n   * Multiplies the scale values with existing matrix components.\n   * @example\n   * ```ts\n   * // Basic scaling\n   * const matrix = new Matrix();\n   * matrix.scale(2, 3); // Scale 2x horizontally, 3x vertically\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .translate(100, 100)\n   *     .scale(2, 2)     // Scales after translation\n   *     .rotate(Math.PI / 4);\n   * ```\n   * @param x - The amount to scale horizontally\n   * @param y - The amount to scale vertically\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.setTransform} For setting scale directly\n   * @see {@link Matrix.append} For combining transformations\n   */\n  scale(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the matrix.\n   *\n   * Rotates around the origin (0,0) by the given angle in radians.\n   * @example\n   * ```ts\n   * // Basic rotation\n   * const matrix = new Matrix();\n   * matrix.rotate(Math.PI / 4); // Rotate 45 degrees\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .translate(100, 100) // Move to rotation center\n   *     .rotate(Math.PI)     // Rotate 180 degrees\n   *     .scale(2, 2);        // Scale after rotation\n   *\n   * // Common angles\n   * matrix.rotate(Math.PI / 2);  // 90 degrees\n   * matrix.rotate(Math.PI);      // 180 degrees\n   * matrix.rotate(Math.PI * 2);  // 360 degrees\n   * ```\n   * @remarks\n   * - Rotates around origin point (0,0)\n   * - Affects position if translation was set\n   * - Uses counter-clockwise rotation\n   * - Order of operations matters when chaining\n   * @param angle - The angle in radians\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.setTransform} For setting rotation directly\n   * @see {@link Matrix.append} For combining transformations\n   */\n  rotate(angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const a1 = this.a;\n    const c1 = this.c;\n    const tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n  }\n  /**\n   * Appends the given Matrix to this Matrix.\n   * Combines two matrices by multiplying them together: this = this * matrix\n   * @example\n   * ```ts\n   * // Basic matrix combination\n   * const matrix = new Matrix();\n   * const other = new Matrix().translate(100, 0).rotate(Math.PI / 4);\n   * matrix.append(other);\n   * ```\n   * @remarks\n   * - Order matters: A.append(B) !== B.append(A)\n   * - Modifies current matrix\n   * - Preserves transformation order\n   * - Commonly used for combining transforms\n   * @param matrix - The matrix to append\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.prepend} For prepending transformations\n   * @see {@link Matrix.appendFrom} For appending two external matrices\n   */\n  append(matrix) {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n  }\n  /**\n   * Appends two matrices and sets the result to this matrix.\n   * Performs matrix multiplication: this = A * B\n   * @example\n   * ```ts\n   * // Basic matrix multiplication\n   * const result = new Matrix();\n   * const matrixA = new Matrix().scale(2, 2);\n   * const matrixB = new Matrix().rotate(Math.PI / 4);\n   * result.appendFrom(matrixA, matrixB);\n   * ```\n   * @remarks\n   * - Order matters: A * B !== B * A\n   * - Creates a new transformation from two others\n   * - More efficient than append() for multiple operations\n   * - Does not modify input matrices\n   * @param a - The first matrix to multiply\n   * @param b - The second matrix to multiply\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.append} For single matrix combination\n   * @see {@link Matrix.prepend} For reverse order multiplication\n   */\n  appendFrom(a, b) {\n    const a1 = a.a;\n    const b1 = a.b;\n    const c1 = a.c;\n    const d1 = a.d;\n    const tx = a.tx;\n    const ty = a.ty;\n    const a2 = b.a;\n    const b2 = b.b;\n    const c2 = b.c;\n    const d2 = b.d;\n    this.a = a1 * a2 + b1 * c2;\n    this.b = a1 * b2 + b1 * d2;\n    this.c = c1 * a2 + d1 * c2;\n    this.d = c1 * b2 + d1 * d2;\n    this.tx = tx * a2 + ty * c2 + b.tx;\n    this.ty = tx * b2 + ty * d2 + b.ty;\n    return this;\n  }\n  /**\n   * Sets the matrix based on all the available properties.\n   * Combines position, scale, rotation, skew and pivot in a single operation.\n   * @example\n   * ```ts\n   * // Basic transform setup\n   * const matrix = new Matrix();\n   * matrix.setTransform(\n   *     100, 100,    // position\n   *     0, 0,        // pivot\n   *     2, 2,        // scale\n   *     Math.PI / 4, // rotation (45 degrees)\n   *     0, 0         // skew\n   * );\n   * ```\n   * @remarks\n   * - Updates all matrix components at once\n   * - More efficient than separate transform calls\n   * - Uses radians for rotation and skew\n   * - Pivot affects rotation center\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis\n   * @param pivotX - Pivot on the x axis\n   * @param pivotY - Pivot on the y axis\n   * @param scaleX - Scale on the x axis\n   * @param scaleY - Scale on the y axis\n   * @param rotation - Rotation in radians\n   * @param skewX - Skew on the x axis\n   * @param skewY - Skew on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.decompose} For extracting transform properties\n   * @see {@link TransformableObject} For transform data structure\n   */\n  setTransform(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    this.a = Math.cos(rotation + skewY) * scaleX;\n    this.b = Math.sin(rotation + skewY) * scaleX;\n    this.c = -Math.sin(rotation - skewX) * scaleY;\n    this.d = Math.cos(rotation - skewX) * scaleY;\n    this.tx = x - (pivotX * this.a + pivotY * this.c);\n    this.ty = y - (pivotX * this.b + pivotY * this.d);\n    return this;\n  }\n  /**\n   * Prepends the given Matrix to this Matrix.\n   * Combines two matrices by multiplying them together: this = matrix * this\n   * @example\n   * ```ts\n   * // Basic matrix prepend\n   * const matrix = new Matrix().scale(2, 2);\n   * const other = new Matrix().translate(100, 0);\n   * matrix.prepend(other); // Translation happens before scaling\n   * ```\n   * @remarks\n   * - Order matters: A.prepend(B) !== B.prepend(A)\n   * - Modifies current matrix\n   * - Reverses transformation order compared to append()\n   * @param matrix - The matrix to prepend\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.append} For appending transformations\n   * @see {@link Matrix.appendFrom} For combining external matrices\n   */\n  prepend(matrix) {\n    const tx1 = this.tx;\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      const a1 = this.a;\n      const c1 = this.c;\n      this.a = a1 * matrix.a + this.b * matrix.c;\n      this.b = a1 * matrix.b + this.b * matrix.d;\n      this.c = c1 * matrix.a + this.d * matrix.c;\n      this.d = c1 * matrix.b + this.d * matrix.d;\n    }\n    this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n    this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n    return this;\n  }\n  /**\n   * Decomposes the matrix into its individual transform components.\n   * Extracts position, scale, rotation and skew values from the matrix.\n   * @example\n   * ```ts\n   * // Basic decomposition\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4)\n   *     .scale(2, 2);\n   *\n   * const transform = {\n   *     position: new Point(),\n   *     scale: new Point(),\n   *     pivot: new Point(),\n   *     skew: new Point(),\n   *     rotation: 0\n   * };\n   *\n   * matrix.decompose(transform);\n   * console.log(transform.position); // Point(100, 100)\n   * console.log(transform.rotation); // ~0.785 (PI/4)\n   * console.log(transform.scale); // Point(2, 2)\n   * ```\n   * @remarks\n   * - Handles combined transformations\n   * - Accounts for pivot points\n   * - Chooses between rotation/skew based on transform type\n   * - Uses radians for rotation and skew\n   * @param transform - The transform object to store the decomposed values\n   * @returns The transform with the newly applied properties\n   * @see {@link Matrix.setTransform} For composing from components\n   * @see {@link TransformableObject} For transform structure\n   */\n  decompose(transform) {\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const pivot = transform.pivot;\n    const skewX = -Math.atan2(-c, d);\n    const skewY = Math.atan2(b, a);\n    const delta = Math.abs(skewX + skewY);\n    if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {\n      transform.rotation = skewY;\n      transform.skew.x = transform.skew.y = 0;\n    } else {\n      transform.rotation = 0;\n      transform.skew.x = skewX;\n      transform.skew.y = skewY;\n    }\n    transform.scale.x = Math.sqrt(a * a + b * b);\n    transform.scale.y = Math.sqrt(c * c + d * d);\n    transform.position.x = this.tx + (pivot.x * a + pivot.y * c);\n    transform.position.y = this.ty + (pivot.x * b + pivot.y * d);\n    return transform;\n  }\n  /**\n   * Inverts this matrix.\n   * Creates the matrix that when multiplied with this matrix results in an identity matrix.\n   * @example\n   * ```ts\n   * // Basic matrix inversion\n   * const matrix = new Matrix()\n   *     .translate(100, 50)\n   *     .scale(2, 2);\n   *\n   * matrix.invert(); // Now transforms in opposite direction\n   *\n   * // Verify inversion\n   * const point = new Point(50, 50);\n   * const transformed = matrix.apply(point);\n   * const original = matrix.invert().apply(transformed);\n   * // original ≈ point\n   * ```\n   * @remarks\n   * - Modifies the current matrix\n   * - Useful for reversing transformations\n   * - Cannot invert matrices with zero determinant\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.applyInverse} For inverse transformations\n   */\n  invert() {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    const tx1 = this.tx;\n    const n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  }\n  /**\n   * Checks if this matrix is an identity matrix.\n   *\n   * An identity matrix has no transformations applied (default state).\n   * @example\n   * ```ts\n   * // Check if matrix is identity\n   * const matrix = new Matrix();\n   * console.log(matrix.isIdentity()); // true\n   *\n   * // Check after transformations\n   * matrix.translate(100, 0);\n   * console.log(matrix.isIdentity()); // false\n   *\n   * // Reset and verify\n   * matrix.identity();\n   * console.log(matrix.isIdentity()); // true\n   * ```\n   * @remarks\n   * - Verifies a = 1, d = 1 (no scale)\n   * - Verifies b = 0, c = 0 (no skew)\n   * - Verifies tx = 0, ty = 0 (no translation)\n   * @returns True if matrix has no transformations\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.IDENTITY} For constant identity matrix\n   */\n  isIdentity() {\n    return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n  }\n  /**\n   * Resets this Matrix to an identity (default) matrix.\n   * Sets all components to their default values: scale=1, no skew, no translation.\n   * @example\n   * ```ts\n   * // Reset transformed matrix\n   * const matrix = new Matrix()\n   *     .scale(2, 2)\n   *     .rotate(Math.PI / 4);\n   * matrix.identity(); // Back to default state\n   *\n   * // Chain after reset\n   * matrix\n   *     .identity()\n   *     .translate(100, 100)\n   *     .scale(2, 2);\n   *\n   * // Compare with identity constant\n   * const isDefault = matrix.equals(Matrix.IDENTITY);\n   * ```\n   * @remarks\n   * - Sets a=1, d=1 (default scale)\n   * - Sets b=0, c=0 (no skew)\n   * - Sets tx=0, ty=0 (no translation)\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.IDENTITY} For constant identity matrix\n   * @see {@link Matrix.isIdentity} For checking identity state\n   */\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @returns A copy of this matrix. Good for chaining method calls.\n   */\n  clone() {\n    const matrix = new Matrix();\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @param matrix\n   * @example\n   * ```ts\n   * // Basic matrix cloning\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4);\n   * const copy = matrix.clone();\n   *\n   * // Clone and modify\n   * const modified = matrix.clone()\n   *     .scale(2, 2);\n   *\n   * // Compare matrices\n   * console.log(matrix.equals(copy));     // true\n   * console.log(matrix.equals(modified)); // false\n   * ```\n   * @returns A copy of this matrix. Good for chaining method calls.\n   * @see {@link Matrix.copyTo} For copying to existing matrix\n   * @see {@link Matrix.copyFrom} For copying from another matrix\n   */\n  copyTo(matrix) {\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the matrix to be the same as the ones in given matrix.\n   * @example\n   * ```ts\n   * // Basic matrix copying\n   * const source = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4);\n   * const target = new Matrix();\n   * target.copyFrom(source);\n   * ```\n   * @param matrix - The matrix to copy from\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.clone} For creating new matrix copy\n   * @see {@link Matrix.copyTo} For copying to another matrix\n   */\n  copyFrom(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n    return this;\n  }\n  /**\n   * Checks if this matrix equals another matrix.\n   * Compares all components for exact equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const m1 = new Matrix();\n   * const m2 = new Matrix();\n   * console.log(m1.equals(m2)); // true\n   *\n   * // Compare transformed matrices\n   * const transform = new Matrix()\n   *     .translate(100, 100)\n   * const clone = new Matrix()\n   *     .scale(2, 2);\n   * console.log(transform.equals(clone)); // false\n   * ```\n   * @param matrix - The matrix to compare to\n   * @returns True if matrices are identical\n   * @see {@link Matrix.copyFrom} For copying matrix values\n   * @see {@link Matrix.isIdentity} For identity comparison\n   */\n  equals(matrix) {\n    return matrix.a === this.a && matrix.b === this.b && matrix.c === this.c && matrix.d === this.d && matrix.tx === this.tx && matrix.ty === this.ty;\n  }\n  toString() {\n    return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n  }\n  /**\n   * A default (identity) matrix with no transformations applied.\n   *\n   * > [!IMPORTANT] This is a shared read-only object. Create a new Matrix if you need to modify it.\n   * @example\n   * ```ts\n   * // Get identity matrix reference\n   * const identity = Matrix.IDENTITY;\n   * console.log(identity.isIdentity()); // true\n   *\n   * // Compare with identity\n   * const matrix = new Matrix();\n   * console.log(matrix.equals(Matrix.IDENTITY)); // true\n   *\n   * // Create new matrix instead of modifying IDENTITY\n   * const transform = new Matrix()\n   *     .copyFrom(Matrix.IDENTITY)\n   *     .translate(100, 100);\n   * ```\n   * @readonly\n   * @returns A read-only identity matrix\n   * @see {@link Matrix.shared} For temporary calculations\n   * @see {@link Matrix.identity} For resetting matrices\n   */\n  static get IDENTITY() {\n    return identityMatrix.identity();\n  }\n  /**\n   * A static Matrix that can be used to avoid creating new objects.\n   * Will always ensure the matrix is reset to identity when requested.\n   *\n   * > [!IMPORTANT] This matrix is shared and temporary. Do not store references to it.\n   * @example\n   * ```ts\n   * // Use for temporary calculations\n   * const tempMatrix = Matrix.shared;\n   * tempMatrix.translate(100, 100).rotate(Math.PI / 4);\n   * const point = tempMatrix.apply({ x: 10, y: 20 });\n   *\n   * // Will be reset to identity on next access\n   * const fresh = Matrix.shared; // Back to identity\n   * ```\n   * @remarks\n   * - Always returns identity matrix\n   * - Safe to modify temporarily\n   * - Not safe to store references\n   * - Useful for one-off calculations\n   * @readonly\n   * @returns A fresh identity matrix for temporary use\n   * @see {@link Matrix.IDENTITY} For immutable identity matrix\n   * @see {@link Matrix.identity} For resetting matrices\n   */\n  static get shared() {\n    return tempMatrix.identity();\n  }\n}\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n\nexport { Matrix };\n//# sourceMappingURL=Matrix.mjs.map\n","\"use strict\";\nfunction getBitmapTextLayout(chars, style, font, trimEnd) {\n  const layoutData = {\n    width: 0,\n    height: 0,\n    offsetY: 0,\n    scale: style.fontSize / font.baseMeasurementFontSize,\n    lines: [{\n      width: 0,\n      charPositions: [],\n      spaceWidth: 0,\n      spacesIndex: [],\n      chars: []\n    }]\n  };\n  layoutData.offsetY = font.baseLineOffset;\n  let currentLine = layoutData.lines[0];\n  let previousChar = null;\n  let firstWord = true;\n  const currentWord = {\n    spaceWord: false,\n    width: 0,\n    start: 0,\n    index: 0,\n    // use index to not modify the array as we use it a lot!\n    positions: [],\n    chars: []\n  };\n  const scale = font.baseMeasurementFontSize / style.fontSize;\n  const adjustedLetterSpacing = style.letterSpacing * scale;\n  const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n  const adjustedLineHeight = style.lineHeight ? style.lineHeight * scale : font.lineHeight;\n  const breakWords = style.wordWrap && style.breakWords;\n  const nextWord = (word) => {\n    const start = currentLine.width;\n    for (let j = 0; j < currentWord.index; j++) {\n      const position = word.positions[j];\n      currentLine.chars.push(word.chars[j]);\n      currentLine.charPositions.push(position + start);\n    }\n    currentLine.width += word.width;\n    firstWord = false;\n    currentWord.width = 0;\n    currentWord.index = 0;\n    currentWord.chars.length = 0;\n  };\n  const nextLine = () => {\n    let index = currentLine.chars.length - 1;\n    if (trimEnd) {\n      let lastChar = currentLine.chars[index];\n      while (lastChar === \" \") {\n        currentLine.width -= font.chars[lastChar].xAdvance;\n        lastChar = currentLine.chars[--index];\n      }\n    }\n    layoutData.width = Math.max(layoutData.width, currentLine.width);\n    currentLine = {\n      width: 0,\n      charPositions: [],\n      chars: [],\n      spaceWidth: 0,\n      spacesIndex: []\n    };\n    firstWord = true;\n    layoutData.lines.push(currentLine);\n    layoutData.height += adjustedLineHeight;\n  };\n  const checkIsOverflow = (lineWidth) => lineWidth - adjustedLetterSpacing > adjustedWordWrapWidth;\n  for (let i = 0; i < chars.length + 1; i++) {\n    let char;\n    const isEnd = i === chars.length;\n    if (!isEnd) {\n      char = chars[i];\n    }\n    const charData = font.chars[char] || font.chars[\" \"];\n    const isSpace = /(?:\\s)/.test(char);\n    const isWordBreak = isSpace || char === \"\\r\" || char === \"\\n\" || isEnd;\n    if (isWordBreak) {\n      const addWordToNextLine = !firstWord && style.wordWrap && checkIsOverflow(currentLine.width + currentWord.width);\n      if (addWordToNextLine) {\n        nextLine();\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      } else {\n        currentWord.start = currentLine.width;\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      }\n      if (char === \"\\r\" || char === \"\\n\") {\n        nextLine();\n      } else if (!isEnd) {\n        const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n        currentLine.width += spaceWidth;\n        currentLine.spaceWidth = spaceWidth;\n        currentLine.spacesIndex.push(currentLine.charPositions.length);\n        currentLine.chars.push(char);\n      }\n    } else {\n      const kerning = charData.kerning[previousChar] || 0;\n      const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n      const addWordToNextLine = breakWords && checkIsOverflow(currentLine.width + currentWord.width + nextCharWidth);\n      if (addWordToNextLine) {\n        nextWord(currentWord);\n        nextLine();\n      }\n      currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n      currentWord.chars.push(char);\n      currentWord.width += nextCharWidth;\n    }\n    previousChar = char;\n  }\n  nextLine();\n  if (style.align === \"center\") {\n    alignCenter(layoutData);\n  } else if (style.align === \"right\") {\n    alignRight(layoutData);\n  } else if (style.align === \"justify\") {\n    alignJustify(layoutData);\n  }\n  return layoutData;\n}\nfunction alignCenter(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width / 2 - line.width / 2;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignRight(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width - line.width;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignJustify(measurementData) {\n  const width = measurementData.width;\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    let indy = 0;\n    let spaceIndex = line.spacesIndex[indy++];\n    let offset = 0;\n    const totalSpaces = line.spacesIndex.length;\n    const newSpaceWidth = (width - line.width) / totalSpaces;\n    const spaceWidth = newSpaceWidth;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      if (j === spaceIndex) {\n        spaceIndex = line.spacesIndex[indy++];\n        offset += spaceWidth;\n      }\n      line.charPositions[j] += offset;\n    }\n  }\n}\n\nexport { getBitmapTextLayout };\n//# sourceMappingURL=getBitmapTextLayout.mjs.map\n","\"use strict\";\nconst uidCache = {\n  default: -1\n};\nfunction uid(name = \"default\") {\n  if (uidCache[name] === void 0) {\n    uidCache[name] = -1;\n  }\n  return ++uidCache[name];\n}\nfunction resetUids() {\n  for (const key in uidCache) {\n    delete uidCache[key];\n  }\n}\n\nexport { resetUids, uid };\n//# sourceMappingURL=uid.mjs.map\n","\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource?.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../../view/ViewContainer.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends ViewContainer {\n  /**\n   * Creates a new Graphics object.\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"graphics\";\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.didViewUpdate = true;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The underlying graphics context used for drawing operations.\n   * Controls how shapes and paths are rendered.\n   * @example\n   * ```ts\n   * // Create a shared context\n   * const sharedContext = new GraphicsContext();\n   *\n   * // Create graphics objects sharing the same context\n   * const graphics1 = new Graphics();\n   * const graphics2 = new Graphics();\n   *\n   * // Assign shared context\n   * graphics1.context = sharedContext;\n   * graphics2.context = sharedContext;\n   *\n   * // Both graphics will show the same shapes\n   * sharedContext\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @see {@link GraphicsContext} For drawing operations\n   * @see {@link GraphicsOptions} For context configuration\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphics object.\n   * Returns the boundaries after all graphical operations but before any transforms.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Get bounds information\n   * const bounds = graphics.bounds;\n   * console.log(bounds.width);  // 100\n   * console.log(bounds.height); // 100\n   * ```\n   * @readonly\n   * @see {@link Bounds} For bounds operations\n   * @see {@link Container#getBounds} For transformed bounds\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Graphics objects do not need to update their bounds as the context handles this.\n   * @private\n   */\n  updateBounds() {\n  }\n  /**\n   * Checks if the object contains the given point.\n   * Returns true if the point lies within the Graphics object's rendered area.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Check point intersection\n   * if (graphics.containsPoint({ x: 50, y: 50 })) {\n   *     console.log('Point is inside rectangle!');\n   * }\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is inside the Graphics object\n   * @see {@link Graphics#bounds} For bounding box checks\n   * @see {@link PointData} For point data structure\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @example\n   * ```ts\n   * // Destroy the graphics and its context\n   * graphics.destroy();\n   * graphics.destroy(true);\n   * graphics.destroy({ context: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context.\n   * The fill style can be a color, gradient, pattern, or a complex style object.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics\n   *     .setFillStyle({ color: 0xff0000 }) // Red fill\n   *     .rect(0, 0, 100, 100)\n   *     .fill();\n   *\n   * // Gradient fill\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setFillStyle(gradient)\n   *     .circle(100, 100, 50)\n   *     .fill();\n   *\n   * // Pattern fill\n   * const pattern = new FillPattern(texture);\n   * graphics\n   *     .setFillStyle({\n   *         fill: pattern,\n   *         alpha: 0.5\n   *     })\n   *     .rect(0, 0, 200, 200)\n   *     .fill();\n   * ```\n   * @param {FillInput} args - The fill style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link FillStyle} For fill style options\n   * @see {@link FillGradient} For gradient fills\n   * @see {@link FillPattern} For pattern fills\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context.\n   * Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color stroke\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 2,\n   *         color: 0x000000\n   *     })\n   *     .rect(0, 0, 100, 100)\n   *     .stroke();\n   *\n   * // Complex stroke style\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 4,\n   *         color: 0xff0000,\n   *         alpha: 0.5,\n   *         join: 'round',\n   *         cap: 'round',\n   *         alignment: 0.5\n   *     })\n   *     .circle(100, 100, 50)\n   *     .stroke();\n   *\n   * // Gradient stroke\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 10,\n   *         fill: gradient\n   *     })\n   *     .poly([0,0, 100,50, 0,100])\n   *     .stroke();\n   * ```\n   * @param {StrokeInput} args - The stroke style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link FillPattern} For pattern strokes\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style or specified style.\n   * Outlines the shape using the stroke settings.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Stroke with direct color\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .stroke({\n   *         width: 2,\n   *         color: 0xff0000\n   *     }); // 2px red stroke\n   *\n   * // Fill with texture\n   * graphics\n   *    .rect(0, 0, 100, 100)\n   *    .stroke(myTexture); // Fill with texture\n   *\n   * // Stroke with gradient\n   * const gradient = new FillGradient({\n   *     end: { x: 1, y: 0 },\n   *     colorStops: [\n   *         { offset: 0, color: 0xff0000 },\n   *         { offset: 0.5, color: 0x00ff00 },\n   *         { offset: 1, color: 0x0000ff },\n   *     ],\n   * });\n   *\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .stroke({\n   *         width: 4,\n   *         fill: gradient,\n   *         alignment: 0.5,\n   *         join: 'round'\n   *     });\n   * ```\n   * @param {StrokeStyle} args - Optional stroke style to apply. Can be:\n   * - A stroke style object with width, color, etc.\n   * - A gradient\n   * - A pattern\n   * If omitted, uses current stroke style.\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link setStrokeStyle} For setting default stroke style\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   * graphics\n   *     .circle(150, 150, 50)\n   *     .fill({ color: 0x00ff00 })\n   *     .beginPath() // Starts a new path\n   *     .circle(250, 150, 50)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for chaining\n   * @see {@link Graphics#moveTo} For starting a new subpath\n   * @see {@link Graphics#closePath} For closing the current path\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path.\n   *\n   * If a hole is not completely in a shape, it will fail to cut correctly.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw outer circle\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *     .circle(100, 100, 25) // Inner circle\n   *     .cut() // Cuts out the inner circle from the outer circle\n   * ```\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start point.\n   *\n   * This is useful for completing shapes and ensuring they are properly closed for fills.\n   * @example\n   * ```ts\n   * // Create a triangle with closed path\n   * const graphics = new Graphics();\n   * graphics\n   *     .moveTo(50, 50)\n   *     .lineTo(100, 100)\n   *     .lineTo(0, 100)\n   *     .closePath()\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path\n   * @see {@link Graphics#fill} For filling closed paths\n   * @see {@link Graphics#stroke} For stroking paths\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /**\n   * Saves the current graphics state onto a stack. The state includes:\n   * - Current transformation matrix\n   * - Current fill style\n   * - Current stroke style\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Save state before complex operations\n   * graphics.save();\n   *\n   * // Create transformed and styled shape\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4)\n   *     .setFillStyle({\n   *         color: 0xff0000,\n   *         alpha: 0.5\n   *     })\n   *     .rect(-25, -25, 50, 50)\n   *     .fill();\n   *\n   * // Restore to original state\n   * graphics.restore();\n   *\n   * // Continue drawing with previous state\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .fill();\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#restore} For restoring the saved state\n   * @see {@link Graphics#setTransform} For setting transformations\n   */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * This matrix represents all accumulated transformations including translate, scale, and rotate.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply some transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4);\n   *\n   * // Get the current transform matrix\n   * const matrix = graphics.getTransform();\n   * console.log(matrix.tx, matrix.ty); // 100, 100\n   *\n   * // Use the matrix for other operations\n   * graphics\n   *     .setTransform(matrix)\n   *     .circle(0, 0, 50)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @returns The current transformation matrix.\n   * @see {@link Graphics#setTransform} For setting the transform matrix\n   * @see {@link Matrix} For matrix operations\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .scaleTransform(2, 2)\n   *     .circle(0, 0, 25)\n   *     .fill({ color: 0xff0000 });\n   * // Reset transform to default state\n   * graphics\n   *     .resetTransform()\n   *     .circle(50, 50, 25) // Will draw at actual coordinates\n   *     .fill({ color: 0x00ff00 });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#getTransform} For getting the current transform\n   * @see {@link Graphics#setTransform} For setting a specific transform\n   * @see {@link Graphics#save} For saving the current transform state\n   * @see {@link Graphics#restore} For restoring a previous transform state\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it.\n   * This includes clearing the current path, fill style, stroke style, and transformations.\n   *\n   * > [!NOTE] Graphics objects are not designed to be continuously cleared and redrawn.\n   * > Instead, they are intended to be used for static or semi-static graphics that\n   * > can be redrawn as needed. Frequent clearing and redrawing may lead to performance issues.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw some shapes\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 })\n   *     .rect(200, 100, 100, 50)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Clear all graphics\n   * graphics.clear();\n   *\n   * // Start fresh with new shapes\n   * graphics\n   *     .circle(150, 150, 30)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path without clearing styles\n   * @see {@link Graphics#save} For saving the current state\n   * @see {@link Graphics#restore} For restoring a previous state\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * Gets or sets the current fill style for the graphics context. The fill style determines\n   * how shapes are filled when using the fill() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics.fillStyle = {\n   *     color: 0xff0000,  // Red\n   *     alpha: 1\n   * };\n   *\n   * // Using gradients\n   * const gradient = new FillGradient({\n   *     end: { x: 0, y: 1 }, // Vertical gradient\n   *     stops: [\n   *         { offset: 0, color: 0xff0000, alpha: 1 }, // Start color\n   *         { offset: 1, color: 0x0000ff, alpha: 1 }  // End color\n   *     ]\n   * });\n   *\n   * graphics.fillStyle = {\n   *     fill: gradient,\n   *     alpha: 0.8\n   * };\n   *\n   * // Using patterns\n   * graphics.fillStyle = {\n   *     texture: myTexture,\n   *     alpha: 1,\n   *     matrix: new Matrix()\n   *         .scale(0.5, 0.5)\n   *         .rotate(Math.PI / 4)\n   * };\n   * ```\n   * @type {ConvertedFillStyle}\n   * @see {@link FillStyle} For all available fill style options\n   * @see {@link FillGradient} For creating gradient fills\n   * @see {@link Graphics#fill} For applying the fill to paths\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * Gets or sets the current stroke style for the graphics context. The stroke style determines\n   * how paths are outlined when using the stroke() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic stroke style\n   * graphics.strokeStyle = {\n   *     width: 2,\n   *     color: 0xff0000,\n   *     alpha: 1\n   * };\n   *\n   * // Using with gradients\n   * const gradient = new FillGradient({\n   *   end: { x: 0, y: 1 },\n   *   stops: [\n   *       { offset: 0, color: 0xff0000, alpha: 1 },\n   *       { offset: 1, color: 0x0000ff, alpha: 1 }\n   *   ]\n   * });\n   *\n   * graphics.strokeStyle = {\n   *     width: 4,\n   *     fill: gradient,\n   *     alignment: 0.5,\n   *     join: 'round',\n   *     cap: 'round'\n   * };\n   *\n   * // Complex stroke settings\n   * graphics.strokeStyle = {\n   *     width: 6,\n   *     color: 0x00ff00,\n   *     alpha: 0.5,\n   *     join: 'miter',\n   *     miterLimit: 10,\n   * };\n   * ```\n   * @see {@link StrokeStyle} For all available stroke style options\n   * @see {@link Graphics#stroke} For applying the stroke to paths\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object that copies the current graphics content.\n   * The clone can either share the same context (shallow clone) or have its own independent\n   * context (deep clone).\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Create original graphics content\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Create a shallow clone (shared context)\n   * const shallowClone = graphics.clone();\n   *\n   * // Changes to original affect the clone\n   * graphics\n   *     .circle(200, 100, 30)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Create a deep clone (independent context)\n   * const deepClone = graphics.clone(true);\n   *\n   * // Modify deep clone independently\n   * deepClone\n   *     .translateTransform(100, 100)\n   *     .circle(0, 0, 40)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @param deep - Whether to create a deep clone of the graphics object.\n   *              If false (default), the context will be shared between objects.\n   *              If true, creates an independent copy of the context.\n   * @returns A new Graphics instance with either shared or copied context\n   * @see {@link Graphics#context} For accessing the underlying graphics context\n   * @see {@link GraphicsContext} For understanding the shared context behavior\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    if (color !== void 0)\n      fillStyle.color = color;\n    if (alpha !== void 0)\n      fillStyle.alpha = alpha;\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter.mjs';\n\n\"use strict\";\nlet currentAdapter = BrowserAdapter;\nconst DOMAdapter = {\n  /**\n   * Returns the current adapter.\n   * @returns {environment.Adapter} The current adapter.\n   */\n  get() {\n    return currentAdapter;\n  },\n  /**\n   * Sets the current adapter.\n   * @param adapter - The new adapter.\n   */\n  set(adapter) {\n    currentAdapter = adapter;\n  }\n};\n\nexport { DOMAdapter };\n//# sourceMappingURL=adapter.mjs.map\n","\"use strict\";\nconst BrowserAdapter = {\n  createCanvas: (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  },\n  createImage: () => new Image(),\n  getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n  getWebGLRenderingContext: () => WebGLRenderingContext,\n  getNavigator: () => navigator,\n  getBaseUrl: () => document.baseURI ?? window.location.href,\n  getFontFaceSet: () => document.fonts,\n  fetch: (url, options) => fetch(url, options),\n  parseXML: (xml) => {\n    const parser = new DOMParser();\n    return parser.parseFromString(xml, \"text/xml\");\n  }\n};\n\nexport { BrowserAdapter };\n//# sourceMappingURL=BrowserAdapter.mjs.map\n","\"use strict\";\nlet warnCount = 0;\nconst maxWarnings = 500;\nfunction warn(...args) {\n  if (warnCount === maxWarnings)\n    return;\n  warnCount++;\n  if (warnCount === maxWarnings) {\n    console.warn(\"PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.\");\n  } else {\n    console.warn(\"PixiJS Warning: \", ...args);\n  }\n}\n\nexport { warn };\n//# sourceMappingURL=warn.mjs.map\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","import { BindGroup } from '../../renderers/gpu/shader/BindGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cachedGroups = {};\nfunction getTextureBatchBindGroup(textures, size, maxTextures) {\n  let uid = 2166136261;\n  for (let i = 0; i < size; i++) {\n    uid ^= textures[i].uid;\n    uid = Math.imul(uid, 16777619);\n    uid >>>= 0;\n  }\n  return cachedGroups[uid] || generateTextureBatchBindGroup(textures, size, uid, maxTextures);\n}\nfunction generateTextureBatchBindGroup(textures, size, key, maxTextures) {\n  const bindGroupResources = {};\n  let bindIndex = 0;\n  for (let i = 0; i < maxTextures; i++) {\n    const texture = i < size ? textures[i] : Texture.EMPTY.source;\n    bindGroupResources[bindIndex++] = texture.source;\n    bindGroupResources[bindIndex++] = texture.style;\n  }\n  const bindGroup = new BindGroup(bindGroupResources);\n  cachedGroups[key] = bindGroup;\n  return bindGroup;\n}\n\nexport { getTextureBatchBindGroup };\n//# sourceMappingURL=getTextureBatchBindGroup.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\n\n\"use strict\";\nclass CanvasPoolClass {\n  constructor(canvasOptions) {\n    this._canvasPool = /* @__PURE__ */ Object.create(null);\n    this.canvasOptions = canvasOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */\n  _createCanvasAndContext(pixelWidth, pixelHeight) {\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = pixelWidth;\n    canvas.height = pixelHeight;\n    const context = canvas.getContext(\"2d\");\n    return { canvas, context };\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */\n  getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n    minWidth = Math.ceil(minWidth * resolution - 1e-6);\n    minHeight = Math.ceil(minHeight * resolution - 1e-6);\n    minWidth = nextPow2(minWidth);\n    minHeight = nextPow2(minHeight);\n    const key = (minWidth << 17) + (minHeight << 1);\n    if (!this._canvasPool[key]) {\n      this._canvasPool[key] = [];\n    }\n    let canvasAndContext = this._canvasPool[key].pop();\n    if (!canvasAndContext) {\n      canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n    }\n    return canvasAndContext;\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    const canvas = canvasAndContext.canvas;\n    const { width, height } = canvas;\n    const key = (width << 17) + (height << 1);\n    canvasAndContext.context.resetTransform();\n    canvasAndContext.context.clearRect(0, 0, width, height);\n    this._canvasPool[key].push(canvasAndContext);\n  }\n  clear() {\n    this._canvasPool = {};\n  }\n}\nconst CanvasPool = new CanvasPoolClass();\nGlobalResourceRegistry.register(CanvasPool);\n\nexport { CanvasPool, CanvasPoolClass };\n//# sourceMappingURL=CanvasPool.mjs.map\n","\"use strict\";\nvar LoaderParserPriority = /* @__PURE__ */ ((LoaderParserPriority2) => {\n  LoaderParserPriority2[LoaderParserPriority2[\"Low\"] = 0] = \"Low\";\n  LoaderParserPriority2[LoaderParserPriority2[\"Normal\"] = 1] = \"Normal\";\n  LoaderParserPriority2[LoaderParserPriority2[\"High\"] = 2] = \"High\";\n  return LoaderParserPriority2;\n})(LoaderParserPriority || {});\n\nexport { LoaderParserPriority };\n//# sourceMappingURL=LoaderParser.mjs.map\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\nclass Point {\n  /**\n   * Creates a new `Point`\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(x = 0, y = 0) {\n    /**\n     * Position of the point on the x axis\n     * @example\n     * ```ts\n     * // Set x position\n     * const point = new Point();\n     * point.x = 100;\n     *\n     * // Use in calculations\n     * const width = rightPoint.x - leftPoint.x;\n     * ```\n     */\n    this.x = 0;\n    /**\n     * Position of the point on the y axis\n     * @example\n     * ```ts\n     * // Set y position\n     * const point = new Point();\n     * point.y = 200;\n     *\n     * // Use in calculations\n     * const height = bottomPoint.y - topPoint.y;\n     * ```\n     */\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  /**\n   * Creates a clone of this point, which is a new instance with the same `x` and `y` values.\n   * @example\n   * ```ts\n   * // Basic point cloning\n   * const original = new Point(100, 200);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.set(300, 400);\n   *\n   * // Verify independence\n   * console.log(original); // Point(100, 200)\n   * console.log(modified); // Point(300, 400)\n   * ```\n   * @remarks\n   * - Creates new Point instance\n   * - Deep copies x and y values\n   * - Independent from original\n   * - Useful for preserving values\n   * @returns A clone of this point\n   * @see {@link Point.copyFrom} For copying into existing point\n   * @see {@link Point.copyTo} For copying to existing point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n  /**\n   * Copies x and y from the given point into this point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Point(100, 200);\n   * const target = new Point();\n   * target.copyFrom(source);\n   *\n   * // Copy and chain operations\n   * const point = new Point()\n   *     .copyFrom(source)\n   *     .set(x + 50, y + 50);\n   *\n   * // Copy from any PointData\n   * const data = { x: 10, y: 20 };\n   * point.copyFrom(data);\n   * ```\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   * @see {@link Point.copyTo} For copying to another point\n   * @see {@link Point.clone} For creating new point copy\n   */\n  copyFrom(p) {\n    this.set(p.x, p.y);\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Point(100, 200);\n   * const target = new Point();\n   * source.copyTo(target);\n   * ```\n   * @param p - The point to copy to. Can be any type that is or extends `PointLike`\n   * @returns The point (`p`) with values updated\n   * @see {@link Point.copyFrom} For copying from another point\n   * @see {@link Point.clone} For creating new point copy\n   */\n  copyTo(p) {\n    p.set(this.x, this.y);\n    return p;\n  }\n  /**\n   * Checks if another point is equal to this point.\n   *\n   * Compares x and y values using strict equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const p1 = new Point(100, 200);\n   * const p2 = new Point(100, 200);\n   * console.log(p1.equals(p2)); // true\n   *\n   * // Compare with PointData\n   * const data = { x: 100, y: 200 };\n   * console.log(p1.equals(data)); // true\n   *\n   * // Check different points\n   * const p3 = new Point(200, 300);\n   * console.log(p1.equals(p3)); // false\n   * ```\n   * @param p - The point to check\n   * @returns `true` if both `x` and `y` are equal\n   * @see {@link Point.copyFrom} For making points equal\n   * @see {@link PointData} For point data interface\n   */\n  equals(p) {\n    return p.x === this.x && p.y === this.y;\n  }\n  /**\n   * Sets the point to a new x and y position.\n   *\n   * If y is omitted, both x and y will be set to x.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * const point = new Point();\n   * point.set(100, 200);\n   *\n   * // Set both x and y to same value\n   * point.set(50); // x=50, y=50\n   *\n   * // Chain with other operations\n   * point\n   *     .set(10, 20)\n   *     .copyTo(otherPoint);\n   * ```\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis, defaults to x\n   * @returns The point instance itself\n   * @see {@link Point.copyFrom} For copying from another point\n   * @see {@link Point.equals} For comparing positions\n   */\n  set(x = 0, y = x) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n  }\n  /**\n   * A static Point object with `x` and `y` values of `0`.\n   *\n   * This shared instance is reset to zero values when accessed.\n   *\n   * > [!IMPORTANT] This point is shared and temporary. Do not store references to it.\n   * @example\n   * ```ts\n   * // Use for temporary calculations\n   * const tempPoint = Point.shared;\n   * tempPoint.set(100, 200);\n   * matrix.apply(tempPoint);\n   *\n   * // Will be reset to (0,0) on next access\n   * const fresh = Point.shared; // x=0, y=0\n   * ```\n   * @readonly\n   * @returns A fresh zeroed point for temporary use\n   * @see {@link Point.constructor} For creating new points\n   * @see {@link PointData} For basic point interface\n   */\n  static get shared() {\n    tempPoint.x = 0;\n    tempPoint.y = 0;\n    return tempPoint;\n  }\n}\nconst tempPoint = new Point();\n\nexport { Point };\n//# sourceMappingURL=Point.mjs.map\n","import { BLEND_TO_NPM } from './const.mjs';\n\n\"use strict\";\nfunction getAdjustedBlendModeBlend(blendMode, textureSource) {\n  if (textureSource.alphaMode === \"no-premultiply-alpha\") {\n    return BLEND_TO_NPM[blendMode] || blendMode;\n  }\n  return blendMode;\n}\n\nexport { getAdjustedBlendModeBlend };\n//# sourceMappingURL=getAdjustedBlendModeBlend.mjs.map\n","\"use strict\";\nfunction nextPow2(v) {\n  v += v === 0 ? 1 : 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\nfunction isPow2(v) {\n  return !(v & v - 1) && !!v;\n}\nfunction log2(v) {\n  let r = (v > 65535 ? 1 : 0) << 4;\n  v >>>= r;\n  let shift = (v > 255 ? 1 : 0) << 3;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 15 ? 1 : 0) << 2;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 3 ? 1 : 0) << 1;\n  v >>>= shift;\n  r |= shift;\n  return r | v >> 1;\n}\n\nexport { isPow2, log2, nextPow2 };\n//# sourceMappingURL=pow2.mjs.map\n","\"use strict\";\nvar UPDATE_PRIORITY = /* @__PURE__ */ ((UPDATE_PRIORITY2) => {\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"INTERACTION\"] = 50] = \"INTERACTION\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"HIGH\"] = 25] = \"HIGH\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"NORMAL\"] = 0] = \"NORMAL\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"LOW\"] = -25] = \"LOW\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"UTILITY\"] = -50] = \"UTILITY\";\n  return UPDATE_PRIORITY2;\n})(UPDATE_PRIORITY || {});\n\nexport { UPDATE_PRIORITY };\n//# sourceMappingURL=const.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass InstructionSet {\n  constructor() {\n    /** a unique id for this instruction set used through the renderer */\n    this.uid = uid(\"instructionSet\");\n    /** the array of instructions */\n    this.instructions = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    this.instructionSize = 0;\n    this.renderables = [];\n    /** used by the garbage collector to track when the instruction set was last used */\n    this.gcTick = 0;\n  }\n  /** reset the instruction set so it can be reused set size back to 0 */\n  reset() {\n    this.instructionSize = 0;\n  }\n  /**\n   * Destroy the instruction set, clearing the instructions and renderables.\n   * @internal\n   */\n  destroy() {\n    this.instructions.length = 0;\n    this.renderables.length = 0;\n    this.renderPipes = null;\n    this.gcTick = 0;\n  }\n  /**\n   * Add an instruction to the set\n   * @param instruction - add an instruction to the set\n   */\n  add(instruction) {\n    this.instructions[this.instructionSize++] = instruction;\n  }\n  /**\n   * Log the instructions to the console (for debugging)\n   * @internal\n   */\n  log() {\n    this.instructions.length = this.instructionSize;\n    console.table(this.instructions, [\"type\", \"action\"]);\n  }\n}\n\nexport { InstructionSet };\n//# sourceMappingURL=InstructionSet.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { multiplyHexColors } from '../../container/utils/multiplyHexColors.mjs';\n\n\"use strict\";\nconst identityMatrix = new Matrix();\nclass BatchableGraphics {\n  constructor() {\n    this.packAsQuad = false;\n    this.batcherName = \"default\";\n    this.topology = \"triangle-list\";\n    this.applyTransform = true;\n    this.roundPixels = 0;\n    this._batcher = null;\n    this._batch = null;\n  }\n  get uvs() {\n    return this.geometryData.uvs;\n  }\n  get positions() {\n    return this.geometryData.vertices;\n  }\n  get indices() {\n    return this.geometryData.indices;\n  }\n  get blendMode() {\n    if (this.renderable && this.applyTransform) {\n      return this.renderable.groupBlendMode;\n    }\n    return \"normal\";\n  }\n  get color() {\n    const rgb = this.baseColor;\n    const bgr = rgb >> 16 | rgb & 65280 | (rgb & 255) << 16;\n    const renderable = this.renderable;\n    if (renderable) {\n      return multiplyHexColors(bgr, renderable.groupColor) + (this.alpha * renderable.groupAlpha * 255 << 24);\n    }\n    return bgr + (this.alpha * 255 << 24);\n  }\n  get transform() {\n    return this.renderable?.groupTransform || identityMatrix;\n  }\n  copyTo(gpuBuffer) {\n    gpuBuffer.indexOffset = this.indexOffset;\n    gpuBuffer.indexSize = this.indexSize;\n    gpuBuffer.attributeOffset = this.attributeOffset;\n    gpuBuffer.attributeSize = this.attributeSize;\n    gpuBuffer.baseColor = this.baseColor;\n    gpuBuffer.alpha = this.alpha;\n    gpuBuffer.texture = this.texture;\n    gpuBuffer.geometryData = this.geometryData;\n    gpuBuffer.topology = this.topology;\n  }\n  reset() {\n    this.applyTransform = true;\n    this.renderable = null;\n    this.topology = \"triangle-list\";\n  }\n  destroy() {\n    this.renderable = null;\n    this.texture = null;\n    this.geometryData = null;\n    this._batcher = null;\n    this._batch = null;\n  }\n}\n\nexport { BatchableGraphics };\n//# sourceMappingURL=BatchableGraphics.mjs.map\n","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\nvar CLEAR = /* @__PURE__ */ ((CLEAR2) => {\n  CLEAR2[CLEAR2[\"NONE\"] = 0] = \"NONE\";\n  CLEAR2[CLEAR2[\"COLOR\"] = 16384] = \"COLOR\";\n  CLEAR2[CLEAR2[\"STENCIL\"] = 1024] = \"STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH\"] = 256] = \"DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_DEPTH\"] = 16640] = \"COLOR_DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_STENCIL\"] = 17408] = \"COLOR_STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH_STENCIL\"] = 1280] = \"DEPTH_STENCIL\";\n  CLEAR2[CLEAR2[\"ALL\"] = 17664] = \"ALL\";\n  return CLEAR2;\n})(CLEAR || {});\n\nexport { CLEAR };\n//# sourceMappingURL=const.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\n\n\"use strict\";\nclass CacheClass {\n  constructor() {\n    this._parsers = [];\n    this._cache = /* @__PURE__ */ new Map();\n    this._cacheMap = /* @__PURE__ */ new Map();\n  }\n  /** Clear all entries. */\n  reset() {\n    this._cacheMap.clear();\n    this._cache.clear();\n  }\n  /**\n   * Check if the key exists\n   * @param key - The key to check\n   */\n  has(key) {\n    return this._cache.has(key);\n  }\n  /**\n   * Fetch entry by key\n   * @param key - The key of the entry to get\n   */\n  get(key) {\n    const result = this._cache.get(key);\n    if (!result) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n    }\n    return result;\n  }\n  /**\n   * Set a value by key or keys name\n   * @param key - The key or keys to set\n   * @param value - The value to store in the cache or from which cacheable assets will be derived.\n   */\n  set(key, value) {\n    const keys = convertToList(key);\n    let cacheableAssets;\n    for (let i = 0; i < this.parsers.length; i++) {\n      const parser = this.parsers[i];\n      if (parser.test(value)) {\n        cacheableAssets = parser.getCacheableAssets(keys, value);\n        break;\n      }\n    }\n    const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n    if (!cacheableAssets) {\n      keys.forEach((key2) => {\n        cacheableMap.set(key2, value);\n      });\n    }\n    const cacheKeys = [...cacheableMap.keys()];\n    const cachedAssets = {\n      cacheKeys,\n      keys\n    };\n    keys.forEach((key2) => {\n      this._cacheMap.set(key2, cachedAssets);\n    });\n    cacheKeys.forEach((key2) => {\n      const val = cacheableAssets ? cacheableAssets[key2] : value;\n      if (this._cache.has(key2) && this._cache.get(key2) !== val) {\n        warn(\"[Cache] already has key:\", key2);\n      }\n      this._cache.set(key2, cacheableMap.get(key2));\n    });\n  }\n  /**\n   * Remove entry by key\n   *\n   * This function will also remove any associated alias from the cache also.\n   * @param key - The key of the entry to remove\n   */\n  remove(key) {\n    if (!this._cacheMap.has(key)) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n      return;\n    }\n    const cacheMap = this._cacheMap.get(key);\n    const cacheKeys = cacheMap.cacheKeys;\n    cacheKeys.forEach((key2) => {\n      this._cache.delete(key2);\n    });\n    cacheMap.keys.forEach((key2) => {\n      this._cacheMap.delete(key2);\n    });\n  }\n  /**\n   * All loader parsers registered\n   * @advanced\n   */\n  get parsers() {\n    return this._parsers;\n  }\n}\nconst Cache = new CacheClass();\n\nexport { Cache };\n//# sourceMappingURL=Cache.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { deprecation } from '../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../view/ViewContainer.mjs';\n\n\"use strict\";\nclass Sprite extends ViewContainer {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = Texture.EMPTY) {\n    if (options instanceof Texture) {\n      options = { texture: options };\n    }\n    const { texture = Texture.EMPTY, anchor, roundPixels, width, height, ...rest } = options;\n    super({\n      label: \"Sprite\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"sprite\";\n    /** @internal */\n    this.batched = true;\n    this._visualBounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor) {\n      this.anchor = anchor;\n    } else if (texture.defaultAnchor) {\n      this.anchor = texture.defaultAnchor;\n    }\n    this.texture = texture;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * Creates a new sprite based on a source texture, image, video, or canvas element.\n   * This is a convenience method that automatically creates and manages textures.\n   * @example\n   * ```ts\n   * // Create from path or URL\n   * const sprite = Sprite.from('assets/image.png');\n   *\n   * // Create from existing texture\n   * const sprite = Sprite.from(texture);\n   *\n   * // Create from canvas\n   * const canvas = document.createElement('canvas');\n   * const sprite = Sprite.from(canvas, true); // Skip caching new texture\n   * ```\n   * @param source - The source to create the sprite from. Can be a path to an image, a texture,\n   * or any valid texture source (canvas, video, etc.)\n   * @param skipCache - Whether to skip adding to the texture cache when creating a new texture\n   * @returns A new sprite based on the source\n   * @see {@link Texture.from} For texture creation details\n   * @see {@link Assets} For asset loading and management\n   */\n  static from(source, skipCache = false) {\n    if (source instanceof Texture) {\n      return new Sprite(source);\n    }\n    return new Sprite(Texture.from(source, skipCache));\n  }\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    this._texture = value;\n    if (this._width) {\n      this._setWidth(this._width, this._texture.orig.width);\n    }\n    if (this._height) {\n      this._setHeight(this._height, this._texture.orig.height);\n    }\n    this.onViewUpdate();\n  }\n  /**\n   * The texture that is displayed by the sprite. When changed, automatically updates\n   * the sprite dimensions and manages texture event listeners.\n   * @example\n   * ```ts\n   * // Create sprite with texture\n   * const sprite = new Sprite({\n   *     texture: Texture.from('sprite.png')\n   * });\n   *\n   * // Update texture\n   * sprite.texture = Texture.from('newSprite.png');\n   *\n   * // Use texture from spritesheet\n   * const sheet = await Assets.load('spritesheet.json');\n   * sprite.texture = sheet.textures['frame1.png'];\n   *\n   * // Reset to empty texture\n   * sprite.texture = Texture.EMPTY;\n   * ```\n   * @see {@link Texture} For texture creation and management\n   * @see {@link Assets} For asset loading\n   */\n  get texture() {\n    return this._texture;\n  }\n  /**\n   * The bounds of the sprite, taking into account the texture's trim area.\n   * @example\n   * ```ts\n   * const texture = new Texture({\n   *     source: new TextureSource({ width: 300, height: 300 }),\n   *     frame: new Rectangle(196, 66, 58, 56),\n   *     trim: new Rectangle(4, 4, 58, 56),\n   *     orig: new Rectangle(0, 0, 64, 64),\n   *     rotate: 2,\n   * });\n   * const sprite = new Sprite(texture);\n   * const visualBounds = sprite.visualBounds;\n   * // console.log(visualBounds); // { minX: -4, maxX: 62, minY: -4, maxY: 60 }\n   */\n  get visualBounds() {\n    updateQuadBounds(this._visualBounds, this._anchor, this._texture);\n    return this._visualBounds;\n  }\n  /**\n   * @deprecated\n   * @ignore\n   */\n  get sourceBounds() {\n    deprecation(\"8.6.1\", \"Sprite.sourceBounds is deprecated, use visualBounds instead.\");\n    return this.visualBounds;\n  }\n  /** @private */\n  updateBounds() {\n    const anchor = this._anchor;\n    const texture = this._texture;\n    const bounds = this._bounds;\n    const { width, height } = texture.orig;\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * sprite.destroy();\n   * sprite.destroy(true);\n   * sprite.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._texture = null;\n    this._visualBounds = null;\n    this._bounds = null;\n    this._anchor = null;\n    this._gpuData = null;\n  }\n  /**\n   * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n   * and passed to the constructor.\n   *\n   * - The default is `(0,0)`, this means the sprite's origin is the top left.\n   * - Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n   * - Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * ```ts\n   * // Center the anchor point\n   * sprite.anchor = 0.5; // Sets both x and y to 0.5\n   * sprite.position.set(400, 300); // Sprite will be centered at this position\n   *\n   * // Set specific x/y anchor points\n   * sprite.anchor = {\n   *     x: 1, // Right edge\n   *     y: 0  // Top edge\n   * };\n   *\n   * // Using individual coordinates\n   * sprite.anchor.set(0.5, 1); // Center-bottom\n   *\n   * // For rotation around center\n   * sprite.anchor.set(0.5);\n   * sprite.rotation = Math.PI / 4; // 45 degrees around center\n   *\n   * // For scaling from center\n   * sprite.anchor.set(0.5);\n   * sprite.scale.set(2); // Scales from center point\n   * ```\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   * The width of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set width directly\n   * sprite.width = 200;\n   * console.log(sprite.scale.x); // Scale adjusted to match width\n   *\n   * // Set width while preserving aspect ratio\n   * const ratio = sprite.height / sprite.width;\n   * sprite.width = 300;\n   * sprite.height = 300 * ratio;\n   *\n   * // For better performance when setting both width and height\n   * sprite.setSize(300, 400); // Avoids recalculating bounds twice\n   *\n   * // Reset to original texture size\n   * sprite.width = sprite.texture.orig.width;\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x) * this._texture.orig.width;\n  }\n  set width(value) {\n    this._setWidth(value, this._texture.orig.width);\n    this._width = value;\n  }\n  /**\n   * The height of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set height directly\n   * sprite.height = 150;\n   * console.log(sprite.scale.y); // Scale adjusted to match height\n   *\n   * // Set height while preserving aspect ratio\n   * const ratio = sprite.width / sprite.height;\n   * sprite.height = 200;\n   * sprite.width = 200 * ratio;\n   *\n   * // For better performance when setting both width and height\n   * sprite.setSize(300, 400); // Avoids recalculating bounds twice\n   *\n   * // Reset to original texture size\n   * sprite.height = sprite.texture.orig.height;\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y) * this._texture.orig.height;\n  }\n  set height(value) {\n    this._setHeight(value, this._texture.orig.height);\n    this._height = value;\n  }\n  /**\n   * Retrieves the size of the Sprite as a [Size]{@link Size} object based on the texture dimensions and scale.\n   * This is faster than getting width and height separately as it only calculates the bounds once.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const sprite = new Sprite(Texture.from('sprite.png'));\n   * const size = sprite.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * sprite.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in, to avoid allocating a new object\n   * @returns The size of the Sprite\n   * @see {@link Sprite#width} For getting just the width\n   * @see {@link Sprite#height} For getting just the height\n   * @see {@link Sprite#setSize} For setting both width and height\n   */\n  getSize(out) {\n    out || (out = {});\n    out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n    out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Sprite to the specified width and height.\n   * This is faster than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * const sprite = new Sprite(Texture.from('sprite.png'));\n   * sprite.setSize(100, 200); // Width: 100, Height: 200\n   *\n   * // Set uniform size\n   * sprite.setSize(100); // Sets both width and height to 100\n   *\n   * // Set size with object\n   * sprite.setSize({\n   *     width: 200,\n   *     height: 300\n   * });\n   *\n   * // Reset to texture size\n   * sprite.setSize(\n   *     sprite.texture.orig.width,\n   *     sprite.texture.orig.height\n   * );\n   * ```\n   * @param value - This can be either a number or a {@link Size} object\n   * @param height - The height to set. Defaults to the value of `width` if not provided\n   * @see {@link Sprite#width} For setting width only\n   * @see {@link Sprite#height} For setting height only\n   * @see {@link Sprite#texture} For the source dimensions\n   */\n  setSize(value, height) {\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, this._texture.orig.width);\n    height !== void 0 && this._setHeight(height, this._texture.orig.height);\n  }\n}\n\nexport { Sprite };\n//# sourceMappingURL=Sprite.mjs.map\n","\"use strict\";\nclass SystemRunner {\n  /**\n   * @param name - The function name that will be executed on the listeners added to this Runner.\n   */\n  constructor(name) {\n    this.items = [];\n    this._name = name;\n  }\n  /* jsdoc/check-param-names */\n  /**\n   * Dispatch/Broadcast Runner to all listeners added to the queue.\n   * @param {...any} params - (optional) parameters to pass to each listener\n   */\n  /* jsdoc/check-param-names */\n  emit(a0, a1, a2, a3, a4, a5, a6, a7) {\n    const { name, items } = this;\n    for (let i = 0, len = items.length; i < len; i++) {\n      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    return this;\n  }\n  /**\n   * Add a listener to the Runner\n   *\n   * Runners do not need to have scope or functions passed to them.\n   * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n   * as the name provided to the Runner when it was created.\n   *\n   * Eg A listener passed to this Runner will require a 'complete' function.\n   *\n   * ```ts\n   * import { Runner } from 'pixi.js';\n   *\n   * const complete = new Runner('complete');\n   * ```\n   *\n   * The scope used will be the object itself.\n   * @param {any} item - The object that will be listening.\n   */\n  add(item) {\n    if (item[this._name]) {\n      this.remove(item);\n      this.items.push(item);\n    }\n    return this;\n  }\n  /**\n   * Remove a single listener from the dispatch queue.\n   * @param {any} item - The listener that you would like to remove.\n   */\n  remove(item) {\n    const index = this.items.indexOf(item);\n    if (index !== -1) {\n      this.items.splice(index, 1);\n    }\n    return this;\n  }\n  /**\n   * Check to see if the listener is already in the Runner\n   * @param {any} item - The listener that you would like to check.\n   */\n  contains(item) {\n    return this.items.indexOf(item) !== -1;\n  }\n  /** Remove all listeners from the Runner */\n  removeAll() {\n    this.items.length = 0;\n    return this;\n  }\n  /** Remove all references, don't use after this. */\n  destroy() {\n    this.removeAll();\n    this.items = null;\n    this._name = null;\n  }\n  /**\n   * `true` if there are no this Runner contains no listeners\n   * @readonly\n   */\n  get empty() {\n    return this.items.length === 0;\n  }\n  /**\n   * The name of the runner.\n   * @readonly\n   */\n  get name() {\n    return this._name;\n  }\n}\n\nexport { SystemRunner };\n//# sourceMappingURL=SystemRunner.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation } from '../../../../utils/logging/deprecation.mjs';\nimport { definedProps } from '../../../container/utils/definedProps.mjs';\n\n\"use strict\";\nconst emptyColorStops = [{ offset: 0, color: \"white\" }, { offset: 1, color: \"black\" }];\nconst _FillGradient = class _FillGradient {\n  constructor(...args) {\n    /**\n     * Unique identifier for this gradient instance\n     * @internal\n     */\n    this.uid = uid(\"fillGradient\");\n    /**\n     * Internal tick counter to track changes in the gradient.\n     * This is used to invalidate the gradient when the texture changes.\n     * @internal\n     */\n    this._tick = 0;\n    /** Type of gradient - currently only supports 'linear' */\n    this.type = \"linear\";\n    /** Array of color stops defining the gradient */\n    this.colorStops = [];\n    let options = ensureGradientOptions(args);\n    const defaults = options.type === \"radial\" ? _FillGradient.defaultRadialOptions : _FillGradient.defaultLinearOptions;\n    options = { ...defaults, ...definedProps(options) };\n    this._textureSize = options.textureSize;\n    this._wrapMode = options.wrapMode;\n    if (options.type === \"radial\") {\n      this.center = options.center;\n      this.outerCenter = options.outerCenter ?? this.center;\n      this.innerRadius = options.innerRadius;\n      this.outerRadius = options.outerRadius;\n      this.scale = options.scale;\n      this.rotation = options.rotation;\n    } else {\n      this.start = options.start;\n      this.end = options.end;\n    }\n    this.textureSpace = options.textureSpace;\n    this.type = options.type;\n    options.colorStops.forEach((stop) => {\n      this.addColorStop(stop.offset, stop.color);\n    });\n  }\n  /**\n   * Adds a color stop to the gradient\n   * @param offset - Position of the stop (0-1)\n   * @param color - Color of the stop\n   * @returns This gradient instance for chaining\n   */\n  addColorStop(offset, color) {\n    this.colorStops.push({ offset, color: Color.shared.setValue(color).toHexa() });\n    return this;\n  }\n  /**\n   * Builds the internal texture and transform for the gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildLinearGradient() {\n    if (this.texture)\n      return;\n    let { x: x0, y: y0 } = this.start;\n    let { x: x1, y: y1 } = this.end;\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    const flip = dx < 0 || dy < 0;\n    if (this._wrapMode === \"clamp-to-edge\") {\n      if (dx < 0) {\n        const temp = x0;\n        x0 = x1;\n        x1 = temp;\n        dx *= -1;\n      }\n      if (dy < 0) {\n        const temp = y0;\n        y0 = y1;\n        y1 = temp;\n        dy *= -1;\n      }\n    }\n    const colorStops = this.colorStops.length ? this.colorStops : emptyColorStops;\n    const defaultSize = this._textureSize;\n    const { canvas, context } = getCanvas(defaultSize, 1);\n    const gradient = !flip ? context.createLinearGradient(0, 0, this._textureSize, 0) : context.createLinearGradient(this._textureSize, 0, 0, 0);\n    addColorStops(gradient, colorStops);\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, defaultSize, 1);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressMode: this._wrapMode\n      })\n    });\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    const angle = Math.atan2(dy, dx);\n    const m = new Matrix();\n    m.scale(dist / defaultSize, 1);\n    m.rotate(angle);\n    m.translate(x0, y0);\n    if (this.textureSpace === \"local\") {\n      m.scale(defaultSize, defaultSize);\n    }\n    this.transform = m;\n  }\n  /**\n   * Builds the internal texture and transform for the gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildGradient() {\n    if (!this.texture)\n      this._tick++;\n    if (this.type === \"linear\") {\n      this.buildLinearGradient();\n    } else {\n      this.buildRadialGradient();\n    }\n  }\n  /**\n   * Builds the internal texture and transform for the radial gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildRadialGradient() {\n    if (this.texture)\n      return;\n    const colorStops = this.colorStops.length ? this.colorStops : emptyColorStops;\n    const defaultSize = this._textureSize;\n    const { canvas, context } = getCanvas(defaultSize, defaultSize);\n    const { x: x0, y: y0 } = this.center;\n    const { x: x1, y: y1 } = this.outerCenter;\n    const r0 = this.innerRadius;\n    const r1 = this.outerRadius;\n    const ox = x1 - r1;\n    const oy = y1 - r1;\n    const scale = defaultSize / (r1 * 2);\n    const cx = (x0 - ox) * scale;\n    const cy = (y0 - oy) * scale;\n    const gradient = context.createRadialGradient(\n      cx,\n      cy,\n      r0 * scale,\n      (x1 - ox) * scale,\n      (y1 - oy) * scale,\n      r1 * scale\n    );\n    addColorStops(gradient, colorStops);\n    context.fillStyle = colorStops[colorStops.length - 1].color;\n    context.fillRect(0, 0, defaultSize, defaultSize);\n    context.fillStyle = gradient;\n    context.translate(cx, cy);\n    context.rotate(this.rotation);\n    context.scale(1, this.scale);\n    context.translate(-cx, -cy);\n    context.fillRect(0, 0, defaultSize, defaultSize);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressMode: this._wrapMode\n      })\n    });\n    const m = new Matrix();\n    m.scale(1 / scale, 1 / scale);\n    m.translate(ox, oy);\n    if (this.textureSpace === \"local\") {\n      m.scale(defaultSize, defaultSize);\n    }\n    this.transform = m;\n  }\n  /** Destroys the gradient, releasing resources. This will also destroy the internal texture. */\n  destroy() {\n    this.texture?.destroy(true);\n    this.texture = null;\n    this.transform = null;\n    this.colorStops = [];\n    this.start = null;\n    this.end = null;\n    this.center = null;\n    this.outerCenter = null;\n  }\n  /**\n   * Returns a unique key for this gradient instance.\n   * This key is used for caching and texture management.\n   * @returns {string} Unique key for the gradient\n   */\n  get styleKey() {\n    return `fill-gradient-${this.uid}-${this._tick}`;\n  }\n};\n/** Default options for creating a gradient fill */\n_FillGradient.defaultLinearOptions = {\n  start: { x: 0, y: 0 },\n  end: { x: 0, y: 1 },\n  colorStops: [],\n  textureSpace: \"local\",\n  type: \"linear\",\n  textureSize: 256,\n  wrapMode: \"clamp-to-edge\"\n};\n/** Default options for creating a radial gradient fill */\n_FillGradient.defaultRadialOptions = {\n  center: { x: 0.5, y: 0.5 },\n  innerRadius: 0,\n  outerRadius: 0.5,\n  colorStops: [],\n  scale: 1,\n  textureSpace: \"local\",\n  type: \"radial\",\n  textureSize: 256,\n  wrapMode: \"clamp-to-edge\"\n};\nlet FillGradient = _FillGradient;\nfunction addColorStops(gradient, colorStops) {\n  for (let i = 0; i < colorStops.length; i++) {\n    const stop = colorStops[i];\n    gradient.addColorStop(stop.offset, stop.color);\n  }\n}\nfunction getCanvas(width, height) {\n  const canvas = DOMAdapter.get().createCanvas(width, height);\n  const context = canvas.getContext(\"2d\");\n  return { canvas, context };\n}\nfunction ensureGradientOptions(args) {\n  let options = args[0] ?? {};\n  if (typeof options === \"number\" || args[1]) {\n    deprecation(\"8.5.2\", `use options object instead`);\n    options = {\n      type: \"linear\",\n      start: { x: args[0], y: args[1] },\n      end: { x: args[2], y: args[3] },\n      textureSpace: args[4],\n      textureSize: args[5] ?? FillGradient.defaultLinearOptions.textureSize\n    };\n  }\n  return options;\n}\n\nexport { FillGradient };\n//# sourceMappingURL=FillGradient.mjs.map\n","\"use strict\";\nconst blendModeIds = {\n  normal: 0,\n  add: 1,\n  multiply: 2,\n  screen: 3,\n  overlay: 4,\n  erase: 5,\n  \"normal-npm\": 6,\n  \"add-npm\": 7,\n  \"screen-npm\": 8,\n  min: 9,\n  max: 10\n};\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _State = class _State {\n  constructor() {\n    this.data = 0;\n    this.blendMode = \"normal\";\n    this.polygonOffset = 0;\n    this.blend = true;\n    this.depthMask = true;\n  }\n  /**\n   * Activates blending of the computed fragment color values.\n   * @default true\n   */\n  get blend() {\n    return !!(this.data & 1 << BLEND);\n  }\n  set blend(value) {\n    if (!!(this.data & 1 << BLEND) !== value) {\n      this.data ^= 1 << BLEND;\n    }\n  }\n  /**\n   * Activates adding an offset to depth values of polygon's fragments\n   * @default false\n   */\n  get offsets() {\n    return !!(this.data & 1 << OFFSET);\n  }\n  set offsets(value) {\n    if (!!(this.data & 1 << OFFSET) !== value) {\n      this.data ^= 1 << OFFSET;\n    }\n  }\n  /** The culling settings for this state none - No culling back - Back face culling front - Front face culling */\n  set cullMode(value) {\n    if (value === \"none\") {\n      this.culling = false;\n      return;\n    }\n    this.culling = true;\n    this.clockwiseFrontFace = value === \"front\";\n  }\n  get cullMode() {\n    if (!this.culling) {\n      return \"none\";\n    }\n    return this.clockwiseFrontFace ? \"front\" : \"back\";\n  }\n  /**\n   * Activates culling of polygons.\n   * @default false\n   */\n  get culling() {\n    return !!(this.data & 1 << CULLING);\n  }\n  set culling(value) {\n    if (!!(this.data & 1 << CULLING) !== value) {\n      this.data ^= 1 << CULLING;\n    }\n  }\n  /**\n   * Activates depth comparisons and updates to the depth buffer.\n   * @default false\n   */\n  get depthTest() {\n    return !!(this.data & 1 << DEPTH_TEST);\n  }\n  set depthTest(value) {\n    if (!!(this.data & 1 << DEPTH_TEST) !== value) {\n      this.data ^= 1 << DEPTH_TEST;\n    }\n  }\n  /**\n   * Enables or disables writing to the depth buffer.\n   * @default true\n   */\n  get depthMask() {\n    return !!(this.data & 1 << DEPTH_MASK);\n  }\n  set depthMask(value) {\n    if (!!(this.data & 1 << DEPTH_MASK) !== value) {\n      this.data ^= 1 << DEPTH_MASK;\n    }\n  }\n  /**\n   * Specifies whether or not front or back-facing polygons can be culled.\n   * @default false\n   */\n  get clockwiseFrontFace() {\n    return !!(this.data & 1 << WINDING);\n  }\n  set clockwiseFrontFace(value) {\n    if (!!(this.data & 1 << WINDING) !== value) {\n      this.data ^= 1 << WINDING;\n    }\n  }\n  /**\n   * The blend mode to be applied when this state is set. Apply a value of `normal` to reset the blend mode.\n   * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this._blendMode;\n  }\n  set blendMode(value) {\n    this.blend = value !== \"none\";\n    this._blendMode = value;\n    this._blendModeId = blendModeIds[value] || 0;\n  }\n  /**\n   * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n   * @default 0\n   */\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n  set polygonOffset(value) {\n    this.offsets = !!value;\n    this._polygonOffset = value;\n  }\n  toString() {\n    return `[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;\n  }\n  /**\n   * A quickly getting an instance of a State that is configured for 2d rendering.\n   * @returns a new State with values set for 2d rendering\n   */\n  static for2d() {\n    const state = new _State();\n    state.depthTest = false;\n    state.blend = true;\n    return state;\n  }\n};\n_State.default2d = _State.for2d();\nlet State = _State;\n\nexport { State };\n//# sourceMappingURL=State.mjs.map\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\nconst idCounts = /* @__PURE__ */ Object.create(null);\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createIdFromString(value, groupId) {\n  let id = idHash[value];\n  if (id === void 0) {\n    if (idCounts[groupId] === void 0) {\n      idCounts[groupId] = 1;\n    }\n    idHash[value] = id = idCounts[groupId]++;\n  }\n  return id;\n}\n\nexport { createIdFromString };\n//# sourceMappingURL=createIdFromString.mjs.map\n","\"use strict\";\nclass TickerListener {\n  /**\n   * Constructor\n   * @private\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting\n   * @param once - If the handler should fire once\n   */\n  constructor(fn, context = null, priority = 0, once = false) {\n    /** The next item in chain. */\n    this.next = null;\n    /** The previous item in chain. */\n    this.previous = null;\n    /** `true` if this listener has been destroyed already. */\n    this._destroyed = false;\n    this._fn = fn;\n    this._context = context;\n    this.priority = priority;\n    this._once = once;\n  }\n  /**\n   * Simple compare function to figure out if a function and context match.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @returns `true` if the listener match the arguments\n   */\n  match(fn, context = null) {\n    return this._fn === fn && this._context === context;\n  }\n  /**\n   * Emit by calling the current function.\n   * @param ticker - The ticker emitting.\n   * @returns Next ticker\n   */\n  emit(ticker) {\n    if (this._fn) {\n      if (this._context) {\n        this._fn.call(this._context, ticker);\n      } else {\n        this._fn(ticker);\n      }\n    }\n    const redirect = this.next;\n    if (this._once) {\n      this.destroy(true);\n    }\n    if (this._destroyed) {\n      this.next = null;\n    }\n    return redirect;\n  }\n  /**\n   * Connect to the list.\n   * @param previous - Input node, previous listener\n   */\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n  /**\n   * Destroy and don't use after this.\n   * @param hard - `true` to remove the `next` reference, this\n   *        is considered a hard destroy. Soft destroy maintains the next reference.\n   * @returns The listener to redirect while emitting or removing.\n   */\n  destroy(hard = false) {\n    this._destroyed = true;\n    this._fn = null;\n    this._context = null;\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n    const redirect = this.next;\n    this.next = hard ? null : redirect;\n    this.previous = null;\n    return redirect;\n  }\n}\n\nexport { TickerListener };\n//# sourceMappingURL=TickerListener.mjs.map\n","import { UPDATE_PRIORITY } from './const.mjs';\nimport { TickerListener } from './TickerListener.mjs';\n\n\"use strict\";\nconst _Ticker = class _Ticker {\n  constructor() {\n    /**\n     * Whether or not this ticker should invoke the method {@link Ticker#start|start}\n     * automatically when a listener is added.\n     * @example\n     * ```ts\n     * // Default behavior (manual start)\n     * const ticker = new Ticker();\n     * ticker.autoStart = false;\n     * ticker.add(() => {\n     *     // Won't run until ticker.start() is called\n     * });\n     *\n     * // Auto-start behavior\n     * const autoTicker = new Ticker();\n     * autoTicker.autoStart = true;\n     * autoTicker.add(() => {\n     *     // Runs immediately when added\n     * });\n     * ```\n     * @default false\n     * @see {@link Ticker#start} For manually starting the ticker\n     * @see {@link Ticker#stop} For manually stopping the ticker\n     */\n    this.autoStart = false;\n    /**\n     * Scalar representing the delta time factor.\n     * This is a dimensionless value representing the fraction of a frame at the target framerate.\n     * At 60 FPS, this value is typically around 1.0.\n     *\n     * This is NOT in milliseconds - it's a scalar multiplier for frame-independent animations.\n     * For actual milliseconds, use {@link Ticker#deltaMS}.\n     * @member {number}\n     * @example\n     * ```ts\n     * // Frame-independent animation using deltaTime scalar\n     * ticker.add((ticker) => {\n     *     // Rotate sprite by 0.1 radians per frame, scaled by deltaTime\n     *     sprite.rotation += 0.1 * ticker.deltaTime;\n     * });\n     * ```\n     */\n    this.deltaTime = 1;\n    /**\n     * The last time update was invoked, in milliseconds since epoch.\n     * Similar to performance.now() timestamp format.\n     *\n     * Used internally for calculating time deltas between frames.\n     * @member {number}\n     * @example\n     * ```ts\n     * ticker.add((ticker) => {\n     *     const currentTime = performance.now();\n     *     const timeSinceLastFrame = currentTime - ticker.lastTime;\n     *     console.log(`Time since last frame: ${timeSinceLastFrame}ms`);\n     * });\n     * ```\n     */\n    this.lastTime = -1;\n    /**\n     * Factor of current {@link Ticker#deltaTime|deltaTime}.\n     * Used to scale time for slow motion or fast-forward effects.\n     * @example\n     * ```ts\n     * // Basic speed adjustment\n     * ticker.speed = 0.5; // Half speed (slow motion)\n     * ticker.speed = 2.0; // Double speed (fast forward)\n     *\n     * // Temporary speed changes\n     * function slowMotion() {\n     *     const normalSpeed = ticker.speed;\n     *     ticker.speed = 0.2;\n     *     setTimeout(() => {\n     *         ticker.speed = normalSpeed;\n     *     }, 1000);\n     * }\n     * ```\n     */\n    this.speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     *\n     * `true` if {@link Ticker#start|start} has been called.\n     * `false` if {@link Ticker#stop|Stop} has been called.\n     *\n     * While `false`, this value may change to `true` in the\n     * event of {@link Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     * @example\n     * ```ts\n     * // Check ticker state\n     * const ticker = new Ticker();\n     * console.log(ticker.started); // false\n     *\n     * // Start and verify\n     * ticker.start();\n     * console.log(ticker.started); // true\n     * ```\n     */\n    this.started = false;\n    /** Internal current frame request ID */\n    this._requestId = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    this._maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    this._minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    this._protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    this._lastFrame = -1;\n    this._head = new TickerListener(null, null, Infinity);\n    this.deltaMS = 1 / _Ticker.targetFPMS;\n    this.elapsedMS = 1 / _Ticker.targetFPMS;\n    this._tick = (time) => {\n      this._requestId = null;\n      if (this.started) {\n        this.update(time);\n        if (this.started && this._requestId === null && this._head.next) {\n          this._requestId = requestAnimationFrame(this._tick);\n        }\n      }\n    };\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If a frame has not already been requested, and if the internal\n   * emitter has listeners, a new frame is requested.\n   */\n  _requestIfNeeded() {\n    if (this._requestId === null && this._head.next) {\n      this.lastTime = performance.now();\n      this._lastFrame = this.lastTime;\n      this._requestId = requestAnimationFrame(this._tick);\n    }\n  }\n  /** Conditionally cancels a pending animation frame. */\n  _cancelIfNeeded() {\n    if (this._requestId !== null) {\n      cancelAnimationFrame(this._requestId);\n      this._requestId = null;\n    }\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If the ticker has been started it checks if a frame has not already\n   * been requested, and if the internal emitter has listeners. If these\n   * conditions are met, a new frame is requested. If the ticker has not\n   * been started, but autoStart is `true`, then the ticker starts now,\n   * and continues with the previous conditions to request a new frame.\n   */\n  _startIfPossible() {\n    if (this.started) {\n      this._requestIfNeeded();\n    } else if (this.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Register a handler for tick events.\n   * @param fn - The listener function to add. Receives the Ticker instance as parameter\n   * @param context - The context for the listener\n   * @param priority - The priority of the listener\n   * @example\n   * ```ts\n   * // Access time properties through the ticker parameter\n   * ticker.add((ticker) => {\n   *     // Use deltaTime (dimensionless scalar) for frame-independent animations\n   *     sprite.rotation += 0.1 * ticker.deltaTime;\n   *\n   *     // Use deltaMS (milliseconds) for time-based calculations\n   *     const progress = ticker.deltaMS / animationDuration;\n   *\n   *     // Use elapsedMS for raw timing measurements\n   *     console.log(`Raw frame time: ${ticker.elapsedMS}ms`);\n   * });\n   * ```\n   */\n  add(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority));\n  }\n  /**\n   * Add a handler for the tick event which is only executed once on the next frame.\n   * @example\n   * ```ts\n   * // Basic one-time update\n   * ticker.addOnce(() => {\n   *     console.log('Runs next frame only');\n   * });\n   *\n   * // With specific context\n   * const game = {\n   *     init(ticker) {\n   *         this.loadResources();\n   *         console.log('Game initialized');\n   *     }\n   * };\n   * ticker.addOnce(game.init, game);\n   *\n   * // With priority\n   * ticker.addOnce(\n   *     () => {\n   *         // High priority one-time setup\n   *         physics.init();\n   *     },\n   *     undefined,\n   *     UPDATE_PRIORITY.HIGH\n   * );\n   * ```\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting (default: UPDATE_PRIORITY.NORMAL)\n   * @returns This instance of a ticker\n   * @see {@link Ticker#add} For continuous updates\n   * @see {@link Ticker#remove} For removing handlers\n   */\n  addOnce(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority, true));\n  }\n  /**\n   * Internally adds the event handler so that it can be sorted by priority.\n   * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n   * before the rendering.\n   * @private\n   * @param listener - Current listener being added.\n   * @returns This instance of a ticker\n   */\n  _addListener(listener) {\n    let current = this._head.next;\n    let previous = this._head;\n    if (!current) {\n      listener.connect(previous);\n    } else {\n      while (current) {\n        if (listener.priority > current.priority) {\n          listener.connect(previous);\n          break;\n        }\n        previous = current;\n        current = current.next;\n      }\n      if (!listener.previous) {\n        listener.connect(previous);\n      }\n    }\n    this._startIfPossible();\n    return this;\n  }\n  /**\n   * Removes any handlers matching the function and context parameters.\n   * If no handlers are left after removing, then it cancels the animation frame.\n   * @example\n   * ```ts\n   * // Basic removal\n   * const onTick = () => {\n   *     sprite.rotation += 0.1;\n   * };\n   * ticker.add(onTick);\n   * ticker.remove(onTick);\n   *\n   * // Remove with context\n   * const game = {\n   *     update(ticker) {\n   *         this.physics.update(ticker.deltaTime);\n   *     }\n   * };\n   * ticker.add(game.update, game);\n   * ticker.remove(game.update, game);\n   *\n   * // Remove all matching handlers\n   * // (if same function was added multiple times)\n   * ticker.add(onTick);\n   * ticker.add(onTick);\n   * ticker.remove(onTick); // Removes all instances\n   * ```\n   * @param fn - The listener function to be removed\n   * @param context - The listener context to be removed\n   * @returns This instance of a ticker\n   * @see {@link Ticker#add} For adding handlers\n   * @see {@link Ticker#addOnce} For one-time handlers\n   */\n  remove(fn, context) {\n    let listener = this._head.next;\n    while (listener) {\n      if (listener.match(fn, context)) {\n        listener = listener.destroy();\n      } else {\n        listener = listener.next;\n      }\n    }\n    if (!this._head.next) {\n      this._cancelIfNeeded();\n    }\n    return this;\n  }\n  /**\n   * The number of listeners on this ticker, calculated by walking through linked list.\n   * @example\n   * ```ts\n   * // Check number of active listeners\n   * const ticker = new Ticker();\n   * console.log(ticker.count); // 0\n   *\n   * // Add some listeners\n   * ticker.add(() => {});\n   * ticker.add(() => {});\n   * console.log(ticker.count); // 2\n   *\n   * // Check after cleanup\n   * ticker.destroy();\n   * console.log(ticker.count); // 0\n   * ```\n   * @readonly\n   * @see {@link Ticker#add} For adding listeners\n   * @see {@link Ticker#remove} For removing listeners\n   */\n  get count() {\n    if (!this._head) {\n      return 0;\n    }\n    let count = 0;\n    let current = this._head;\n    while (current = current.next) {\n      count++;\n    }\n    return count;\n  }\n  /**\n   * Starts the ticker. If the ticker has listeners a new animation frame is requested at this point.\n   * @example\n   * ```ts\n   * // Basic manual start\n   * const ticker = new Ticker();\n   * ticker.add(() => {\n   *     // Animation code here\n   * });\n   * ticker.start();\n   * ```\n   * @see {@link Ticker#stop} For stopping the ticker\n   * @see {@link Ticker#autoStart} For automatic starting\n   * @see {@link Ticker#started} For checking ticker state\n   */\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this._requestIfNeeded();\n    }\n  }\n  /**\n   * Stops the ticker. If the ticker has requested an animation frame it is canceled at this point.\n   * @example\n   * ```ts\n   * // Basic stop\n   * const ticker = new Ticker();\n   * ticker.stop();\n   * ```\n   * @see {@link Ticker#start} For starting the ticker\n   * @see {@link Ticker#started} For checking ticker state\n   * @see {@link Ticker#destroy} For cleaning up the ticker\n   */\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this._cancelIfNeeded();\n    }\n  }\n  /**\n   * Destroy the ticker and don't use after this. Calling this method removes all references to internal events.\n   * @example\n   * ```ts\n   * // Clean up with active listeners\n   * const ticker = new Ticker();\n   * ticker.add(() => {});\n   * ticker.destroy(); // Removes all listeners\n   * ```\n   * @see {@link Ticker#stop} For stopping without destroying\n   * @see {@link Ticker#remove} For removing specific listeners\n   */\n  destroy() {\n    if (!this._protected) {\n      this.stop();\n      let listener = this._head.next;\n      while (listener) {\n        listener = listener.destroy(true);\n      }\n      this._head.destroy();\n      this._head = null;\n    }\n  }\n  /**\n   * Triggers an update.\n   *\n   * An update entails setting the\n   * current {@link Ticker#elapsedMS|elapsedMS},\n   * the current {@link Ticker#deltaTime|deltaTime},\n   * invoking all listeners with current deltaTime,\n   * and then finally setting {@link Ticker#lastTime|lastTime}\n   * with the value of currentTime that was provided.\n   *\n   * This method will be called automatically by animation\n   * frame callbacks if the ticker instance has been started\n   * and listeners are added.\n   * @example\n   * ```ts\n   * // Basic manual update\n   * const ticker = new Ticker();\n   * ticker.update(performance.now());\n   * ```\n   * @param currentTime - The current time of execution (defaults to performance.now())\n   * @see {@link Ticker#deltaTime} For frame delta value\n   * @see {@link Ticker#elapsedMS} For raw elapsed time\n   */\n  update(currentTime = performance.now()) {\n    let elapsedMS;\n    if (currentTime > this.lastTime) {\n      elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n      if (elapsedMS > this._maxElapsedMS) {\n        elapsedMS = this._maxElapsedMS;\n      }\n      elapsedMS *= this.speed;\n      if (this._minElapsedMS) {\n        const delta = currentTime - this._lastFrame | 0;\n        if (delta < this._minElapsedMS) {\n          return;\n        }\n        this._lastFrame = currentTime - delta % this._minElapsedMS;\n      }\n      this.deltaMS = elapsedMS;\n      this.deltaTime = this.deltaMS * _Ticker.targetFPMS;\n      const head = this._head;\n      let listener = head.next;\n      while (listener) {\n        listener = listener.emit(this);\n      }\n      if (!head.next) {\n        this._cancelIfNeeded();\n      }\n    } else {\n      this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n    }\n    this.lastTime = currentTime;\n  }\n  /**\n   * The frames per second at which this ticker is running.\n   * The default is approximately 60 in most modern browsers.\n   * > [!NOTE] This does not factor in the value of\n   * > {@link Ticker#speed|speed}, which is specific\n   * > to scaling {@link Ticker#deltaTime|deltaTime}.\n   * @example\n   * ```ts\n   * // Basic FPS monitoring\n   * ticker.add(() => {\n   *     console.log(`Current FPS: ${Math.round(ticker.FPS)}`);\n   * });\n   * ```\n   * @readonly\n   */\n  get FPS() {\n    return 1e3 / this.elapsedMS;\n  }\n  /**\n   * Manages the maximum amount of milliseconds allowed to\n   * elapse between invoking {@link Ticker#update|update}.\n   *\n   * This value is used to cap {@link Ticker#deltaTime|deltaTime},\n   * but does not effect the measured value of {@link Ticker#FPS|FPS}.\n   *\n   * When setting this property it is clamped to a value between\n   * `0` and `Ticker.targetFPMS * 1000`.\n   * @example\n   * ```ts\n   * // Set minimum acceptable frame rate\n   * const ticker = new Ticker();\n   * ticker.minFPS = 30; // Never go below 30 FPS\n   *\n   * // Use with maxFPS for frame rate clamping\n   * ticker.minFPS = 30;\n   * ticker.maxFPS = 60;\n   *\n   * // Monitor delta capping\n   * ticker.add(() => {\n   *     // Delta time will be capped based on minFPS\n   *     console.log(`Delta time: ${ticker.deltaTime}`);\n   * });\n   * ```\n   * @default 10\n   */\n  get minFPS() {\n    return 1e3 / this._maxElapsedMS;\n  }\n  set minFPS(fps) {\n    const minFPS = Math.min(this.maxFPS, fps);\n    const minFPMS = Math.min(Math.max(0, minFPS) / 1e3, _Ticker.targetFPMS);\n    this._maxElapsedMS = 1 / minFPMS;\n  }\n  /**\n   * Manages the minimum amount of milliseconds required to\n   * elapse between invoking {@link Ticker#update|update}.\n   *\n   * This will effect the measured value of {@link Ticker#FPS|FPS}.\n   *\n   * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n   * Otherwise it will be at least `minFPS`\n   * @example\n   * ```ts\n   * // Set minimum acceptable frame rate\n   * const ticker = new Ticker();\n   * ticker.maxFPS = 60; // Never go above 60 FPS\n   *\n   * // Use with maxFPS for frame rate clamping\n   * ticker.minFPS = 30;\n   * ticker.maxFPS = 60;\n   *\n   * // Monitor delta capping\n   * ticker.add(() => {\n   *     // Delta time will be capped based on maxFPS\n   *     console.log(`Delta time: ${ticker.deltaTime}`);\n   * });\n   * ```\n   * @default 0\n   */\n  get maxFPS() {\n    if (this._minElapsedMS) {\n      return Math.round(1e3 / this._minElapsedMS);\n    }\n    return 0;\n  }\n  set maxFPS(fps) {\n    if (fps === 0) {\n      this._minElapsedMS = 0;\n    } else {\n      const maxFPS = Math.max(this.minFPS, fps);\n      this._minElapsedMS = 1 / (maxFPS / 1e3);\n    }\n  }\n  /**\n   * The shared ticker instance used by {@link AnimatedSprite} and by\n   * {@link VideoSource} to update animation frames / video textures.\n   *\n   * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n   *\n   * The property {@link Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n   * @example\n   * import { Ticker } from 'pixi.js';\n   *\n   * const ticker = Ticker.shared;\n   * // Set this to prevent starting this ticker when listeners are added.\n   * // By default this is true only for the Ticker.shared instance.\n   * ticker.autoStart = false;\n   *\n   * // FYI, call this to ensure the ticker is stopped. It should be stopped\n   * // if you have not attempted to render anything yet.\n   * ticker.stop();\n   *\n   * // Call this when you are ready for a running shared ticker.\n   * ticker.start();\n   * @example\n   * import { autoDetectRenderer, Container } from 'pixi.js';\n   *\n   * // You may use the shared ticker to render...\n   * const renderer = autoDetectRenderer();\n   * const stage = new Container();\n   * document.body.appendChild(renderer.view);\n   * ticker.add((time) => renderer.render(stage));\n   *\n   * // Or you can just update it manually.\n   * ticker.autoStart = false;\n   * ticker.stop();\n   * const animate = (time) => {\n   *     ticker.update(time);\n   *     renderer.render(stage);\n   *     requestAnimationFrame(animate);\n   * };\n   * animate(performance.now());\n   * @type {Ticker}\n   * @readonly\n   */\n  static get shared() {\n    if (!_Ticker._shared) {\n      const shared = _Ticker._shared = new _Ticker();\n      shared.autoStart = true;\n      shared._protected = true;\n    }\n    return _Ticker._shared;\n  }\n  /**\n   * The system ticker instance used by {@link PrepareBase} for core timing\n   * functionality that shouldn't usually need to be paused, unlike the `shared`\n   * ticker which drives visual animations and rendering which may want to be paused.\n   *\n   * The property {@link Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * @type {Ticker}\n   * @readonly\n   * @advanced\n   */\n  static get system() {\n    if (!_Ticker._system) {\n      const system = _Ticker._system = new _Ticker();\n      system.autoStart = true;\n      system._protected = true;\n    }\n    return _Ticker._system;\n  }\n};\n/**\n * Target frame rate in frames per millisecond.\n * Used for converting deltaTime to a scalar time delta.\n * @example\n * ```ts\n * // Default is 0.06 (60 FPS)\n * console.log(Ticker.targetFPMS); // 0.06\n *\n * // Calculate target frame duration\n * const frameDuration = 1 / Ticker.targetFPMS; // ≈ 16.67ms\n *\n * // Use in custom timing calculations\n * const deltaTime = elapsedMS * Ticker.targetFPMS;\n * ```\n * @remarks\n * - Default is 0.06 (equivalent to 60 FPS)\n * - Used in deltaTime calculations\n * - Affects all ticker instances\n * @default 0.06\n * @see {@link Ticker#deltaTime} For time scaling\n * @see {@link Ticker#FPS} For actual frame rate\n */\n_Ticker.targetFPMS = 0.06;\nlet Ticker = _Ticker;\n\nexport { Ticker };\n//# sourceMappingURL=Ticker.mjs.map\n","import { Matrix } from './Matrix.mjs';\n\n\"use strict\";\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\nconst rotationCayley = [];\nconst rotationMatrices = [];\nconst signum = Math.sign;\nfunction init() {\n  for (let i = 0; i < 16; i++) {\n    const row = [];\n    rotationCayley.push(row);\n    for (let j = 0; j < 16; j++) {\n      const _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);\n      const _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);\n      const _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);\n      const _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);\n      for (let k = 0; k < 16; k++) {\n        if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {\n          row.push(k);\n          break;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < 16; i++) {\n    const mat = new Matrix();\n    mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n    rotationMatrices.push(mat);\n  }\n}\ninit();\nconst groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0°       | East      |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45°↻     | Southeast |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90°↻     | South     |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135°↻    | Southwest |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180°     | West      |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135°/225°↻ | Northwest    |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90°/270°↻  | North        |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45°/315°↻  | Northeast    |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: (ind) => ux[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: (ind) => uy[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: (ind) => vx[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: (ind) => vy[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: (rotation) => {\n    if (rotation & 8) {\n      return rotation & 15;\n    }\n    return -rotation & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @group groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {GD8Symmetry} Composed operation\n   */\n  add: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][rotationFirst],\n  /**\n   * Reverse of `add`.\n   * @group groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation\n   * @param {GD8Symmetry} rotationFirst - First operation\n   * @returns {GD8Symmetry} Result\n   */\n  sub: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][groupD8.inv(rotationFirst)],\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @group groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: (rotation) => rotation ^ 4,\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @group groupD8\n   * @param {GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: (rotation) => (rotation & 3) === 2,\n  // rotation % 4 === 2\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @group groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: (dx, dy) => {\n    if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n      if (dy >= 0) {\n        return groupD8.S;\n      }\n      return groupD8.N;\n    } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n      if (dx > 0) {\n        return groupD8.E;\n      }\n      return groupD8.W;\n    } else if (dy > 0) {\n      if (dx > 0) {\n        return groupD8.SE;\n      }\n      return groupD8.SW;\n    } else if (dx > 0) {\n      return groupD8.NE;\n    }\n    return groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @group groupD8\n   * @param {Matrix} matrix - sprite world matrix\n   * @param {GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: (matrix, rotation, tx = 0, ty = 0) => {\n    const mat = rotationMatrices[groupD8.inv(rotation)];\n    mat.tx = tx;\n    mat.ty = ty;\n    matrix.append(mat);\n  },\n  /**\n   * Transforms rectangle coordinates based on texture packer rotation.\n   * Used when texture atlas pages are rotated and coordinates need to be adjusted.\n   * @group groupD8\n   * @param {RectangleLike} rect - Rectangle with original coordinates to transform\n   * @param {RectangleLike} sourceFrame - Source texture frame (includes offset and dimensions)\n   * @param {GD8Symmetry} rotation - The groupD8 rotation value\n   * @param {Rectangle} out - Rectangle to store the result\n   * @returns {Rectangle} Transformed coordinates (includes source frame offset)\n   */\n  transformRectCoords: (rect, sourceFrame, rotation, out) => {\n    const { x, y, width, height } = rect;\n    const { x: frameX, y: frameY, width: frameWidth, height: frameHeight } = sourceFrame;\n    if (rotation === groupD8.E) {\n      out.set(x + frameX, y + frameY, width, height);\n      return out;\n    } else if (rotation === groupD8.S) {\n      return out.set(\n        frameWidth - y - height + frameX,\n        x + frameY,\n        height,\n        width\n      );\n    } else if (rotation === groupD8.W) {\n      return out.set(\n        frameWidth - x - width + frameX,\n        frameHeight - y - height + frameY,\n        width,\n        height\n      );\n    } else if (rotation === groupD8.N) {\n      return out.set(\n        y + frameX,\n        frameHeight - x - width + frameY,\n        height,\n        width\n      );\n    }\n    return out.set(x + frameX, y + frameY, width, height);\n  }\n};\n\nexport { groupD8 };\n//# sourceMappingURL=groupD8.mjs.map\n","import { deprecation } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst cacheAsTextureMixin = {\n  get isCachedAsTexture() {\n    return !!this.renderGroup?.isCachedAsTexture;\n  },\n  cacheAsTexture(val) {\n    if (typeof val === \"boolean\" && val === false) {\n      this.disableRenderGroup();\n    } else {\n      this.enableRenderGroup();\n      this.renderGroup.enableCacheAsTexture(val === true ? {} : val);\n    }\n  },\n  updateCacheTexture() {\n    this.renderGroup?.updateCacheTexture();\n  },\n  get cacheAsBitmap() {\n    return this.isCachedAsTexture;\n  },\n  set cacheAsBitmap(val) {\n    deprecation(\"v8.6.0\", \"cacheAsBitmap is deprecated, use cacheAsTexture instead.\");\n    this.cacheAsTexture(val);\n  }\n};\n\nexport { cacheAsTextureMixin };\n//# sourceMappingURL=cacheAsTextureMixin.mjs.map\n","import { removeItems } from '../../../utils/data/removeItems.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst childrenHelperMixin = {\n  allowChildren: true,\n  removeChildren(beginIndex = 0, endIndex) {\n    const end = endIndex ?? this.children.length;\n    const range = end - beginIndex;\n    const removed = [];\n    if (range > 0 && range <= end) {\n      for (let i = end - 1; i >= beginIndex; i--) {\n        const child = this.children[i];\n        if (!child)\n          continue;\n        removed.push(child);\n        child.parent = null;\n      }\n      removeItems(this.children, beginIndex, end);\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      if (renderGroup) {\n        renderGroup.removeChildren(removed);\n      }\n      for (let i = 0; i < removed.length; ++i) {\n        const child = removed[i];\n        child.parentRenderLayer?.detach(child);\n        this.emit(\"childRemoved\", child, this, i);\n        removed[i].emit(\"removed\", this);\n      }\n      if (removed.length > 0) {\n        this._didViewChangeTick++;\n      }\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return removed;\n    }\n    throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n  },\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    return this.removeChild(child);\n  },\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  },\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n    }\n    this.getChildIndex(child);\n    this.addChildAt(child, index);\n  },\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n    if (index === -1) {\n      throw new Error(\"The supplied Container must be a child of the caller\");\n    }\n    return index;\n  },\n  addChildAt(child, index) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChildAt: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    const { children } = this;\n    if (index < 0 || index > children.length) {\n      throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n    }\n    if (child.parent) {\n      const currentIndex = child.parent.children.indexOf(child);\n      if (child.parent === this && currentIndex === index) {\n        return child;\n      }\n      if (currentIndex !== -1) {\n        child.parent.children.splice(currentIndex, 1);\n      }\n    }\n    if (index === children.length) {\n      children.push(child);\n    } else {\n      children.splice(index, 0, child);\n    }\n    child.parent = this;\n    child.didChange = true;\n    child._updateFlags = 15;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    this.emit(\"childAdded\", child, this, index);\n    child.emit(\"added\", this);\n    return child;\n  },\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n    this.children[index1] = child2;\n    this.children[index2] = child;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    this._didContainerChangeTick++;\n  },\n  removeFromParent() {\n    this.parent?.removeChild(this);\n  },\n  reparentChild(...child) {\n    if (child.length === 1) {\n      return this.reparentChildAt(child[0], this.children.length);\n    }\n    child.forEach((c) => this.reparentChildAt(c, this.children.length));\n    return child[0];\n  },\n  reparentChildAt(child, index) {\n    if (child.parent === this) {\n      this.setChildIndex(child, index);\n      return child;\n    }\n    const childMat = child.worldTransform.clone();\n    child.removeFromParent();\n    this.addChildAt(child, index);\n    const newMatrix = this.worldTransform.clone();\n    newMatrix.invert();\n    childMat.prepend(newMatrix);\n    child.setFromMatrix(childMat);\n    return child;\n  },\n  replaceChild(oldChild, newChild) {\n    oldChild.updateLocalTransform();\n    this.addChildAt(newChild, this.getChildIndex(oldChild));\n    newChild.setFromMatrix(oldChild.localTransform);\n    newChild.updateLocalTransform();\n    this.removeChild(oldChild);\n  }\n};\n\nexport { childrenHelperMixin };\n//# sourceMappingURL=childrenHelperMixin.mjs.map\n","\"use strict\";\nconst collectRenderablesMixin = {\n  collectRenderables(instructionSet, renderer, currentLayer) {\n    if (this.parentRenderLayer && this.parentRenderLayer !== currentLayer || this.globalDisplayStatus < 7 || !this.includeInBuild)\n      return;\n    if (this.sortableChildren) {\n      this.sortChildren();\n    }\n    if (this.isSimple) {\n      this.collectRenderablesSimple(instructionSet, renderer, currentLayer);\n    } else if (this.renderGroup) {\n      renderer.renderPipes.renderGroup.addRenderGroup(this.renderGroup, instructionSet);\n    } else {\n      this.collectRenderablesWithEffects(instructionSet, renderer, currentLayer);\n    }\n  },\n  collectRenderablesSimple(instructionSet, renderer, currentLayer) {\n    const children = this.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      children[i].collectRenderables(instructionSet, renderer, currentLayer);\n    }\n  },\n  collectRenderablesWithEffects(instructionSet, renderer, currentLayer) {\n    const { renderPipes } = renderer;\n    for (let i = 0; i < this.effects.length; i++) {\n      const effect = this.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.push(effect, this, instructionSet);\n    }\n    this.collectRenderablesSimple(instructionSet, renderer, currentLayer);\n    for (let i = this.effects.length - 1; i >= 0; i--) {\n      const effect = this.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.pop(effect, this, instructionSet);\n    }\n  }\n};\n\nexport { collectRenderablesMixin };\n//# sourceMappingURL=collectRenderablesMixin.mjs.map\n","import { extensions, ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nclass MaskEffectManagerClass {\n  constructor() {\n    /** @private */\n    this._effectClasses = [];\n    this._tests = [];\n    this._initialized = false;\n  }\n  init() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n    this._effectClasses.forEach((test) => {\n      this.add({\n        test: test.test,\n        maskClass: test\n      });\n    });\n  }\n  add(test) {\n    this._tests.push(test);\n  }\n  getMaskEffect(item) {\n    if (!this._initialized)\n      this.init();\n    for (let i = 0; i < this._tests.length; i++) {\n      const test = this._tests[i];\n      if (test.test(item)) {\n        return BigPool.get(test.maskClass, item);\n      }\n    }\n    return item;\n  }\n  returnMaskEffect(effect) {\n    BigPool.return(effect);\n  }\n}\nconst MaskEffectManager = new MaskEffectManagerClass();\nextensions.handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n\nexport { MaskEffectManager, MaskEffectManagerClass };\n//# sourceMappingURL=MaskEffectManager.mjs.map\n","import { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager.mjs';\n\n\"use strict\";\nconst effectsMixin = {\n  _maskEffect: null,\n  _maskOptions: {\n    inverse: false\n  },\n  _filterEffect: null,\n  effects: [],\n  _markStructureAsChanged() {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n  },\n  addEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index !== -1)\n      return;\n    this.effects.push(effect);\n    this.effects.sort((a, b) => a.priority - b.priority);\n    this._markStructureAsChanged();\n    this._updateIsSimple();\n  },\n  removeEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index === -1)\n      return;\n    this.effects.splice(index, 1);\n    this._markStructureAsChanged();\n    this._updateIsSimple();\n  },\n  set mask(value) {\n    const effect = this._maskEffect;\n    if (effect?.mask === value)\n      return;\n    if (effect) {\n      this.removeEffect(effect);\n      MaskEffectManager.returnMaskEffect(effect);\n      this._maskEffect = null;\n    }\n    if (value === null || value === void 0)\n      return;\n    this._maskEffect = MaskEffectManager.getMaskEffect(value);\n    this.addEffect(this._maskEffect);\n  },\n  get mask() {\n    return this._maskEffect?.mask;\n  },\n  setMask(options) {\n    this._maskOptions = {\n      ...this._maskOptions,\n      ...options\n    };\n    if (options.mask) {\n      this.mask = options.mask;\n    }\n    this._markStructureAsChanged();\n  },\n  set filters(value) {\n    if (!Array.isArray(value) && value)\n      value = [value];\n    const effect = this._filterEffect || (this._filterEffect = new FilterEffect());\n    value = value;\n    const hasFilters = value?.length > 0;\n    const hadFilters = effect.filters?.length > 0;\n    const didChange = hasFilters !== hadFilters;\n    value = Array.isArray(value) ? value.slice(0) : value;\n    effect.filters = Object.freeze(value);\n    if (didChange) {\n      if (hasFilters) {\n        this.addEffect(effect);\n      } else {\n        this.removeEffect(effect);\n        effect.filters = value ?? null;\n      }\n    }\n  },\n  get filters() {\n    return this._filterEffect?.filters;\n  },\n  set filterArea(value) {\n    this._filterEffect || (this._filterEffect = new FilterEffect());\n    this._filterEffect.filterArea = value;\n  },\n  get filterArea() {\n    return this._filterEffect?.filterArea;\n  }\n};\n\nexport { effectsMixin };\n//# sourceMappingURL=effectsMixin.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst findMixin = {\n  label: null,\n  get name() {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    return this.label;\n  },\n  set name(value) {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    this.label = value;\n  },\n  getChildByName(name, deep = false) {\n    return this.getChildByLabel(name, deep);\n  },\n  getChildByLabel(label, deep = false) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label))\n        return child;\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const found = child.getChildByLabel(label, true);\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return null;\n  },\n  getChildrenByLabel(label, deep = false, out = []) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label)) {\n        out.push(child);\n      }\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        children[i].getChildrenByLabel(label, true, out);\n      }\n    }\n    return out;\n  }\n};\n\nexport { findMixin };\n//# sourceMappingURL=findMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { boundsPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst getFastGlobalBoundsMixin = {\n  getFastGlobalBounds(factorRenderLayers, bounds) {\n    bounds || (bounds = new Bounds());\n    bounds.clear();\n    this._getGlobalBoundsRecursive(!!factorRenderLayers, bounds, this.parentRenderLayer);\n    if (!bounds.isValid) {\n      bounds.set(0, 0, 0, 0);\n    }\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    bounds.applyMatrix(renderGroup.worldTransform);\n    return bounds;\n  },\n  _getGlobalBoundsRecursive(factorRenderLayers, bounds, currentLayer) {\n    let localBounds = bounds;\n    if (factorRenderLayers && this.parentRenderLayer && this.parentRenderLayer !== currentLayer)\n      return;\n    if (this.localDisplayStatus !== 7 || !this.measurable) {\n      return;\n    }\n    const manageEffects = !!this.effects.length;\n    if (this.renderGroup || manageEffects) {\n      localBounds = boundsPool.get().clear();\n    }\n    if (this.boundsArea) {\n      bounds.addRect(this.boundsArea, this.worldTransform);\n    } else {\n      if (this.renderPipeId) {\n        const viewBounds = this.bounds;\n        localBounds.addFrame(\n          viewBounds.minX,\n          viewBounds.minY,\n          viewBounds.maxX,\n          viewBounds.maxY,\n          this.groupTransform\n        );\n      }\n      const children = this.children;\n      for (let i = 0; i < children.length; i++) {\n        children[i]._getGlobalBoundsRecursive(factorRenderLayers, localBounds, currentLayer);\n      }\n    }\n    if (manageEffects) {\n      let advanced = false;\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      for (let i = 0; i < this.effects.length; i++) {\n        if (this.effects[i].addBounds) {\n          if (!advanced) {\n            advanced = true;\n            localBounds.applyMatrix(renderGroup.worldTransform);\n          }\n          this.effects[i].addBounds(localBounds, true);\n        }\n      }\n      if (advanced) {\n        localBounds.applyMatrix(renderGroup.worldTransform.copyTo(tempMatrix).invert());\n      }\n      bounds.addBounds(localBounds);\n      boundsPool.return(localBounds);\n    } else if (this.renderGroup) {\n      bounds.addBounds(localBounds, this.relativeGroupTransform);\n      boundsPool.return(localBounds);\n    }\n  }\n};\n\nexport { getFastGlobalBoundsMixin };\n//# sourceMappingURL=getFastGlobalBoundsMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds.mjs';\nimport { matrixPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\nimport { multiplyColors } from '../utils/multiplyColors.mjs';\n\n\"use strict\";\nfunction bgr2rgb(color) {\n  return ((color & 255) << 16) + (color & 65280) + (color >> 16 & 255);\n}\nconst getGlobalMixin = {\n  getGlobalAlpha(skipUpdate) {\n    if (skipUpdate) {\n      if (this.renderGroup) {\n        return this.renderGroup.worldAlpha;\n      }\n      if (this.parentRenderGroup) {\n        return this.parentRenderGroup.worldAlpha * this.alpha;\n      }\n      return this.alpha;\n    }\n    let alpha = this.alpha;\n    let current = this.parent;\n    while (current) {\n      alpha *= current.alpha;\n      current = current.parent;\n    }\n    return alpha;\n  },\n  getGlobalTransform(matrix = new Matrix(), skipUpdate) {\n    if (skipUpdate) {\n      return matrix.copyFrom(this.worldTransform);\n    }\n    this.updateLocalTransform();\n    const parentTransform = updateTransformBackwards(this, matrixPool.get().identity());\n    matrix.appendFrom(this.localTransform, parentTransform);\n    matrixPool.return(parentTransform);\n    return matrix;\n  },\n  getGlobalTint(skipUpdate) {\n    if (skipUpdate) {\n      if (this.renderGroup) {\n        return bgr2rgb(this.renderGroup.worldColor);\n      }\n      if (this.parentRenderGroup) {\n        return bgr2rgb(\n          multiplyColors(this.localColor, this.parentRenderGroup.worldColor)\n        );\n      }\n      return this.tint;\n    }\n    let color = this.localColor;\n    let parent = this.parent;\n    while (parent) {\n      color = multiplyColors(color, parent.localColor);\n      parent = parent.parent;\n    }\n    return bgr2rgb(color);\n  }\n};\n\nexport { bgr2rgb, getGlobalMixin };\n//# sourceMappingURL=getGlobalMixin.mjs.map\n","\"use strict\";\nfunction checkChildrenDidChange(container, previousData) {\n  const children = container.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    const uid = child.uid;\n    const didChange = (child._didViewChangeTick & 65535) << 16 | child._didContainerChangeTick & 65535;\n    const index = previousData.index;\n    if (previousData.data[index] !== uid || previousData.data[index + 1] !== didChange) {\n      previousData.data[previousData.index] = uid;\n      previousData.data[previousData.index + 1] = didChange;\n      previousData.didChange = true;\n    }\n    previousData.index = index + 2;\n    if (child.children.length) {\n      checkChildrenDidChange(child, previousData);\n    }\n  }\n  return previousData.didChange;\n}\n\nexport { checkChildrenDidChange };\n//# sourceMappingURL=checkChildrenDidChange.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds.mjs';\nimport { getLocalBounds } from '../bounds/getLocalBounds.mjs';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst measureMixin = {\n  _localBoundsCacheId: -1,\n  _localBoundsCacheData: null,\n  _setWidth(value, localWidth) {\n    const sign = Math.sign(this.scale.x) || 1;\n    if (localWidth !== 0) {\n      this.scale.x = value / localWidth * sign;\n    } else {\n      this.scale.x = sign;\n    }\n  },\n  _setHeight(value, localHeight) {\n    const sign = Math.sign(this.scale.y) || 1;\n    if (localHeight !== 0) {\n      this.scale.y = value / localHeight * sign;\n    } else {\n      this.scale.y = sign;\n    }\n  },\n  getLocalBounds() {\n    if (!this._localBoundsCacheData) {\n      this._localBoundsCacheData = {\n        data: [],\n        index: 1,\n        didChange: false,\n        localBounds: new Bounds()\n      };\n    }\n    const localBoundsCacheData = this._localBoundsCacheData;\n    localBoundsCacheData.index = 1;\n    localBoundsCacheData.didChange = false;\n    if (localBoundsCacheData.data[0] !== this._didViewChangeTick) {\n      localBoundsCacheData.didChange = true;\n      localBoundsCacheData.data[0] = this._didViewChangeTick;\n    }\n    checkChildrenDidChange(this, localBoundsCacheData);\n    if (localBoundsCacheData.didChange) {\n      getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n    }\n    return localBoundsCacheData.localBounds;\n  },\n  getBounds(skipUpdate, bounds) {\n    return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n  }\n};\n\nexport { measureMixin };\n//# sourceMappingURL=measureMixin.mjs.map\n","\"use strict\";\nconst onRenderMixin = {\n  _onRender: null,\n  set onRender(func) {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (!func) {\n      if (this._onRender) {\n        renderGroup?.removeOnRender(this);\n      }\n      this._onRender = null;\n      return;\n    }\n    if (!this._onRender) {\n      renderGroup?.addOnRender(this);\n    }\n    this._onRender = func;\n  },\n  get onRender() {\n    return this._onRender;\n  }\n};\n\nexport { onRenderMixin };\n//# sourceMappingURL=onRenderMixin.mjs.map\n","\"use strict\";\nconst sortMixin = {\n  _zIndex: 0,\n  sortDirty: false,\n  sortableChildren: false,\n  get zIndex() {\n    return this._zIndex;\n  },\n  set zIndex(value) {\n    if (this._zIndex === value)\n      return;\n    this._zIndex = value;\n    this.depthOfChildModified();\n  },\n  depthOfChildModified() {\n    if (this.parent) {\n      this.parent.sortableChildren = true;\n      this.parent.sortDirty = true;\n    }\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n  },\n  sortChildren() {\n    if (!this.sortDirty)\n      return;\n    this.sortDirty = false;\n    this.children.sort(sortChildren);\n  }\n};\nfunction sortChildren(a, b) {\n  return a._zIndex - b._zIndex;\n}\n\nexport { sortMixin };\n//# sourceMappingURL=sortMixin.mjs.map\n","import { Point } from '../../../maths/point/Point.mjs';\nimport { matrixPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst toLocalGlobalMixin = {\n  getGlobalPosition(point = new Point(), skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this._position, point, skipUpdate);\n    } else {\n      point.x = this._position.x;\n      point.y = this._position.y;\n    }\n    return point;\n  },\n  toGlobal(position, point, skipUpdate = false) {\n    const globalMatrix = this.getGlobalTransform(matrixPool.get(), skipUpdate);\n    point = globalMatrix.apply(position, point);\n    matrixPool.return(globalMatrix);\n    return point;\n  },\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n    const globalMatrix = this.getGlobalTransform(matrixPool.get(), skipUpdate);\n    point = globalMatrix.applyInverse(position, point);\n    matrixPool.return(globalMatrix);\n    return point;\n  }\n};\n\nexport { toLocalGlobalMixin };\n//# sourceMappingURL=toLocalGlobalMixin.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { cullingMixin } from '../../culling/cullingMixin.mjs';\nimport { extensions } from '../../extensions/Extensions.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { RAD_TO_DEG, DEG_TO_RAD } from '../../maths/misc/const.mjs';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { cacheAsTextureMixin } from './container-mixins/cacheAsTextureMixin.mjs';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin.mjs';\nimport { collectRenderablesMixin } from './container-mixins/collectRenderablesMixin.mjs';\nimport { effectsMixin } from './container-mixins/effectsMixin.mjs';\nimport { findMixin } from './container-mixins/findMixin.mjs';\nimport { getFastGlobalBoundsMixin } from './container-mixins/getFastGlobalBoundsMixin.mjs';\nimport { bgr2rgb, getGlobalMixin } from './container-mixins/getGlobalMixin.mjs';\nimport { measureMixin } from './container-mixins/measureMixin.mjs';\nimport { onRenderMixin } from './container-mixins/onRenderMixin.mjs';\nimport { sortMixin } from './container-mixins/sortMixin.mjs';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin.mjs';\nimport { RenderGroup } from './RenderGroup.mjs';\nimport { assignWithIgnore } from './utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\nconst defaultOrigin = new ObservablePoint(null);\nconst UPDATE_COLOR = 1;\nconst UPDATE_BLEND = 2;\nconst UPDATE_VISIBLE = 4;\nconst UPDATE_TRANSFORM = 8;\nclass Container extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    /**\n     * unique id for this container\n     * @internal\n     */\n    this.uid = uid(\"renderable\");\n    /** @private */\n    this._updateFlags = 15;\n    // the render group this container owns\n    /** @private */\n    this.renderGroup = null;\n    // the render group this container belongs to\n    /** @private */\n    this.parentRenderGroup = null;\n    // the index of the container in the render group\n    /** @private */\n    this.parentRenderGroupIndex = 0;\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    this.didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    this.didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    this.relativeRenderGroupDepth = 0;\n    /**\n     * The array of children of this container. Each child must be a Container or extend from it.\n     *\n     * The array is read-only, but its contents can be modified using Container methods.\n     * @example\n     * ```ts\n     * // Access children\n     * const firstChild = container.children[0];\n     * const lastChild = container.children[container.children.length - 1];\n     * ```\n     * @readonly\n     * @see {@link Container#addChild} For adding children\n     * @see {@link Container#removeChild} For removing children\n     */\n    this.children = [];\n    /**\n     * The display object container that contains this display object.\n     * This represents the parent-child relationship in the display tree.\n     * @example\n     * ```ts\n     * // Basic parent access\n     * const parent = sprite.parent;\n     *\n     * // Walk up the tree\n     * let current = sprite;\n     * while (current.parent) {\n     *     console.log('Level up:', current.parent.constructor.name);\n     *     current = current.parent;\n     * }\n     * ```\n     * @readonly\n     * @see {@link Container#addChild} For adding to a parent\n     * @see {@link Container#removeChild} For removing from parent\n     */\n    this.parent = null;\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    this.includeInBuild = true;\n    /** @private */\n    this.measurable = true;\n    /** @private */\n    this.isSimple = true;\n    // / /////////////Transform related props//////////////\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /** @internal */\n    this.updateTick = -1;\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * This matrix represents the local transformation without any parent influence.\n     * @example\n     * ```ts\n     * // Basic transform access\n     * const localMatrix = sprite.localTransform;\n     * console.log(localMatrix.toString());\n     * ```\n     * @readonly\n     * @see {@link Container#worldTransform} For global transform\n     * @see {@link Container#groupTransform} For render group transform\n     */\n    this.localTransform = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     * @advanced\n     */\n    this.relativeGroupTransform = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     * @advanced\n     */\n    this.groupTransform = this.relativeGroupTransform;\n    /**\n     * Whether this object has been destroyed. If true, the object should no longer be used.\n     * After an object is destroyed, all of its functionality is disabled and references are removed.\n     * @example\n     * ```ts\n     * // Cleanup with destroy\n     * sprite.destroy();\n     * console.log(sprite.destroyed); // true\n     * ```\n     * @default false\n     * @see {@link Container#destroy} For destroying objects\n     */\n    this.destroyed = false;\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     */\n    this._position = new ObservablePoint(this, 0, 0);\n    /**\n     * The scale factor of the object.\n     * @internal\n     */\n    this._scale = defaultScale;\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     */\n    this._pivot = defaultPivot;\n    /**\n     * The origin point around which the container rotates and scales.\n     * Unlike pivot, changing origin will not move the container's position.\n     * @private\n     */\n    this._origin = defaultOrigin;\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     */\n    this._skew = defaultSkew;\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._cx = 1;\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._sx = 0;\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._cy = 0;\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._sy = 1;\n    /**\n     * The rotation amount.\n     * @internal\n     */\n    this._rotation = 0;\n    // / COLOR related props //////////////\n    // color stored as ABGR\n    /** @internal */\n    this.localColor = 16777215;\n    /** @internal */\n    this.localAlpha = 1;\n    /** @internal */\n    this.groupAlpha = 1;\n    // A\n    /** @internal */\n    this.groupColor = 16777215;\n    // BGR\n    /** @internal */\n    this.groupColorAlpha = 4294967295;\n    // ABGR\n    // / BLEND related props //////////////\n    /** @internal */\n    this.localBlendMode = \"inherit\";\n    /** @internal */\n    this.groupBlendMode = \"normal\";\n    // / VISIBILITY related props //////////////\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = not renderable, 1 = renderable) 0b001\n     * @internal\n     */\n    this.localDisplayStatus = 7;\n    // 0b11 | 0b10 | 0b01 | 0b00\n    /** @internal */\n    this.globalDisplayStatus = 7;\n    /**\n     * A value that increments each time the containe is modified\n     * eg children added, removed etc\n     * @ignore\n     */\n    this._didContainerChangeTick = 0;\n    /**\n     * A value that increments each time the container view is modified\n     * eg texture swap, geometry change etc\n     * @ignore\n     */\n    this._didViewChangeTick = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    this._didLocalTransformChangeId = -1;\n    this.effects = [];\n    assignWithIgnore(this, options, {\n      children: true,\n      parent: true,\n      effects: true\n    });\n    options.children?.forEach((child) => this.addChild(child));\n    options.parent?.addChild(this);\n  }\n  /**\n   * Mixes all enumerable properties and methods from a source object to Container.\n   * @param source - The source of properties and methods to mix in.\n   * @deprecated since 8.8.0\n   */\n  static mixin(source) {\n    deprecation(\"8.8.0\", \"Container.mixin is deprecated, please use extensions.mixin instead.\");\n    extensions.mixin(Container, source);\n  }\n  // = 'default';\n  /**\n   * We now use the _didContainerChangeTick and _didViewChangeTick to track changes\n   * @deprecated since 8.2.6\n   * @ignore\n   */\n  set _didChangeId(value) {\n    this._didViewChangeTick = value >> 12 & 4095;\n    this._didContainerChangeTick = value & 4095;\n  }\n  /** @ignore */\n  get _didChangeId() {\n    return this._didContainerChangeTick & 4095 | (this._didViewChangeTick & 4095) << 12;\n  }\n  /**\n   * Adds one or more children to the container.\n   * The children will be rendered as part of this container's display list.\n   * @example\n   * ```ts\n   * // Add a single child\n   * container.addChild(sprite);\n   *\n   * // Add multiple children\n   * container.addChild(background, player, foreground);\n   *\n   * // Add with type checking\n   * const sprite = container.addChild<Sprite>(new Sprite(texture));\n   * sprite.tint = 'red';\n   * ```\n   * @param children - The Container(s) to add to the container\n   * @returns The first child that was added\n   * @see {@link Container#removeChild} For removing children\n   * @see {@link Container#addChildAt} For adding at specific index\n   */\n  addChild(...children) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChild: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.addChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (child.parent === this) {\n      this.children.splice(this.children.indexOf(child), 1);\n      this.children.push(child);\n      if (renderGroup) {\n        renderGroup.structureDidChange = true;\n      }\n      return child;\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    this.children.push(child);\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    child.parent = this;\n    child.didChange = true;\n    child._updateFlags = 15;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    this.emit(\"childAdded\", child, this, this.children.length - 1);\n    child.emit(\"added\", this);\n    this._didViewChangeTick++;\n    if (child._zIndex !== 0) {\n      child.depthOfChildModified();\n    }\n    return child;\n  }\n  /**\n   * Removes one or more children from the container.\n   * When removing multiple children, events will be triggered for each child in sequence.\n   * @example\n   * ```ts\n   * // Remove a single child\n   * const removed = container.removeChild(sprite);\n   *\n   * // Remove multiple children\n   * const bg = container.removeChild(background, player, userInterface);\n   *\n   * // Remove with type checking\n   * const sprite = container.removeChild<Sprite>(childSprite);\n   * sprite.texture = newTexture;\n   * ```\n   * @param children - The Container(s) to remove\n   * @returns The first child that was removed\n   * @see {@link Container#addChild} For adding children\n   * @see {@link Container#removeChildren} For removing multiple children\n   */\n  removeChild(...children) {\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this._didViewChangeTick++;\n      this.children.splice(index, 1);\n      if (this.renderGroup) {\n        this.renderGroup.removeChild(child);\n      } else if (this.parentRenderGroup) {\n        this.parentRenderGroup.removeChild(child);\n      }\n      if (child.parentRenderLayer) {\n        child.parentRenderLayer.detach(child);\n      }\n      child.parent = null;\n      this.emit(\"childRemoved\", child, this, index);\n      child.emit(\"removed\", this);\n    }\n    return child;\n  }\n  /** @ignore */\n  _onUpdate(point) {\n    if (point) {\n      if (point === this._skew) {\n        this._updateSkew();\n      }\n    }\n    this._didContainerChangeTick++;\n    if (this.didChange)\n      return;\n    this.didChange = true;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.onChildUpdate(this);\n    }\n  }\n  set isRenderGroup(value) {\n    if (!!this.renderGroup === value)\n      return;\n    if (value) {\n      this.enableRenderGroup();\n    } else {\n      this.disableRenderGroup();\n    }\n  }\n  /**\n   * Returns true if this container is a render group.\n   * This means that it will be rendered as a separate pass, with its own set of instructions\n   * @advanced\n   */\n  get isRenderGroup() {\n    return !!this.renderGroup;\n  }\n  /**\n   * Calling this enables a render group for this container.\n   * This means it will be rendered as a separate set of instructions.\n   * The transform of the container will also be handled on the GPU rather than the CPU.\n   * @advanced\n   */\n  enableRenderGroup() {\n    if (this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    this.renderGroup = BigPool.get(RenderGroup, this);\n    this.groupTransform = Matrix.IDENTITY;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /**\n   * This will disable the render group for this container.\n   * @advanced\n   */\n  disableRenderGroup() {\n    if (!this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    BigPool.return(this.renderGroup);\n    this.renderGroup = null;\n    this.groupTransform = this.relativeGroupTransform;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /** @ignore */\n  _updateIsSimple() {\n    this.isSimple = !this.renderGroup && this.effects.length === 0;\n  }\n  /**\n   * Current transform of the object based on world (parent) factors.\n   *\n   * This matrix represents the absolute transformation in the scene graph.\n   * @example\n   * ```ts\n   * // Get world position\n   * const worldPos = container.worldTransform;\n   * console.log(`World position: (${worldPos.tx}, ${worldPos.ty})`);\n   * ```\n   * @readonly\n   * @see {@link Container#localTransform} For local space transform\n   */\n  get worldTransform() {\n    this._worldTransform || (this._worldTransform = new Matrix());\n    if (this.renderGroup) {\n      this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n    } else if (this.parentRenderGroup) {\n      this._worldTransform.appendFrom(this.relativeGroupTransform, this.parentRenderGroup.worldTransform);\n    }\n    return this._worldTransform;\n  }\n  /**\n   * The position of the container on the x axis relative to the local coordinates of the parent.\n   *\n   * An alias to position.x\n   * @example\n   * ```ts\n   * // Basic position\n   * container.x = 100;\n   * ```\n   */\n  get x() {\n    return this._position.x;\n  }\n  set x(value) {\n    this._position.x = value;\n  }\n  /**\n   * The position of the container on the y axis relative to the local coordinates of the parent.\n   *\n   * An alias to position.y\n   * @example\n   * ```ts\n   * // Basic position\n   * container.y = 200;\n   * ```\n   */\n  get y() {\n    return this._position.y;\n  }\n  set y(value) {\n    this._position.y = value;\n  }\n  /**\n   * The coordinate of the object relative to the local coordinates of the parent.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * container.position.set(100, 200);\n   * container.position.set(100); // Sets both x and y to 100\n   * // Using point data\n   * container.position = { x: 50, y: 75 };\n   * ```\n   * @since 4.0.0\n   */\n  get position() {\n    return this._position;\n  }\n  set position(value) {\n    this._position.copyFrom(value);\n  }\n  /**\n   * The rotation of the object in radians.\n   *\n   * > [!NOTE] 'rotation' and 'angle' have the same effect on a display object;\n   * > rotation is in radians, angle is in degrees.\n   * @example\n   * ```ts\n   * // Basic rotation\n   * container.rotation = Math.PI / 4; // 45 degrees\n   *\n   * // Convert from degrees\n   * const degrees = 45;\n   * container.rotation = degrees * Math.PI / 180;\n   *\n   * // Rotate around center\n   * container.pivot.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // 180 degrees\n   *\n   * // Rotate around center with origin\n   * container.origin.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // 180 degrees\n   * ```\n   */\n  get rotation() {\n    return this._rotation;\n  }\n  set rotation(value) {\n    if (this._rotation !== value) {\n      this._rotation = value;\n      this._onUpdate(this._skew);\n    }\n  }\n  /**\n   * The angle of the object in degrees.\n   *\n   * > [!NOTE] 'rotation' and 'angle' have the same effect on a display object;\n   * > rotation is in radians, angle is in degrees.\n   * @example\n   * ```ts\n   * // Basic angle rotation\n   * sprite.angle = 45; // 45 degrees\n   *\n   * // Rotate around center\n   * sprite.pivot.set(sprite.width / 2, sprite.height / 2);\n   * sprite.angle = 180; // Half rotation\n   *\n   * // Rotate around center with origin\n   * sprite.origin.set(sprite.width / 2, sprite.height / 2);\n   * sprite.angle = 180; // Half rotation\n   *\n   * // Reset rotation\n   * sprite.angle = 0;\n   * ```\n   */\n  get angle() {\n    return this.rotation * RAD_TO_DEG;\n  }\n  set angle(value) {\n    this.rotation = value * DEG_TO_RAD;\n  }\n  /**\n   * The center of rotation, scaling, and skewing for this display object in its local space.\n   * The `position` is the projection of `pivot` in the parent's local space.\n   *\n   * By default, the pivot is the origin (0, 0).\n   * @example\n   * ```ts\n   * // Rotate around center\n   * container.pivot.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // Rotates around center\n   * ```\n   * @since 4.0.0\n   */\n  get pivot() {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    return this._pivot;\n  }\n  set pivot(value) {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n      if (this._origin !== defaultOrigin) {\n        warn(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`);\n      }\n    }\n    typeof value === \"number\" ? this._pivot.set(value) : this._pivot.copyFrom(value);\n  }\n  /**\n   * The skew factor for the object in radians. Skewing is a transformation that distorts\n   * the object by rotating it differently at each point, creating a non-uniform shape.\n   * @example\n   * ```ts\n   * // Basic skewing\n   * container.skew.set(0.5, 0); // Skew horizontally\n   * container.skew.set(0, 0.5); // Skew vertically\n   *\n   * // Skew with point data\n   * container.skew = { x: 0.3, y: 0.3 }; // Diagonal skew\n   *\n   * // Reset skew\n   * container.skew.set(0, 0);\n   *\n   * // Animate skew\n   * app.ticker.add(() => {\n   *     // Create wave effect\n   *     container.skew.x = Math.sin(Date.now() / 1000) * 0.3;\n   * });\n   *\n   * // Combine with rotation\n   * container.rotation = Math.PI / 4; // 45 degrees\n   * container.skew.set(0.2, 0.2); // Skew the rotated object\n   * ```\n   * @since 4.0.0\n   * @type {ObservablePoint} Point-like object with x/y properties in radians\n   * @default {x: 0, y: 0}\n   */\n  get skew() {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    return this._skew;\n  }\n  set skew(value) {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    this._skew.copyFrom(value);\n  }\n  /**\n   * The scale factors of this object along the local coordinate axes.\n   *\n   * The default scale is (1, 1).\n   * @example\n   * ```ts\n   * // Basic scaling\n   * container.scale.set(2, 2); // Scales to double size\n   * container.scale.set(2); // Scales uniformly to double size\n   * container.scale = 2; // Scales uniformly to double size\n   * // Scale to a specific width and height\n   * container.setSize(200, 100); // Sets width to 200 and height to 100\n   * ```\n   * @since 4.0.0\n   */\n  get scale() {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 1, 1);\n    }\n    return this._scale;\n  }\n  set scale(value) {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 0, 0);\n    }\n    if (typeof value === \"string\") {\n      value = parseFloat(value);\n    }\n    typeof value === \"number\" ? this._scale.set(value) : this._scale.copyFrom(value);\n  }\n  /**\n   * @experimental\n   * The origin point around which the container rotates and scales without affecting its position.\n   * Unlike pivot, changing the origin will not move the container's position.\n   * @example\n   * ```ts\n   * // Rotate around center point\n   * container.origin.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // Rotates around center\n   *\n   * // Reset origin\n   * container.origin.set(0, 0);\n   * ```\n   */\n  get origin() {\n    if (this._origin === defaultOrigin) {\n      this._origin = new ObservablePoint(this, 0, 0);\n    }\n    return this._origin;\n  }\n  set origin(value) {\n    if (this._origin === defaultOrigin) {\n      this._origin = new ObservablePoint(this, 0, 0);\n      if (this._pivot !== defaultPivot) {\n        warn(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`);\n      }\n    }\n    typeof value === \"number\" ? this._origin.set(value) : this._origin.copyFrom(value);\n  }\n  /**\n   * The width of the Container, setting this will actually modify the scale to achieve the value set.\n   * > [!NOTE] Changing the width will adjust the scale.x property of the container while maintaining its aspect ratio.\n   * > [!NOTE] If you want to set both width and height at the same time, use {@link Container#setSize}\n   * as it is more optimized by not recalculating the local bounds twice.\n   * @example\n   * ```ts\n   * // Basic width setting\n   * container.width = 100;\n   * // Optimized width setting\n   * container.setSize(100, 100);\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x * this.getLocalBounds().width);\n  }\n  set width(value) {\n    const localWidth = this.getLocalBounds().width;\n    this._setWidth(value, localWidth);\n  }\n  /**\n   * The height of the Container,\n   * > [!NOTE] Changing the height will adjust the scale.y property of the container while maintaining its aspect ratio.\n   * > [!NOTE] If you want to set both width and height at the same time, use {@link Container#setSize}\n   * as it is more optimized by not recalculating the local bounds twice.\n   * @example\n   * ```ts\n   * // Basic height setting\n   * container.height = 200;\n   * // Optimized height setting\n   * container.setSize(100, 200);\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y * this.getLocalBounds().height);\n  }\n  set height(value) {\n    const localHeight = this.getLocalBounds().height;\n    this._setHeight(value, localHeight);\n  }\n  /**\n   * Retrieves the size of the container as a [Size]{@link Size} object.\n   *\n   * This is faster than get the width and height separately.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const size = container.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * container.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in.\n   * @returns The size of the container.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    const bounds = this.getLocalBounds();\n    out.width = Math.abs(this.scale.x * bounds.width);\n    out.height = Math.abs(this.scale.y * bounds.height);\n    return out;\n  }\n  /**\n   * Sets the size of the container to the specified width and height.\n   * This is more efficient than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * container.setSize(100, 200);\n   *\n   * // Set uniform size\n   * container.setSize(100); // Sets both width and height to 100\n   * ```\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    const size = this.getLocalBounds();\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, size.width);\n    height !== void 0 && this._setHeight(height, size.height);\n  }\n  /** Called when the skew or the rotation changes. */\n  _updateSkew() {\n    const rotation = this._rotation;\n    const skew = this._skew;\n    this._cx = Math.cos(rotation + skew._y);\n    this._sx = Math.sin(rotation + skew._y);\n    this._cy = -Math.sin(rotation - skew._x);\n    this._sy = Math.cos(rotation - skew._x);\n  }\n  /**\n   * Updates the transform properties of the container.\n   * Allows partial updates of transform properties for optimized manipulation.\n   * @example\n   * ```ts\n   * // Basic transform update\n   * container.updateTransform({\n   *     x: 100,\n   *     y: 200,\n   *     rotation: Math.PI / 4\n   * });\n   *\n   * // Scale and rotate around center\n   * sprite.updateTransform({\n   *     pivotX: sprite.width / 2,\n   *     pivotY: sprite.height / 2,\n   *     scaleX: 2,\n   *     scaleY: 2,\n   *     rotation: Math.PI\n   * });\n   *\n   * // Update position only\n   * button.updateTransform({\n   *     x: button.x + 10, // Move right\n   *     y: button.y      // Keep same y\n   * });\n   * ```\n   * @param opts - Transform options to update\n   * @param opts.x - The x position\n   * @param opts.y - The y position\n   * @param opts.scaleX - The x-axis scale factor\n   * @param opts.scaleY - The y-axis scale factor\n   * @param opts.rotation - The rotation in radians\n   * @param opts.skewX - The x-axis skew factor\n   * @param opts.skewY - The y-axis skew factor\n   * @param opts.pivotX - The x-axis pivot point\n   * @param opts.pivotY - The y-axis pivot point\n   * @returns This container, for chaining\n   * @see {@link Container#setFromMatrix} For matrix-based transforms\n   * @see {@link Container#position} For direct position access\n   */\n  updateTransform(opts) {\n    this.position.set(\n      typeof opts.x === \"number\" ? opts.x : this.position.x,\n      typeof opts.y === \"number\" ? opts.y : this.position.y\n    );\n    this.scale.set(\n      typeof opts.scaleX === \"number\" ? opts.scaleX || 1 : this.scale.x,\n      typeof opts.scaleY === \"number\" ? opts.scaleY || 1 : this.scale.y\n    );\n    this.rotation = typeof opts.rotation === \"number\" ? opts.rotation : this.rotation;\n    this.skew.set(\n      typeof opts.skewX === \"number\" ? opts.skewX : this.skew.x,\n      typeof opts.skewY === \"number\" ? opts.skewY : this.skew.y\n    );\n    this.pivot.set(\n      typeof opts.pivotX === \"number\" ? opts.pivotX : this.pivot.x,\n      typeof opts.pivotY === \"number\" ? opts.pivotY : this.pivot.y\n    );\n    this.origin.set(\n      typeof opts.originX === \"number\" ? opts.originX : this.origin.x,\n      typeof opts.originY === \"number\" ? opts.originY : this.origin.y\n    );\n    return this;\n  }\n  /**\n   * Updates the local transform properties by decomposing the given matrix.\n   * Extracts position, scale, rotation, and skew from a transformation matrix.\n   * @example\n   * ```ts\n   * // Basic matrix transform\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4)\n   *     .scale(2, 2);\n   *\n   * container.setFromMatrix(matrix);\n   *\n   * // Copy transform from another container\n   * const source = new Container();\n   * source.position.set(100, 100);\n   * source.rotation = Math.PI / 2;\n   *\n   * target.setFromMatrix(source.localTransform);\n   *\n   * // Reset transform\n   * container.setFromMatrix(Matrix.IDENTITY);\n   * ```\n   * @param matrix - The matrix to use for updating the transform\n   * @see {@link Container#updateTransform} For property-based updates\n   * @see {@link Matrix#decompose} For matrix decomposition details\n   */\n  setFromMatrix(matrix) {\n    matrix.decompose(this);\n  }\n  /** Updates the local transform. */\n  updateLocalTransform() {\n    const localTransformChangeId = this._didContainerChangeTick;\n    if (this._didLocalTransformChangeId === localTransformChangeId)\n      return;\n    this._didLocalTransformChangeId = localTransformChangeId;\n    const lt = this.localTransform;\n    const scale = this._scale;\n    const pivot = this._pivot;\n    const origin = this._origin;\n    const position = this._position;\n    const sx = scale._x;\n    const sy = scale._y;\n    const px = pivot._x;\n    const py = pivot._y;\n    const ox = -origin._x;\n    const oy = -origin._y;\n    lt.a = this._cx * sx;\n    lt.b = this._sx * sx;\n    lt.c = this._cy * sy;\n    lt.d = this._sy * sy;\n    lt.tx = position._x - (px * lt.a + py * lt.c) + (ox * lt.a + oy * lt.c) - ox;\n    lt.ty = position._y - (px * lt.b + py * lt.d) + (ox * lt.b + oy * lt.d) - oy;\n  }\n  // / ///// color related stuff\n  set alpha(value) {\n    if (value === this.localAlpha)\n      return;\n    this.localAlpha = value;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The opacity of the object relative to its parent's opacity.\n   * Value ranges from 0 (fully transparent) to 1 (fully opaque).\n   * @example\n   * ```ts\n   * // Basic transparency\n   * sprite.alpha = 0.5; // 50% opacity\n   *\n   * // Inherited opacity\n   * container.alpha = 0.5;\n   * const child = new Sprite(texture);\n   * child.alpha = 0.5;\n   * container.addChild(child);\n   * // child's effective opacity is 0.25 (0.5 * 0.5)\n   * ```\n   * @default 1\n   * @see {@link Container#visible} For toggling visibility\n   * @see {@link Container#renderable} For render control\n   */\n  get alpha() {\n    return this.localAlpha;\n  }\n  set tint(value) {\n    const tempColor = Color.shared.setValue(value ?? 16777215);\n    const bgr = tempColor.toBgrNumber();\n    if (bgr === this.localColor)\n      return;\n    this.localColor = bgr;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The tint applied to the sprite.\n   *\n   * This can be any valid {@link ColorSource}.\n   * @example\n   * ```ts\n   * // Basic color tinting\n   * container.tint = 0xff0000; // Red tint\n   * container.tint = 'red';    // Same as above\n   * container.tint = '#00ff00'; // Green\n   * container.tint = 'rgb(0,0,255)'; // Blue\n   *\n   * // Remove tint\n   * container.tint = 0xffffff; // White = no tint\n   * container.tint = null;     // Also removes tint\n   * ```\n   * @default 0xFFFFFF\n   * @see {@link Container#alpha} For transparency\n   * @see {@link Container#visible} For visibility control\n   */\n  get tint() {\n    return bgr2rgb(this.localColor);\n  }\n  // / //////////////// blend related stuff\n  set blendMode(value) {\n    if (this.localBlendMode === value)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_BLEND;\n    this.localBlendMode = value;\n    this._onUpdate();\n  }\n  /**\n   * The blend mode to be applied to the sprite. Controls how pixels are blended when rendering.\n   *\n   * Setting to 'normal' will reset to default blending.\n   * > [!NOTE] More blend modes are available after importing the `pixi.js/advanced-blend-modes` sub-export.\n   * @example\n   * ```ts\n   * // Basic blend modes\n   * sprite.blendMode = 'add';        // Additive blending\n   * sprite.blendMode = 'multiply';   // Multiply colors\n   * sprite.blendMode = 'screen';     // Screen blend\n   *\n   * // Reset blend mode\n   * sprite.blendMode = 'normal';     // Normal blending\n   * ```\n   * @default 'normal'\n   * @see {@link Container#alpha} For transparency\n   * @see {@link Container#tint} For color adjustments\n   */\n  get blendMode() {\n    return this.localBlendMode;\n  }\n  // / ///////// VISIBILITY / RENDERABLE /////////////////\n  /**\n   * The visibility of the object. If false the object will not be drawn,\n   * and the transform will not be updated.\n   * @example\n   * ```ts\n   * // Basic visibility toggle\n   * sprite.visible = false; // Hide sprite\n   * sprite.visible = true;  // Show sprite\n   * ```\n   * @default true\n   * @see {@link Container#renderable} For render-only control\n   * @see {@link Container#alpha} For transparency\n   */\n  get visible() {\n    return !!(this.localDisplayStatus & 2);\n  }\n  set visible(value) {\n    const valueNumber = value ? 2 : 0;\n    if ((this.localDisplayStatus & 2) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 2;\n    this._onUpdate();\n  }\n  /** @ignore */\n  get culled() {\n    return !(this.localDisplayStatus & 4);\n  }\n  /** @ignore */\n  set culled(value) {\n    const valueNumber = value ? 0 : 4;\n    if ((this.localDisplayStatus & 4) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 4;\n    this._onUpdate();\n  }\n  /**\n   * Controls whether this object can be rendered. If false the object will not be drawn,\n   * but the transform will still be updated. This is different from visible, which skips\n   * transform updates.\n   * @example\n   * ```ts\n   * // Basic render control\n   * sprite.renderable = false; // Skip rendering\n   * sprite.renderable = true;  // Enable rendering\n   * ```\n   * @default true\n   * @see {@link Container#visible} For skipping transform updates\n   * @see {@link Container#alpha} For transparency\n   */\n  get renderable() {\n    return !!(this.localDisplayStatus & 1);\n  }\n  set renderable(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 1) === valueNumber)\n      return;\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 1;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._onUpdate();\n  }\n  /**\n   * Whether or not the object should be rendered.\n   * @advanced\n   */\n  get isRenderable() {\n    return this.localDisplayStatus === 7 && this.groupAlpha > 0;\n  }\n  /**\n   * Removes all internal references and listeners as well as removes children from the display list.\n   * Do not use a Container after calling `destroy`.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * ```ts\n   * container.destroy();\n   * container.destroy(true);\n   * container.destroy({ children: true });\n   * container.destroy({ children: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options = false) {\n    if (this.destroyed)\n      return;\n    this.destroyed = true;\n    let oldChildren;\n    if (this.children.length) {\n      oldChildren = this.removeChildren(0, this.children.length);\n    }\n    this.removeFromParent();\n    this.parent = null;\n    this._maskEffect = null;\n    this._filterEffect = null;\n    this.effects = null;\n    this._position = null;\n    this._scale = null;\n    this._pivot = null;\n    this._origin = null;\n    this._skew = null;\n    this.emit(\"destroyed\", this);\n    this.removeAllListeners();\n    const destroyChildren = typeof options === \"boolean\" ? options : options?.children;\n    if (destroyChildren && oldChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n    this.renderGroup?.destroy();\n    this.renderGroup = null;\n  }\n}\nextensions.mixin(\n  Container,\n  childrenHelperMixin,\n  getFastGlobalBoundsMixin,\n  toLocalGlobalMixin,\n  onRenderMixin,\n  measureMixin,\n  effectsMixin,\n  findMixin,\n  sortMixin,\n  cullingMixin,\n  cacheAsTextureMixin,\n  getGlobalMixin,\n  collectRenderablesMixin\n);\n\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE };\n//# sourceMappingURL=Container.mjs.map\n","\"use strict\";\nfunction assignWithIgnore(target, options, ignore = {}) {\n  for (const key in options) {\n    if (!ignore[key] && options[key] !== void 0) {\n      target[key] = options[key];\n    }\n  }\n}\n\nexport { assignWithIgnore };\n//# sourceMappingURL=assignWithIgnore.mjs.map\n","\"use strict\";\nconst cullingMixin = {\n  cullArea: null,\n  cullable: false,\n  cullableChildren: true\n};\n\nexport { cullingMixin };\n//# sourceMappingURL=cullingMixin.mjs.map\n","import { Buffer } from '../../buffer/Buffer.mjs';\nimport { BufferUsage } from '../../buffer/const.mjs';\n\n\"use strict\";\nfunction ensureIsBuffer(buffer, index) {\n  if (!(buffer instanceof Buffer)) {\n    let usage = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n    if (buffer instanceof Array) {\n      if (index) {\n        buffer = new Uint32Array(buffer);\n        usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n      } else {\n        buffer = new Float32Array(buffer);\n        usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n      }\n    }\n    buffer = new Buffer({\n      data: buffer,\n      label: index ? \"index-mesh-buffer\" : \"vertex-mesh-buffer\",\n      usage\n    });\n  }\n  return buffer;\n}\n\nexport { ensureIsBuffer };\n//# sourceMappingURL=ensureIsBuffer.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer.mjs';\nimport { getGeometryBounds } from './utils/getGeometryBounds.mjs';\n\n\"use strict\";\nfunction ensureIsAttribute(attribute) {\n  if (attribute instanceof Buffer || Array.isArray(attribute) || attribute.BYTES_PER_ELEMENT) {\n    attribute = {\n      buffer: attribute\n    };\n  }\n  attribute.buffer = ensureIsBuffer(attribute.buffer, false);\n  return attribute;\n}\nclass Geometry extends EventEmitter {\n  /**\n   * Create a new instance of a geometry\n   * @param options - The options for the geometry.\n   */\n  constructor(options = {}) {\n    super();\n    /** The unique id of the geometry. */\n    this.uid = uid(\"geometry\");\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     */\n    this._layoutKey = 0;\n    /** the instance count of the geometry to draw */\n    this.instanceCount = 1;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    const { attributes, indexBuffer, topology } = options;\n    this.buffers = [];\n    this.attributes = {};\n    if (attributes) {\n      for (const i in attributes) {\n        this.addAttribute(i, attributes[i]);\n      }\n    }\n    this.instanceCount = options.instanceCount ?? 1;\n    if (indexBuffer) {\n      this.addIndex(indexBuffer);\n    }\n    this.topology = topology || \"triangle-list\";\n  }\n  onBufferUpdate() {\n    this._boundsDirty = true;\n    this.emit(\"update\", this);\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.getAttribute(id).buffer;\n  }\n  /**\n   * Used to figure out how many vertices there are in this geometry\n   * @returns the number of vertices in the geometry\n   */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      const buffer = attribute.buffer;\n      return buffer.data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /**\n   * Adds an attribute to the geometry.\n   * @param name - The name of the attribute to add.\n   * @param attributeOption - The attribute option to add.\n   */\n  addAttribute(name, attributeOption) {\n    const attribute = ensureIsAttribute(attributeOption);\n    const bufferIndex = this.buffers.indexOf(attribute.buffer);\n    if (bufferIndex === -1) {\n      this.buffers.push(attribute.buffer);\n      attribute.buffer.on(\"update\", this.onBufferUpdate, this);\n      attribute.buffer.on(\"change\", this.onBufferUpdate, this);\n    }\n    this.attributes[name] = attribute;\n  }\n  /**\n   * Adds an index buffer to the geometry.\n   * @param indexBuffer - The index buffer to add. Can be a Buffer, TypedArray, or an array of numbers.\n   */\n  addIndex(indexBuffer) {\n    this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n    this.buffers.push(this.indexBuffer);\n  }\n  /** Returns the bounds of the geometry. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    return getGeometryBounds(this, \"aPosition\", this._bounds);\n  }\n  /**\n   * destroys the geometry.\n   * @param destroyBuffers - destroy the buffers associated with this geometry\n   */\n  destroy(destroyBuffers = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    if (destroyBuffers) {\n      this.buffers.forEach((buffer) => buffer.destroy());\n    }\n    this.attributes = null;\n    this.buffers = null;\n    this.indexBuffer = null;\n    this._bounds = null;\n  }\n}\n\nexport { Geometry };\n//# sourceMappingURL=Geometry.mjs.map\n","\"use strict\";\nfunction getGeometryBounds(geometry, attributeId, bounds) {\n  const attribute = geometry.getAttribute(attributeId);\n  if (!attribute) {\n    bounds.minX = 0;\n    bounds.minY = 0;\n    bounds.maxX = 0;\n    bounds.maxY = 0;\n    return bounds;\n  }\n  const data = attribute.buffer.data;\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  const byteSize = data.BYTES_PER_ELEMENT;\n  const offset = (attribute.offset || 0) / byteSize;\n  const stride = (attribute.stride || 2 * 4) / byteSize;\n  for (let i = offset; i < data.length; i += stride) {\n    const x = data[i];\n    const y = data[i + 1];\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n  }\n  bounds.minX = minX;\n  bounds.minY = minY;\n  bounds.maxX = maxX;\n  bounds.maxY = maxY;\n  return bounds;\n}\n\nexport { getGeometryBounds };\n//# sourceMappingURL=getGeometryBounds.mjs.map\n","import { Color } from '../../color/Color.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\n\n\"use strict\";\nconst _DynamicBitmapFont = class _DynamicBitmapFont extends AbstractBitmapFont {\n  /**\n   * @param options - The options for the dynamic bitmap font.\n   */\n  constructor(options) {\n    super();\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    this.resolution = 1;\n    /** The pages of the font. */\n    this.pages = [];\n    this._padding = 0;\n    this._measureCache = /* @__PURE__ */ Object.create(null);\n    this._currentChars = [];\n    this._currentX = 0;\n    this._currentY = 0;\n    this._currentMaxCharHeight = 0;\n    this._currentPageIndex = -1;\n    this._skipKerning = false;\n    const dynamicOptions = { ..._DynamicBitmapFont.defaultOptions, ...options };\n    this._textureSize = dynamicOptions.textureSize;\n    this._mipmap = dynamicOptions.mipmap;\n    const style = dynamicOptions.style.clone();\n    if (dynamicOptions.overrideFill) {\n      style._fill.color = 16777215;\n      style._fill.alpha = 1;\n      style._fill.texture = Texture.WHITE;\n      style._fill.fill = null;\n    }\n    this.applyFillAsTint = dynamicOptions.overrideFill;\n    const requestedFontSize = style.fontSize;\n    style.fontSize = this.baseMeasurementFontSize;\n    const font = fontStringFromTextStyle(style);\n    if (dynamicOptions.overrideSize) {\n      if (style._stroke) {\n        style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n      }\n    } else {\n      style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n    }\n    this._style = style;\n    this._skipKerning = dynamicOptions.skipKerning ?? false;\n    this.resolution = dynamicOptions.resolution ?? 1;\n    this._padding = dynamicOptions.padding ?? 4;\n    if (dynamicOptions.textureStyle) {\n      this._textureStyle = dynamicOptions.textureStyle instanceof TextureStyle ? dynamicOptions.textureStyle : new TextureStyle(dynamicOptions.textureStyle);\n    }\n    this.fontMetrics = CanvasTextMetrics.measureFont(font);\n    this.lineHeight = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n  }\n  ensureCharacters(chars) {\n    const charList = CanvasTextMetrics.graphemeSegmenter(chars).filter((char) => !this._currentChars.includes(char)).filter((char, index, self) => self.indexOf(char) === index);\n    if (!charList.length)\n      return;\n    this._currentChars = [...this._currentChars, ...charList];\n    let pageData;\n    if (this._currentPageIndex === -1) {\n      pageData = this._nextPage();\n    } else {\n      pageData = this.pages[this._currentPageIndex];\n    }\n    let { canvas, context } = pageData.canvasAndContext;\n    let textureSource = pageData.texture.source;\n    const style = this._style;\n    let currentX = this._currentX;\n    let currentY = this._currentY;\n    let currentMaxCharHeight = this._currentMaxCharHeight;\n    const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n    const padding = this._padding * fontScale;\n    let skipTexture = false;\n    const maxTextureWidth = canvas.width / this.resolution;\n    const maxTextureHeight = canvas.height / this.resolution;\n    for (let i = 0; i < charList.length; i++) {\n      const char = charList[i];\n      const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n      metrics.lineHeight = metrics.height;\n      const width = metrics.width * fontScale;\n      const textureGlyphWidth = Math.ceil((style.fontStyle === \"italic\" ? 2 : 1) * width);\n      const height = metrics.height * fontScale;\n      const paddedWidth = textureGlyphWidth + padding * 2;\n      const paddedHeight = height + padding * 2;\n      skipTexture = false;\n      if (char !== \"\\n\" && char !== \"\\r\" && char !== \"\t\" && char !== \" \") {\n        skipTexture = true;\n        currentMaxCharHeight = Math.ceil(Math.max(paddedHeight, currentMaxCharHeight));\n      }\n      if (currentX + paddedWidth > maxTextureWidth) {\n        currentY += currentMaxCharHeight;\n        currentMaxCharHeight = paddedHeight;\n        currentX = 0;\n        if (currentY + currentMaxCharHeight > maxTextureHeight) {\n          textureSource.update();\n          const pageData2 = this._nextPage();\n          canvas = pageData2.canvasAndContext.canvas;\n          context = pageData2.canvasAndContext.context;\n          textureSource = pageData2.texture.source;\n          currentX = 0;\n          currentY = 0;\n          currentMaxCharHeight = 0;\n        }\n      }\n      const xAdvance = width / fontScale - (style.dropShadow?.distance ?? 0) - (style._stroke?.width ?? 0);\n      this.chars[char] = {\n        id: char.codePointAt(0),\n        xOffset: -this._padding,\n        yOffset: -this._padding,\n        xAdvance,\n        kerning: {}\n      };\n      if (skipTexture) {\n        this._drawGlyph(\n          context,\n          metrics,\n          currentX + padding,\n          currentY + padding,\n          fontScale,\n          style\n        );\n        const px = textureSource.width * fontScale;\n        const py = textureSource.height * fontScale;\n        const frame = new Rectangle(\n          currentX / px * textureSource.width,\n          currentY / py * textureSource.height,\n          paddedWidth / px * textureSource.width,\n          paddedHeight / py * textureSource.height\n        );\n        this.chars[char].texture = new Texture({\n          source: textureSource,\n          frame\n        });\n        currentX += Math.ceil(paddedWidth);\n      }\n    }\n    textureSource.update();\n    this._currentX = currentX;\n    this._currentY = currentY;\n    this._currentMaxCharHeight = currentMaxCharHeight;\n    this._skipKerning && this._applyKerning(charList, context);\n  }\n  /**\n   * @deprecated since 8.0.0\n   * The map of base page textures (i.e., sheets of glyphs).\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  _applyKerning(newChars, context) {\n    const measureCache = this._measureCache;\n    for (let i = 0; i < newChars.length; i++) {\n      const first = newChars[i];\n      for (let j = 0; j < this._currentChars.length; j++) {\n        const second = this._currentChars[j];\n        let c1 = measureCache[first];\n        if (!c1)\n          c1 = measureCache[first] = context.measureText(first).width;\n        let c2 = measureCache[second];\n        if (!c2)\n          c2 = measureCache[second] = context.measureText(second).width;\n        let total = context.measureText(first + second).width;\n        let amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[first].kerning[second] = amount;\n        }\n        total = context.measureText(first + second).width;\n        amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[second].kerning[first] = amount;\n        }\n      }\n    }\n  }\n  _nextPage() {\n    this._currentPageIndex++;\n    const textureResolution = this.resolution;\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n      this._textureSize,\n      this._textureSize,\n      textureResolution\n    );\n    this._setupContext(canvasAndContext.context, this._style, textureResolution);\n    const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n    const texture = new Texture({\n      source: new ImageSource({\n        resource: canvasAndContext.canvas,\n        resolution,\n        alphaMode: \"premultiply-alpha-on-upload\",\n        autoGenerateMipmaps: this._mipmap\n      })\n    });\n    if (this._textureStyle) {\n      texture.source.style = this._textureStyle;\n    }\n    const pageData = {\n      canvasAndContext,\n      texture\n    };\n    this.pages[this._currentPageIndex] = pageData;\n    return pageData;\n  }\n  // canvas style!\n  _setupContext(context, style, resolution) {\n    style.fontSize = this.baseRenderedFontSize;\n    context.scale(resolution, resolution);\n    context.font = fontStringFromTextStyle(style);\n    style.fontSize = this.baseMeasurementFontSize;\n    context.textBaseline = style.textBaseline;\n    const stroke = style._stroke;\n    const strokeThickness = stroke?.width ?? 0;\n    if (stroke) {\n      context.lineWidth = strokeThickness;\n      context.lineJoin = stroke.join;\n      context.miterLimit = stroke.miterLimit;\n      context.strokeStyle = getCanvasFillStyle(stroke, context);\n    }\n    if (style._fill) {\n      context.fillStyle = getCanvasFillStyle(style._fill, context);\n    }\n    if (style.dropShadow) {\n      const shadowOptions = style.dropShadow;\n      const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n      const dropShadowBlur = shadowOptions.blur * resolution;\n      const dropShadowDistance = shadowOptions.distance * resolution;\n      context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n      context.shadowBlur = dropShadowBlur;\n      context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n      context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n    } else {\n      context.shadowColor = \"black\";\n      context.shadowBlur = 0;\n      context.shadowOffsetX = 0;\n      context.shadowOffsetY = 0;\n    }\n  }\n  _drawGlyph(context, metrics, x, y, fontScale, style) {\n    const char = metrics.text;\n    const fontProperties = metrics.fontProperties;\n    const stroke = style._stroke;\n    const strokeThickness = (stroke?.width ?? 0) * fontScale;\n    const tx = x + strokeThickness / 2;\n    const ty = y - strokeThickness / 2;\n    const descent = fontProperties.descent * fontScale;\n    const lineHeight = metrics.lineHeight * fontScale;\n    let removeShadow = false;\n    if (style.stroke && strokeThickness) {\n      removeShadow = true;\n      context.strokeText(char, tx, ty + lineHeight - descent);\n    }\n    const { shadowBlur, shadowOffsetX, shadowOffsetY } = context;\n    if (style._fill) {\n      if (removeShadow) {\n        context.shadowBlur = 0;\n        context.shadowOffsetX = 0;\n        context.shadowOffsetY = 0;\n      }\n      context.fillText(char, tx, ty + lineHeight - descent);\n    }\n    if (removeShadow) {\n      context.shadowBlur = shadowBlur;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n    }\n  }\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { canvasAndContext, texture } = this.pages[i];\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n};\n_DynamicBitmapFont.defaultOptions = {\n  textureSize: 512,\n  style: new TextStyle(),\n  mipmap: true\n};\nlet DynamicBitmapFont = _DynamicBitmapFont;\n\nexport { DynamicBitmapFont };\n//# sourceMappingURL=DynamicBitmapFont.mjs.map\n","import { lru } from 'tiny-lru';\nimport { Cache } from '../../assets/cache/Cache.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { DynamicBitmapFont } from './DynamicBitmapFont.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nlet fontCount = 0;\nclass BitmapFontManagerClass {\n  constructor() {\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    this.ALPHA = [[\"a\", \"z\"], [\"A\", \"Z\"], \" \"];\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    this.NUMERIC = [[\"0\", \"9\"]];\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    this.ALPHANUMERIC = [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \" \"];\n    /**\n     * This character set consists of all the ASCII table.\n     * @type {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    this.ASCII = [[\" \", \"~\"]];\n    /** Default options for installing a new BitmapFont. */\n    this.defaultOptions = {\n      chars: this.ALPHANUMERIC,\n      resolution: 1,\n      padding: 4,\n      skipKerning: false,\n      textureStyle: null\n    };\n    /** Cache for measured text layouts to avoid recalculating them multiple times. */\n    this.measureCache = lru(1e3);\n  }\n  /**\n   * Get a font for the specified text and style.\n   * @param text - The text to get the font for\n   * @param style - The style to use\n   */\n  getFont(text, style) {\n    let fontFamilyKey = `${style.fontFamily}-bitmap`;\n    let overrideFill = true;\n    if (style._fill.fill && !style._stroke) {\n      fontFamilyKey += style._fill.fill.styleKey;\n      overrideFill = false;\n    } else if (style._stroke || style.dropShadow) {\n      fontFamilyKey = `${style.styleKey}-bitmap`;\n      overrideFill = false;\n    }\n    if (!Cache.has(fontFamilyKey)) {\n      const styleCopy = Object.create(style);\n      styleCopy.lineHeight = 0;\n      const fnt = new DynamicBitmapFont({\n        style: styleCopy,\n        overrideFill,\n        overrideSize: true,\n        ...this.defaultOptions\n      });\n      fontCount++;\n      if (fontCount > 50) {\n        warn(\"BitmapText\", `You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \\`BitmapFont.install({name:\"style1\", style})\\``);\n      }\n      fnt.once(\"destroy\", () => {\n        fontCount--;\n        Cache.remove(fontFamilyKey);\n      });\n      Cache.set(\n        fontFamilyKey,\n        fnt\n      );\n    }\n    const dynamicFont = Cache.get(fontFamilyKey);\n    dynamicFont.ensureCharacters?.(text);\n    return dynamicFont;\n  }\n  /**\n   * Get the layout of a text for the specified style.\n   * @param text - The text to get the layout for\n   * @param style - The style to use\n   * @param trimEnd - Whether to ignore whitespaces at the end of each line\n   */\n  getLayout(text, style, trimEnd = true) {\n    const bitmapFont = this.getFont(text, style);\n    const id = `${text}-${style.styleKey}-${trimEnd}`;\n    if (this.measureCache.has(id)) {\n      return this.measureCache.get(id);\n    }\n    const segments = CanvasTextMetrics.graphemeSegmenter(text);\n    const layoutData = getBitmapTextLayout(segments, style, bitmapFont, trimEnd);\n    this.measureCache.set(id, layoutData);\n    return layoutData;\n  }\n  /**\n   * Measure the text using the specified style.\n   * @param text - The text to measure\n   * @param style - The style to use\n   * @param trimEnd - Whether to ignore whitespaces at the end of each line\n   */\n  measureText(text, style, trimEnd = true) {\n    return this.getLayout(text, style, trimEnd);\n  }\n  // eslint-disable-next-line max-len\n  install(...args) {\n    let options = args[0];\n    if (typeof options === \"string\") {\n      options = {\n        name: options,\n        style: args[1],\n        chars: args[2]?.chars,\n        resolution: args[2]?.resolution,\n        padding: args[2]?.padding,\n        skipKerning: args[2]?.skipKerning\n      };\n      deprecation(v8_0_0, \"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})\");\n    }\n    const name = options?.name;\n    if (!name) {\n      throw new Error(\"[BitmapFontManager] Property `name` is required.\");\n    }\n    options = { ...this.defaultOptions, ...options };\n    const textStyle = options.style;\n    const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n    const overrideFill = options.dynamicFill ?? this._canUseTintForStyle(style);\n    const font = new DynamicBitmapFont({\n      style,\n      overrideFill,\n      skipKerning: options.skipKerning,\n      padding: options.padding,\n      resolution: options.resolution,\n      overrideSize: false,\n      textureStyle: options.textureStyle\n    });\n    const flatChars = resolveCharacters(options.chars);\n    font.ensureCharacters(flatChars.join(\"\"));\n    Cache.set(`${name}-bitmap`, font);\n    font.once(\"destroy\", () => Cache.remove(`${name}-bitmap`));\n    return font;\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  uninstall(name) {\n    const cacheKey = `${name}-bitmap`;\n    const font = Cache.get(cacheKey);\n    if (font) {\n      font.destroy();\n    }\n  }\n  /**\n   * Determines if a style can use tinting instead of baking colors into the bitmap.\n   * Tinting is more efficient as it allows reusing the same bitmap with different colors.\n   * @param style - The text style to evaluate\n   * @returns true if the style can use tinting, false if colors must be baked in\n   * @private\n   */\n  _canUseTintForStyle(style) {\n    return !style._stroke && (!style.dropShadow || style.dropShadow.color === 0) && !style._fill.fill && style._fill.color === 16777215;\n  }\n}\nconst BitmapFontManager = new BitmapFontManagerClass();\n\nexport { BitmapFontManager };\n//# sourceMappingURL=BitmapFontManager.mjs.map\n","\"use strict\";\nfunction resolveCharacters(chars) {\n  if (chars === \"\") {\n    return [];\n  }\n  if (typeof chars === \"string\") {\n    chars = [chars];\n  }\n  const result = [];\n  for (let i = 0, j = chars.length; i < j; i++) {\n    const item = chars[i];\n    if (Array.isArray(item)) {\n      if (item.length !== 2) {\n        throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n      }\n      if (item[0].length === 0 || item[1].length === 0) {\n        throw new Error(\"[BitmapFont]: Invalid character delimiter.\");\n      }\n      const startCode = item[0].charCodeAt(0);\n      const endCode = item[1].charCodeAt(0);\n      if (endCode < startCode) {\n        throw new Error(\"[BitmapFont]: Invalid character range.\");\n      }\n      for (let i2 = startCode, j2 = endCode; i2 <= j2; i2++) {\n        result.push(String.fromCharCode(i2));\n      }\n    } else {\n      result.push(...Array.from(item));\n    }\n  }\n  if (result.length === 0) {\n    throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");\n  }\n  return result;\n}\n\nexport { resolveCharacters };\n//# sourceMappingURL=resolveCharacters.mjs.map\n","\"use strict\";\nfunction processX(base, ids, depth, result, tags) {\n  const id = ids[depth];\n  for (let i = 0; i < id.length; i++) {\n    const value = id[i];\n    if (depth < ids.length - 1) {\n      processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n    } else {\n      tags.push(base.replace(result[depth], value));\n    }\n  }\n}\nfunction createStringVariations(string) {\n  const regex = /\\{(.*?)\\}/g;\n  const result = string.match(regex);\n  const tags = [];\n  if (result) {\n    const ids = [];\n    result.forEach((vars) => {\n      const split = vars.substring(1, vars.length - 1).split(\",\");\n      ids.push(split);\n    });\n    processX(string, ids, 0, result, tags);\n  } else {\n    tags.push(string);\n  }\n  return tags;\n}\n\nexport { createStringVariations };\n//# sourceMappingURL=createStringVariations.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { createStringVariations } from '../utils/createStringVariations.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Resolver {\n  constructor() {\n    this._defaultBundleIdentifierOptions = {\n      connector: \"-\",\n      createBundleAssetId: (bundleId, assetId) => `${bundleId}${this._bundleIdConnector}${assetId}`,\n      extractAssetIdFromBundle: (bundleId, assetBundleId) => assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, \"\")\n    };\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    this._bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    this._createBundleAssetId = this._defaultBundleIdentifierOptions.createBundleAssetId;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    this._extractAssetIdFromBundle = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._parsers = [];\n    this._resolverHash = {};\n    this._bundles = {};\n  }\n  /**\n   * Override how the resolver deals with generating bundle ids.\n   * must be called before any bundles are added\n   * @param bundleIdentifier - the bundle identifier options\n   */\n  setBundleIdentifier(bundleIdentifier) {\n    this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n    this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n    this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n    if (this._extractAssetIdFromBundle(\"foo\", this._createBundleAssetId(\"foo\", \"bar\")) !== \"bar\") {\n      throw new Error(\"[Resolver] GenerateBundleAssetId are not working correctly\");\n    }\n  }\n  /**\n   * Let the resolver know which assets you prefer to use when resolving assets.\n   * Multiple prefer user defined rules can be added.\n   * @example\n   * resolver.prefer({\n   *     // first look for something with the correct format, and then then correct resolution\n   *     priority: ['format', 'resolution'],\n   *     params:{\n   *         format:'webp', // prefer webp images\n   *         resolution: 2, // prefer a resolution of 2\n   *     }\n   * })\n   * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n   * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n   * @param preferOrders - the prefer options\n   */\n  prefer(...preferOrders) {\n    preferOrders.forEach((prefer) => {\n      this._preferredOrder.push(prefer);\n      if (!prefer.priority) {\n        prefer.priority = Object.keys(prefer.params);\n      }\n    });\n    this._resolverHash = {};\n  }\n  /**\n   * Set the base path to prepend to all urls when resolving\n   * @example\n   * resolver.basePath = 'https://home.com/';\n   * resolver.add('foo', 'bar.ong');\n   * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n   * @param basePath - the base path to use\n   */\n  set basePath(basePath) {\n    this._basePath = basePath;\n  }\n  get basePath() {\n    return this._basePath;\n  }\n  /**\n   * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n   * default value for browsers is `window.location.origin`\n   * @example\n   * // Application hosted on https://home.com/some-path/index.html\n   * resolver.basePath = 'https://home.com/some-path/';\n   * resolver.rootPath = 'https://home.com/';\n   * resolver.add('foo', '/bar.png');\n   * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n   * @param rootPath - the root path to use\n   */\n  set rootPath(rootPath) {\n    this._rootPath = rootPath;\n  }\n  get rootPath() {\n    return this._rootPath;\n  }\n  /**\n   * All the active URL parsers that help the parser to extract information and create\n   * an asset object-based on parsing the URL itself.\n   *\n   * Can be added using the extensions API\n   * @example\n   * resolver.add('foo', [\n   *     {\n   *         resolution: 2,\n   *         format: 'png',\n   *         src: 'image@2x.png',\n   *     },\n   *     {\n   *         resolution:1,\n   *         format:'png',\n   *         src: 'image.png',\n   *     },\n   * ]);\n   *\n   * // With a url parser the information such as resolution and file format could extracted from the url itself:\n   * extensions.add({\n   *     extension: ExtensionType.ResolveParser,\n   *     test: loadTextures.test, // test if url ends in an image\n   *     parse: (value: string) =>\n   *     ({\n   *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n   *         format: value.split('.').pop(),\n   *         src: value,\n   *     }),\n   * });\n   *\n   * // Now resolution and format can be extracted from the url\n   * resolver.add('foo', [\n   *     'image@2x.png',\n   *     'image.png',\n   * ]);\n   */\n  get parsers() {\n    return this._parsers;\n  }\n  /** Used for testing, this resets the resolver to its initial state */\n  reset() {\n    this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._resolverHash = {};\n    this._rootPath = null;\n    this._basePath = null;\n    this._manifest = null;\n    this._bundles = {};\n    this._defaultSearchParams = null;\n  }\n  /**\n   * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n   * @param searchParams - the default url parameters to append when resolving urls\n   */\n  setDefaultSearchParams(searchParams) {\n    if (typeof searchParams === \"string\") {\n      this._defaultSearchParams = searchParams;\n    } else {\n      const queryValues = searchParams;\n      this._defaultSearchParams = Object.keys(queryValues).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`).join(\"&\");\n    }\n  }\n  /**\n   * Returns the aliases for a given asset\n   * @param asset - the asset to get the aliases for\n   */\n  getAlias(asset) {\n    const { alias, src } = asset;\n    const aliasesToUse = convertToList(\n      alias || src,\n      (value) => {\n        if (typeof value === \"string\")\n          return value;\n        if (Array.isArray(value))\n          return value.map((v) => v?.src ?? v);\n        if (value?.src)\n          return value.src;\n        return value;\n      },\n      true\n    );\n    return aliasesToUse;\n  }\n  /**\n   * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n   * generally a manifest would be built using a tool.\n   * @param manifest - the manifest to add to the resolver\n   */\n  addManifest(manifest) {\n    if (this._manifest) {\n      warn(\"[Resolver] Manifest already exists, this will be overwritten\");\n    }\n    this._manifest = manifest;\n    manifest.bundles.forEach((bundle) => {\n      this.addBundle(bundle.name, bundle.assets);\n    });\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can resolve them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * resolver.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * resolver.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const resolvedAssets = await resolver.resolveBundle('animals');\n   * @param bundleId - The id of the bundle to add\n   * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    const assetNames = [];\n    let convertedAssets = assets;\n    if (!Array.isArray(assets)) {\n      convertedAssets = Object.entries(assets).map(([alias, src]) => {\n        if (typeof src === \"string\" || Array.isArray(src)) {\n          return { alias, src };\n        }\n        return { alias, ...src };\n      });\n    }\n    convertedAssets.forEach((asset) => {\n      const srcs = asset.src;\n      const aliases = asset.alias;\n      let ids;\n      if (typeof aliases === \"string\") {\n        const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n        assetNames.push(bundleAssetId);\n        ids = [aliases, bundleAssetId];\n      } else {\n        const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n        assetNames.push(...bundleIds);\n        ids = [...aliases, ...bundleIds];\n      }\n      this.add({\n        ...asset,\n        ...{\n          alias: ids,\n          src: srcs\n        }\n      });\n    });\n    this._bundles[bundleId] = assetNames;\n  }\n  /**\n   * Tells the resolver what keys are associated with witch asset.\n   * The most important thing the resolver does\n   * @example\n   * // Single key, single asset:\n   * resolver.add({alias: 'foo', src: 'bar.png');\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Multiple keys, single asset:\n   * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   * resolver.resolveUrl('boo') // => 'bar.png'\n   *\n   * // Multiple keys, multiple assets:\n   * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Add custom data attached to the resolver\n   * Resolver.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n   * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n   */\n  add(aliases) {\n    const assets = [];\n    if (Array.isArray(aliases)) {\n      assets.push(...aliases);\n    } else {\n      assets.push(aliases);\n    }\n    let keyCheck;\n    keyCheck = (key) => {\n      if (this.hasKey(key)) {\n        warn(`[Resolver] already has key: ${key} overwriting`);\n      }\n    };\n    const assetArray = convertToList(assets);\n    assetArray.forEach((asset) => {\n      const { src } = asset;\n      let { data, format, loadParser: userDefinedLoadParser, parser: userDefinedParser } = asset;\n      const srcsToUse = convertToList(src).map((src2) => {\n        if (typeof src2 === \"string\") {\n          return createStringVariations(src2);\n        }\n        return Array.isArray(src2) ? src2 : [src2];\n      });\n      const aliasesToUse = this.getAlias(asset);\n      Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n      const resolvedAssets = [];\n      srcsToUse.forEach((srcs) => {\n        srcs.forEach((src2) => {\n          let formattedAsset = {};\n          if (typeof src2 !== \"object\") {\n            formattedAsset.src = src2;\n            for (let i = 0; i < this._parsers.length; i++) {\n              const parser = this._parsers[i];\n              if (parser.test(src2)) {\n                formattedAsset = parser.parse(src2);\n                break;\n              }\n            }\n          } else {\n            data = src2.data ?? data;\n            format = src2.format ?? format;\n            if (src2.loadParser || src2.parser) {\n              userDefinedLoadParser = src2.loadParser ?? userDefinedLoadParser;\n              userDefinedParser = src2.parser ?? userDefinedParser;\n            }\n            formattedAsset = {\n              ...formattedAsset,\n              ...src2\n            };\n          }\n          if (!aliasesToUse) {\n            throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n          }\n          formattedAsset = this._buildResolvedAsset(formattedAsset, {\n            aliases: aliasesToUse,\n            data,\n            format,\n            loadParser: userDefinedLoadParser,\n            parser: userDefinedParser\n          });\n          resolvedAssets.push(formattedAsset);\n        });\n      });\n      aliasesToUse.forEach((alias) => {\n        this._assetMap[alias] = resolvedAssets;\n      });\n    });\n  }\n  // TODO: this needs an overload like load did in Assets\n  /**\n   * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n   * a given bundleId or bundleIds.\n   * @example\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * resolver.setManifest(manifest);\n   * const resolved = resolver.resolveBundle('load-screen');\n   * @param bundleIds - The bundle ids to resolve\n   * @returns All the bundles assets or a hash of assets for each bundle specified\n   */\n  resolveBundle(bundleIds) {\n    const singleAsset = isSingleItem(bundleIds);\n    bundleIds = convertToList(bundleIds);\n    const out = {};\n    bundleIds.forEach((bundleId) => {\n      const assetNames = this._bundles[bundleId];\n      if (assetNames) {\n        const results = this.resolve(assetNames);\n        const assets = {};\n        for (const key in results) {\n          const asset = results[key];\n          assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n        }\n        out[bundleId] = assets;\n      }\n    });\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n   * @param key - The key or keys to resolve\n   * @returns - The URLs associated with the key(s)\n   */\n  resolveUrl(key) {\n    const result = this.resolve(key);\n    if (typeof key !== \"string\") {\n      const out = {};\n      for (const i in result) {\n        out[i] = result[i].src;\n      }\n      return out;\n    }\n    return result.src;\n  }\n  resolve(keys) {\n    const singleAsset = isSingleItem(keys);\n    keys = convertToList(keys);\n    const result = {};\n    keys.forEach((key) => {\n      if (!this._resolverHash[key]) {\n        if (this._assetMap[key]) {\n          let assets = this._assetMap[key];\n          const preferredOrder = this._getPreferredOrder(assets);\n          preferredOrder?.priority.forEach((priorityKey) => {\n            preferredOrder.params[priorityKey].forEach((value) => {\n              const filteredAssets = assets.filter((asset) => {\n                if (asset[priorityKey]) {\n                  return asset[priorityKey] === value;\n                }\n                return false;\n              });\n              if (filteredAssets.length) {\n                assets = filteredAssets;\n              }\n            });\n          });\n          this._resolverHash[key] = assets[0];\n        } else {\n          this._resolverHash[key] = this._buildResolvedAsset({\n            alias: [key],\n            src: key\n          }, {});\n        }\n      }\n      result[key] = this._resolverHash[key];\n    });\n    return singleAsset ? result[keys[0]] : result;\n  }\n  /**\n   * Checks if an asset with a given key exists in the resolver\n   * @param key - The key of the asset\n   */\n  hasKey(key) {\n    return !!this._assetMap[key];\n  }\n  /**\n   * Checks if a bundle with the given key exists in the resolver\n   * @param key - The key of the bundle\n   */\n  hasBundle(key) {\n    return !!this._bundles[key];\n  }\n  /**\n   * Internal function for figuring out what prefer criteria an asset should use.\n   * @param assets\n   */\n  _getPreferredOrder(assets) {\n    for (let i = 0; i < assets.length; i++) {\n      const asset = assets[i];\n      const preferred = this._preferredOrder.find((preference) => preference.params.format.includes(asset.format));\n      if (preferred) {\n        return preferred;\n      }\n    }\n    return this._preferredOrder[0];\n  }\n  /**\n   * Appends the default url parameters to the url\n   * @param url - The url to append the default parameters to\n   * @returns - The url with the default parameters appended\n   */\n  _appendDefaultSearchParams(url) {\n    if (!this._defaultSearchParams)\n      return url;\n    const paramConnector = /\\?/.test(url) ? \"&\" : \"?\";\n    return `${url}${paramConnector}${this._defaultSearchParams}`;\n  }\n  _buildResolvedAsset(formattedAsset, data) {\n    const { aliases, data: assetData, loadParser, parser, format } = data;\n    if (this._basePath || this._rootPath) {\n      formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n    }\n    formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n    formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n    formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n    formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n    formattedAsset.parser = parser ?? formattedAsset.parser;\n    formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n    return formattedAsset;\n  }\n}\n/**\n * The prefix that denotes a URL is for a retina asset.\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nResolver.RETINA_PREFIX = /@([0-9\\.]+)x/;\nfunction getUrlExtension(url) {\n  return url.split(\".\").pop().split(\"?\").shift().split(\"#\").shift();\n}\n\nexport { Resolver, getUrlExtension };\n//# sourceMappingURL=Resolver.mjs.map\n","\"use strict\";\nvar BufferUsage = /* @__PURE__ */ ((BufferUsage2) => {\n  BufferUsage2[BufferUsage2[\"MAP_READ\"] = 1] = \"MAP_READ\";\n  BufferUsage2[BufferUsage2[\"MAP_WRITE\"] = 2] = \"MAP_WRITE\";\n  BufferUsage2[BufferUsage2[\"COPY_SRC\"] = 4] = \"COPY_SRC\";\n  BufferUsage2[BufferUsage2[\"COPY_DST\"] = 8] = \"COPY_DST\";\n  BufferUsage2[BufferUsage2[\"INDEX\"] = 16] = \"INDEX\";\n  BufferUsage2[BufferUsage2[\"VERTEX\"] = 32] = \"VERTEX\";\n  BufferUsage2[BufferUsage2[\"UNIFORM\"] = 64] = \"UNIFORM\";\n  BufferUsage2[BufferUsage2[\"STORAGE\"] = 128] = \"STORAGE\";\n  BufferUsage2[BufferUsage2[\"INDIRECT\"] = 256] = \"INDIRECT\";\n  BufferUsage2[BufferUsage2[\"QUERY_RESOLVE\"] = 512] = \"QUERY_RESOLVE\";\n  BufferUsage2[BufferUsage2[\"STATIC\"] = 1024] = \"STATIC\";\n  return BufferUsage2;\n})(BufferUsage || {});\n\nexport { BufferUsage };\n//# sourceMappingURL=const.mjs.map\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:root {\n  --main-primary-color: #1d57a8;\n  --main-background-color: #12171ecf;\n  --main-border-color: transparent;\n  --main-border-radius: 2px;\n  --main-border-size: 0px;\n  --main-border-style: solid;\n  --main-shadow-color: rgba(0, 0, 0, 0.7);\n  --main-box-shadow: var(--main-shadow-color) 0px 0px 3px 0px;\n}\n\nhtml,\nbody,\ninput,\ntextarea,\nselect,\nbutton {\n  border-color: #5e5d5a;\n  color: #e5e0d8;\n  font-size: 12px;\n  text-shadow: 1px 1px black;\n  font-family: sans-serif;\n  -webkit-font-smoothing: none;\n}\n\nbody {\n  height: 100vh;\n  overflow: hidden;\n  margin: 0;\n  -webkit-user-select: none;\n  user-select: none;\n  background-color: black;\n}\n\nbutton,\n.input-file {\n  border: 1px solid var(--main-primary-color);\n  padding: 6px 15px;\n  border-radius: var(--main-border-radius);\n  position: relative;\n  cursor: pointer;\n  text-align: center;\n  background-color: transparent;\n  width: 200px;\n  transition: all 0.2s;\n}\nbutton:hover,\n.input-file:hover {\n  background-color: var(--main-primary-color);\n}\n.input-file {\n  width: calc(100% - 32px);\n}\n.input-file > input {\n  width: 200px;\n  cursor: pointer;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 99;\n  /*Opacity settings for all browsers*/\n  opacity: 0;\n  -moz-opacity: 0;\n  filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0);\n}\n\n.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n\n#game {\n  flex: 1;\n}\n\n#pause {\n  position: absolute;\n  z-index: 1000;\n  font-size: 50px;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  margin-top: -66px;\n}\n\n.bar {\n  background: var(--main-background-color);\n  width: 100%;\n}\n\n.img {\n  object-fit: none;\n  height: 45px;\n  width: 45px;\n  border: var(--main-border-size) var(--main-border-style) var(--main-border-color);\n  border-radius: var(--main-border-radius);\n  box-shadow: var(--main-box-shadow);\n}\n\n.topbar {\n  position: absolute;\n  top: 0;\n  padding: 5px 10px;\n  display: grid;\n  font-weight: bold;\n  grid-template-columns: 33% 33% 33%;\n  width: calc(100% - 20px);\n  align-items: center;\n  justify-content: center;\n}\n\n.bottombar {\n  position: absolute;\n  bottom: 0;\n  display: grid;\n  height: 122px;\n  grid-template-columns: 120px auto 242px;\n  width: calc(100% - 10px);\n  grid-gap: 5px;\n  padding: 5px;\n}\n\n.bottombar-info {\n  position: relative;\n  border: var(--main-border-size) var(--main-border-style) var(--main-border-color);\n  border-radius: var(--main-border-radius);\n  box-shadow: var(--main-box-shadow);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  padding: 2px;\n  gap: 1px;\n}\n\n.bottombar-info #icon {\n  object-fit: none;\n  height: 45px;\n  width: 45px;\n}\n\n.bottombar-info #infos {\n  position: absolute;\n  left: 45%;\n  top: 30px;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n\n.bottombar-info #info {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.bottombar-menu {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n  padding: 5px 0;\n  overflow: auto;\n  max-width: 500px;\n}\n\n.bottombar-menu-column {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.bottombar-menu-box {\n  position: relative;\n  display: flex;\n}\n\n.bottombar-map-wrap {\n  position: relative;\n  top: 2px;\n  filter: drop-shadow(0px 0px 3px var(--main-shadow-color));\n}\n\n.bottombar-map {\n  width: 100%;\n  height: 100%;\n  background: black;\n  clip-path: polygon(50% 1%, 100% 48%, 50% 96%, 0% 48%);\n}\n\n.bottombar-map canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.topbar-age {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.topbar-resources {\n  display: flex;\n  gap: 10px;\n}\n\n.topbar-options {\n  display: flex;\n  align-items: center;\n  justify-content: end;\n}\n\n.topbar-options-menu {\n  width: fit-content;\n  cursor: pointer;\n}\n\n.resource {\n  display: flex;\n  gap: 2px;\n  align-items: center;\n}\n\n.resource > div {\n  width: 40px;\n}\n\n.resource-content {\n  object-fit: none;\n  height: 13px;\n  width: 20px;\n  border: var(--main-border-size) var(--main-border-style) var(--main-border-color);\n  border-radius: var(--main-border-radius);\n  box-shadow: var(--main-box-shadow);\n}\n\n.message {\n  z-index: 1000;\n  position: fixed;\n  width: 100%;\n  text-align: center;\n}\n\n.message-content {\n  color: #da2424;\n  background: rgba(0, 0, 0, 0.4);\n  padding: 3px;\n}\n\n.resource-quantity {\n  position: absolute;\n  top: 20px;\n  left: 45%;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: 5px;\n}\n\n.unit-loading {\n  position: absolute;\n  top: 52px;\n  left: 45%;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: 5px;\n}\n\n.building-loading,\n#population {\n  position: absolute;\n  left: 40%;\n  top: 32px;\n  display: flex;\n  align-items: center;\n}\n\n.toggle {\n  position: fixed;\n  bottom: -119px;\n  right: 0;\n  transform: rotate(64deg);\n  height: 192px;\n  width: 100px;\n  border-top-left-radius: 3px;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1001;\n}\n\n.modal-content {\n  background: var(--main-background-color);\n  border-radius: var(--main-border-radius);\n  box-shadow: var(--main-box-shadow);\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.modal-menu {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 10px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./app/styles.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\":root {\\n  --main-primary-color: #1d57a8;\\n  --main-background-color: #12171ecf;\\n  --main-border-color: transparent;\\n  --main-border-radius: 2px;\\n  --main-border-size: 0px;\\n  --main-border-style: solid;\\n  --main-shadow-color: rgba(0, 0, 0, 0.7);\\n  --main-box-shadow: var(--main-shadow-color) 0px 0px 3px 0px;\\n}\\n\\nhtml,\\nbody,\\ninput,\\ntextarea,\\nselect,\\nbutton {\\n  border-color: #5e5d5a;\\n  color: #e5e0d8;\\n  font-size: 12px;\\n  text-shadow: 1px 1px black;\\n  font-family: sans-serif;\\n  -webkit-font-smoothing: none;\\n}\\n\\nbody {\\n  height: 100vh;\\n  overflow: hidden;\\n  margin: 0;\\n  -webkit-user-select: none;\\n  user-select: none;\\n  background-color: black;\\n}\\n\\nbutton,\\n.input-file {\\n  border: 1px solid var(--main-primary-color);\\n  padding: 6px 15px;\\n  border-radius: var(--main-border-radius);\\n  position: relative;\\n  cursor: pointer;\\n  text-align: center;\\n  background-color: transparent;\\n  width: 200px;\\n  transition: all 0.2s;\\n}\\nbutton:hover,\\n.input-file:hover {\\n  background-color: var(--main-primary-color);\\n}\\n.input-file {\\n  width: calc(100% - 32px);\\n}\\n.input-file > input {\\n  width: 200px;\\n  cursor: pointer;\\n  height: 100%;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 99;\\n  /*Opacity settings for all browsers*/\\n  opacity: 0;\\n  -moz-opacity: 0;\\n  filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0);\\n}\\n\\n.loading {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100%;\\n}\\n\\n#game {\\n  flex: 1;\\n}\\n\\n#pause {\\n  position: absolute;\\n  z-index: 1000;\\n  font-size: 50px;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  margin-top: -66px;\\n}\\n\\n.bar {\\n  background: var(--main-background-color);\\n  width: 100%;\\n}\\n\\n.img {\\n  object-fit: none;\\n  height: 45px;\\n  width: 45px;\\n  border: var(--main-border-size) var(--main-border-style) var(--main-border-color);\\n  border-radius: var(--main-border-radius);\\n  box-shadow: var(--main-box-shadow);\\n}\\n\\n.topbar {\\n  position: absolute;\\n  top: 0;\\n  padding: 5px 10px;\\n  display: grid;\\n  font-weight: bold;\\n  grid-template-columns: 33% 33% 33%;\\n  width: calc(100% - 20px);\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.bottombar {\\n  position: absolute;\\n  bottom: 0;\\n  display: grid;\\n  height: 122px;\\n  grid-template-columns: 120px auto 242px;\\n  width: calc(100% - 10px);\\n  grid-gap: 5px;\\n  padding: 5px;\\n}\\n\\n.bottombar-info {\\n  position: relative;\\n  border: var(--main-border-size) var(--main-border-style) var(--main-border-color);\\n  border-radius: var(--main-border-radius);\\n  box-shadow: var(--main-box-shadow);\\n  overflow: hidden;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 2px;\\n  gap: 1px;\\n}\\n\\n.bottombar-info #icon {\\n  object-fit: none;\\n  height: 45px;\\n  width: 45px;\\n}\\n\\n.bottombar-info #infos {\\n  position: absolute;\\n  left: 45%;\\n  top: 30px;\\n  display: flex;\\n  align-items: center;\\n  flex-direction: column;\\n}\\n\\n.bottombar-info #info {\\n  display: flex;\\n  align-items: center;\\n  gap: 5px;\\n}\\n\\n.bottombar-menu {\\n  display: flex;\\n  flex-wrap: wrap;\\n  gap: 5px;\\n  padding: 5px 0;\\n  overflow: auto;\\n  max-width: 500px;\\n}\\n\\n.bottombar-menu-column {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 5px;\\n}\\n\\n.bottombar-menu-box {\\n  position: relative;\\n  display: flex;\\n}\\n\\n.bottombar-map-wrap {\\n  position: relative;\\n  top: 2px;\\n  filter: drop-shadow(0px 0px 3px var(--main-shadow-color));\\n}\\n\\n.bottombar-map {\\n  width: 100%;\\n  height: 100%;\\n  background: black;\\n  clip-path: polygon(50% 1%, 100% 48%, 50% 96%, 0% 48%);\\n}\\n\\n.bottombar-map canvas {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.topbar-age {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.topbar-resources {\\n  display: flex;\\n  gap: 10px;\\n}\\n\\n.topbar-options {\\n  display: flex;\\n  align-items: center;\\n  justify-content: end;\\n}\\n\\n.topbar-options-menu {\\n  width: fit-content;\\n  cursor: pointer;\\n}\\n\\n.resource {\\n  display: flex;\\n  gap: 2px;\\n  align-items: center;\\n}\\n\\n.resource > div {\\n  width: 40px;\\n}\\n\\n.resource-content {\\n  object-fit: none;\\n  height: 13px;\\n  width: 20px;\\n  border: var(--main-border-size) var(--main-border-style) var(--main-border-color);\\n  border-radius: var(--main-border-radius);\\n  box-shadow: var(--main-box-shadow);\\n}\\n\\n.message {\\n  z-index: 1000;\\n  position: fixed;\\n  width: 100%;\\n  text-align: center;\\n}\\n\\n.message-content {\\n  color: #da2424;\\n  background: rgba(0, 0, 0, 0.4);\\n  padding: 3px;\\n}\\n\\n.resource-quantity {\\n  position: absolute;\\n  top: 20px;\\n  left: 45%;\\n  display: flex;\\n  align-items: center;\\n  flex-direction: row;\\n  gap: 5px;\\n}\\n\\n.unit-loading {\\n  position: absolute;\\n  top: 52px;\\n  left: 45%;\\n  display: flex;\\n  align-items: center;\\n  flex-direction: row;\\n  gap: 5px;\\n}\\n\\n.building-loading,\\n#population {\\n  position: absolute;\\n  left: 40%;\\n  top: 32px;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.toggle {\\n  position: fixed;\\n  bottom: -119px;\\n  right: 0;\\n  transform: rotate(64deg);\\n  height: 192px;\\n  width: 100px;\\n  border-top-left-radius: 3px;\\n  background: rgba(0, 0, 0, 0.5);\\n  z-index: 10;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.modal {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100vw;\\n  height: 100vh;\\n  background: rgba(0, 0, 0, 0.5);\\n  z-index: 1001;\\n}\\n\\n.modal-content {\\n  background: var(--main-background-color);\\n  border-radius: var(--main-border-radius);\\n  box-shadow: var(--main-box-shadow);\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.modal-menu {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\nconst BLEND_TO_NPM = {\n  normal: \"normal-npm\",\n  add: \"add-npm\",\n  screen: \"screen-npm\"\n};\nvar STENCIL_MODES = /* @__PURE__ */ ((STENCIL_MODES2) => {\n  STENCIL_MODES2[STENCIL_MODES2[\"DISABLED\"] = 0] = \"DISABLED\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_ADD\"] = 1] = \"RENDERING_MASK_ADD\";\n  STENCIL_MODES2[STENCIL_MODES2[\"MASK_ACTIVE\"] = 2] = \"MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"INVERSE_MASK_ACTIVE\"] = 3] = \"INVERSE_MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_REMOVE\"] = 4] = \"RENDERING_MASK_REMOVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"NONE\"] = 5] = \"NONE\";\n  return STENCIL_MODES2;\n})(STENCIL_MODES || {});\n\nexport { BLEND_TO_NPM, STENCIL_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { Bounds } from '../container/bounds/Bounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass ViewContainer extends Container {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(options) {\n    super(options);\n    /** @internal */\n    this.canBundle = true;\n    /** @internal */\n    this.allowChildren = false;\n    /** @internal */\n    this._roundPixels = 0;\n    /** @internal */\n    this._lastUsed = -1;\n    /** @internal */\n    this._gpuData = /* @__PURE__ */ Object.create(null);\n    this._bounds = new Bounds(0, 1, 0, 0);\n    this._boundsDirty = true;\n  }\n  /**\n   * The local bounds of the view in its own coordinate space.\n   * Bounds are automatically updated when the view's content changes.\n   * @example\n   * ```ts\n   * // Get bounds dimensions\n   * const bounds = view.bounds;\n   * console.log(`Width: ${bounds.maxX - bounds.minX}`);\n   * console.log(`Height: ${bounds.maxY - bounds.minY}`);\n   * ```\n   * @returns The rectangular bounds of the view\n   * @see {@link Bounds} For bounds operations\n   */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this.updateBounds();\n    this._boundsDirty = false;\n    return this._bounds;\n  }\n  /**\n   * Whether or not to round the x/y position of the sprite.\n   * @example\n   * ```ts\n   * // Enable pixel rounding for crisp rendering\n   * view.roundPixels = true;\n   * ```\n   * @default false\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /**\n   * Checks if the object contains the given point in local coordinates.\n   * Uses the view's bounds for hit testing.\n   * @example\n   * ```ts\n   * // Basic point check\n   * const localPoint = { x: 50, y: 25 };\n   * const contains = view.containsPoint(localPoint);\n   * console.log('Point is inside:', contains);\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is within the view's bounds\n   * @see {@link ViewContainer#bounds} For the bounds used in hit testing\n   * @see {@link Container#toLocal} For converting global coordinates to local\n   */\n  containsPoint(point) {\n    const bounds = this.bounds;\n    const { x, y } = point;\n    return x >= bounds.minX && x <= bounds.maxX && y >= bounds.minY && y <= bounds.maxY;\n  }\n  /** @private */\n  onViewUpdate() {\n    this._didViewChangeTick++;\n    this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.onChildViewUpdate(this);\n    }\n  }\n  destroy(options) {\n    super.destroy(options);\n    this._bounds = null;\n    for (const key in this._gpuData) {\n      this._gpuData[key].destroy?.();\n    }\n    this._gpuData = null;\n  }\n  /**\n   * Collects renderables for the view container.\n   * @param instructionSet - The instruction set to collect renderables for.\n   * @param renderer - The renderer to collect renderables for.\n   * @param currentLayer - The current render layer.\n   * @internal\n   */\n  collectRenderablesSimple(instructionSet, renderer, currentLayer) {\n    const { renderPipes } = renderer;\n    renderPipes.blendMode.pushBlendMode(this, this.groupBlendMode, instructionSet);\n    const rp = renderPipes;\n    rp[this.renderPipeId].addRenderable(this, instructionSet);\n    this.didViewUpdate = false;\n    const children = this.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      children[i].collectRenderables(instructionSet, renderer, currentLayer);\n    }\n    renderPipes.blendMode.popBlendMode(instructionSet);\n  }\n}\n\nexport { ViewContainer };\n//# sourceMappingURL=ViewContainer.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst environments = [];\nextensions.handleByNamedList(ExtensionType.Environment, environments);\nasync function loadEnvironmentExtensions(skip) {\n  if (skip)\n    return;\n  for (let i = 0; i < environments.length; i++) {\n    const env = environments[i];\n    if (env.value.test()) {\n      await env.value.load();\n      return;\n    }\n  }\n}\nasync function autoDetectEnvironment(add) {\n  return loadEnvironmentExtensions(!add);\n}\n\nexport { autoDetectEnvironment, loadEnvironmentExtensions };\n//# sourceMappingURL=autoDetectEnvironment.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { loadEnvironmentExtensions } from '../../../../environment/autoDetectEnvironment.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport '../../../../utils/utils.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { SystemRunner } from './SystemRunner.mjs';\nimport EventEmitter from 'eventemitter3';\n\n\"use strict\";\nconst defaultRunners = [\n  \"init\",\n  \"destroy\",\n  \"contextChange\",\n  \"resolutionChange\",\n  \"resetState\",\n  \"renderEnd\",\n  \"renderStart\",\n  \"render\",\n  \"update\",\n  \"postrender\",\n  \"prerender\"\n];\nconst _AbstractRenderer = class _AbstractRenderer extends EventEmitter {\n  /**\n   * Set up a system with a collection of SystemClasses and runners.\n   * Systems are attached dynamically to this class when added.\n   * @param config - the config for the system manager\n   */\n  constructor(config) {\n    super();\n    /** @internal */\n    this.uid = uid(\"renderer\");\n    /** @internal */\n    this.runners = /* @__PURE__ */ Object.create(null);\n    /** @internal */\n    this.renderPipes = /* @__PURE__ */ Object.create(null);\n    this._initOptions = {};\n    this._systemsHash = /* @__PURE__ */ Object.create(null);\n    this.type = config.type;\n    this.name = config.name;\n    this.config = config;\n    const combinedRunners = [...defaultRunners, ...this.config.runners ?? []];\n    this._addRunners(...combinedRunners);\n    this._unsafeEvalCheck();\n  }\n  /**\n   * Initialize the renderer.\n   * @param options - The options to use to create the renderer.\n   */\n  async init(options = {}) {\n    const skip = options.skipExtensionImports === true ? true : options.manageImports === false;\n    await loadEnvironmentExtensions(skip);\n    this._addSystems(this.config.systems);\n    this._addPipes(this.config.renderPipes, this.config.renderPipeAdaptors);\n    for (const systemName in this._systemsHash) {\n      const system = this._systemsHash[systemName];\n      const defaultSystemOptions = system.constructor.defaultOptions;\n      options = { ...defaultSystemOptions, ...options };\n    }\n    options = { ..._AbstractRenderer.defaultOptions, ...options };\n    this._roundPixels = options.roundPixels ? 1 : 0;\n    for (let i = 0; i < this.runners.init.items.length; i++) {\n      await this.runners.init.items[i].init(options);\n    }\n    this._initOptions = options;\n  }\n  render(args, deprecated) {\n    let options = args;\n    if (options instanceof Container) {\n      options = { container: options };\n      if (deprecated) {\n        deprecation(v8_0_0, \"passing a second argument is deprecated, please use render options instead\");\n        options.target = deprecated.renderTexture;\n      }\n    }\n    options.target || (options.target = this.view.renderTarget);\n    if (options.target === this.view.renderTarget) {\n      this._lastObjectRendered = options.container;\n      options.clearColor ?? (options.clearColor = this.background.colorRgba);\n      options.clear ?? (options.clear = this.background.clearBeforeRender);\n    }\n    if (options.clearColor) {\n      const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n      options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n    }\n    if (!options.transform) {\n      options.container.updateLocalTransform();\n      options.transform = options.container.localTransform;\n    }\n    if (!options.container.visible) {\n      return;\n    }\n    options.container.enableRenderGroup();\n    this.runners.prerender.emit(options);\n    this.runners.renderStart.emit(options);\n    this.runners.render.emit(options);\n    this.runners.renderEnd.emit(options);\n    this.runners.postrender.emit(options);\n  }\n  /**\n   * Resizes the WebGL view to the specified width and height.\n   * @param desiredScreenWidth - The desired width of the screen.\n   * @param desiredScreenHeight - The desired height of the screen.\n   * @param resolution - The resolution / device pixel ratio of the renderer.\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    const previousResolution = this.view.resolution;\n    this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.emit(\"resize\", this.view.screen.width, this.view.screen.height, this.view.resolution);\n    if (resolution !== void 0 && resolution !== previousResolution) {\n      this.runners.resolutionChange.emit(resolution);\n    }\n  }\n  /**\n   * Clears the render target.\n   * @param options - The options to use when clearing the render target.\n   * @param options.target - The render target to clear.\n   * @param options.clearColor - The color to clear with.\n   * @param options.clear - The clear mode to use.\n   * @advanced\n   */\n  clear(options = {}) {\n    const renderer = this;\n    options.target || (options.target = renderer.renderTarget.renderTarget);\n    options.clearColor || (options.clearColor = this.background.colorRgba);\n    options.clear ?? (options.clear = CLEAR.ALL);\n    const { clear, clearColor, target } = options;\n    Color.shared.setValue(clearColor ?? this.background.colorRgba);\n    renderer.renderTarget.clear(target, clear, Color.shared.toArray());\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.view.resolution;\n  }\n  set resolution(value) {\n    this.view.resolution = value;\n    this.runners.resolutionChange.emit(value);\n  }\n  /**\n   * Same as view.width, actual number of pixels in the canvas by horizontal.\n   * @type {number}\n   * @readonly\n   * @default 800\n   */\n  get width() {\n    return this.view.texture.frame.width;\n  }\n  /**\n   * Same as view.height, actual number of pixels in the canvas by vertical.\n   * @default 600\n   */\n  get height() {\n    return this.view.texture.frame.height;\n  }\n  // NOTE: this was `view` in v7\n  /**\n   * The canvas element that everything is drawn to.\n   * @type {environment.ICanvas}\n   */\n  get canvas() {\n    return this.view.canvas;\n  }\n  /**\n   * the last object rendered by the renderer. Useful for other plugins like interaction managers\n   * @readonly\n   */\n  get lastObjectRendered() {\n    return this._lastObjectRendered;\n  }\n  /**\n   * Flag if we are rendering to the screen vs renderTexture\n   * @readonly\n   * @default true\n   */\n  get renderingToScreen() {\n    const renderer = this;\n    return renderer.renderTarget.renderingToScreen;\n  }\n  /**\n   * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n   *\n   * Its safe to use as filterArea or hitArea for the whole stage.\n   */\n  get screen() {\n    return this.view.screen;\n  }\n  /**\n   * Create a bunch of runners based of a collection of ids\n   * @param runnerIds - the runner ids to add\n   */\n  _addRunners(...runnerIds) {\n    runnerIds.forEach((runnerId) => {\n      this.runners[runnerId] = new SystemRunner(runnerId);\n    });\n  }\n  _addSystems(systems) {\n    let i;\n    for (i in systems) {\n      const val = systems[i];\n      this._addSystem(val.value, val.name);\n    }\n  }\n  /**\n   * Add a new system to the renderer.\n   * @param ClassRef - Class reference\n   * @param name - Property name for system, if not specified\n   *        will use a static `name` property on the class itself. This\n   *        name will be assigned as s property on the Renderer so make\n   *        sure it doesn't collide with properties on Renderer.\n   * @returns Return instance of renderer\n   */\n  _addSystem(ClassRef, name) {\n    const system = new ClassRef(this);\n    if (this[name]) {\n      throw new Error(`Whoops! The name \"${name}\" is already in use`);\n    }\n    this[name] = system;\n    this._systemsHash[name] = system;\n    for (const i in this.runners) {\n      this.runners[i].add(system);\n    }\n    return this;\n  }\n  _addPipes(pipes, pipeAdaptors) {\n    const adaptors = pipeAdaptors.reduce((acc, adaptor) => {\n      acc[adaptor.name] = adaptor.value;\n      return acc;\n    }, {});\n    pipes.forEach((pipe) => {\n      const PipeClass = pipe.value;\n      const name = pipe.name;\n      const Adaptor = adaptors[name];\n      this.renderPipes[name] = new PipeClass(\n        this,\n        Adaptor ? new Adaptor() : null\n      );\n      this.runners.destroy.add(this.renderPipes[name]);\n    });\n  }\n  destroy(options = false) {\n    this.runners.destroy.items.reverse();\n    this.runners.destroy.emit(options);\n    Object.values(this.runners).forEach((runner) => {\n      runner.destroy();\n    });\n    if (options === true || typeof options === \"object\" && options.releaseGlobalResources) {\n      GlobalResourceRegistry.release();\n    }\n    this._systemsHash = null;\n    this.renderPipes = null;\n  }\n  /**\n   * Generate a texture from a container.\n   * @param options - options or container target to use when generating the texture\n   * @returns a texture\n   */\n  generateTexture(options) {\n    return this.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Whether the renderer will round coordinates to whole pixels when rendering.\n   * Can be overridden on a per scene item basis.\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  /**\n   * Overridable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   * @ignore\n   */\n  _unsafeEvalCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n  /**\n   * Resets the rendering state of the renderer.\n   * This is useful when you want to use the WebGL context directly and need to ensure PixiJS's internal state\n   * stays synchronized. When modifying the WebGL context state externally, calling this method before the next Pixi\n   * render will reset all internal caches and ensure it executes correctly.\n   *\n   * This is particularly useful when combining PixiJS with other rendering engines like Three.js:\n   * ```js\n   * // Reset Three.js state\n   * threeRenderer.resetState();\n   *\n   * // Render a Three.js scene\n   * threeRenderer.render(threeScene, threeCamera);\n   *\n   * // Reset PixiJS state since Three.js modified the WebGL context\n   * pixiRenderer.resetState();\n   *\n   * // Now render Pixi content\n   * pixiRenderer.render(pixiScene);\n   * ```\n   * @advanced\n   */\n  resetState() {\n    this.runners.resetState.emit();\n  }\n};\n/** The default options for the renderer. */\n_AbstractRenderer.defaultOptions = {\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @default 1\n   */\n  resolution: 1,\n  /**\n   * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n   * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n   * performance issues when using WebGL.\n   *\n   * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n   * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n   * driver version blacklisted by the\n   * browser.\n   *\n   * If your application requires high performance rendering, you may wish to set this to false.\n   * We recommend one of two options if you decide to set this flag to false:\n   *\n   * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n   *    not supported.\n   *\n   * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n   *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n   *    device & browser combination does not support high performance WebGL.\n   *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat: false,\n  /**\n   * Should round pixels be forced when rendering?\n   * @default false\n   */\n  roundPixels: false\n};\nlet AbstractRenderer = _AbstractRenderer;\n\nexport { AbstractRenderer };\n//# sourceMappingURL=AbstractRenderer.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { FillPattern } from '../fill/FillPattern.mjs';\n\n\"use strict\";\nfunction isColorLike(value) {\n  return Color.isColorLike(value);\n}\nfunction isFillPattern(value) {\n  return value instanceof FillPattern;\n}\nfunction isFillGradient(value) {\n  return value instanceof FillGradient;\n}\nfunction isTexture(value) {\n  return value instanceof Texture;\n}\nfunction handleColorLike(fill, value, defaultStyle) {\n  const temp = Color.shared.setValue(value ?? 0);\n  fill.color = temp.toNumber();\n  fill.alpha = temp.alpha === 1 ? defaultStyle.alpha : temp.alpha;\n  fill.texture = Texture.WHITE;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleTexture(fill, value, defaultStyle) {\n  fill.texture = value;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillPattern(fill, value, defaultStyle) {\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillGradient(fill, value, defaultStyle) {\n  value.buildGradient();\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  fill.textureSpace = value.textureSpace;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillObject(value, defaultStyle) {\n  const style = { ...defaultStyle, ...value };\n  const color = Color.shared.setValue(style.color);\n  style.alpha *= color.alpha;\n  style.color = color.toNumber();\n  return style;\n}\nfunction toFillStyle(value, defaultStyle) {\n  if (value === void 0 || value === null) {\n    return null;\n  }\n  const fill = {};\n  const objectStyle = value;\n  if (isColorLike(value)) {\n    return handleColorLike(fill, value, defaultStyle);\n  } else if (isTexture(value)) {\n    return handleTexture(fill, value, defaultStyle);\n  } else if (isFillPattern(value)) {\n    return handleFillPattern(fill, value, defaultStyle);\n  } else if (isFillGradient(value)) {\n    return handleFillGradient(fill, value, defaultStyle);\n  } else if (objectStyle.fill && isFillPattern(objectStyle.fill)) {\n    return handleFillPattern(objectStyle, objectStyle.fill, defaultStyle);\n  } else if (objectStyle.fill && isFillGradient(objectStyle.fill)) {\n    return handleFillGradient(objectStyle, objectStyle.fill, defaultStyle);\n  }\n  return handleFillObject(objectStyle, defaultStyle);\n}\nfunction toStrokeStyle(value, defaultStyle) {\n  const { width, alignment, miterLimit, cap, join, pixelLine, ...rest } = defaultStyle;\n  const fill = toFillStyle(value, rest);\n  if (!fill) {\n    return null;\n  }\n  return {\n    width,\n    alignment,\n    miterLimit,\n    cap,\n    join,\n    pixelLine,\n    ...fill\n  };\n}\n\nexport { toFillStyle, toStrokeStyle };\n//# sourceMappingURL=convertFillInputToFillStyle.mjs.map\n","import { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nconst batchSamplersUniformGroupHash = {};\nfunction getBatchSamplersUniformGroup(maxTextures) {\n  let batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures];\n  if (batchSamplersUniformGroup)\n    return batchSamplersUniformGroup;\n  const sampleValues = new Int32Array(maxTextures);\n  for (let i = 0; i < maxTextures; i++) {\n    sampleValues[i] = i;\n  }\n  batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures] = new UniformGroup({\n    uTextures: { value: sampleValues, type: `i32`, size: maxTextures }\n  }, { isStatic: true });\n  return batchSamplersUniformGroup;\n}\n\nexport { getBatchSamplersUniformGroup };\n//# sourceMappingURL=getBatchSamplersUniformGroup.mjs.map\n","\"use strict\";\nfunction multiplyHexColors(color1, color2) {\n  if (color1 === 16777215 || !color2)\n    return color2;\n  if (color2 === 16777215 || !color1)\n    return color1;\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 * r2 / 255 | 0;\n  const g = g1 * g2 / 255 | 0;\n  const b = b1 * b2 / 255 | 0;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { multiplyHexColors };\n//# sourceMappingURL=multiplyHexColors.mjs.map\n","\"use strict\";\nfunction definedProps(obj) {\n  const result = {};\n  for (const key in obj) {\n    if (obj[key] !== void 0) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n}\n\nexport { definedProps };\n//# sourceMappingURL=definedProps.mjs.map\n","\"use strict\";\nconst attributeFormatData = {\n  uint8x2: { size: 2, stride: 2, normalised: false },\n  uint8x4: { size: 4, stride: 4, normalised: false },\n  sint8x2: { size: 2, stride: 2, normalised: false },\n  sint8x4: { size: 4, stride: 4, normalised: false },\n  unorm8x2: { size: 2, stride: 2, normalised: true },\n  unorm8x4: { size: 4, stride: 4, normalised: true },\n  snorm8x2: { size: 2, stride: 2, normalised: true },\n  snorm8x4: { size: 4, stride: 4, normalised: true },\n  uint16x2: { size: 2, stride: 4, normalised: false },\n  uint16x4: { size: 4, stride: 8, normalised: false },\n  sint16x2: { size: 2, stride: 4, normalised: false },\n  sint16x4: { size: 4, stride: 8, normalised: false },\n  unorm16x2: { size: 2, stride: 4, normalised: true },\n  unorm16x4: { size: 4, stride: 8, normalised: true },\n  snorm16x2: { size: 2, stride: 4, normalised: true },\n  snorm16x4: { size: 4, stride: 8, normalised: true },\n  float16x2: { size: 2, stride: 4, normalised: false },\n  float16x4: { size: 4, stride: 8, normalised: false },\n  float32: { size: 1, stride: 4, normalised: false },\n  float32x2: { size: 2, stride: 8, normalised: false },\n  float32x3: { size: 3, stride: 12, normalised: false },\n  float32x4: { size: 4, stride: 16, normalised: false },\n  uint32: { size: 1, stride: 4, normalised: false },\n  uint32x2: { size: 2, stride: 8, normalised: false },\n  uint32x3: { size: 3, stride: 12, normalised: false },\n  uint32x4: { size: 4, stride: 16, normalised: false },\n  sint32: { size: 1, stride: 4, normalised: false },\n  sint32x2: { size: 2, stride: 8, normalised: false },\n  sint32x3: { size: 3, stride: 12, normalised: false },\n  sint32x4: { size: 4, stride: 16, normalised: false }\n};\nfunction getAttributeInfoFromFormat(format) {\n  return attributeFormatData[format] ?? attributeFormatData.float32;\n}\n\nexport { getAttributeInfoFromFormat };\n//# sourceMappingURL=getAttributeInfoFromFormat.mjs.map\n","import { getTestContext } from './getTestContext.mjs';\n\n\"use strict\";\nlet maxFragmentPrecision;\nfunction getMaxFragmentPrecision() {\n  if (!maxFragmentPrecision) {\n    maxFragmentPrecision = \"mediump\";\n    const gl = getTestContext();\n    if (gl) {\n      if (gl.getShaderPrecisionFormat) {\n        const shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n        maxFragmentPrecision = shaderFragment.precision ? \"highp\" : \"mediump\";\n      }\n    }\n  }\n  return maxFragmentPrecision;\n}\n\nexport { getMaxFragmentPrecision };\n//# sourceMappingURL=getMaxFragmentPrecision.mjs.map\n","\"use strict\";\nconst fragmentNameCache = {};\nconst VertexNameCache = {};\nfunction setProgramName(src, { name = `pixi-program` }, isFragment = true) {\n  name = name.replace(/\\s+/g, \"-\");\n  name += isFragment ? \"-fragment\" : \"-vertex\";\n  const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n  if (nameCache[name]) {\n    nameCache[name]++;\n    name += `-${nameCache[name]}`;\n  } else {\n    nameCache[name] = 1;\n  }\n  if (src.indexOf(\"#define SHADER_NAME\") !== -1)\n    return src;\n  const shaderName = `#define SHADER_NAME ${name}`;\n  return `${shaderName}\n${src}`;\n}\n\nexport { setProgramName };\n//# sourceMappingURL=setProgramName.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { getMaxFragmentPrecision } from './program/getMaxFragmentPrecision.mjs';\nimport { addProgramDefines } from './program/preprocessors/addProgramDefines.mjs';\nimport { ensurePrecision } from './program/preprocessors/ensurePrecision.mjs';\nimport { insertVersion } from './program/preprocessors/insertVersion.mjs';\nimport { setProgramName } from './program/preprocessors/setProgramName.mjs';\nimport { stripVersion } from './program/preprocessors/stripVersion.mjs';\n\n\"use strict\";\nconst processes = {\n  // strips any version headers..\n  stripVersion,\n  // adds precision string if not already present\n  ensurePrecision,\n  // add some defines if WebGL1 to make it more compatible with WebGL2 shaders\n  addProgramDefines,\n  // add the program name to the shader\n  setProgramName,\n  // add the version string to the shader header\n  insertVersion\n};\nconst programCache = /* @__PURE__ */ Object.create(null);\nconst _GlProgram = class _GlProgram {\n  /**\n   * Creates a shiny new GlProgram. Used by WebGL renderer.\n   * @param options - The options for the program.\n   */\n  constructor(options) {\n    options = { ..._GlProgram.defaultOptions, ...options };\n    const isES300 = options.fragment.indexOf(\"#version 300 es\") !== -1;\n    const preprocessorOptions = {\n      stripVersion: isES300,\n      ensurePrecision: {\n        requestedFragmentPrecision: options.preferredFragmentPrecision,\n        requestedVertexPrecision: options.preferredVertexPrecision,\n        maxSupportedVertexPrecision: \"highp\",\n        maxSupportedFragmentPrecision: getMaxFragmentPrecision()\n      },\n      setProgramName: {\n        name: options.name\n      },\n      addProgramDefines: isES300,\n      insertVersion: isES300\n    };\n    let fragment = options.fragment;\n    let vertex = options.vertex;\n    Object.keys(processes).forEach((processKey) => {\n      const processOptions = preprocessorOptions[processKey];\n      fragment = processes[processKey](fragment, processOptions, true);\n      vertex = processes[processKey](vertex, processOptions, false);\n    });\n    this.fragment = fragment;\n    this.vertex = vertex;\n    this.transformFeedbackVaryings = options.transformFeedbackVaryings;\n    this._key = createIdFromString(`${this.vertex}:${this.fragment}`, \"gl-program\");\n  }\n  /** destroys the program */\n  destroy() {\n    this.fragment = null;\n    this.vertex = null;\n    this._attributeData = null;\n    this._uniformData = null;\n    this._uniformBlockData = null;\n    this.transformFeedbackVaryings = null;\n    programCache[this._cacheKey] = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex}:${options.fragment}`;\n    if (!programCache[key]) {\n      programCache[key] = new _GlProgram(options);\n      programCache[key]._cacheKey = key;\n    }\n    return programCache[key];\n  }\n};\n/** The default options used by the program. */\n_GlProgram.defaultOptions = {\n  preferredVertexPrecision: \"highp\",\n  preferredFragmentPrecision: \"mediump\"\n};\nlet GlProgram = _GlProgram;\n\nexport { GlProgram };\n//# sourceMappingURL=GlProgram.mjs.map\n","\"use strict\";\nfunction stripVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return src.replace(\"#version 300 es\", \"\");\n}\n\nexport { stripVersion };\n//# sourceMappingURL=stripVersion.mjs.map\n","\"use strict\";\nfunction ensurePrecision(src, options, isFragment) {\n  const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n  if (src.substring(0, 9) !== \"precision\") {\n    let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n    if (precision === \"highp\" && maxSupportedPrecision !== \"highp\") {\n      precision = \"mediump\";\n    }\n    return `precision ${precision} float;\n${src}`;\n  } else if (maxSupportedPrecision !== \"highp\" && src.substring(0, 15) === \"precision highp\") {\n    return src.replace(\"precision highp\", \"precision mediump\");\n  }\n  return src;\n}\n\nexport { ensurePrecision };\n//# sourceMappingURL=ensurePrecision.mjs.map\n","\"use strict\";\nfunction addProgramDefines(src, isES300, isFragment) {\n  if (isES300)\n    return src;\n  if (isFragment) {\n    src = src.replace(\"out vec4 finalColor;\", \"\");\n    return `\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n  }\n  return `\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n\nexport { addProgramDefines };\n//# sourceMappingURL=addProgramDefines.mjs.map\n","\"use strict\";\nfunction insertVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return `#version 300 es\n${src}`;\n}\n\nexport { insertVersion };\n//# sourceMappingURL=insertVersion.mjs.map\n","\"use strict\";\nfunction fastCopy(sourceBuffer, destinationBuffer) {\n  const lengthDouble = sourceBuffer.byteLength / 8 | 0;\n  const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n  const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n  destinationFloat64View.set(sourceFloat64View);\n  const remainingBytes = sourceBuffer.byteLength - lengthDouble * 8;\n  if (remainingBytes > 0) {\n    const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n    const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n    destinationUint8View.set(sourceUint8View);\n  }\n}\n\nexport { fastCopy };\n//# sourceMappingURL=fastCopy.mjs.map\n","\"use strict\";\nconst PI_2 = Math.PI * 2;\nconst RAD_TO_DEG = 180 / Math.PI;\nconst DEG_TO_RAD = Math.PI / 180;\n\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { VERSION } from '../const.mjs';\n\n\"use strict\";\nclass ApplicationInitHook {\n  static init() {\n    globalThis.__PIXI_APP_INIT__?.(this, VERSION);\n  }\n  static destroy() {\n  }\n}\n/** @ignore */\nApplicationInitHook.extension = ExtensionType.Application;\nclass RendererInitHook {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  init() {\n    globalThis.__PIXI_RENDERER_INIT__?.(this._renderer, VERSION);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nRendererInitHook.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"initHook\",\n  priority: -10\n};\n\nexport { ApplicationInitHook, RendererInitHook };\n//# sourceMappingURL=globalHooks.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addBits(srcParts, parts, name) {\n  if (srcParts) {\n    for (const i in srcParts) {\n      const id = i.toLocaleLowerCase();\n      const part = parts[id];\n      if (part) {\n        let sanitisedPart = srcParts[i];\n        if (i === \"header\") {\n          sanitisedPart = sanitisedPart.replace(/@in\\s+[^;]+;\\s*/g, \"\").replace(/@out\\s+[^;]+;\\s*/g, \"\");\n        }\n        if (name) {\n          part.push(`//----${name}----//`);\n        }\n        part.push(sanitisedPart);\n      } else {\n        warn(`${i} placement hook does not exist in shader`);\n      }\n    }\n  }\n}\n\nexport { addBits };\n//# sourceMappingURL=addBits.mjs.map\n","\"use strict\";\nconst findHooksRx = /\\{\\{(.*?)\\}\\}/g;\nfunction compileHooks(programSrc) {\n  const parts = {};\n  const partMatches = programSrc.match(findHooksRx)?.map((hook) => hook.replace(/[{()}]/g, \"\")) ?? [];\n  partMatches.forEach((hook) => {\n    parts[hook] = [];\n  });\n  return parts;\n}\n\nexport { compileHooks };\n//# sourceMappingURL=compileHooks.mjs.map\n","\"use strict\";\nfunction extractInputs(fragmentSource, out) {\n  let match;\n  const regex = /@in\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction compileInputs(fragments, template, sort = false) {\n  const results = [];\n  extractInputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractInputs(fragment.header, results);\n    }\n  });\n  const mainInput = results;\n  if (sort) {\n    mainInput.sort();\n  }\n  const finalString = mainInput.map((inValue, i) => `       @location(${i}) ${inValue},`).join(\"\\n\");\n  let cleanedString = template.replace(/@in\\s+[^;]+;\\s*/g, \"\");\n  cleanedString = cleanedString.replace(\"{{in}}\", `\n${finalString}\n`);\n  return cleanedString;\n}\n\nexport { compileInputs };\n//# sourceMappingURL=compileInputs.mjs.map\n","\"use strict\";\nfunction extractOutputs(fragmentSource, out) {\n  let match;\n  const regex = /@out\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction extractVariableName(value) {\n  const regex = /\\b(\\w+)\\s*:/g;\n  const match = regex.exec(value);\n  return match ? match[1] : \"\";\n}\nfunction stripVariable(value) {\n  const regex = /@.*?\\s+/g;\n  return value.replace(regex, \"\");\n}\nfunction compileOutputs(fragments, template) {\n  const results = [];\n  extractOutputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractOutputs(fragment.header, results);\n    }\n  });\n  let index = 0;\n  const mainStruct = results.sort().map((inValue) => {\n    if (inValue.indexOf(\"builtin\") > -1) {\n      return inValue;\n    }\n    return `@location(${index++}) ${inValue}`;\n  }).join(\",\\n\");\n  const mainStart = results.sort().map((inValue) => `       var ${stripVariable(inValue)};`).join(\"\\n\");\n  const mainEnd = `return VSOutput(\n            ${results.sort().map((inValue) => ` ${extractVariableName(inValue)}`).join(\",\\n\")});`;\n  let compiledCode = template.replace(/@out\\s+[^;]+;\\s*/g, \"\");\n  compiledCode = compiledCode.replace(\"{{struct}}\", `\n${mainStruct}\n`);\n  compiledCode = compiledCode.replace(\"{{start}}\", `\n${mainStart}\n`);\n  compiledCode = compiledCode.replace(\"{{return}}\", `\n${mainEnd}\n`);\n  return compiledCode;\n}\n\nexport { compileOutputs };\n//# sourceMappingURL=compileOutputs.mjs.map\n","\"use strict\";\nfunction injectBits(templateSrc, fragmentParts) {\n  let out = templateSrc;\n  for (const i in fragmentParts) {\n    const parts = fragmentParts[i];\n    const toInject = parts.join(\"\\n\");\n    if (toInject.length) {\n      out = out.replace(`{{${i}}}`, `//-----${i} START-----//\n${parts.join(\"\\n\")}\n//----${i} FINISH----//`);\n    } else {\n      out = out.replace(`{{${i}}}`, \"\");\n    }\n  }\n  return out;\n}\n\nexport { injectBits };\n//# sourceMappingURL=injectBits.mjs.map\n","import { addBits } from './utils/addBits.mjs';\nimport { compileHooks } from './utils/compileHooks.mjs';\nimport { compileInputs } from './utils/compileInputs.mjs';\nimport { compileOutputs } from './utils/compileOutputs.mjs';\nimport { injectBits } from './utils/injectBits.mjs';\n\n\"use strict\";\nconst cacheMap = /* @__PURE__ */ Object.create(null);\nconst bitCacheMap = /* @__PURE__ */ new Map();\nlet CACHE_UID = 0;\nfunction compileHighShader({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  const { vertex, fragment } = compileInputsAndOutputs(template, bits);\n  cacheMap[cacheId] = compileBits(vertex, fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileHighShaderGl({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  cacheMap[cacheId] = compileBits(template.vertex, template.fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileInputsAndOutputs(template, bits) {\n  const vertexFragments = bits.map((shaderBit) => shaderBit.vertex).filter((v) => !!v);\n  const fragmentFragments = bits.map((shaderBit) => shaderBit.fragment).filter((v) => !!v);\n  let compiledVertex = compileInputs(vertexFragments, template.vertex, true);\n  compiledVertex = compileOutputs(vertexFragments, compiledVertex);\n  const compiledFragment = compileInputs(fragmentFragments, template.fragment, true);\n  return {\n    vertex: compiledVertex,\n    fragment: compiledFragment\n  };\n}\nfunction generateCacheId(template, bits) {\n  return bits.map((highFragment) => {\n    if (!bitCacheMap.has(highFragment)) {\n      bitCacheMap.set(highFragment, CACHE_UID++);\n    }\n    return bitCacheMap.get(highFragment);\n  }).sort((a, b) => a - b).join(\"-\") + template.vertex + template.fragment;\n}\nfunction compileBits(vertex, fragment, bits) {\n  const vertexParts = compileHooks(vertex);\n  const fragmentParts = compileHooks(fragment);\n  bits.forEach((shaderBit) => {\n    addBits(shaderBit.vertex, vertexParts, shaderBit.name);\n    addBits(shaderBit.fragment, fragmentParts, shaderBit.name);\n  });\n  return {\n    vertex: injectBits(vertex, vertexParts),\n    fragment: injectBits(fragment, fragmentParts)\n  };\n}\n\nexport { compileHighShader, compileHighShaderGl };\n//# sourceMappingURL=compileHighShader.mjs.map\n","\"use strict\";\nconst vertexGPUTemplate = (\n  /* wgsl */\n  `\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n\n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n`\n);\nconst fragmentGPUTemplate = (\n  /* wgsl */\n  `\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n\n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n\n        {{start}}\n\n        var outColor:vec4<f32>;\n\n        {{main}}\n\n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n`\n);\nconst vertexGlTemplate = (\n  /* glsl */\n  `\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n\n        {{start}}\n\n        vColor = vec4(1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n`\n);\nconst fragmentGlTemplate = (\n  /* glsl */\n  `\n\n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n\n        {{start}}\n\n        vec4 outColor;\n\n        {{main}}\n\n        finalColor = outColor * vColor;\n\n        {{end}}\n    }\n`\n);\n\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate };\n//# sourceMappingURL=defaultProgramTemplate.mjs.map\n","\"use strict\";\nconst globalUniformsBit = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        `\n    )\n  }\n};\nconst globalUniformsUBOBitGl = {\n  name: \"global-uniforms-ubo-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform globalUniforms {\n            mat3 uProjectionMatrix;\n            mat3 uWorldTransformMatrix;\n            vec4 uWorldColorAlpha;\n            vec2 uResolution;\n          };\n        `\n    )\n  }\n};\nconst globalUniformsBitGl = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        `\n    )\n  }\n};\n\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl };\n//# sourceMappingURL=globalUniformsBit.mjs.map\n","import { GlProgram } from '../renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../renderers/gpu/shader/GpuProgram.mjs';\nimport { compileHighShader, compileHighShaderGl } from './compiler/compileHighShader.mjs';\nimport { fragmentGPUTemplate, vertexGPUTemplate, vertexGlTemplate, fragmentGlTemplate } from './defaultProgramTemplate.mjs';\nimport { globalUniformsBit, globalUniformsBitGl } from './shader-bits/globalUniformsBit.mjs';\n\n\"use strict\";\nfunction compileHighShaderGpuProgram({ bits, name }) {\n  const source = compileHighShader({\n    template: {\n      fragment: fragmentGPUTemplate,\n      vertex: vertexGPUTemplate\n    },\n    bits: [\n      globalUniformsBit,\n      ...bits\n    ]\n  });\n  return GpuProgram.from({\n    name,\n    vertex: {\n      source: source.vertex,\n      entryPoint: \"main\"\n    },\n    fragment: {\n      source: source.fragment,\n      entryPoint: \"main\"\n    }\n  });\n}\nfunction compileHighShaderGlProgram({ bits, name }) {\n  return new GlProgram({\n    name,\n    ...compileHighShaderGl({\n      template: {\n        vertex: vertexGlTemplate,\n        fragment: fragmentGlTemplate\n      },\n      bits: [\n        globalUniformsBitGl,\n        ...bits\n      ]\n    })\n  });\n}\n\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram };\n//# sourceMappingURL=compileHighShaderToProgram.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Circle {\n  /**\n   * @param x - The X coordinate of the center of this circle\n   * @param y - The Y coordinate of the center of this circle\n   * @param radius - The radius of the circle\n   */\n  constructor(x = 0, y = 0, radius = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks.\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Circle(0, 0, 50);\n     * console.log(shape.type); // 'circle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'circle') {\n     *     console.log(shape.radius);\n     * }\n     * ```\n     * @remarks\n     * - Used for shape type checking\n     * - More efficient than instanceof\n     * - Read-only property\n     * @readonly\n     * @default 'circle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     * @see {@link ShapePrimitive} For shape interface\n     */\n    this.type = \"circle\";\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }\n  /**\n   * Creates a clone of this Circle instance.\n   * @example\n   * ```ts\n   * // Basic circle cloning\n   * const original = new Circle(100, 100, 50);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.radius = 75;\n   *\n   * // Verify independence\n   * console.log(original.radius); // 50\n   * console.log(modified.radius); // 75\n   * ```\n   * @returns A copy of the Circle\n   * @see {@link Circle.copyFrom} For copying into existing circle\n   * @see {@link Circle.copyTo} For copying to another circle\n   */\n  clone() {\n    return new Circle(this.x, this.y, this.radius);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle.\n   *\n   * Uses the distance formula to determine if a point is inside the circle's radius.\n   *\n   * Commonly used for hit testing in PixiJS events and graphics.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const circle = new Circle(100, 100, 50);\n   * const isInside = circle.contains(120, 120);\n   *\n   * // Check mouse position\n   * const circle = new Circle(0, 0, 100);\n   * container.hitArea = circle;\n   * container.on('pointermove', (e) => {\n   *     // only called if pointer is within circle\n   * });\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Circle\n   * @see {@link Circle.strokeContains} For checking stroke intersection\n   * @see {@link Circle.getBounds} For getting bounding box\n   */\n  contains(x, y) {\n    if (this.radius <= 0)\n      return false;\n    const r2 = this.radius * this.radius;\n    let dx = this.x - x;\n    let dy = this.y - y;\n    dx *= dx;\n    dy *= dy;\n    return dx + dy <= r2;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const circle = new Circle(100, 100, 50);\n   * const isOnStroke = circle.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = circle.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = circle.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = circle.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width - The width of the line to check\n   * @param alignment - The alignment of the stroke, 0.5 by default\n   * @returns Whether the x/y coordinates are within this Circle's stroke\n   * @see {@link Circle.contains} For checking fill containment\n   * @see {@link Circle.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, width, alignment = 0.5) {\n    if (this.radius === 0)\n      return false;\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const radius = this.radius;\n    const outerWidth = (1 - alignment) * width;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return distance <= radius + outerWidth && distance > radius - (width - outerWidth);\n  }\n  /**\n   * Returns the framing rectangle of the circle as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const circle = new Circle(100, 100, 50);\n   * const bounds = circle.getBounds();\n   * // bounds: x=50, y=50, width=100, height=100\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * circle.getBounds(rect);\n   * ```\n   * @param out - Optional Rectangle object to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Circle.contains} For point containment\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x - this.radius;\n    out.y = this.y - this.radius;\n    out.width = this.radius * 2;\n    out.height = this.radius * 2;\n    return out;\n  }\n  /**\n   * Copies another circle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Circle(100, 100, 50);\n   * const target = new Circle();\n   * target.copyFrom(source);\n   * ```\n   * @param circle - The circle to copy from\n   * @returns Returns itself\n   * @see {@link Circle.copyTo} For copying to another circle\n   * @see {@link Circle.clone} For creating new circle copy\n   */\n  copyFrom(circle) {\n    this.x = circle.x;\n    this.y = circle.y;\n    this.radius = circle.radius;\n    return this;\n  }\n  /**\n   * Copies this circle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Circle(100, 100, 50);\n   * const target = new Circle();\n   * source.copyTo(target);\n   * ```\n   * @param circle - The circle to copy to\n   * @returns Returns given parameter\n   * @see {@link Circle.copyFrom} For copying from another circle\n   * @see {@link Circle.clone} For creating new circle copy\n   */\n  copyTo(circle) {\n    circle.copyFrom(this);\n    return circle;\n  }\n  toString() {\n    return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n  }\n}\n\nexport { Circle };\n//# sourceMappingURL=Circle.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Ellipse {\n  /**\n   * @param x - The X coordinate of the center of this ellipse\n   * @param y - The Y coordinate of the center of this ellipse\n   * @param halfWidth - The half width of this ellipse\n   * @param halfHeight - The half height of this ellipse\n   */\n  constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Ellipse(0, 0, 50, 25);\n     * console.log(shape.type); // 'ellipse'\n     *\n     * // Use in type guards\n     * if (shape.type === 'ellipse') {\n     *     console.log(shape.halfWidth, shape.halfHeight);\n     * }\n     * ```\n     * @readonly\n     * @default 'ellipse'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"ellipse\";\n    this.x = x;\n    this.y = y;\n    this.halfWidth = halfWidth;\n    this.halfHeight = halfHeight;\n  }\n  /**\n   * Creates a clone of this Ellipse instance.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Ellipse(100, 100, 50, 25);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.halfWidth *= 2;\n   * modified.halfHeight *= 2;\n   *\n   * // Verify independence\n   * console.log(original.halfWidth);  // 50\n   * console.log(modified.halfWidth);  // 100\n   * ```\n   * @returns A copy of the ellipse\n   * @see {@link Ellipse.copyFrom} For copying into existing ellipse\n   * @see {@link Ellipse.copyTo} For copying to another ellipse\n   */\n  clone() {\n    return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse.\n   * Uses normalized coordinates and the ellipse equation to determine containment.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const isInside = ellipse.contains(120, 110);\n   * ```\n   * @remarks\n   * - Uses ellipse equation (x²/a² + y²/b² ≤ 1)\n   * - Returns false if dimensions are 0 or negative\n   * - Normalized to center (0,0) for calculation\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coords are within this ellipse\n   * @see {@link Ellipse.strokeContains} For checking stroke intersection\n   * @see {@link Ellipse.getBounds} For getting containing rectangle\n   */\n  contains(x, y) {\n    if (this.halfWidth <= 0 || this.halfHeight <= 0) {\n      return false;\n    }\n    let normx = (x - this.x) / this.halfWidth;\n    let normy = (y - this.y) / this.halfHeight;\n    normx *= normx;\n    normy *= normy;\n    return normx + normy <= 1;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse including stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const isOnStroke = ellipse.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = ellipse.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = ellipse.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = ellipse.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @remarks\n   * - Uses normalized ellipse equations\n   * - Considers stroke alignment\n   * - Returns false if dimensions are 0\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coords are within this ellipse's stroke\n   * @see {@link Ellipse.contains} For checking fill containment\n   * @see {@link Ellipse.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const { halfWidth, halfHeight } = this;\n    if (halfWidth <= 0 || halfHeight <= 0) {\n      return false;\n    }\n    const strokeOuterWidth = strokeWidth * (1 - alignment);\n    const strokeInnerWidth = strokeWidth - strokeOuterWidth;\n    const innerHorizontal = halfWidth - strokeInnerWidth;\n    const innerVertical = halfHeight - strokeInnerWidth;\n    const outerHorizontal = halfWidth + strokeOuterWidth;\n    const outerVertical = halfHeight + strokeOuterWidth;\n    const normalizedX = x - this.x;\n    const normalizedY = y - this.y;\n    const innerEllipse = normalizedX * normalizedX / (innerHorizontal * innerHorizontal) + normalizedY * normalizedY / (innerVertical * innerVertical);\n    const outerEllipse = normalizedX * normalizedX / (outerHorizontal * outerHorizontal) + normalizedY * normalizedY / (outerVertical * outerVertical);\n    return innerEllipse > 1 && outerEllipse <= 1;\n  }\n  /**\n   * Returns the framing rectangle of the ellipse as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const bounds = ellipse.getBounds();\n   * // bounds: x=50, y=75, width=100, height=50\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * ellipse.getBounds(rect);\n   * ```\n   * @remarks\n   * - Creates Rectangle if none provided\n   * - Top-left is (x-halfWidth, y-halfHeight)\n   * - Width is halfWidth * 2\n   * - Height is halfHeight * 2\n   * @param out - Optional Rectangle object to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Ellipse.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x - this.halfWidth;\n    out.y = this.y - this.halfHeight;\n    out.width = this.halfWidth * 2;\n    out.height = this.halfHeight * 2;\n    return out;\n  }\n  /**\n   * Copies another ellipse to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Ellipse(100, 100, 50, 25);\n   * const target = new Ellipse();\n   * target.copyFrom(source);\n   * ```\n   * @param ellipse - The ellipse to copy from\n   * @returns Returns itself\n   * @see {@link Ellipse.copyTo} For copying to another ellipse\n   * @see {@link Ellipse.clone} For creating new ellipse copy\n   */\n  copyFrom(ellipse) {\n    this.x = ellipse.x;\n    this.y = ellipse.y;\n    this.halfWidth = ellipse.halfWidth;\n    this.halfHeight = ellipse.halfHeight;\n    return this;\n  }\n  /**\n   * Copies this ellipse to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Ellipse(100, 100, 50, 25);\n   * const target = new Ellipse();\n   * source.copyTo(target);\n   * ```\n   * @param ellipse - The ellipse to copy to\n   * @returns Returns given parameter\n   * @see {@link Ellipse.copyFrom} For copying from another ellipse\n   * @see {@link Ellipse.clone} For creating new ellipse copy\n   */\n  copyTo(ellipse) {\n    ellipse.copyFrom(this);\n    return ellipse;\n  }\n  toString() {\n    return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n  }\n}\n\nexport { Ellipse };\n//# sourceMappingURL=Ellipse.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nconst isCornerWithinStroke = (pX, pY, cornerX, cornerY, radius, strokeWidthInner, strokeWidthOuter) => {\n  const dx = pX - cornerX;\n  const dy = pY - cornerY;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance >= radius - strokeWidthInner && distance <= radius + strokeWidthOuter;\n};\nclass RoundedRectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n   * @param width - The overall width of this rounded rectangle\n   * @param height - The overall height of this rounded rectangle\n   * @param radius - Controls the radius of the rounded corners\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0, radius = 20) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new RoundedRectangle(0, 0, 100, 100, 20);\n     * console.log(shape.type); // 'roundedRectangle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'roundedRectangle') {\n     *     console.log(shape.radius);\n     * }\n     * ```\n     * @readonly\n     * @default 'roundedRectangle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"roundedRectangle\";\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n  }\n  /**\n   * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const bounds = rect.getBounds();\n   * // bounds: x=100, y=100, width=200, height=150\n   *\n   * // Reuse existing rectangle\n   * const out = new Rectangle();\n   * rect.getBounds(out);\n   * ```\n   * @remarks\n   * - Rectangle matches outer dimensions\n   * - Ignores corner radius\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link RoundedRectangle.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x;\n    out.y = this.y;\n    out.width = this.width;\n    out.height = this.height;\n    return out;\n  }\n  /**\n   * Creates a clone of this Rounded Rectangle.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.radius = 30;\n   * modified.width *= 2;\n   *\n   * // Verify independence\n   * console.log(original.radius);  // 20\n   * console.log(modified.radius);  // 30\n   * ```\n   * @returns A copy of the rounded rectangle\n   * @see {@link RoundedRectangle.copyFrom} For copying into existing rectangle\n   * @see {@link RoundedRectangle.copyTo} For copying to another rectangle\n   */\n  clone() {\n    return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const target = new RoundedRectangle();\n   * target.copyFrom(source);\n   *\n   * // Chain with other operations\n   * const rect = new RoundedRectangle()\n   *     .copyFrom(source)\n   *     .getBounds(rect);\n   * ```\n   * @param rectangle - The rectangle to copy from\n   * @returns Returns itself\n   * @see {@link RoundedRectangle.copyTo} For copying to another rectangle\n   * @see {@link RoundedRectangle.clone} For creating new rectangle copy\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const target = new RoundedRectangle();\n   * source.copyTo(target);\n   *\n   * // Chain with other operations\n   * const result = source\n   *     .copyTo(new RoundedRectangle())\n   *     .getBounds();\n   * ```\n   * @param rectangle - The rectangle to copy to\n   * @returns Returns given parameter\n   * @see {@link RoundedRectangle.copyFrom} For copying from another rectangle\n   * @see {@link RoundedRectangle.clone} For creating new rectangle copy\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const isInside = rect.contains(150, 125); // true\n   * // Check corner radius\n   * const corner = rect.contains(100, 100); // false if within corner curve\n   * ```\n   * @remarks\n   * - Returns false if width/height is 0 or negative\n   * - Handles rounded corners with radius check\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rounded Rectangle\n   * @see {@link RoundedRectangle.strokeContains} For checking stroke intersection\n   * @see {@link RoundedRectangle.getBounds} For getting containing rectangle\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x <= this.x + this.width) {\n      if (y >= this.y && y <= this.y + this.height) {\n        const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (y >= this.y + radius && y <= this.y + this.height - radius || x >= this.x + radius && x <= this.x + this.width - radius) {\n          return true;\n        }\n        let dx = x - (this.x + radius);\n        let dy = y - (this.y + radius);\n        const radius2 = radius * radius;\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + this.width - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dy = y - (this.y + this.height - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const isOnStroke = rect.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = rect.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = rect.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = rect.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param pX - The X coordinate of the point to test\n   * @param pY - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this rectangle's stroke\n   * @see {@link RoundedRectangle.contains} For checking fill containment\n   * @see {@link RoundedRectangle.getBounds} For getting stroke bounds\n   */\n  strokeContains(pX, pY, strokeWidth, alignment = 0.5) {\n    const { x, y, width, height, radius } = this;\n    const strokeWidthOuter = strokeWidth * (1 - alignment);\n    const strokeWidthInner = strokeWidth - strokeWidthOuter;\n    const innerX = x + radius;\n    const innerY = y + radius;\n    const innerWidth = width - radius * 2;\n    const innerHeight = height - radius * 2;\n    const rightBound = x + width;\n    const bottomBound = y + height;\n    if ((pX >= x - strokeWidthOuter && pX <= x + strokeWidthInner || pX >= rightBound - strokeWidthInner && pX <= rightBound + strokeWidthOuter) && pY >= innerY && pY <= innerY + innerHeight) {\n      return true;\n    }\n    if ((pY >= y - strokeWidthOuter && pY <= y + strokeWidthInner || pY >= bottomBound - strokeWidthInner && pY <= bottomBound + strokeWidthOuter) && pX >= innerX && pX <= innerX + innerWidth) {\n      return true;\n    }\n    return (\n      // Top-left\n      pX < innerX && pY < innerY && isCornerWithinStroke(\n        pX,\n        pY,\n        innerX,\n        innerY,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX > rightBound - radius && pY < innerY && isCornerWithinStroke(\n        pX,\n        pY,\n        rightBound - radius,\n        innerY,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX > rightBound - radius && pY > bottomBound - radius && isCornerWithinStroke(\n        pX,\n        pY,\n        rightBound - radius,\n        bottomBound - radius,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX < innerX && pY > bottomBound - radius && isCornerWithinStroke(\n        pX,\n        pY,\n        innerX,\n        bottomBound - radius,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      )\n    );\n  }\n  toString() {\n    return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;\n  }\n}\n\nexport { RoundedRectangle };\n//# sourceMappingURL=RoundedRectangle.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\nfunction buildAdaptiveBezier(points, sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance) {\n  recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(x1, y1, x2, y2, x3, y3, x4, y4, points, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x34 = (x3 + x4) / 2;\n  const y34 = (y3 + y4) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  const x234 = (x23 + x34) / 2;\n  const y234 = (y23 + y34) / 2;\n  const x1234 = (x123 + x234) / 2;\n  const y1234 = (y123 + y234) / 2;\n  if (level > 0) {\n    let dx = x4 - x1;\n    let dy = y4 - y1;\n    const d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx);\n    const d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx);\n    let da1;\n    let da2;\n    if (d2 > FLT_EPSILON && d3 > FLT_EPSILON) {\n      if ((d2 + d3) * (d2 + d3) <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        const a23 = Math.atan2(y3 - y2, x3 - x2);\n        da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n        da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da2 >= pi)\n          da2 = 2 * pi - da2;\n        if (da1 + da2 < mAngleTolerance) {\n          points.push(x1234, y1234);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n          if (da2 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else if (d2 > FLT_EPSILON) {\n      if (d2 * d2 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n        }\n      }\n    } else if (d3 > FLT_EPSILON) {\n      if (d3 * d3 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else {\n      dx = x1234 - (x1 + x4) / 2;\n      dy = y1234 - (y1 + y4) / 2;\n      if (dx * dx + dy * dy <= distanceTolerance) {\n        points.push(x1234, y1234);\n        return;\n      }\n    }\n  }\n  recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n  recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveBezier };\n//# sourceMappingURL=buildAdaptiveBezier.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nfunction buildAdaptiveQuadratic(points, sX, sY, cp1x, cp1y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance) {\n  recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(points, x1, y1, x2, y2, x3, y3, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  let dx = x3 - x1;\n  let dy = y3 - y1;\n  const d = Math.abs((x2 - x3) * dy - (y2 - y3) * dx);\n  if (d > FLT_EPSILON) {\n    if (d * d <= distanceTolerance * (dx * dx + dy * dy)) {\n      if (mAngleTolerance < curveAngleToleranceEpsilon) {\n        points.push(x123, y123);\n        return;\n      }\n      let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n      if (da >= pi)\n        da = 2 * pi - da;\n      if (da < mAngleTolerance) {\n        points.push(x123, y123);\n        return;\n      }\n    }\n  } else {\n    dx = x123 - (x1 + x3) / 2;\n    dy = y123 - (y1 + y3) / 2;\n    if (dx * dx + dy * dy <= distanceTolerance) {\n      points.push(x123, y123);\n      return;\n    }\n  }\n  recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n  recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveQuadratic };\n//# sourceMappingURL=buildAdaptiveQuadratic.mjs.map\n","\"use strict\";\nfunction buildArc(points, x, y, radius, start, end, clockwise, steps) {\n  let dist = Math.abs(start - end);\n  if (!clockwise && start > end) {\n    dist = 2 * Math.PI - dist;\n  } else if (clockwise && end > start) {\n    dist = 2 * Math.PI - dist;\n  }\n  steps || (steps = Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / Math.PI))));\n  steps = Math.max(steps, 3);\n  let f = dist / steps;\n  let t = start;\n  f *= clockwise ? -1 : 1;\n  for (let i = 0; i < steps + 1; i++) {\n    const cs = Math.cos(t);\n    const sn = Math.sin(t);\n    const nx = x + cs * radius;\n    const ny = y + sn * radius;\n    points.push(nx, ny);\n    t += f;\n  }\n}\n\nexport { buildArc };\n//# sourceMappingURL=buildArc.mjs.map\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier.mjs';\n\n\"use strict\";\nconst TAU = Math.PI * 2;\nconst out = {\n  centerX: 0,\n  centerY: 0,\n  ang1: 0,\n  ang2: 0\n};\nconst mapToEllipse = ({ x, y }, rx, ry, cosPhi, sinPhi, centerX, centerY, out2) => {\n  x *= rx;\n  y *= ry;\n  const xp = cosPhi * x - sinPhi * y;\n  const yp = sinPhi * x + cosPhi * y;\n  out2.x = xp + centerX;\n  out2.y = yp + centerY;\n  return out2;\n};\nfunction approxUnitArc(ang1, ang2) {\n  const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n  const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n  const x1 = Math.cos(ang1);\n  const y1 = Math.sin(ang1);\n  const x2 = Math.cos(ang1 + ang2);\n  const y2 = Math.sin(ang1 + ang2);\n  return [\n    {\n      x: x1 - y1 * a,\n      y: y1 + x1 * a\n    },\n    {\n      x: x2 + y2 * a,\n      y: y2 - x2 * a\n    },\n    {\n      x: x2,\n      y: y2\n    }\n  ];\n}\nconst vectorAngle = (ux, uy, vx, vy) => {\n  const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n  let dot = ux * vx + uy * vy;\n  if (dot > 1) {\n    dot = 1;\n  }\n  if (dot < -1) {\n    dot = -1;\n  }\n  return sign * Math.acos(dot);\n};\nconst getArcCenter = (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinPhi, cosPhi, pxp, pyp, out2) => {\n  const rxSq = Math.pow(rx, 2);\n  const rySq = Math.pow(ry, 2);\n  const pxpSq = Math.pow(pxp, 2);\n  const pypSq = Math.pow(pyp, 2);\n  let radicant = rxSq * rySq - rxSq * pypSq - rySq * pxpSq;\n  if (radicant < 0) {\n    radicant = 0;\n  }\n  radicant /= rxSq * pypSq + rySq * pxpSq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n  const centerXp = radicant * rx / ry * pyp;\n  const centerYp = radicant * -ry / rx * pxp;\n  const centerX = cosPhi * centerXp - sinPhi * centerYp + (px + cx) / 2;\n  const centerY = sinPhi * centerXp + cosPhi * centerYp + (py + cy) / 2;\n  const vx1 = (pxp - centerXp) / rx;\n  const vy1 = (pyp - centerYp) / ry;\n  const vx2 = (-pxp - centerXp) / rx;\n  const vy2 = (-pyp - centerYp) / ry;\n  const ang1 = vectorAngle(1, 0, vx1, vy1);\n  let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n  out2.centerX = centerX;\n  out2.centerY = centerY;\n  out2.ang1 = ang1;\n  out2.ang2 = ang2;\n};\nfunction buildArcToSvg(points, px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0) {\n  if (rx === 0 || ry === 0) {\n    return;\n  }\n  const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n  const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n  const pxp = cosPhi * (px - cx) / 2 + sinPhi * (py - cy) / 2;\n  const pyp = -sinPhi * (px - cx) / 2 + cosPhi * (py - cy) / 2;\n  if (pxp === 0 && pyp === 0) {\n    return;\n  }\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  getArcCenter(\n    px,\n    py,\n    cx,\n    cy,\n    rx,\n    ry,\n    largeArcFlag,\n    sweepFlag,\n    sinPhi,\n    cosPhi,\n    pxp,\n    pyp,\n    out\n  );\n  let { ang1, ang2 } = out;\n  const { centerX, centerY } = out;\n  let ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1 - ratio) < 1e-7) {\n    ratio = 1;\n  }\n  const segments = Math.max(Math.ceil(ratio), 1);\n  ang2 /= segments;\n  let lastX = points[points.length - 2];\n  let lastY = points[points.length - 1];\n  const outCurvePoint = { x: 0, y: 0 };\n  for (let i = 0; i < segments; i++) {\n    const curve = approxUnitArc(ang1, ang2);\n    const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    buildAdaptiveBezier(\n      points,\n      lastX,\n      lastY,\n      x1,\n      y1,\n      x2,\n      y2,\n      x,\n      y\n    );\n    lastX = x;\n    lastY = y;\n    ang1 += ang2;\n  }\n}\n\nexport { buildArcToSvg };\n//# sourceMappingURL=buildArcToSvg.mjs.map\n","import { Circle } from '../../../../maths/shapes/Circle.mjs';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse.mjs';\nimport { Polygon } from '../../../../maths/shapes/Polygon.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle.mjs';\nimport { Bounds } from '../../../container/bounds/Bounds.mjs';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier.mjs';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic.mjs';\nimport { buildArc } from '../buildCommands/buildArc.mjs';\nimport { buildArcTo } from '../buildCommands/buildArcTo.mjs';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg.mjs';\nimport { roundedShapeQuadraticCurve, roundedShapeArc } from './roundShape.mjs';\n\n\"use strict\";\nconst tempRectangle = new Rectangle();\nclass ShapePath {\n  constructor(graphicsPath2D) {\n    /** The list of shape primitives that make up the path. */\n    this.shapePrimitives = [];\n    this._currentPoly = null;\n    this._bounds = new Bounds();\n    this._graphicsPath2D = graphicsPath2D;\n    this.signed = graphicsPath2D.checkForHoles;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this.startPoly(x, y);\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n    if (fromX !== x || fromY !== y) {\n      points.push(x, y);\n    }\n    return this;\n  }\n  /**\n   * Adds an arc to the path. The arc is centered at (x, y)\n   *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The radius of the arc.\n   * @param startAngle - The starting angle of the arc, in radians.\n   * @param endAngle - The ending angle of the arc, in radians.\n   * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._ensurePoly(false);\n    const points = this._currentPoly.points;\n    buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n    return this;\n  }\n  /**\n   * Adds an arc to the path with the arc tangent to the line joining two specified points.\n   * The arc radius is specified by `radius`.\n   * @param x1 - The x-coordinate of the first point.\n   * @param y1 - The y-coordinate of the first point.\n   * @param x2 - The x-coordinate of the second point.\n   * @param y2 - The y-coordinate of the second point.\n   * @param radius - The radius of the arc.\n   * @returns The instance of the current object for chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    buildArcTo(points, x1, y1, x2, y2, radius);\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    const points = this._currentPoly.points;\n    buildArcToSvg(\n      points,\n      this._currentPoly.lastX,\n      this._currentPoly.lastY,\n      x,\n      y,\n      rx,\n      ry,\n      xAxisRotation,\n      largeArcFlag,\n      sweepFlag\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveBezier(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      cp2x,\n      cp2y,\n      x,\n      y,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the control point.\n   * @param cp1y - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cp1x, cp1y, x, y, smoothing) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveQuadratic(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      x,\n      y,\n      smoothing\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.endPoly(true);\n    return this;\n  }\n  /**\n   * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n   * @param path - The `GraphicsPath` object representing the path to add.\n   * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    this.endPoly();\n    if (transform && !transform.isIdentity()) {\n      path = path.clone(true);\n      path.transform(transform);\n    }\n    const shapePrimitives = this.shapePrimitives;\n    const start = shapePrimitives.length;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    if (path.checkForHoles && shapePrimitives.length - start > 1) {\n      let mainShape = null;\n      for (let i = start; i < shapePrimitives.length; i++) {\n        const shapePrimitive = shapePrimitives[i];\n        if (shapePrimitive.shape.type === \"polygon\") {\n          const polygon = shapePrimitive.shape;\n          const mainPolygon = mainShape?.shape;\n          if (mainPolygon && mainPolygon.containsPolygon(polygon)) {\n            mainShape.holes || (mainShape.holes = []);\n            mainShape.holes.push(shapePrimitive);\n            shapePrimitives.copyWithin(i, i + 1);\n            shapePrimitives.length--;\n            i--;\n          } else {\n            mainShape = shapePrimitive;\n          }\n        }\n      }\n    }\n    return this;\n  }\n  /**\n   * Finalizes the drawing of the current path. Optionally, it can close the path.\n   * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n   */\n  finish(closePath = false) {\n    this.endPoly(closePath);\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.drawShape(new Rectangle(x, y, w, h), transform);\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.drawShape(new Circle(x, y, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n   * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  poly(points, close, transform) {\n    const polygon = new Polygon(points);\n    polygon.closePath = close;\n    this.drawShape(polygon, transform);\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    sides = Math.max(sides | 0, 3);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const polygon = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = startAngle - i * delta;\n      polygon.push(\n        x + radius * Math.cos(angle),\n        y + radius * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation = 0, smoothness) {\n    sides = Math.max(sides | 0, 3);\n    if (corner <= 0) {\n      return this.regularPoly(x, y, radius, sides, rotation);\n    }\n    const sideLength = radius * Math.sin(Math.PI / sides) - 1e-3;\n    corner = Math.min(corner, sideLength);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const internalAngle = (sides - 2) * Math.PI / sides / 2;\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      const x0 = x + radius * Math.cos(angle);\n      const y0 = y + radius * Math.sin(angle);\n      const a1 = angle + Math.PI + internalAngle;\n      const a2 = angle - Math.PI - internalAngle;\n      const x1 = x0 + corner * Math.cos(a1);\n      const y1 = y0 + corner * Math.sin(a1);\n      const x3 = x0 + corner * Math.cos(a2);\n      const y3 = y0 + corner * Math.sin(a2);\n      if (i === 0) {\n        this.moveTo(x1, y1);\n      } else {\n        this.lineTo(x1, y1);\n      }\n      this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic = false, smoothness) {\n    if (points.length < 3) {\n      return this;\n    }\n    if (useQuadratic) {\n      roundedShapeQuadraticCurve(this, points, radius, smoothness);\n    } else {\n      roundedShapeArc(this, points, radius);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    if (fillet === 0) {\n      return this.rect(x, y, width, height);\n    }\n    const maxFillet = Math.min(width, height) / 2;\n    const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n    const right = x + width;\n    const bottom = y + height;\n    const dir = inset < 0 ? -inset : 0;\n    const size = Math.abs(inset);\n    return this.moveTo(x, y + size).arcTo(x + dir, y + dir, x + size, y, size).lineTo(right - size, y).arcTo(right - dir, y + dir, right, y + size, size).lineTo(right, bottom - size).arcTo(right - dir, bottom - dir, x + width - size, bottom, size).lineTo(x + size, bottom).arcTo(x + dir, bottom - dir, x, bottom - size, size).closePath();\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    if (chamfer <= 0) {\n      return this.rect(x, y, width, height);\n    }\n    const inset = Math.min(chamfer, Math.min(width, height) / 2);\n    const right = x + width;\n    const bottom = y + height;\n    const points = [\n      x + inset,\n      y,\n      right - inset,\n      y,\n      right,\n      y + inset,\n      right,\n      bottom - inset,\n      right - inset,\n      bottom,\n      x + inset,\n      bottom,\n      x,\n      bottom - inset,\n      x,\n      y + inset\n    ];\n    for (let i = points.length - 1; i >= 2; i -= 2) {\n      if (points[i] === points[i - 2] && points[i - 1] === points[i - 3]) {\n        points.splice(i - 1, 2);\n      }\n    }\n    return this.poly(points, true, transform);\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY, transform) {\n    this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius, transform) {\n    this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a given shape on the canvas.\n   * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n   * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n   * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n   * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n   * scaling, and translations.\n   * @returns The instance of the current object for chaining.\n   */\n  drawShape(shape, matrix) {\n    this.endPoly();\n    this.shapePrimitives.push({ shape, transform: matrix });\n    return this;\n  }\n  /**\n   * Starts a new polygon path from the specified starting point.\n   * This method initializes a new polygon or ends the current one if it exists.\n   * @param x - The x-coordinate of the starting point of the new polygon.\n   * @param y - The y-coordinate of the starting point of the new polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  startPoly(x, y) {\n    let currentPoly = this._currentPoly;\n    if (currentPoly) {\n      this.endPoly();\n    }\n    currentPoly = new Polygon();\n    currentPoly.points.push(x, y);\n    this._currentPoly = currentPoly;\n    return this;\n  }\n  /**\n   * Ends the current polygon path. If `closePath` is set to true,\n   * the path is closed by connecting the last point to the first one.\n   * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n   * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n   *  back to the starting point. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  endPoly(closePath = false) {\n    const shape = this._currentPoly;\n    if (shape && shape.points.length > 2) {\n      shape.closePath = closePath;\n      this.shapePrimitives.push({ shape });\n    }\n    this._currentPoly = null;\n    return this;\n  }\n  _ensurePoly(start = true) {\n    if (this._currentPoly)\n      return;\n    this._currentPoly = new Polygon();\n    if (start) {\n      const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n      if (lastShape) {\n        let lx = lastShape.shape.x;\n        let ly = lastShape.shape.y;\n        if (lastShape.transform && !lastShape.transform.isIdentity()) {\n          const t = lastShape.transform;\n          const tempX = lx;\n          lx = t.a * lx + t.c * ly + t.tx;\n          ly = t.b * tempX + t.d * ly + t.ty;\n        }\n        this._currentPoly.points.push(lx, ly);\n      } else {\n        this._currentPoly.points.push(0, 0);\n      }\n    }\n  }\n  /** Builds the path. */\n  buildPath() {\n    const path = this._graphicsPath2D;\n    this.shapePrimitives.length = 0;\n    this._currentPoly = null;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    this.finish();\n  }\n  /** Gets the bounds of the path. */\n  get bounds() {\n    const bounds = this._bounds;\n    bounds.clear();\n    const shapePrimitives = this.shapePrimitives;\n    for (let i = 0; i < shapePrimitives.length; i++) {\n      const shapePrimitive = shapePrimitives[i];\n      const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n      if (shapePrimitive.transform) {\n        bounds.addRect(boundsRect, shapePrimitive.transform);\n      } else {\n        bounds.addRect(boundsRect);\n      }\n    }\n    return bounds;\n  }\n}\n\nexport { ShapePath };\n//# sourceMappingURL=ShapePath.mjs.map\n","import { buildArc } from './buildArc.mjs';\n\n\"use strict\";\nfunction buildArcTo(points, x1, y1, x2, y2, radius) {\n  const fromX = points[points.length - 2];\n  const fromY = points[points.length - 1];\n  const a1 = fromY - y1;\n  const b1 = fromX - x1;\n  const a2 = y2 - y1;\n  const b2 = x2 - x1;\n  const mm = Math.abs(a1 * b2 - b1 * a2);\n  if (mm < 1e-8 || radius === 0) {\n    if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n      points.push(x1, y1);\n    }\n    return;\n  }\n  const dd = a1 * a1 + b1 * b1;\n  const cc = a2 * a2 + b2 * b2;\n  const tt = a1 * a2 + b1 * b2;\n  const k1 = radius * Math.sqrt(dd) / mm;\n  const k2 = radius * Math.sqrt(cc) / mm;\n  const j1 = k1 * tt / dd;\n  const j2 = k2 * tt / cc;\n  const cx = k1 * b2 + k2 * b1;\n  const cy = k1 * a2 + k2 * a1;\n  const px = b1 * (k2 + j1);\n  const py = a1 * (k2 + j1);\n  const qx = b2 * (k1 + j2);\n  const qy = a2 * (k1 + j2);\n  const startAngle = Math.atan2(py - cy, px - cx);\n  const endAngle = Math.atan2(qy - cy, qx - cx);\n  buildArc(\n    points,\n    cx + x1,\n    cy + y1,\n    radius,\n    startAngle,\n    endAngle,\n    b1 * a2 > b2 * a1\n  );\n}\n\nexport { buildArcTo };\n//# sourceMappingURL=buildArcTo.mjs.map\n","\"use strict\";\nfunction roundedShapeArc(g, points, radius) {\n  const vecFrom = (p, pp) => {\n    const x = pp.x - p.x;\n    const y = pp.y - p.y;\n    const len = Math.sqrt(x * x + y * y);\n    const nx = x / len;\n    const ny = y / len;\n    return { len, nx, ny };\n  };\n  const sharpCorner = (i, p) => {\n    if (i === 0) {\n      g.moveTo(p.x, p.y);\n    } else {\n      g.lineTo(p.x, p.y);\n    }\n  };\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i % points.length];\n    const pRadius = p2.radius ?? radius;\n    if (pRadius <= 0) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    const p3 = points[(i + 1) % points.length];\n    const v1 = vecFrom(p2, p1);\n    const v2 = vecFrom(p2, p3);\n    if (v1.len < 1e-4 || v2.len < 1e-4) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    let angle = Math.asin(v1.nx * v2.ny - v1.ny * v2.nx);\n    let radDirection = 1;\n    let drawDirection = false;\n    if (v1.nx * v2.nx - v1.ny * -v2.ny < 0) {\n      if (angle < 0) {\n        angle = Math.PI + angle;\n      } else {\n        angle = Math.PI - angle;\n        radDirection = -1;\n        drawDirection = true;\n      }\n    } else if (angle > 0) {\n      radDirection = -1;\n      drawDirection = true;\n    }\n    const halfAngle = angle / 2;\n    let cRadius;\n    let lenOut = Math.abs(\n      Math.cos(halfAngle) * pRadius / Math.sin(halfAngle)\n    );\n    if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n      lenOut = Math.min(v1.len / 2, v2.len / 2);\n      cRadius = Math.abs(lenOut * Math.sin(halfAngle) / Math.cos(halfAngle));\n    } else {\n      cRadius = pRadius;\n    }\n    const cX = p2.x + v2.nx * lenOut + -v2.ny * cRadius * radDirection;\n    const cY = p2.y + v2.ny * lenOut + v2.nx * cRadius * radDirection;\n    const startAngle = Math.atan2(v1.ny, v1.nx) + Math.PI / 2 * radDirection;\n    const endAngle = Math.atan2(v2.ny, v2.nx) - Math.PI / 2 * radDirection;\n    if (i === 0) {\n      g.moveTo(\n        cX + Math.cos(startAngle) * cRadius,\n        cY + Math.sin(startAngle) * cRadius\n      );\n    }\n    g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n    p1 = p2;\n  }\n}\nfunction roundedShapeQuadraticCurve(g, points, radius, smoothness) {\n  const distance = (p1, p2) => Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n  const pointLerp = (p1, p2, t) => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t\n  });\n  const numPoints = points.length;\n  for (let i = 0; i < numPoints; i++) {\n    const thisPoint = points[(i + 1) % numPoints];\n    const pRadius = thisPoint.radius ?? radius;\n    if (pRadius <= 0) {\n      if (i === 0) {\n        g.moveTo(thisPoint.x, thisPoint.y);\n      } else {\n        g.lineTo(thisPoint.x, thisPoint.y);\n      }\n      continue;\n    }\n    const lastPoint = points[i];\n    const nextPoint = points[(i + 2) % numPoints];\n    const lastEdgeLength = distance(lastPoint, thisPoint);\n    let start;\n    if (lastEdgeLength < 1e-4) {\n      start = thisPoint;\n    } else {\n      const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n      start = pointLerp(\n        thisPoint,\n        lastPoint,\n        lastOffsetDistance / lastEdgeLength\n      );\n    }\n    const nextEdgeLength = distance(nextPoint, thisPoint);\n    let end;\n    if (nextEdgeLength < 1e-4) {\n      end = thisPoint;\n    } else {\n      const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n      end = pointLerp(\n        thisPoint,\n        nextPoint,\n        nextOffsetDistance / nextEdgeLength\n      );\n    }\n    if (i === 0) {\n      g.moveTo(start.x, start.y);\n    } else {\n      g.lineTo(start.x, start.y);\n    }\n    g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n  }\n}\n\nexport { roundedShapeArc, roundedShapeQuadraticCurve };\n//# sourceMappingURL=roundShape.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { parseSVGPath } from '../svg/parseSVGPath.mjs';\nimport { ShapePath } from './ShapePath.mjs';\n\n\"use strict\";\nclass GraphicsPath {\n  /**\n   * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n   * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n   * @param signed\n   */\n  constructor(instructions, signed = false) {\n    this.instructions = [];\n    /** unique id for this graphics path */\n    this.uid = uid(\"graphicsPath\");\n    this._dirty = true;\n    this.checkForHoles = signed;\n    if (typeof instructions === \"string\") {\n      parseSVGPath(instructions, this);\n    } else {\n      this.instructions = instructions?.slice() ?? [];\n    }\n  }\n  /**\n   * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n   * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n   */\n  get shapePath() {\n    if (!this._shapePath) {\n      this._shapePath = new ShapePath(this);\n    }\n    if (this._dirty) {\n      this._dirty = false;\n      this._shapePath.buildPath();\n    }\n    return this._shapePath;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @param transform - An optional transformation to apply to the added path.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    path = path.clone();\n    this.instructions.push({ action: \"addPath\", data: [path, transform] });\n    this._dirty = true;\n    return this;\n  }\n  arc(...args) {\n    this.instructions.push({ action: \"arc\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcTo(...args) {\n    this.instructions.push({ action: \"arcTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcToSvg(...args) {\n    this.instructions.push({ action: \"arcToSvg\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  bezierCurveTo(...args) {\n    this.instructions.push({ action: \"bezierCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires two points: the second control point and the end point. The first control point is assumed to be\n   * The starting point is the last point in the current path.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveToShort(cp2x, cp2y, x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cp1x = 0;\n    let cp1y = 0;\n    if (!last || last.action !== \"bezierCurveTo\") {\n      cp1x = lastPoint.x;\n      cp1y = lastPoint.y;\n    } else {\n      cp1x = last.data[2];\n      cp1y = last.data[3];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cp1x = currentX + (currentX - cp1x);\n      cp1y = currentY + (currentY - cp1y);\n    }\n    this.instructions.push({ action: \"bezierCurveTo\", data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.instructions.push({ action: \"closePath\", data: [] });\n    this._dirty = true;\n    return this;\n  }\n  ellipse(...args) {\n    this.instructions.push({ action: \"ellipse\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  lineTo(...args) {\n    this.instructions.push({ action: \"lineTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  moveTo(...args) {\n    this.instructions.push({ action: \"moveTo\", data: args });\n    return this;\n  }\n  quadraticCurveTo(...args) {\n    this.instructions.push({ action: \"quadraticCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It uses the previous point as the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveToShort(x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cpx1 = 0;\n    let cpy1 = 0;\n    if (!last || last.action !== \"quadraticCurveTo\") {\n      cpx1 = lastPoint.x;\n      cpy1 = lastPoint.y;\n    } else {\n      cpx1 = last.data[0];\n      cpy1 = last.data[1];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cpx1 = currentX + (currentX - cpx1);\n      cpy1 = currentY + (currentY - cpy1);\n    }\n    this.instructions.push({ action: \"quadraticCurveTo\", data: [cpx1, cpy1, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.instructions.push({ action: \"rect\", data: [x, y, w, h, transform] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.instructions.push({ action: \"circle\", data: [x, y, radius, transform] });\n    this._dirty = true;\n    return this;\n  }\n  roundRect(...args) {\n    this.instructions.push({ action: \"roundRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  poly(...args) {\n    this.instructions.push({ action: \"poly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  regularPoly(...args) {\n    this.instructions.push({ action: \"regularPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundPoly(...args) {\n    this.instructions.push({ action: \"roundPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundShape(...args) {\n    this.instructions.push({ action: \"roundShape\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  filletRect(...args) {\n    this.instructions.push({ action: \"filletRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  chamferRect(...args) {\n    this.instructions.push({ action: \"chamferRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @param transform - An optional `Matrix` object to apply a transformation to the star.\n   * This can include rotations, scaling, and translations.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  // eslint-disable-next-line max-len\n  star(x, y, points, radius, innerRadius, rotation, transform) {\n    innerRadius || (innerRadius = radius / 2);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const len = points * 2;\n    const delta = Math.PI * 2 / len;\n    const polygon = [];\n    for (let i = 0; i < len; i++) {\n      const r = i % 2 ? innerRadius : radius;\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + r * Math.cos(angle),\n        y + r * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n   * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n   * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n   * do not affect the original `GraphicsPath` and vice versa.\n   * @param deep - A boolean flag indicating whether the clone should be deep.\n   * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n   */\n  clone(deep = false) {\n    const newGraphicsPath2D = new GraphicsPath();\n    newGraphicsPath2D.checkForHoles = this.checkForHoles;\n    if (!deep) {\n      newGraphicsPath2D.instructions = this.instructions.slice();\n    } else {\n      for (let i = 0; i < this.instructions.length; i++) {\n        const instruction = this.instructions[i];\n        newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n      }\n    }\n    return newGraphicsPath2D;\n  }\n  clear() {\n    this.instructions.length = 0;\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n   * This method enables the modification of the path's geometry according to the provided\n   * transformation matrix, which can include translations, rotations, scaling, and skewing.\n   *\n   * Each drawing instruction in the path is updated to reflect the transformation,\n   * ensuring the visual representation of the path is consistent with the applied matrix.\n   *\n   * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n   * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n   * allowing for fine-grained control over the path's appearance.\n   * @param matrix - A `Matrix` object representing the transformation to apply.\n   * @returns The instance of the current object for chaining further operations.\n   */\n  transform(matrix) {\n    if (matrix.isIdentity())\n      return this;\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let x = 0;\n    let y = 0;\n    let cpx1 = 0;\n    let cpy1 = 0;\n    let cpx2 = 0;\n    let cpy2 = 0;\n    let rx = 0;\n    let ry = 0;\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const data = instruction.data;\n      switch (instruction.action) {\n        case \"moveTo\":\n        case \"lineTo\":\n          x = data[0];\n          y = data[1];\n          data[0] = a * x + c * y + tx;\n          data[1] = b * x + d * y + ty;\n          break;\n        case \"bezierCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          cpx2 = data[2];\n          cpy2 = data[3];\n          x = data[4];\n          y = data[5];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * cpx2 + c * cpy2 + tx;\n          data[3] = b * cpx2 + d * cpy2 + ty;\n          data[4] = a * x + c * y + tx;\n          data[5] = b * x + d * y + ty;\n          break;\n        case \"quadraticCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          x = data[2];\n          y = data[3];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * x + c * y + tx;\n          data[3] = b * x + d * y + ty;\n          break;\n        case \"arcToSvg\":\n          x = data[5];\n          y = data[6];\n          rx = data[0];\n          ry = data[1];\n          data[0] = a * rx + c * ry;\n          data[1] = b * rx + d * ry;\n          data[5] = a * x + c * y + tx;\n          data[6] = b * x + d * y + ty;\n          break;\n        case \"circle\":\n          data[4] = adjustTransform(data[3], matrix);\n          break;\n        case \"rect\":\n          data[4] = adjustTransform(data[4], matrix);\n          break;\n        case \"ellipse\":\n          data[8] = adjustTransform(data[8], matrix);\n          break;\n        case \"roundRect\":\n          data[5] = adjustTransform(data[5], matrix);\n          break;\n        case \"addPath\":\n          data[0].transform(matrix);\n          break;\n        case \"poly\":\n          data[2] = adjustTransform(data[2], matrix);\n          break;\n        default:\n          warn(\"unknown transform action\", instruction.action);\n          break;\n      }\n    }\n    this._dirty = true;\n    return this;\n  }\n  get bounds() {\n    return this.shapePath.bounds;\n  }\n  /**\n   * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n   * This method is useful for operations that depend on the path's current endpoint,\n   * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n   * ensuring the last point's position is accurately determined regardless of the path's complexity.\n   *\n   * If the last instruction is a `closePath`, the method iterates backward through the instructions\n   *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n   * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n   * the last point from the nested path.\n   * @param out - A `Point` object where the last point's coordinates will be stored.\n   * This object is modified directly to contain the result.\n   * @returns The `Point` object containing the last point's coordinates.\n   */\n  getLastPoint(out) {\n    let index = this.instructions.length - 1;\n    let lastInstruction = this.instructions[index];\n    if (!lastInstruction) {\n      out.x = 0;\n      out.y = 0;\n      return out;\n    }\n    while (lastInstruction.action === \"closePath\") {\n      index--;\n      if (index < 0) {\n        out.x = 0;\n        out.y = 0;\n        return out;\n      }\n      lastInstruction = this.instructions[index];\n    }\n    switch (lastInstruction.action) {\n      case \"moveTo\":\n      case \"lineTo\":\n        out.x = lastInstruction.data[0];\n        out.y = lastInstruction.data[1];\n        break;\n      case \"quadraticCurveTo\":\n        out.x = lastInstruction.data[2];\n        out.y = lastInstruction.data[3];\n        break;\n      case \"bezierCurveTo\":\n        out.x = lastInstruction.data[4];\n        out.y = lastInstruction.data[5];\n        break;\n      case \"arc\":\n      case \"arcToSvg\":\n        out.x = lastInstruction.data[5];\n        out.y = lastInstruction.data[6];\n        break;\n      case \"addPath\":\n        lastInstruction.data[0].getLastPoint(out);\n        break;\n    }\n    return out;\n  }\n}\nfunction adjustTransform(currentMatrix, transform) {\n  if (currentMatrix) {\n    return currentMatrix.prepend(transform);\n  }\n  return transform.clone();\n}\n\nexport { GraphicsPath };\n//# sourceMappingURL=GraphicsPath.mjs.map\n","import parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction parseSVGPath(svgPath, path) {\n  const commands = parse(svgPath);\n  const subpaths = [];\n  let currentSubPath = null;\n  let lastX = 0;\n  let lastY = 0;\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    const type = command[0];\n    const data = command;\n    switch (type) {\n      case \"M\":\n        lastX = data[1];\n        lastY = data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"m\":\n        lastX += data[1];\n        lastY += data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"H\":\n        lastX = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"h\":\n        lastX += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"V\":\n        lastY = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"v\":\n        lastY += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"L\":\n        lastX = data[1];\n        lastY = data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"l\":\n        lastX += data[1];\n        lastY += data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"C\":\n        lastX = data[5];\n        lastY = data[6];\n        path.bezierCurveTo(\n          data[1],\n          data[2],\n          // First control point\n          data[3],\n          data[4],\n          // Second control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"c\":\n        path.bezierCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          // First control point\n          lastX + data[3],\n          lastY + data[4],\n          // Second control point\n          lastX + data[5],\n          lastY + data[6]\n          // End point\n        );\n        lastX += data[5];\n        lastY += data[6];\n        break;\n      case \"S\":\n        lastX = data[3];\n        lastY = data[4];\n        path.bezierCurveToShort(\n          data[1],\n          data[2],\n          // Control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"s\":\n        path.bezierCurveToShort(\n          lastX + data[1],\n          lastY + data[2],\n          // Control point\n          lastX + data[3],\n          lastY + data[4]\n          // End point\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"Q\":\n        lastX = data[3];\n        lastY = data[4];\n        path.quadraticCurveTo(\n          data[1],\n          data[2],\n          // Control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"q\":\n        path.quadraticCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          // Control point\n          lastX + data[3],\n          lastY + data[4]\n          // End point\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"T\":\n        lastX = data[1];\n        lastY = data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"t\":\n        lastX += data[1];\n        lastY += data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"A\":\n        lastX = data[6];\n        lastY = data[7];\n        path.arcToSvg(\n          data[1],\n          // rx\n          data[2],\n          // ry\n          data[3],\n          // x-axis-rotation\n          data[4],\n          // large-arc-flag\n          data[5],\n          // sweep-flag\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"a\":\n        lastX += data[6];\n        lastY += data[7];\n        path.arcToSvg(\n          data[1],\n          // rx\n          data[2],\n          // ry\n          data[3],\n          // x-axis-rotation\n          data[4],\n          // large-arc-flag\n          data[5],\n          // sweep-flag\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"Z\":\n      case \"z\":\n        path.closePath();\n        if (subpaths.length > 0) {\n          currentSubPath = subpaths.pop();\n          if (currentSubPath) {\n            lastX = currentSubPath.startX;\n            lastY = currentSubPath.startY;\n          } else {\n            lastX = 0;\n            lastY = 0;\n          }\n        }\n        currentSubPath = null;\n        break;\n      default:\n        warn(`Unknown SVG path command: ${type}`);\n    }\n    if (type !== \"Z\" && type !== \"z\") {\n      if (currentSubPath === null) {\n        currentSubPath = { startX: lastX, startY: lastY };\n        subpaths.push(currentSubPath);\n      }\n    }\n  }\n  return path;\n}\n\nexport { parseSVGPath };\n//# sourceMappingURL=parseSVGPath.mjs.map\n","\"use strict\";\nfunction parseSVGFloatAttribute(svg, id, defaultValue) {\n  const value = svg.getAttribute(id);\n  return value ? Number(value) : defaultValue;\n}\n\nexport { parseSVGFloatAttribute };\n//# sourceMappingURL=parseSVGFloatAttribute.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { parseSVGFloatAttribute } from './parseSVGFloatAttribute.mjs';\n\n\"use strict\";\nfunction parseSVGDefinitions(svg, session) {\n  const definitions = svg.querySelectorAll(\"defs\");\n  for (let i = 0; i < definitions.length; i++) {\n    const definition = definitions[i];\n    for (let j = 0; j < definition.children.length; j++) {\n      const child = definition.children[j];\n      switch (child.nodeName.toLowerCase()) {\n        case \"lineargradient\":\n          session.defs[child.id] = parseLinearGradient(child);\n          break;\n        case \"radialgradient\":\n          session.defs[child.id] = parseRadialGradient(child);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n}\nfunction parseLinearGradient(child) {\n  const x0 = parseSVGFloatAttribute(child, \"x1\", 0);\n  const y0 = parseSVGFloatAttribute(child, \"y1\", 0);\n  const x1 = parseSVGFloatAttribute(child, \"x2\", 1);\n  const y1 = parseSVGFloatAttribute(child, \"y2\", 0);\n  const gradientUnit = child.getAttribute(\"gradientUnits\") || \"objectBoundingBox\";\n  const gradient = new FillGradient(\n    x0,\n    y0,\n    x1,\n    y1,\n    gradientUnit === \"objectBoundingBox\" ? \"local\" : \"global\"\n  );\n  for (let k = 0; k < child.children.length; k++) {\n    const stop = child.children[k];\n    const offset = parseSVGFloatAttribute(stop, \"offset\", 0);\n    const color = Color.shared.setValue(stop.getAttribute(\"stop-color\")).toNumber();\n    gradient.addColorStop(offset, color);\n  }\n  return gradient;\n}\nfunction parseRadialGradient(_child) {\n  warn(\"[SVG Parser] Radial gradients are not yet supported\");\n  return new FillGradient(0, 0, 1, 0);\n}\n\nexport { parseSVGDefinitions };\n//# sourceMappingURL=parseSVGDefinitions.mjs.map\n","\"use strict\";\nfunction extractSvgUrlId(url) {\n  const match = url.match(/url\\s*\\(\\s*['\"]?\\s*#([^'\"\\s)]+)\\s*['\"]?\\s*\\)/i);\n  return match ? match[1] : \"\";\n}\n\nexport { extractSvgUrlId };\n//# sourceMappingURL=extractSvgUrlId.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { extractSvgUrlId } from './utils/extractSvgUrlId.mjs';\n\n\"use strict\";\nconst styleAttributes = {\n  // Fill properties\n  fill: { type: \"paint\", default: 0 },\n  // Fill color/gradient\n  \"fill-opacity\": { type: \"number\", default: 1 },\n  // Fill transparency\n  // Stroke properties\n  stroke: { type: \"paint\", default: 0 },\n  // Stroke color/gradient\n  \"stroke-width\": { type: \"number\", default: 1 },\n  // Width of stroke\n  \"stroke-opacity\": { type: \"number\", default: 1 },\n  // Stroke transparency\n  \"stroke-linecap\": { type: \"string\", default: \"butt\" },\n  // End cap style: butt, round, square\n  \"stroke-linejoin\": { type: \"string\", default: \"miter\" },\n  // Join style: miter, round, bevel\n  \"stroke-miterlimit\": { type: \"number\", default: 10 },\n  // Limit on miter join sharpness\n  \"stroke-dasharray\": { type: \"string\", default: \"none\" },\n  // Dash pattern\n  \"stroke-dashoffset\": { type: \"number\", default: 0 },\n  // Offset for dash pattern\n  // Global properties\n  opacity: { type: \"number\", default: 1 }\n  // Overall opacity\n};\nfunction parseSVGStyle(svg, session) {\n  const style = svg.getAttribute(\"style\");\n  const strokeStyle = {};\n  const fillStyle = {};\n  const result = {\n    strokeStyle,\n    fillStyle,\n    useFill: false,\n    useStroke: false\n  };\n  for (const key in styleAttributes) {\n    const attribute = svg.getAttribute(key);\n    if (attribute) {\n      parseAttribute(session, result, key, attribute.trim());\n    }\n  }\n  if (style) {\n    const styleParts = style.split(\";\");\n    for (let i = 0; i < styleParts.length; i++) {\n      const stylePart = styleParts[i].trim();\n      const [key, value] = stylePart.split(\":\");\n      if (styleAttributes[key]) {\n        parseAttribute(session, result, key, value.trim());\n      }\n    }\n  }\n  return {\n    strokeStyle: result.useStroke ? strokeStyle : null,\n    fillStyle: result.useFill ? fillStyle : null,\n    useFill: result.useFill,\n    useStroke: result.useStroke\n  };\n}\nfunction parseAttribute(session, result, id, value) {\n  switch (id) {\n    case \"stroke\":\n      if (value !== \"none\") {\n        if (value.startsWith(\"url(\")) {\n          const id2 = extractSvgUrlId(value);\n          result.strokeStyle.fill = session.defs[id2];\n        } else {\n          result.strokeStyle.color = Color.shared.setValue(value).toNumber();\n        }\n        result.useStroke = true;\n      }\n      break;\n    case \"stroke-width\":\n      result.strokeStyle.width = Number(value);\n      break;\n    case \"fill\":\n      if (value !== \"none\") {\n        if (value.startsWith(\"url(\")) {\n          const id2 = extractSvgUrlId(value);\n          result.fillStyle.fill = session.defs[id2];\n        } else {\n          result.fillStyle.color = Color.shared.setValue(value).toNumber();\n        }\n        result.useFill = true;\n      }\n      break;\n    case \"fill-opacity\":\n      result.fillStyle.alpha = Number(value);\n      break;\n    case \"stroke-opacity\":\n      result.strokeStyle.alpha = Number(value);\n      break;\n    case \"opacity\":\n      result.fillStyle.alpha = Number(value);\n      result.strokeStyle.alpha = Number(value);\n      break;\n  }\n}\n\nexport { parseSVGStyle, styleAttributes };\n//# sourceMappingURL=parseSVGStyle.mjs.map\n","import { GraphicsPath } from '../../path/GraphicsPath.mjs';\n\n\"use strict\";\nfunction extractSubpaths(pathData) {\n  const parts = pathData.split(/(?=[Mm])/);\n  const subpaths = parts.filter((part) => part.trim().length > 0);\n  return subpaths;\n}\nfunction calculatePathArea(pathData) {\n  const coords = pathData.match(/[-+]?[0-9]*\\.?[0-9]+/g);\n  if (!coords || coords.length < 4)\n    return 0;\n  const numbers = coords.map(Number);\n  const xs = [];\n  const ys = [];\n  for (let i = 0; i < numbers.length; i += 2) {\n    if (i + 1 < numbers.length) {\n      xs.push(numbers[i]);\n      ys.push(numbers[i + 1]);\n    }\n  }\n  if (xs.length === 0 || ys.length === 0)\n    return 0;\n  const minX = Math.min(...xs);\n  const maxX = Math.max(...xs);\n  const minY = Math.min(...ys);\n  const maxY = Math.max(...ys);\n  const area = (maxX - minX) * (maxY - minY);\n  return area;\n}\nfunction appendSVGPath(pathData, graphicsPath) {\n  const tempPath = new GraphicsPath(pathData, false);\n  for (const instruction of tempPath.instructions) {\n    graphicsPath.instructions.push(instruction);\n  }\n}\n\nexport { appendSVGPath, calculatePathArea, extractSubpaths };\n//# sourceMappingURL=pathOperations.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\nimport { GraphicsPath } from '../path/GraphicsPath.mjs';\nimport { parseSVGDefinitions } from './parseSVGDefinitions.mjs';\nimport { parseSVGFloatAttribute } from './parseSVGFloatAttribute.mjs';\nimport { parseSVGStyle } from './parseSVGStyle.mjs';\nimport { checkForNestedPattern } from './utils/fillOperations.mjs';\nimport { extractSubpaths, calculatePathArea, appendSVGPath } from './utils/pathOperations.mjs';\n\n\"use strict\";\nfunction SVGParser(svg, graphicsContext) {\n  if (typeof svg === \"string\") {\n    const div = document.createElement(\"div\");\n    div.innerHTML = svg.trim();\n    svg = div.querySelector(\"svg\");\n  }\n  const session = {\n    context: graphicsContext,\n    defs: {},\n    path: new GraphicsPath()\n  };\n  parseSVGDefinitions(svg, session);\n  const children = svg.children;\n  const { fillStyle, strokeStyle } = parseSVGStyle(svg, session);\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (child.nodeName.toLowerCase() === \"defs\")\n      continue;\n    renderChildren(child, session, fillStyle, strokeStyle);\n  }\n  return graphicsContext;\n}\nfunction renderChildren(svg, session, fillStyle, strokeStyle) {\n  const children = svg.children;\n  const { fillStyle: f1, strokeStyle: s1 } = parseSVGStyle(svg, session);\n  if (f1 && fillStyle) {\n    fillStyle = { ...fillStyle, ...f1 };\n  } else if (f1) {\n    fillStyle = f1;\n  }\n  if (s1 && strokeStyle) {\n    strokeStyle = { ...strokeStyle, ...s1 };\n  } else if (s1) {\n    strokeStyle = s1;\n  }\n  const noStyle = !fillStyle && !strokeStyle;\n  if (noStyle) {\n    fillStyle = { color: 0 };\n  }\n  let x;\n  let y;\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let cx;\n  let cy;\n  let r;\n  let rx;\n  let ry;\n  let points;\n  let pointsString;\n  let d;\n  let graphicsPath;\n  let width;\n  let height;\n  switch (svg.nodeName.toLowerCase()) {\n    case \"path\": {\n      d = svg.getAttribute(\"d\");\n      const fillRule = svg.getAttribute(\"fill-rule\");\n      const subpaths = extractSubpaths(d);\n      const hasExplicitEvenodd = fillRule === \"evenodd\";\n      const hasMultipleSubpaths = subpaths.length > 1;\n      const shouldProcessHoles = hasExplicitEvenodd && hasMultipleSubpaths;\n      if (shouldProcessHoles) {\n        const subpathsWithArea = subpaths.map((subpath) => ({\n          path: subpath,\n          area: calculatePathArea(subpath)\n        }));\n        subpathsWithArea.sort((a, b) => b.area - a.area);\n        const useMultipleHolesApproach = subpaths.length > 3 || !checkForNestedPattern(subpathsWithArea);\n        if (useMultipleHolesApproach) {\n          for (let i = 0; i < subpathsWithArea.length; i++) {\n            const subpath = subpathsWithArea[i];\n            const isMainShape = i === 0;\n            session.context.beginPath();\n            const newPath = new GraphicsPath(void 0, true);\n            appendSVGPath(subpath.path, newPath);\n            session.context.path(newPath);\n            if (isMainShape) {\n              if (fillStyle)\n                session.context.fill(fillStyle);\n              if (strokeStyle)\n                session.context.stroke(strokeStyle);\n            } else {\n              session.context.cut();\n            }\n          }\n        } else {\n          for (let i = 0; i < subpathsWithArea.length; i++) {\n            const subpath = subpathsWithArea[i];\n            const isHole = i % 2 === 1;\n            session.context.beginPath();\n            const newPath = new GraphicsPath(void 0, true);\n            appendSVGPath(subpath.path, newPath);\n            session.context.path(newPath);\n            if (isHole) {\n              session.context.cut();\n            } else {\n              if (fillStyle)\n                session.context.fill(fillStyle);\n              if (strokeStyle)\n                session.context.stroke(strokeStyle);\n            }\n          }\n        }\n      } else {\n        const useEvenoddForGraphicsPath = fillRule ? fillRule === \"evenodd\" : true;\n        graphicsPath = new GraphicsPath(d, useEvenoddForGraphicsPath);\n        session.context.path(graphicsPath);\n        if (fillStyle)\n          session.context.fill(fillStyle);\n        if (strokeStyle)\n          session.context.stroke(strokeStyle);\n      }\n      break;\n    }\n    case \"circle\":\n      cx = parseSVGFloatAttribute(svg, \"cx\", 0);\n      cy = parseSVGFloatAttribute(svg, \"cy\", 0);\n      r = parseSVGFloatAttribute(svg, \"r\", 0);\n      session.context.ellipse(cx, cy, r, r);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"rect\":\n      x = parseSVGFloatAttribute(svg, \"x\", 0);\n      y = parseSVGFloatAttribute(svg, \"y\", 0);\n      width = parseSVGFloatAttribute(svg, \"width\", 0);\n      height = parseSVGFloatAttribute(svg, \"height\", 0);\n      rx = parseSVGFloatAttribute(svg, \"rx\", 0);\n      ry = parseSVGFloatAttribute(svg, \"ry\", 0);\n      if (rx || ry) {\n        session.context.roundRect(x, y, width, height, rx || ry);\n      } else {\n        session.context.rect(x, y, width, height);\n      }\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"ellipse\":\n      cx = parseSVGFloatAttribute(svg, \"cx\", 0);\n      cy = parseSVGFloatAttribute(svg, \"cy\", 0);\n      rx = parseSVGFloatAttribute(svg, \"rx\", 0);\n      ry = parseSVGFloatAttribute(svg, \"ry\", 0);\n      session.context.beginPath();\n      session.context.ellipse(cx, cy, rx, ry);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"line\":\n      x1 = parseSVGFloatAttribute(svg, \"x1\", 0);\n      y1 = parseSVGFloatAttribute(svg, \"y1\", 0);\n      x2 = parseSVGFloatAttribute(svg, \"x2\", 0);\n      y2 = parseSVGFloatAttribute(svg, \"y2\", 0);\n      session.context.beginPath();\n      session.context.moveTo(x1, y1);\n      session.context.lineTo(x2, y2);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"polygon\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, true);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"polyline\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, false);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"g\":\n    case \"svg\":\n      break;\n    default: {\n      warn(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n      break;\n    }\n  }\n  if (noStyle) {\n    fillStyle = null;\n  }\n  for (let i = 0; i < children.length; i++) {\n    renderChildren(children[i], session, fillStyle, strokeStyle);\n  }\n}\n\nexport { SVGParser };\n//# sourceMappingURL=SVGParser.mjs.map\n","\"use strict\";\nfunction checkForNestedPattern(subpathsWithArea) {\n  if (subpathsWithArea.length <= 2) {\n    return true;\n  }\n  const areas = subpathsWithArea.map((s) => s.area).sort((a, b) => b - a);\n  const [largestArea, secondArea] = areas;\n  const smallestArea = areas[areas.length - 1];\n  const largestToSecondRatio = largestArea / secondArea;\n  const secondToSmallestRatio = secondArea / smallestArea;\n  if (largestToSecondRatio > 3 && secondToSmallestRatio < 2) {\n    return false;\n  }\n  return true;\n}\nfunction getFillInstructionData(context, index = 0) {\n  const instruction = context.instructions[index];\n  if (!instruction || instruction.action !== \"fill\") {\n    throw new Error(`Expected fill instruction at index ${index}, got ${instruction?.action || \"undefined\"}`);\n  }\n  return instruction.data;\n}\n\nexport { checkForNestedPattern, getFillInstructionData };\n//# sourceMappingURL=fillOperations.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../../color/Color.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { GraphicsPath } from './path/GraphicsPath.mjs';\nimport { SVGParser } from './svg/SVGParser.mjs';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst tmpPoint = new Point();\nconst tempMatrix = new Matrix();\nconst _GraphicsContext = class _GraphicsContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /**\n     * unique id for this graphics context\n     * @internal\n     */\n    this.uid = uid(\"graphicsContext\");\n    /**\n     * Indicates whether content is updated and have to be re-rendered.\n     * @internal\n     */\n    this.dirty = true;\n    /** The batch mode for this graphics context. It can be 'auto', 'batch', or 'no-batch'. */\n    this.batchMode = \"auto\";\n    /** @internal */\n    this.instructions = [];\n    this._activePath = new GraphicsPath();\n    this._transform = new Matrix();\n    this._fillStyle = { ..._GraphicsContext.defaultFillStyle };\n    this._strokeStyle = { ..._GraphicsContext.defaultStrokeStyle };\n    this._stateStack = [];\n    this._tick = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n  }\n  /**\n   * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n   * including the current drawing state, transformations, styles, and instructions.\n   * @returns A new GraphicsContext instance with the same properties and state as this one.\n   */\n  clone() {\n    const clone = new _GraphicsContext();\n    clone.batchMode = this.batchMode;\n    clone.instructions = this.instructions.slice();\n    clone._activePath = this._activePath.clone();\n    clone._transform = this._transform.clone();\n    clone._fillStyle = { ...this._fillStyle };\n    clone._strokeStyle = { ...this._strokeStyle };\n    clone._stateStack = this._stateStack.slice();\n    clone._bounds = this._bounds.clone();\n    clone._boundsDirty = true;\n    return clone;\n  }\n  /**\n   * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n   */\n  get fillStyle() {\n    return this._fillStyle;\n  }\n  set fillStyle(value) {\n    this._fillStyle = toFillStyle(value, _GraphicsContext.defaultFillStyle);\n  }\n  /**\n   * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   */\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._strokeStyle = toStrokeStyle(value, _GraphicsContext.defaultStrokeStyle);\n  }\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n   *                or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(style) {\n    this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    return this;\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   *                or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(style) {\n    this._strokeStyle = toFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    return this;\n  }\n  texture(texture, tint, dx, dy, dw, dh) {\n    this.instructions.push({\n      action: \"texture\",\n      data: {\n        image: texture,\n        dx: dx || 0,\n        dy: dy || 0,\n        dw: dw || texture.frame.width,\n        dh: dh || texture.frame.height,\n        transform: this._transform.clone(),\n        alpha: this._fillStyle.alpha,\n        style: tint ? Color.shared.setValue(tint).toNumber() : 16777215\n      }\n    });\n    this.onUpdate();\n    return this;\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    this._activePath = new GraphicsPath();\n    return this;\n  }\n  fill(style, alpha) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"stroke\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      if (alpha !== void 0 && typeof style === \"number\") {\n        deprecation(v8_0_0, \"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead\");\n        style = { color: style, alpha };\n      }\n      this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    }\n    this.instructions.push({\n      action: \"fill\",\n      // TODO copy fill style!\n      data: { style: this.fillStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  _initNextPathLocation() {\n    const { x, y } = this._activePath.getLastPoint(Point.shared);\n    this._activePath.clear();\n    this._activePath.moveTo(x, y);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(style) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"fill\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      this._strokeStyle = toStrokeStyle(style, _GraphicsContext.defaultStrokeStyle);\n    }\n    this.instructions.push({\n      action: \"stroke\",\n      // TODO copy fill style!\n      data: { style: this.strokeStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  cut() {\n    for (let i = 0; i < 2; i++) {\n      const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n      const holePath = this._activePath.clone();\n      if (lastInstruction) {\n        if (lastInstruction.action === \"stroke\" || lastInstruction.action === \"fill\") {\n          if (lastInstruction.data.hole) {\n            lastInstruction.data.hole.addPath(holePath);\n          } else {\n            lastInstruction.data.hole = holePath;\n            break;\n          }\n        }\n      }\n    }\n    this._initNextPathLocation();\n    return this;\n  }\n  /**\n   * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n   * starting and ending angles, and direction.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The arc's radius.\n   * @param startAngle - The starting angle, in radians.\n   * @param endAngle - The ending angle, in radians.\n   * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arc(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      radius,\n      startAngle,\n      endAngle,\n      counterclockwise\n    );\n    return this;\n  }\n  /**\n   * Adds an arc to the current path with the given control points and radius, connected to the previous point\n   * by a straight line if necessary.\n   * @param x1 - The x-coordinate of the first control point.\n   * @param y1 - The y-coordinate of the first control point.\n   * @param x2 - The x-coordinate of the second control point.\n   * @param y2 - The y-coordinate of the second control point.\n   * @param radius - The arc's radius.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcTo(\n      t.a * x1 + t.c * y1 + t.tx,\n      t.b * x1 + t.d * y1 + t.ty,\n      t.a * x2 + t.c * y2 + t.tx,\n      t.b * x2 + t.d * y2 + t.ty,\n      radius\n    );\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcToSvg(\n      rx,\n      ry,\n      xAxisRotation,\n      // should we rotate this with transform??\n      largeArcFlag,\n      sweepFlag,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.bezierCurveTo(\n      t.a * cp1x + t.c * cp1y + t.tx,\n      t.b * cp1x + t.d * cp1y + t.ty,\n      t.a * cp2x + t.c * cp2y + t.tx,\n      t.b * cp2x + t.d * cp2y + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this._tick++;\n    this._activePath?.closePath();\n    return this;\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY) {\n    this._tick++;\n    this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius) {\n    this._tick++;\n    this._activePath.circle(x, y, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @returns The instance of the current object for chaining.\n   */\n  path(path) {\n    this._tick++;\n    this._activePath.addPath(path, this._transform.clone());\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.lineTo(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    const instructions = this._activePath.instructions;\n    const transformedX = t.a * x + t.c * y + t.tx;\n    const transformedY = t.b * x + t.d * y + t.ty;\n    if (instructions.length === 1 && instructions[0].action === \"moveTo\") {\n      instructions[0].data[0] = transformedX;\n      instructions[0].data[1] = transformedY;\n      return this;\n    }\n    this._activePath.moveTo(\n      transformedX,\n      transformedY\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cpx - The x-coordinate of the control point.\n   * @param cpy - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cpx, cpy, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.quadraticCurveTo(\n      t.a * cpx + t.c * cpy + t.tx,\n      t.b * cpx + t.d * cpy + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h) {\n    this._tick++;\n    this._activePath.rect(x, y, w, h, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius) {\n    this._tick++;\n    this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n   * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n   * rotated, or translated as needed.\n   * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates, of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   */\n  poly(points, close) {\n    this._tick++;\n    this._activePath.poly(points, close, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    this._tick++;\n    this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation) {\n    this._tick++;\n    this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n    return this;\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic, smoothness) {\n    this._tick++;\n    this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n    return this;\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    this._tick++;\n    this._activePath.filletRect(x, y, width, height, fillet);\n    return this;\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    this._tick++;\n    this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  star(x, y, points, radius, innerRadius = 0, rotation = 0) {\n    this._tick++;\n    this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n    return this;\n  }\n  /**\n   * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n   * defined in SVG format to be drawn within the graphics context.\n   * @param svg - The SVG string to be parsed and rendered.\n   */\n  svg(svg) {\n    this._tick++;\n    SVGParser(svg, this);\n    return this;\n  }\n  /**\n   * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n   * This includes transformations, fill styles, and stroke styles.\n   */\n  restore() {\n    const state = this._stateStack.pop();\n    if (state) {\n      this._transform = state.transform;\n      this._fillStyle = state.fillStyle;\n      this._strokeStyle = state.strokeStyle;\n    }\n    return this;\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    this._stateStack.push({\n      transform: this._transform.clone(),\n      fillStyle: { ...this._fillStyle },\n      strokeStyle: { ...this._strokeStyle }\n    });\n    return this;\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this._transform;\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    this._transform.identity();\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the graphics context around the current origin.\n   * @param angle - The angle of rotation in radians.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  rotate(angle) {\n    this._transform.rotate(angle);\n    return this;\n  }\n  /**\n   * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n   * @param x - The scale factor in the horizontal direction.\n   * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  scale(x, y = x) {\n    this._transform.scale(x, y);\n    return this;\n  }\n  setTransform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n      return this;\n    }\n    this._transform.set(a, b, c, d, dx, dy);\n    return this;\n  }\n  transform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.append(a);\n      return this;\n    }\n    tempMatrix.set(a, b, c, d, dx, dy);\n    this._transform.append(tempMatrix);\n    return this;\n  }\n  /**\n   * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n   * @param x - The amount to translate in the horizontal direction.\n   * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  translate(x, y = x) {\n    this._transform.translate(x, y);\n    return this;\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    this._activePath.clear();\n    this.instructions.length = 0;\n    this.resetTransform();\n    this.onUpdate();\n    return this;\n  }\n  onUpdate() {\n    this._boundsDirty = true;\n    if (this.dirty)\n      return;\n    this.emit(\"update\", this, 16);\n    this.dirty = true;\n  }\n  /** The bounds of the graphic shape. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    const bounds = this._bounds;\n    bounds.clear();\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const action = instruction.action;\n      if (action === \"fill\") {\n        const data = instruction.data;\n        bounds.addBounds(data.path.bounds);\n      } else if (action === \"texture\") {\n        const data = instruction.data;\n        bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n      }\n      if (action === \"stroke\") {\n        const data = instruction.data;\n        const alignment = data.style.alignment;\n        const outerPadding = data.style.width * (1 - alignment);\n        const _bounds = data.path.bounds;\n        bounds.addFrame(\n          _bounds.minX - outerPadding,\n          _bounds.minY - outerPadding,\n          _bounds.maxX + outerPadding,\n          _bounds.maxY + outerPadding\n        );\n      }\n    }\n    return bounds;\n  }\n  /**\n   * Check to see if a point is contained within this geometry.\n   * @param point - Point to check if it's contained.\n   * @returns {boolean} `true` if the point is contained within geometry.\n   */\n  containsPoint(point) {\n    if (!this.bounds.containsPoint(point.x, point.y))\n      return false;\n    const instructions = this.instructions;\n    let hasHit = false;\n    for (let k = 0; k < instructions.length; k++) {\n      const instruction = instructions[k];\n      const data = instruction.data;\n      const path = data.path;\n      if (!instruction.action || !path)\n        continue;\n      const style = data.style;\n      const shapes = path.shapePath.shapePrimitives;\n      for (let i = 0; i < shapes.length; i++) {\n        const shape = shapes[i].shape;\n        if (!style || !shape)\n          continue;\n        const transform = shapes[i].transform;\n        const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n        if (instruction.action === \"fill\") {\n          hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n        } else {\n          const strokeStyle = style;\n          hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, strokeStyle.width, strokeStyle.alignment);\n        }\n        const holes = data.hole;\n        if (holes) {\n          const holeShapes = holes.shapePath?.shapePrimitives;\n          if (holeShapes) {\n            for (let j = 0; j < holeShapes.length; j++) {\n              if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y)) {\n                hasHit = false;\n              }\n            }\n          }\n        }\n        if (hasHit) {\n          return true;\n        }\n      }\n    }\n    return hasHit;\n  }\n  /**\n   * Destroys the GraphicsData object.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * context.destroy();\n   * context.destroy(true);\n   * context.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options = false) {\n    this._stateStack.length = 0;\n    this._transform = null;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fillStyle.texture) {\n        this._fillStyle.fill && \"uid\" in this._fillStyle.fill ? this._fillStyle.fill.destroy() : this._fillStyle.texture.destroy(destroyTextureSource);\n      }\n      if (this._strokeStyle.texture) {\n        this._strokeStyle.fill && \"uid\" in this._strokeStyle.fill ? this._strokeStyle.fill.destroy() : this._strokeStyle.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fillStyle = null;\n    this._strokeStyle = null;\n    this.instructions = null;\n    this._activePath = null;\n    this._bounds = null;\n    this._stateStack = null;\n    this.customShader = null;\n    this._transform = null;\n  }\n};\n/** The default fill style to use when none is provided. */\n_GraphicsContext.defaultFillStyle = {\n  /** The color to use for the fill. */\n  color: 16777215,\n  /** The alpha value to use for the fill. */\n  alpha: 1,\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null,\n  /** Whether coordinates are 'global' or 'local' */\n  textureSpace: \"local\"\n};\n/** The default stroke style to use when none is provided. */\n_GraphicsContext.defaultStrokeStyle = {\n  /** The width of the stroke. */\n  width: 1,\n  /** The color to use for the stroke. */\n  color: 16777215,\n  /** The alpha value to use for the stroke. */\n  alpha: 1,\n  /** The alignment of the stroke. */\n  alignment: 0.5,\n  /** The miter limit to use. */\n  miterLimit: 10,\n  /** The line cap style to use. */\n  cap: \"butt\",\n  /** The line join style to use. */\n  join: \"miter\",\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null,\n  /** Whether coordinates are 'global' or 'local' */\n  textureSpace: \"local\",\n  /** If the stroke is a pixel line. */\n  pixelLine: false\n};\nlet GraphicsContext = _GraphicsContext;\n\nexport { GraphicsContext };\n//# sourceMappingURL=GraphicsContext.mjs.map\n","\"use strict\";\nconst isSingleItem = (item) => !Array.isArray(item);\n\nexport { isSingleItem };\n//# sourceMappingURL=isSingleItem.mjs.map\n","\"use strict\";\nvar RendererType = /* @__PURE__ */ ((RendererType2) => {\n  RendererType2[RendererType2[\"WEBGL\"] = 1] = \"WEBGL\";\n  RendererType2[RendererType2[\"WEBGPU\"] = 2] = \"WEBGPU\";\n  RendererType2[RendererType2[\"BOTH\"] = 3] = \"BOTH\";\n  return RendererType2;\n})(RendererType || {});\n\nexport { RendererType };\n//# sourceMappingURL=types.mjs.map\n","\"use strict\";\nclass ViewableBuffer {\n  constructor(sizeOrBuffer) {\n    if (typeof sizeOrBuffer === \"number\") {\n      this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n    } else if (sizeOrBuffer instanceof Uint8Array) {\n      this.rawBinaryData = sizeOrBuffer.buffer;\n    } else {\n      this.rawBinaryData = sizeOrBuffer;\n    }\n    this.uint32View = new Uint32Array(this.rawBinaryData);\n    this.float32View = new Float32Array(this.rawBinaryData);\n    this.size = this.rawBinaryData.byteLength;\n  }\n  /** View on the raw binary data as a `Int8Array`. */\n  get int8View() {\n    if (!this._int8View) {\n      this._int8View = new Int8Array(this.rawBinaryData);\n    }\n    return this._int8View;\n  }\n  /** View on the raw binary data as a `Uint8Array`. */\n  get uint8View() {\n    if (!this._uint8View) {\n      this._uint8View = new Uint8Array(this.rawBinaryData);\n    }\n    return this._uint8View;\n  }\n  /**  View on the raw binary data as a `Int16Array`. */\n  get int16View() {\n    if (!this._int16View) {\n      this._int16View = new Int16Array(this.rawBinaryData);\n    }\n    return this._int16View;\n  }\n  /** View on the raw binary data as a `Int32Array`. */\n  get int32View() {\n    if (!this._int32View) {\n      this._int32View = new Int32Array(this.rawBinaryData);\n    }\n    return this._int32View;\n  }\n  /** View on the raw binary data as a `Float64Array`. */\n  get float64View() {\n    if (!this._float64Array) {\n      this._float64Array = new Float64Array(this.rawBinaryData);\n    }\n    return this._float64Array;\n  }\n  /** View on the raw binary data as a `BigUint64Array`. */\n  get bigUint64View() {\n    if (!this._bigUint64Array) {\n      this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n    }\n    return this._bigUint64Array;\n  }\n  /**\n   * Returns the view of the given type.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *    `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - typed array of given type\n   */\n  view(type) {\n    return this[`${type}View`];\n  }\n  /** Destroys all buffer references. Do not use after calling this. */\n  destroy() {\n    this.rawBinaryData = null;\n    this._int8View = null;\n    this._uint8View = null;\n    this._int16View = null;\n    this.uint16View = null;\n    this._int32View = null;\n    this.uint32View = null;\n    this.float32View = null;\n  }\n  /**\n   * Returns the size of the given type in bytes.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *   `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - size of the type in bytes\n   */\n  static sizeOf(type) {\n    switch (type) {\n      case \"int8\":\n      case \"uint8\":\n        return 1;\n      case \"int16\":\n      case \"uint16\":\n        return 2;\n      case \"int32\":\n      case \"uint32\":\n      case \"float32\":\n        return 4;\n      default:\n        throw new Error(`${type} isn't a valid view type`);\n    }\n  }\n}\n\nexport { ViewableBuffer };\n//# sourceMappingURL=ViewableBuffer.mjs.map\n","\"use strict\";\nconst convertToList = (input, transform, forceTransform = false) => {\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  if (!transform) {\n    return input;\n  }\n  return input.map((item) => {\n    if (typeof item === \"string\" || forceTransform) {\n      return transform(item);\n    }\n    return item;\n  });\n};\n\nexport { convertToList };\n//# sourceMappingURL=convertToList.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2.mjs';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps.mjs';\nimport { uid } from '../../../../../utils/data/uid.mjs';\nimport { TextureStyle } from '../TextureStyle.mjs';\n\n\"use strict\";\nconst _TextureSource = class _TextureSource extends EventEmitter {\n  /**\n   * @param options - options for creating a new TextureSource\n   */\n  constructor(options = {}) {\n    super();\n    this.options = options;\n    /** unique id for this Texture source */\n    this.uid = uid(\"textureSource\");\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @internal\n     */\n    this._resourceType = \"textureSource\";\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @internal\n     */\n    this.uploadMethodId = \"unknown\";\n    /** @internal */\n    this._resolution = 1;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelHeight = 1;\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    this.width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    this.height = 1;\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     */\n    this.sampleCount = 1;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    this.mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    this.autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    this.format = \"rgba8unorm\";\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    this.dimension = \"2d\";\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    this.antialias = false;\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    this._touched = 0;\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    this._batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    this._textureBindLocation = -1;\n    options = { ..._TextureSource.defaultOptions, ...options };\n    this.label = options.label ?? \"\";\n    this.resource = options.resource;\n    this.autoGarbageCollect = options.autoGarbageCollect;\n    this._resolution = options.resolution;\n    if (options.width) {\n      this.pixelWidth = options.width * this._resolution;\n    } else {\n      this.pixelWidth = this.resource ? this.resourceWidth ?? 1 : 1;\n    }\n    if (options.height) {\n      this.pixelHeight = options.height * this._resolution;\n    } else {\n      this.pixelHeight = this.resource ? this.resourceHeight ?? 1 : 1;\n    }\n    this.width = this.pixelWidth / this._resolution;\n    this.height = this.pixelHeight / this._resolution;\n    this.format = options.format;\n    this.dimension = options.dimensions;\n    this.mipLevelCount = options.mipLevelCount;\n    this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n    this.sampleCount = options.sampleCount;\n    this.antialias = options.antialias;\n    this.alphaMode = options.alphaMode;\n    this.style = new TextureStyle(definedProps(options));\n    this.destroyed = false;\n    this._refreshPOT();\n  }\n  /** returns itself */\n  get source() {\n    return this;\n  }\n  /** the style of the texture */\n  get style() {\n    return this._style;\n  }\n  set style(value) {\n    if (this.style === value)\n      return;\n    this._style?.off(\"change\", this._onStyleChange, this);\n    this._style = value;\n    this._style?.on(\"change\", this._onStyleChange, this);\n    this._onStyleChange();\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._style.maxAnisotropy = value;\n  }\n  get maxAnisotropy() {\n    return this._style.maxAnisotropy;\n  }\n  /** setting this will set wrapModeU, wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this._style.addressMode;\n  }\n  set addressMode(value) {\n    this._style.addressMode = value;\n  }\n  /** setting this will set wrapModeU, wrapModeV and wrapModeW all at once! */\n  get repeatMode() {\n    return this._style.addressMode;\n  }\n  set repeatMode(value) {\n    this._style.addressMode = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n  get magFilter() {\n    return this._style.magFilter;\n  }\n  set magFilter(value) {\n    this._style.magFilter = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n  get minFilter() {\n    return this._style.minFilter;\n  }\n  set minFilter(value) {\n    this._style.minFilter = value;\n  }\n  /** Specifies behavior for sampling between mipmap levels. */\n  get mipmapFilter() {\n    return this._style.mipmapFilter;\n  }\n  set mipmapFilter(value) {\n    this._style.mipmapFilter = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMinClamp() {\n    return this._style.lodMinClamp;\n  }\n  set lodMinClamp(value) {\n    this._style.lodMinClamp = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMaxClamp() {\n    return this._style.lodMaxClamp;\n  }\n  set lodMaxClamp(value) {\n    this._style.lodMaxClamp = value;\n  }\n  _onStyleChange() {\n    this.emit(\"styleChange\", this);\n  }\n  /** call this if you have modified the texture outside of the constructor */\n  update() {\n    if (this.resource) {\n      const resolution = this._resolution;\n      const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n      if (didResize)\n        return;\n    }\n    this.emit(\"update\", this);\n  }\n  /** Destroys this texture source */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    if (this._style) {\n      this._style.destroy();\n      this._style = null;\n    }\n    this.uploadMethodId = null;\n    this.resource = null;\n    this.removeAllListeners();\n  }\n  /**\n   * This will unload the Texture source from the GPU. This will free up the GPU memory\n   * As soon as it is required fore rendering, it will be re-uploaded.\n   */\n  unload() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    this.emit(\"unload\", this);\n  }\n  /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n  get resourceWidth() {\n    const { resource } = this;\n    return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n  }\n  /** the height of the resource. This is the REAL pure number, not accounting resolution */\n  get resourceHeight() {\n    const { resource } = this;\n    return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n  }\n  /**\n   * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n   * but will the size of the texture when rendered.\n   *\n   * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n   * density will have increased)\n   */\n  get resolution() {\n    return this._resolution;\n  }\n  set resolution(resolution) {\n    if (this._resolution === resolution)\n      return;\n    this._resolution = resolution;\n    this.width = this.pixelWidth / resolution;\n    this.height = this.pixelHeight / resolution;\n  }\n  /**\n   * Resize the texture, this is handy if you want to use the texture as a render texture\n   * @param width - the new width of the texture\n   * @param height - the new height of the texture\n   * @param resolution - the new resolution of the texture\n   * @returns - if the texture was resized\n   */\n  resize(width, height, resolution) {\n    resolution || (resolution = this._resolution);\n    width || (width = this.width);\n    height || (height = this.height);\n    const newPixelWidth = Math.round(width * resolution);\n    const newPixelHeight = Math.round(height * resolution);\n    this.width = newPixelWidth / resolution;\n    this.height = newPixelHeight / resolution;\n    this._resolution = resolution;\n    if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight) {\n      return false;\n    }\n    this._refreshPOT();\n    this.pixelWidth = newPixelWidth;\n    this.pixelHeight = newPixelHeight;\n    this.emit(\"resize\", this);\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    return true;\n  }\n  /**\n   * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n   * This is only important for RenderTexture instances, as standard Texture instances will have their\n   * mipmaps generated on upload. You should call this method after you make any change to the texture\n   *\n   * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n   * We want you, the developer to specify when this action should happen.\n   *\n   * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n   */\n  updateMipmaps() {\n    if (this.autoGenerateMipmaps && this.mipLevelCount > 1) {\n      this.emit(\"updateMipmaps\", this);\n    }\n  }\n  set wrapMode(value) {\n    this._style.wrapMode = value;\n  }\n  get wrapMode() {\n    return this._style.wrapMode;\n  }\n  set scaleMode(value) {\n    this._style.scaleMode = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this._style.scaleMode;\n  }\n  /**\n   * Refresh check for isPowerOfTwo texture based on size\n   * @private\n   */\n  _refreshPOT() {\n    this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n  }\n  static test(_resource) {\n    throw new Error(\"Unimplemented\");\n  }\n};\n/** The default options used when creating a new TextureSource. override these to add your own defaults */\n_TextureSource.defaultOptions = {\n  resolution: 1,\n  format: \"bgra8unorm\",\n  alphaMode: \"premultiply-alpha-on-upload\",\n  dimensions: \"2d\",\n  mipLevelCount: 1,\n  autoGenerateMipmaps: false,\n  sampleCount: 1,\n  antialias: false,\n  autoGarbageCollect: false\n};\nlet TextureSource = _TextureSource;\n\nexport { TextureSource };\n//# sourceMappingURL=TextureSource.mjs.map\n","import { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction addMaskBounds(mask, bounds, skipUpdateTransform) {\n  const boundsToMask = tempBounds;\n  mask.measurable = true;\n  getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n  bounds.addBoundsMask(boundsToMask);\n  mask.measurable = false;\n}\n\nexport { addMaskBounds };\n//# sourceMappingURL=addMaskBounds.mjs.map\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds.mjs';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addMaskLocalBounds(mask, bounds, localRoot) {\n  const boundsToMask = boundsPool.get();\n  mask.measurable = true;\n  const tempMatrix = matrixPool.get().identity();\n  const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n  getLocalBounds(mask, boundsToMask, relativeMask);\n  mask.measurable = false;\n  bounds.addBoundsMask(boundsToMask);\n  matrixPool.return(tempMatrix);\n  boundsPool.return(boundsToMask);\n}\nfunction getMatrixRelativeToParent(target, root, matrix) {\n  if (!target) {\n    warn(\"Mask bounds, renderable is not inside the root container\");\n    return matrix;\n  }\n  if (target !== root) {\n    getMatrixRelativeToParent(target.parent, root, matrix);\n    target.updateLocalTransform();\n    matrix.append(target.localTransform);\n  }\n  return matrix;\n}\n\nexport { addMaskLocalBounds };\n//# sourceMappingURL=addMaskLocalBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass AlphaMask {\n  constructor(options) {\n    this.priority = 0;\n    this.inverse = false;\n    this.pipe = \"alphaMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.renderMaskToTexture = !(mask instanceof Sprite);\n    this.mask.renderable = this.renderMaskToTexture;\n    this.mask.includeInBuild = !this.renderMaskToTexture;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    if (!this.inverse) {\n      addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Sprite;\n  }\n}\nAlphaMask.extension = ExtensionType.MaskEffect;\n\nexport { AlphaMask };\n//# sourceMappingURL=AlphaMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"colorMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n  }\n  destroy() {\n  }\n  static test(mask) {\n    return typeof mask === \"number\";\n  }\n}\nColorMask.extension = ExtensionType.MaskEffect;\n\nexport { ColorMask };\n//# sourceMappingURL=ColorMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Container } from '../../../scene/container/Container.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass StencilMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"stencilMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.mask.includeInBuild = false;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask.includeInBuild = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Container;\n  }\n}\nStencilMask.extension = ExtensionType.MaskEffect;\n\nexport { StencilMask };\n//# sourceMappingURL=StencilMask.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { AlphaMask } from './mask/alpha/AlphaMask.mjs';\nimport { ColorMask } from './mask/color/ColorMask.mjs';\nimport { StencilMask } from './mask/stencil/StencilMask.mjs';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferImageSource.mjs';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource.mjs';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource.mjs';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource.mjs';\nimport './renderers/shared/texture/utils/textureFrom.mjs';\nimport './mask/MaskEffectManager.mjs';\n\n\"use strict\";\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nconst GlobalResourceRegistry = {\n  /**\n   * Set of registered pools and cleanable objects.\n   * @private\n   */\n  _registeredResources: /* @__PURE__ */ new Set(),\n  /**\n   * Registers a pool or cleanable object for cleanup.\n   * @param {Cleanable} pool - The pool or object to register.\n   */\n  register(pool) {\n    this._registeredResources.add(pool);\n  },\n  /**\n   * Unregisters a pool or cleanable object from cleanup.\n   * @param {Cleanable} pool - The pool or object to unregister.\n   */\n  unregister(pool) {\n    this._registeredResources.delete(pool);\n  },\n  /** Clears all registered pools and cleanable objects. This will call clear() on each registered item. */\n  release() {\n    this._registeredResources.forEach((pool) => pool.clear());\n  },\n  /**\n   * Gets the number of registered pools and cleanable objects.\n   * @returns {number} The count of registered items.\n   */\n  get registeredCount() {\n    return this._registeredResources.size;\n  },\n  /**\n   * Checks if a specific pool or cleanable object is registered.\n   * @param {Cleanable} pool - The pool or object to check.\n   * @returns {boolean} True if the item is registered, false otherwise.\n   */\n  isRegistered(pool) {\n    return this._registeredResources.has(pool);\n  },\n  /**\n   * Removes all registrations without clearing the pools.\n   * Useful if you want to reset the collector without affecting the pools.\n   */\n  reset() {\n    this._registeredResources.clear();\n  }\n};\n\nexport { GlobalResourceRegistry };\n//# sourceMappingURL=GlobalResourceRegistry.mjs.map\n","\"use strict\";\nconst textureBatchBitGpuCache = {};\nfunction generateBindingSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"@group(1) @binding(0) var textureSource1: texture_2d<f32>;\");\n    src.push(\"@group(1) @binding(1) var textureSampler1: sampler;\");\n  } else {\n    let bindingIndex = 0;\n    for (let i = 0; i < maxTextures; i++) {\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSource${i + 1}: texture_2d<f32>;`);\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSampler${i + 1}: sampler;`);\n    }\n  }\n  return src.join(\"\\n\");\n}\nfunction generateSampleSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);\");\n  } else {\n    src.push(\"switch vTextureId {\");\n    for (let i = 0; i < maxTextures; i++) {\n      if (i === maxTextures - 1) {\n        src.push(`  default:{`);\n      } else {\n        src.push(`  case ${i}:{`);\n      }\n      src.push(`      outColor = textureSampleGrad(textureSource${i + 1}, textureSampler${i + 1}, vUV, uvDx, uvDy);`);\n      src.push(`      break;}`);\n    }\n    src.push(`}`);\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBit(maxTextures) {\n  if (!textureBatchBitGpuCache[maxTextures]) {\n    textureBatchBitGpuCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${generateBindingSrc(maxTextures)}\n            `,\n        main: `\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${generateSampleSrc(maxTextures)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGpuCache[maxTextures];\n}\nconst textureBatchBitGlCache = {};\nfunction generateSampleGlSrc(maxTextures) {\n  const src = [];\n  for (let i = 0; i < maxTextures; i++) {\n    if (i > 0) {\n      src.push(\"else\");\n    }\n    if (i < maxTextures - 1) {\n      src.push(`if(vTextureId < ${i}.5)`);\n    }\n    src.push(\"{\");\n    src.push(`\toutColor = texture(uTextures[${i}], vUV);`);\n    src.push(\"}\");\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBitGl(maxTextures) {\n  if (!textureBatchBitGlCache[maxTextures]) {\n    textureBatchBitGlCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${maxTextures}];\n\n            `,\n        main: `\n\n                ${generateSampleGlSrc(maxTextures)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGlCache[maxTextures];\n}\n\nexport { generateTextureBatchBit, generateTextureBatchBitGl };\n//# sourceMappingURL=generateTextureBatchBit.mjs.map\n","import { Cache } from '../../../../../assets/cache/Cache.mjs';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from '../sources/TextureSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst sources = [];\nextensions.handleByList(ExtensionType.TextureSource, sources);\nfunction autoDetectSource(options = {}) {\n  return textureSourceFrom(options);\n}\nfunction textureSourceFrom(options = {}) {\n  const hasResource = options && options.resource;\n  const res = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  for (let i = 0; i < sources.length; i++) {\n    const Source = sources[i];\n    if (Source.test(res)) {\n      return new Source(opts);\n    }\n  }\n  throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\nfunction resourceToTexture(options = {}, skipCache = false) {\n  const hasResource = options && options.resource;\n  const resource = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  if (!skipCache && Cache.has(resource)) {\n    return Cache.get(resource);\n  }\n  const texture = new Texture({ source: textureSourceFrom(opts) });\n  texture.on(\"destroy\", () => {\n    if (Cache.has(resource)) {\n      Cache.remove(resource);\n    }\n  });\n  if (!skipCache) {\n    Cache.set(resource, texture);\n  }\n  return texture;\n}\nfunction textureFrom(id, skipCache = false) {\n  if (typeof id === \"string\") {\n    return Cache.get(id);\n  } else if (id instanceof TextureSource) {\n    return new Texture({ source: id });\n  }\n  return resourceToTexture(id, skipCache);\n}\nTexture.from = textureFrom;\nTextureSource.from = textureSourceFrom;\n\nexport { autoDetectSource, resourceToTexture, textureFrom };\n//# sourceMappingURL=textureFrom.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nfunction assertPath(path2) {\n  if (typeof path2 !== \"string\") {\n    throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`);\n  }\n}\nfunction removeUrlParams(url) {\n  const re = url.split(\"?\")[0];\n  return re.split(\"#\")[0];\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n}\nfunction normalizeStringPosix(path2, allowAboveRoot) {\n  let res = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let code = -1;\n  for (let i = 0; i <= path2.length; ++i) {\n    if (i < path2.length) {\n      code = path2.charCodeAt(i);\n    } else if (code === 47) {\n      break;\n    } else {\n      code = 47;\n    }\n    if (code === 47) {\n      if (lastSlash === i - 1 || dots === 1) {\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(\"/\");\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(\"/\");\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = \"\";\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"/..\";\n          } else {\n            res = \"..\";\n          }\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += `/${path2.slice(lastSlash + 1, i)}`;\n        } else {\n          res = path2.slice(lastSlash + 1, i);\n        }\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\nconst path = {\n  /**\n   * Converts a path to posix format.\n   * @param path - The path to convert to posix\n   * @example\n   * ```ts\n   * // Convert a Windows path to POSIX format\n   * path.toPosix('C:\\\\Users\\\\User\\\\Documents\\\\file.txt');\n   * // -> 'C:/Users/User/Documents/file.txt'\n   * ```\n   */\n  toPosix(path2) {\n    return replaceAll(path2, \"\\\\\", \"/\");\n  },\n  /**\n   * Checks if the path is a URL e.g. http://, https://\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a URL\n   * path.isUrl('http://www.example.com');\n   * // -> true\n   * path.isUrl('C:/Users/User/Documents/file.txt');\n   * // -> false\n   * ```\n   */\n  isUrl(path2) {\n    return /^https?:/.test(this.toPosix(path2));\n  },\n  /**\n   * Checks if the path is a data URL\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a data URL\n   * path.isDataUrl('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA...');\n   * // -> true\n   * ```\n   */\n  isDataUrl(path2) {\n    return /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i.test(path2);\n  },\n  /**\n   * Checks if the path is a blob URL\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a blob URL\n   * path.isBlobUrl('blob:http://www.example.com/12345678-1234-1234-1234-123456789012');\n   * // -> true\n   * ```\n   */\n  isBlobUrl(path2) {\n    return path2.startsWith(\"blob:\");\n  },\n  /**\n   * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n   * This will return true for windows file paths\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path has a protocol\n   * path.hasProtocol('http://www.example.com');\n   * // -> true\n   * path.hasProtocol('C:/Users/User/Documents/file.txt');\n   * // -> true\n   * ```\n   */\n  hasProtocol(path2) {\n    return /^[^/:]+:/.test(this.toPosix(path2));\n  },\n  /**\n   * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n   * @param path - The path to get the protocol from\n   * @example\n   * ```ts\n   * // Get the protocol from a URL\n   * path.getProtocol('http://www.example.com/path/to/resource');\n   * // -> 'http://'\n   * // Get the protocol from a file path\n   * path.getProtocol('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/'\n   * ```\n   */\n  getProtocol(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    const matchFile = /^file:\\/\\/\\//.exec(path2);\n    if (matchFile) {\n      return matchFile[0];\n    }\n    const matchProtocol = /^[^/:]+:\\/{0,2}/.exec(path2);\n    if (matchProtocol) {\n      return matchProtocol[0];\n    }\n    return \"\";\n  },\n  /**\n   * Converts URL to an absolute path.\n   * When loading from a Web Worker, we must use absolute paths.\n   * If the URL is already absolute we return it as is\n   * If it's not, we convert it\n   * @param url - The URL to test\n   * @param customBaseUrl - The base URL to use\n   * @param customRootUrl - The root URL to use\n   * @example\n   * ```ts\n   * // Convert a relative URL to an absolute path\n   * path.toAbsolute('images/texture.png', 'http://example.com/assets/');\n   * // -> 'http://example.com/assets/images/texture.png'\n   * ```\n   */\n  toAbsolute(url, customBaseUrl, customRootUrl) {\n    assertPath(url);\n    if (this.isDataUrl(url) || this.isBlobUrl(url))\n      return url;\n    const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n    const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n    url = this.toPosix(url);\n    if (url.startsWith(\"/\")) {\n      return path.join(rootUrl, url.slice(1));\n    }\n    const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n    return absolutePath;\n  },\n  /**\n   * Normalizes the given path, resolving '..' and '.' segments\n   * @param path - The path to normalize\n   * @example\n   * ```ts\n   * // Normalize a path with relative segments\n   * path.normalize('http://www.example.com/foo/bar/../baz');\n   * // -> 'http://www.example.com/foo/baz'\n   * // Normalize a file path with relative segments\n   * path.normalize('C:\\\\Users\\\\User\\\\Documents\\\\..\\\\file.txt');\n   * // -> 'C:/Users/User/file.txt'\n   * ```\n   */\n  normalize(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    if (this.isDataUrl(path2) || this.isBlobUrl(path2))\n      return path2;\n    path2 = this.toPosix(path2);\n    let protocol = \"\";\n    const isAbsolute = path2.startsWith(\"/\");\n    if (this.hasProtocol(path2)) {\n      protocol = this.rootname(path2);\n      path2 = path2.slice(protocol.length);\n    }\n    const trailingSeparator = path2.endsWith(\"/\");\n    path2 = normalizeStringPosix(path2, false);\n    if (path2.length > 0 && trailingSeparator)\n      path2 += \"/\";\n    if (isAbsolute)\n      return `/${path2}`;\n    return protocol + path2;\n  },\n  /**\n   * Determines if path is an absolute path.\n   * Absolute paths can be urls, data urls, or paths on disk\n   * @param path - The path to test\n   * @example\n   * ```ts\n   * // Check if a path is absolute\n   * path.isAbsolute('http://www.example.com/foo/bar');\n   * // -> true\n   * path.isAbsolute('C:/Users/User/Documents/file.txt');\n   * // -> true\n   * ```\n   */\n  isAbsolute(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    if (this.hasProtocol(path2))\n      return true;\n    return path2.startsWith(\"/\");\n  },\n  /**\n   * Joins all given path segments together using the platform-specific separator as a delimiter,\n   * then normalizes the resulting path\n   * @param segments - The segments of the path to join\n   * @example\n   * ```ts\n   * // Join multiple path segments\n   * path.join('assets', 'images', 'sprite.png');\n   * // -> 'assets/images/sprite.png'\n   * // Join with relative segments\n   * path.join('assets', 'images', '../textures', 'sprite.png');\n   * // -> 'assets/textures/sprite.png'\n   * ```\n   */\n  join(...segments) {\n    if (segments.length === 0) {\n      return \".\";\n    }\n    let joined;\n    for (let i = 0; i < segments.length; ++i) {\n      const arg = segments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === void 0)\n          joined = arg;\n        else {\n          const prevArg = segments[i - 1] ?? \"\";\n          if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase())) {\n            joined += `/../${arg}`;\n          } else {\n            joined += `/${arg}`;\n          }\n        }\n      }\n    }\n    if (joined === void 0) {\n      return \".\";\n    }\n    return this.normalize(joined);\n  },\n  /**\n   * Returns the directory name of a path\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the directory name of a path\n   * path.dirname('http://www.example.com/foo/bar/baz.png');\n   * // -> 'http://www.example.com/foo/bar'\n   * // Get the directory name of a file path\n   * path.dirname('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/Users/User/Documents'\n   * ```\n   */\n  dirname(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    path2 = this.toPosix(path2);\n    let code = path2.charCodeAt(0);\n    const hasRoot = code === 47;\n    let end = -1;\n    let matchedSlash = true;\n    const proto = this.getProtocol(path2);\n    const origpath = path2;\n    path2 = path2.slice(proto.length);\n    for (let i = path2.length - 1; i >= 1; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        matchedSlash = false;\n      }\n    }\n    if (end === -1)\n      return hasRoot ? \"/\" : this.isUrl(origpath) ? proto + path2 : proto;\n    if (hasRoot && end === 1)\n      return \"//\";\n    return proto + path2.slice(0, end);\n  },\n  /**\n   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the root of a URL\n   * path.rootname('http://www.example.com/foo/bar/baz.png');\n   * // -> 'http://www.example.com/'\n   * // Get the root of a file path\n   * path.rootname('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/'\n   * ```\n   */\n  rootname(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    let root = \"\";\n    if (path2.startsWith(\"/\"))\n      root = \"/\";\n    else {\n      root = this.getProtocol(path2);\n    }\n    if (this.isUrl(path2)) {\n      const index = path2.indexOf(\"/\", root.length);\n      if (index !== -1) {\n        root = path2.slice(0, index);\n      } else\n        root = path2;\n      if (!root.endsWith(\"/\"))\n        root += \"/\";\n    }\n    return root;\n  },\n  /**\n   * Returns the last portion of a path\n   * @param path - The path to test\n   * @param ext - Optional extension to remove\n   * @example\n   * ```ts\n   * // Get the basename of a URL\n   * path.basename('http://www.example.com/foo/bar/baz.png');\n   * // -> 'baz.png'\n   * // Get the basename of a file path\n   * path.basename('C:/Users/User/Documents/file.txt');\n   * // -> 'file.txt'\n   * ```\n   */\n  basename(path2, ext) {\n    assertPath(path2);\n    if (ext)\n      assertPath(ext);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let start = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i;\n    if (ext !== void 0 && ext.length > 0 && ext.length <= path2.length) {\n      if (ext.length === path2.length && ext === path2)\n        return \"\";\n      let extIdx = ext.length - 1;\n      let firstNonSlashEnd = -1;\n      for (i = path2.length - 1; i >= 0; --i) {\n        const code = path2.charCodeAt(i);\n        if (code === 47) {\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                end = i;\n              }\n            } else {\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path2.length;\n      return path2.slice(start, end);\n    }\n    for (i = path2.length - 1; i >= 0; --i) {\n      if (path2.charCodeAt(i) === 47) {\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n    if (end === -1)\n      return \"\";\n    return path2.slice(start, end);\n  },\n  /**\n   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n   * the first character of the basename of path, an empty string is returned.\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the extension of a URL\n   * path.extname('http://www.example.com/foo/bar/baz.png');\n   * // -> '.png'\n   * // Get the extension of a file path\n   * path.extname('C:/Users/User/Documents/file.txt');\n   * // -> '.txt'\n   * ```\n   */\n  extname(path2) {\n    assertPath(path2);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let preDotState = 0;\n    for (let i = path2.length - 1; i >= 0; --i) {\n      const code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return \"\";\n    }\n    return path2.slice(startDot, end);\n  },\n  /**\n   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Parse a URL\n   * const parsed = path.parse('http://www.example.com/foo/bar/baz.png');\n   * // -> {\n   * //   root: 'http://www.example.com/',\n   * //   dir: 'http://www.example.com/foo/bar',\n   * //   base: 'baz.png',\n   * //   ext: '.png',\n   * //   name: 'baz'\n   * // }\n   * // Parse a file path\n   * const parsedFile = path.parse('C:/Users/User/Documents/file.txt');\n   * // -> {\n   * //   root: 'C:/',\n   * //   dir: 'C:/Users/User/Documents',\n   * //   base: 'file.txt',\n   * //   ext: '.txt',\n   * //   name: 'file'\n   * // }\n   * ```\n   */\n  parse(path2) {\n    assertPath(path2);\n    const ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n    if (path2.length === 0)\n      return ret;\n    path2 = removeUrlParams(this.toPosix(path2));\n    let code = path2.charCodeAt(0);\n    const isAbsolute = this.isAbsolute(path2);\n    let start;\n    const protocol = \"\";\n    ret.root = this.rootname(path2);\n    if (isAbsolute || this.hasProtocol(path2)) {\n      start = 1;\n    } else {\n      start = 0;\n    }\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i = path2.length - 1;\n    let preDotState = 0;\n    for (; i >= start; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path2.slice(1, end);\n        else\n          ret.base = ret.name = path2.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path2.slice(1, startDot);\n        ret.base = path2.slice(1, end);\n      } else {\n        ret.name = path2.slice(startPart, startDot);\n        ret.base = path2.slice(startPart, end);\n      }\n      ret.ext = path2.slice(startDot, end);\n    }\n    ret.dir = this.dirname(path2);\n    if (protocol)\n      ret.dir = protocol + ret.dir;\n    return ret;\n  },\n  sep: \"/\",\n  delimiter: \":\",\n  joinExtensions: [\".html\"]\n};\n\nexport { path };\n//# sourceMappingURL=path.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nclass AbstractBitmapFont extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** The map of characters by character code. */\n    this.chars = /* @__PURE__ */ Object.create(null);\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    this.lineHeight = 0;\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    this.fontFamily = \"\";\n    /** The metrics of the font face. */\n    this.fontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    this.baseLineOffset = 0;\n    /** The range and type of the distance field for this font. */\n    this.distanceField = { type: \"none\", range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    this.pages = [];\n    /** should the fill for this font be applied as a tint to the text. */\n    this.applyFillAsTint = true;\n    /** The size of the font face in pixels. */\n    this.baseMeasurementFontSize = 100;\n    this.baseRenderedFontSize = 100;\n  }\n  /**\n   * The name of the font face.\n   * @deprecated since 8.0.0 Use `fontFamily` instead.\n   */\n  get font() {\n    deprecation(v8_0_0, \"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.\");\n    return this.fontFamily;\n  }\n  /**\n   * The map of base page textures (i.e., sheets of glyphs).\n   * @deprecated since 8.0.0 Use `pages` instead.\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  /**\n   * The size of the font face in pixels.\n   * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n   */\n  get size() {\n    deprecation(v8_0_0, \"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.\");\n    return this.fontMetrics.fontSize;\n  }\n  /**\n   * The kind of distance field for this font or \"none\".\n   * @deprecated since 8.0.0 Use `distanceField.type` instead.\n   */\n  get distanceFieldRange() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.\");\n    return this.distanceField.range;\n  }\n  /**\n   * The range of the distance field in pixels.\n   * @deprecated since 8.0.0 Use `distanceField.range` instead.\n   */\n  get distanceFieldType() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.\");\n    return this.distanceField.type;\n  }\n  destroy(destroyTextures = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    for (const i in this.chars) {\n      this.chars[i].texture?.destroy();\n    }\n    this.chars = null;\n    if (destroyTextures) {\n      this.pages.forEach((page) => page.texture.destroy(true));\n      this.pages = null;\n    }\n  }\n}\n\nexport { AbstractBitmapFont };\n//# sourceMappingURL=AbstractBitmapFont.mjs.map\n","\"use strict\";\nconst warnings = /* @__PURE__ */ new Set();\nconst v8_0_0 = \"8.0.0\";\nconst v8_3_4 = \"8.3.4\";\nconst deprecationState = {\n  quiet: false,\n  noColor: false\n};\nconst deprecation = (version, message, ignoreDepth = 3) => {\n  if (deprecationState.quiet || warnings.has(message))\n    return;\n  let stack = new Error().stack;\n  const deprecationMessage = `${message}\nDeprecated since v${version}`;\n  const useGroup = typeof console.groupCollapsed === \"function\" && !deprecationState.noColor;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", deprecationMessage);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (useGroup) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        deprecationMessage\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", deprecationMessage);\n      console.warn(stack);\n    }\n  }\n  warnings.add(message);\n};\nObject.defineProperties(deprecation, {\n  quiet: {\n    get: () => deprecationState.quiet,\n    set: (value) => {\n      deprecationState.quiet = value;\n    },\n    enumerable: true,\n    configurable: false\n  },\n  noColor: {\n    get: () => deprecationState.noColor,\n    set: (value) => {\n      deprecationState.noColor = value;\n    },\n    enumerable: true,\n    configurable: false\n  }\n});\n\nexport { deprecation, v8_0_0, v8_3_4 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nclass FilterEffect {\n  constructor() {\n    /** the pipe that knows how to handle this effect */\n    this.pipe = \"filter\";\n    /** the priority of this effect */\n    this.priority = 1;\n  }\n  destroy() {\n    for (let i = 0; i < this.filters.length; i++) {\n      this.filters[i].destroy();\n    }\n    this.filters = null;\n    this.filterArea = null;\n  }\n}\n\nexport { FilterEffect };\n//# sourceMappingURL=FilterEffect.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkrts_game\"] = self[\"webpackChunkrts_game\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst browserExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"browser\",\n    priority: -1\n  },\n  test: () => true,\n  load: async () => {\n    await import('./browserAll.mjs');\n  }\n};\n\nexport { browserExt };\n//# sourceMappingURL=browserExt.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst webworkerExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"webworker\",\n    priority: 0\n  },\n  test: () => typeof self !== \"undefined\" && self.WorkerGlobalScope !== void 0,\n  load: async () => {\n    await import('./webworkerAll.mjs');\n  }\n};\n\nexport { webworkerExt };\n//# sourceMappingURL=webworkerExt.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nlet _isWebGLSupported;\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n  if (_isWebGLSupported !== void 0)\n    return _isWebGLSupported;\n  _isWebGLSupported = (() => {\n    const contextOptions = {\n      stencil: true,\n      failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    };\n    try {\n      if (!DOMAdapter.get().getWebGLRenderingContext()) {\n        return false;\n      }\n      const canvas = DOMAdapter.get().createCanvas();\n      let gl = canvas.getContext(\"webgl\", contextOptions);\n      const success = !!gl?.getContextAttributes()?.stencil;\n      if (gl) {\n        const loseContext = gl.getExtension(\"WEBGL_lose_context\");\n        if (loseContext) {\n          loseContext.loseContext();\n        }\n      }\n      gl = null;\n      return success;\n    } catch (_e) {\n      return false;\n    }\n  })();\n  return _isWebGLSupported;\n}\n\nexport { isWebGLSupported };\n//# sourceMappingURL=isWebGLSupported.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet _isWebGPUSupported;\nasync function isWebGPUSupported(options = {}) {\n  if (_isWebGPUSupported !== void 0)\n    return _isWebGPUSupported;\n  _isWebGPUSupported = await (async () => {\n    const gpu = DOMAdapter.get().getNavigator().gpu;\n    if (!gpu) {\n      return false;\n    }\n    try {\n      const adapter = await gpu.requestAdapter(options);\n      await adapter.requestDevice();\n      return true;\n    } catch (_e) {\n      return false;\n    }\n  })();\n  return _isWebGPUSupported;\n}\n\nexport { isWebGPUSupported };\n//# sourceMappingURL=isWebGPUSupported.mjs.map\n","import { isWebGLSupported } from '../../utils/browser/isWebGLSupported.mjs';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported.mjs';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nconst renderPriority = [\"webgl\", \"webgpu\", \"canvas\"];\nasync function autoDetectRenderer(options) {\n  let preferredOrder = [];\n  if (options.preference) {\n    preferredOrder.push(options.preference);\n    renderPriority.forEach((item) => {\n      if (item !== options.preference) {\n        preferredOrder.push(item);\n      }\n    });\n  } else {\n    preferredOrder = renderPriority.slice();\n  }\n  let RendererClass;\n  let finalOptions = {};\n  for (let i = 0; i < preferredOrder.length; i++) {\n    const rendererType = preferredOrder[i];\n    if (rendererType === \"webgpu\" && await isWebGPUSupported()) {\n      const { WebGPURenderer } = await import('./gpu/WebGPURenderer.mjs');\n      RendererClass = WebGPURenderer;\n      finalOptions = { ...options, ...options.webgpu };\n      break;\n    } else if (rendererType === \"webgl\" && isWebGLSupported(\n      options.failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    )) {\n      const { WebGLRenderer } = await import('./gl/WebGLRenderer.mjs');\n      RendererClass = WebGLRenderer;\n      finalOptions = { ...options, ...options.webgl };\n      break;\n    } else if (rendererType === \"canvas\") {\n      finalOptions = { ...options };\n      throw new Error(\"CanvasRenderer is not yet implemented\");\n    }\n  }\n  delete finalOptions.webgpu;\n  delete finalOptions.webgl;\n  if (!RendererClass) {\n    throw new Error(\"No available renderer for the current environment\");\n  }\n  const renderer = new RendererClass();\n  await renderer.init(finalOptions);\n  return renderer;\n}\n\nexport { autoDetectRenderer };\n//# sourceMappingURL=autoDetectRenderer.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { ApplicationInitHook } from '../utils/global/globalHooks.mjs';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _Application = class _Application {\n  constructor(...args) {\n    /**\n     * The root display container for your application.\n     * All visual elements should be added to this container or its children.\n     * @example\n     * ```js\n     * // Create a sprite and add it to the stage\n     * const sprite = Sprite.from('image.png');\n     * app.stage.addChild(sprite);\n     *\n     * // Create a container for grouping objects\n     * const container = new Container();\n     * app.stage.addChild(container);\n     * ```\n     */\n    this.stage = new Container();\n    if (args[0] !== void 0) {\n      deprecation(v8_0_0, \"Application constructor options are deprecated, please use Application.init() instead.\");\n    }\n  }\n  /**\n   * Initializes the PixiJS application with the specified options.\n   *\n   * This method must be called after creating a new Application instance.\n   * @param options - Configuration options for the application and renderer\n   * @returns A promise that resolves when initialization is complete\n   * @example\n   * ```js\n   * const app = new Application();\n   *\n   * // Initialize with custom options\n   * await app.init({\n   *     width: 800,\n   *     height: 600,\n   *     backgroundColor: 0x1099bb,\n   *     preference: 'webgl', // or 'webgpu'\n   * });\n   * ```\n   */\n  async init(options) {\n    options = { ...options };\n    this.renderer = await autoDetectRenderer(options);\n    _Application._plugins.forEach((plugin) => {\n      plugin.init.call(this, options);\n    });\n  }\n  /**\n   * Renders the current stage to the screen.\n   *\n   * When using the default setup with {@link TickerPlugin} (enabled by default), you typically don't need to call\n   * this method directly as rendering is handled automatically.\n   *\n   * Only use this method if you've disabled the {@link TickerPlugin} or need custom\n   * render timing control.\n   * @example\n   * ```js\n   * // Example 1: Default setup (TickerPlugin handles rendering)\n   * const app = new Application();\n   * await app.init();\n   * // No need to call render() - TickerPlugin handles it\n   *\n   * // Example 2: Custom rendering loop (if TickerPlugin is disabled)\n   * const app = new Application();\n   * await app.init({ autoStart: false }); // Disable automatic rendering\n   *\n   * function animate() {\n   *     app.render();\n   *     requestAnimationFrame(animate);\n   * }\n   * animate();\n   * ```\n   */\n  render() {\n    this.renderer.render({ container: this.stage });\n  }\n  /**\n   * Reference to the renderer's canvas element. This is the HTML element\n   * that displays your application's graphics.\n   * @readonly\n   * @type {HTMLCanvasElement}\n   * @example\n   * ```js\n   * // Create a new application\n   * const app = new Application();\n   * // Initialize the application\n   * await app.init({...});\n   * // Add canvas to the page\n   * document.body.appendChild(app.canvas);\n   *\n   * // Access the canvas directly\n   * console.log(app.canvas); // HTMLCanvasElement\n   * ```\n   */\n  get canvas() {\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's canvas element.\n   * @type {HTMLCanvasElement}\n   * @deprecated since 8.0.0\n   * @see {@link Application#canvas}\n   */\n  get view() {\n    deprecation(v8_0_0, \"Application.view is deprecated, please use Application.canvas instead.\");\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's screen rectangle. This represents the visible area of your application.\n   *\n   * It's commonly used for:\n   * - Setting filter areas for full-screen effects\n   * - Defining hit areas for screen-wide interaction\n   * - Determining the visible bounds of your application\n   * @readonly\n   * @example\n   * ```js\n   * // Use as filter area for a full-screen effect\n   * const blurFilter = new BlurFilter();\n   * sprite.filterArea = app.screen;\n   *\n   * // Use as hit area for screen-wide interaction\n   * const screenSprite = new Sprite();\n   * screenSprite.hitArea = app.screen;\n   *\n   * // Get screen dimensions\n   * console.log(app.screen.width, app.screen.height);\n   * ```\n   * @see {@link Rectangle} For all available properties and methods\n   */\n  get screen() {\n    return this.renderer.screen;\n  }\n  /**\n   * Destroys the application and all of its resources.\n   *\n   * This method should be called when you want to completely\n   * clean up the application and free all associated memory.\n   * @param rendererDestroyOptions - Options for destroying the renderer:\n   *  - `false` or `undefined`: Preserves the canvas element (default)\n   *  - `true`: Removes the canvas element\n   *  - `{ removeView: boolean }`: Object with removeView property to control canvas removal\n   * @param options - Options for destroying the application:\n   *  - `false` or `undefined`: Basic cleanup (default)\n   *  - `true`: Complete cleanup including children\n   *  - Detailed options object:\n   *    - `children`: Remove children\n   *    - `texture`: Destroy textures\n   *    - `textureSource`: Destroy texture sources\n   *    - `context`: Destroy WebGL context\n   * @example\n   * ```js\n   * // Basic cleanup\n   * app.destroy();\n   *\n   * // Remove canvas and do complete cleanup\n   * app.destroy(true, true);\n   *\n   * // Remove canvas with explicit options\n   * app.destroy({ removeView: true }, true);\n   *\n   * // Detailed cleanup with specific options\n   * app.destroy(\n   *     { removeView: true },\n   *     {\n   *         children: true,\n   *         texture: true,\n   *         textureSource: true,\n   *         context: true\n   *     }\n   * );\n   * ```\n   * > [!WARNING] After calling destroy, the application instance should no longer be used.\n   * > All properties will be null and further operations will throw errors.\n   */\n  destroy(rendererDestroyOptions = false, options = false) {\n    const plugins = _Application._plugins.slice(0);\n    plugins.reverse();\n    plugins.forEach((plugin) => {\n      plugin.destroy.call(this);\n    });\n    this.stage.destroy(options);\n    this.stage = null;\n    this.renderer.destroy(rendererDestroyOptions);\n    this.renderer = null;\n  }\n};\n/**\n * Collection of installed plugins.\n * @internal\n */\n_Application._plugins = [];\nlet Application = _Application;\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n\nexport { Application };\n//# sourceMappingURL=Application.mjs.map\n","import { groupD8 } from '../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapFont extends AbstractBitmapFont {\n  constructor(options, url) {\n    super();\n    const { textures, data } = options;\n    Object.keys(data.pages).forEach((key) => {\n      const pageData = data.pages[parseInt(key, 10)];\n      const texture = textures[pageData.id];\n      this.pages.push({ texture });\n    });\n    Object.keys(data.chars).forEach((key) => {\n      const charData = data.chars[key];\n      const {\n        frame: textureFrame,\n        source: textureSource,\n        rotate: textureRotate\n      } = textures[charData.page];\n      const frame = groupD8.transformRectCoords(\n        charData,\n        textureFrame,\n        textureRotate,\n        new Rectangle()\n      );\n      const texture = new Texture({\n        frame,\n        orig: new Rectangle(0, 0, charData.width, charData.height),\n        source: textureSource,\n        rotate: textureRotate\n      });\n      this.chars[key] = {\n        id: key.codePointAt(0),\n        xOffset: charData.xOffset,\n        yOffset: charData.yOffset,\n        xAdvance: charData.xAdvance,\n        kerning: charData.kerning ?? {},\n        texture\n      };\n    });\n    this.baseRenderedFontSize = data.fontSize;\n    this.baseMeasurementFontSize = data.fontSize;\n    this.fontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: data.fontSize\n    };\n    this.baseLineOffset = data.baseLineOffset;\n    this.lineHeight = data.lineHeight;\n    this.fontFamily = data.fontFamily;\n    this.distanceField = data.distanceField ?? {\n      type: \"none\",\n      range: 0\n    };\n    this.url = url;\n  }\n  /** Destroys the BitmapFont object. */\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { texture } = this.pages[i];\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n  /**\n   * Generates and installs a bitmap font with the specified options.\n   * The font will be cached and available for use in BitmapText objects.\n   * @param options - Setup options for font generation\n   * @returns Installed font instance\n   * @example\n   * ```ts\n   * // Install a basic font\n   * BitmapFont.install({\n   *     name: 'Title',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *         fontSize: 32,\n   *         fill: '#ffffff'\n   *     }\n   * });\n   *\n   * // Install with advanced options\n   * BitmapFont.install({\n   *     name: 'Custom',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *         fontSize: 24,\n   *         fill: '#00ff00',\n   *         stroke: { color: '#000000', width: 2 }\n   *     },\n   *     chars: [['a', 'z'], ['A', 'Z'], ['0', '9']],\n   *     resolution: 2,\n   *     padding: 4,\n   *     textureStyle: {\n   *         scaleMode: 'nearest'\n   *     }\n   * });\n   * ```\n   */\n  static install(options) {\n    BitmapFontManager.install(options);\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * This frees up memory and resources associated with the font.\n   * @param name - The name of the bitmap font to uninstall\n   * @example\n   * ```ts\n   * // Remove a font when it's no longer needed\n   * BitmapFont.uninstall('MyCustomFont');\n   *\n   * // Clear multiple fonts\n   * ['Title', 'Heading', 'Body'].forEach(BitmapFont.uninstall);\n   * ```\n   */\n  static uninstall(name) {\n    BitmapFontManager.uninstall(name);\n  }\n}\n\nexport { BitmapFont };\n//# sourceMappingURL=BitmapFont.mjs.map\n","\"use strict\";\nconst bitmapFontTextParser = {\n  test(data) {\n    return typeof data === \"string\" && data.startsWith(\"info face=\");\n  },\n  parse(txt) {\n    const items = txt.match(/^[a-z]+\\s+.+$/gm);\n    const rawData = {\n      info: [],\n      common: [],\n      page: [],\n      char: [],\n      chars: [],\n      kerning: [],\n      kernings: [],\n      distanceField: []\n    };\n    for (const i in items) {\n      const name = items[i].match(/^[a-z]+/gm)[0];\n      const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n      const itemData = {};\n      for (const i2 in attributeList) {\n        const split = attributeList[i2].split(\"=\");\n        const key = split[0];\n        const strValue = split[1].replace(/\"/gm, \"\");\n        const floatValue = parseFloat(strValue);\n        const value = isNaN(floatValue) ? strValue : floatValue;\n        itemData[key] = value;\n      }\n      rawData[name].push(itemData);\n    }\n    const font = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const [info] = rawData.info;\n    const [common] = rawData.common;\n    const [distanceField] = rawData.distanceField ?? [];\n    if (distanceField) {\n      font.distanceField = {\n        range: parseInt(distanceField.distanceRange, 10),\n        type: distanceField.fieldType\n      };\n    }\n    font.fontSize = parseInt(info.size, 10);\n    font.fontFamily = info.face;\n    font.lineHeight = parseInt(common.lineHeight, 10);\n    const page = rawData.page;\n    for (let i = 0; i < page.length; i++) {\n      font.pages.push({\n        id: parseInt(page[i].id, 10) || 0,\n        file: page[i].file\n      });\n    }\n    const map = {};\n    font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n    const char = rawData.char;\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.id, 10);\n      let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      font.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.page, 10) || 0,\n        x: parseInt(charNode.x, 10),\n        y: parseInt(charNode.y, 10),\n        width: parseInt(charNode.width, 10),\n        height: parseInt(charNode.height, 10),\n        xOffset: parseInt(charNode.xoffset, 10),\n        yOffset: parseInt(charNode.yoffset, 10),\n        xAdvance: parseInt(charNode.xadvance, 10),\n        kerning: {}\n      };\n    }\n    const kerning = rawData.kerning || [];\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].first, 10);\n      const second = parseInt(kerning[i].second, 10);\n      const amount = parseInt(kerning[i].amount, 10);\n      font.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return font;\n  }\n};\n\nexport { bitmapFontTextParser };\n//# sourceMappingURL=bitmapFontTextParser.mjs.map\n","\"use strict\";\nconst bitmapFontXMLParser = {\n  test(data) {\n    const xml = data;\n    return typeof xml !== \"string\" && \"getElementsByTagName\" in xml && xml.getElementsByTagName(\"page\").length && xml.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n  },\n  parse(xml) {\n    const data = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const info = xml.getElementsByTagName(\"info\")[0];\n    const common = xml.getElementsByTagName(\"common\")[0];\n    const distanceField = xml.getElementsByTagName(\"distanceField\")[0];\n    if (distanceField) {\n      data.distanceField = {\n        type: distanceField.getAttribute(\"fieldType\"),\n        range: parseInt(distanceField.getAttribute(\"distanceRange\"), 10)\n      };\n    }\n    const page = xml.getElementsByTagName(\"page\");\n    const char = xml.getElementsByTagName(\"char\");\n    const kerning = xml.getElementsByTagName(\"kerning\");\n    data.fontSize = parseInt(info.getAttribute(\"size\"), 10);\n    data.fontFamily = info.getAttribute(\"face\");\n    data.lineHeight = parseInt(common.getAttribute(\"lineHeight\"), 10);\n    for (let i = 0; i < page.length; i++) {\n      data.pages.push({\n        id: parseInt(page[i].getAttribute(\"id\"), 10) || 0,\n        file: page[i].getAttribute(\"file\")\n      });\n    }\n    const map = {};\n    data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute(\"base\"), 10);\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.getAttribute(\"id\"), 10);\n      let letter = charNode.getAttribute(\"letter\") ?? charNode.getAttribute(\"char\") ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      data.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.getAttribute(\"page\"), 10) || 0,\n        x: parseInt(charNode.getAttribute(\"x\"), 10),\n        y: parseInt(charNode.getAttribute(\"y\"), 10),\n        width: parseInt(charNode.getAttribute(\"width\"), 10),\n        height: parseInt(charNode.getAttribute(\"height\"), 10),\n        // render deets..\n        xOffset: parseInt(charNode.getAttribute(\"xoffset\"), 10),\n        yOffset: parseInt(charNode.getAttribute(\"yoffset\"), 10),\n        // + baseLineOffset,\n        xAdvance: parseInt(charNode.getAttribute(\"xadvance\"), 10),\n        kerning: {}\n      };\n    }\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].getAttribute(\"first\"), 10);\n      const second = parseInt(kerning[i].getAttribute(\"second\"), 10);\n      const amount = parseInt(kerning[i].getAttribute(\"amount\"), 10);\n      data.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return data;\n  }\n};\n\nexport { bitmapFontXMLParser };\n//# sourceMappingURL=bitmapFontXMLParser.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser.mjs';\n\n\"use strict\";\nconst bitmapFontXMLStringParser = {\n  test(data) {\n    if (typeof data === \"string\" && data.includes(\"<font>\")) {\n      return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n    }\n    return false;\n  },\n  parse(data) {\n    return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n  }\n};\n\nexport { bitmapFontXMLStringParser };\n//# sourceMappingURL=bitmapFontXMLStringParser.mjs.map\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser.mjs';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams.mjs';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { BitmapFont } from '../BitmapFont.mjs';\nimport { bitmapFontTextParser } from './bitmapFontTextParser.mjs';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser.mjs';\n\n\"use strict\";\nconst validExtensions = [\".xml\", \".fnt\"];\nconst bitmapFontCachePlugin = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheBitmapFont\"\n  },\n  test: (asset) => asset instanceof BitmapFont,\n  getCacheableAssets(keys, asset) {\n    const out = {};\n    keys.forEach((key) => {\n      out[key] = asset;\n      out[`${key}-bitmap`] = asset;\n    });\n    out[`${asset.fontFamily}-bitmap`] = asset;\n    return out;\n  }\n};\nconst loadBitmapFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Normal\n  },\n  /** used for deprecation purposes */\n  name: \"loadBitmapFont\",\n  id: \"bitmap-font\",\n  test(url) {\n    return validExtensions.includes(path.extname(url).toLowerCase());\n  },\n  async testParse(data) {\n    return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n  },\n  async parse(asset, data, loader) {\n    const bitmapFontData = bitmapFontTextParser.test(asset) ? bitmapFontTextParser.parse(asset) : bitmapFontXMLStringParser.parse(asset);\n    const { src } = data;\n    const { pages } = bitmapFontData;\n    const textureUrls = [];\n    const textureOptions = bitmapFontData.distanceField ? {\n      scaleMode: \"linear\",\n      alphaMode: \"premultiply-alpha-on-upload\",\n      autoGenerateMipmaps: false,\n      resolution: 1\n    } : {};\n    for (let i = 0; i < pages.length; ++i) {\n      const pageFile = pages[i].file;\n      let imagePath = path.join(path.dirname(src), pageFile);\n      imagePath = copySearchParams(imagePath, src);\n      textureUrls.push({\n        src: imagePath,\n        data: textureOptions\n      });\n    }\n    const loadedTextures = await loader.load(textureUrls);\n    const textures = textureUrls.map((url) => loadedTextures[url.src]);\n    const bitmapFont = new BitmapFont({\n      data: bitmapFontData,\n      textures\n    }, src);\n    return bitmapFont;\n  },\n  async load(url, _options) {\n    const response = await DOMAdapter.get().fetch(url);\n    return await response.text();\n  },\n  async unload(bitmapFont, _resolvedAsset, loader) {\n    await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n    bitmapFont.destroy();\n  }\n};\n\nexport { bitmapFontCachePlugin, loadBitmapFont };\n//# sourceMappingURL=loadBitmapFont.mjs.map\n","\"use strict\";\nclass BackgroundLoader {\n  /**\n   * @param loader\n   * @param verbose - should the loader log to the console\n   */\n  constructor(loader, verbose = false) {\n    this._loader = loader;\n    this._assetList = [];\n    this._isLoading = false;\n    this._maxConcurrent = 1;\n    this.verbose = verbose;\n  }\n  /**\n   * Adds assets to the background loading queue. Assets are loaded one at a time to minimize\n   * performance impact.\n   * @param assetUrls - Array of resolved assets to load in the background\n   * @example\n   * ```ts\n   * // Add assets to background load queue\n   * backgroundLoader.add([\n   *     { src: 'images/level1/bg.png' },\n   *     { src: 'images/level1/characters.json' }\n   * ]);\n   *\n   * // Assets will load sequentially in the background\n   * // The loader automatically pauses when high-priority loads occur\n   * // e.g. Assets.load() is called\n   * ```\n   * @remarks\n   * - Assets are loaded one at a time to minimize performance impact\n   * - Loading automatically pauses when Assets.load() is called\n   * - No progress tracking is available for background loading\n   * - Assets are cached as they complete loading\n   * @internal\n   */\n  add(assetUrls) {\n    assetUrls.forEach((a) => {\n      this._assetList.push(a);\n    });\n    if (this.verbose) {\n      console.log(\"[BackgroundLoader] assets: \", this._assetList);\n    }\n    if (this._isActive && !this._isLoading) {\n      void this._next();\n    }\n  }\n  /**\n   * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n   *\n   * The max assets it will try to load at one time will be 4.\n   */\n  async _next() {\n    if (this._assetList.length && this._isActive) {\n      this._isLoading = true;\n      const toLoad = [];\n      const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n      for (let i = 0; i < toLoadAmount; i++) {\n        toLoad.push(this._assetList.pop());\n      }\n      await this._loader.load(toLoad);\n      this._isLoading = false;\n      void this._next();\n    }\n  }\n  /**\n   * Controls the active state of the background loader. When active, the loader will\n   * continue processing its queue. When inactive, loading is paused.\n   * @returns Whether the background loader is currently active\n   * @example\n   * ```ts\n   * // Pause background loading\n   * backgroundLoader.active = false;\n   *\n   * // Resume background loading\n   * backgroundLoader.active = true;\n   *\n   * // Check current state\n   * console.log(backgroundLoader.active); // true/false\n   *\n   * // Common use case: Pause during intensive operations\n   * backgroundLoader.active = false;  // Pause background loading\n   * ... // Perform high-priority tasks\n   * backgroundLoader.active = true;   // Resume background loading\n   * ```\n   * @remarks\n   * - Setting to true resumes loading immediately\n   * - Setting to false pauses after current asset completes\n   * - Background loading is automatically paused during `Assets.load()`\n   * - Assets already being loaded will complete even when set to false\n   */\n  get active() {\n    return this._isActive;\n  }\n  set active(value) {\n    if (this._isActive === value)\n      return;\n    this._isActive = value;\n    if (value && !this._isLoading) {\n      void this._next();\n    }\n  }\n}\n\nexport { BackgroundLoader };\n//# sourceMappingURL=BackgroundLoader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cacheTextureArray = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheTextureArray\"\n  },\n  test: (asset) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n  getCacheableAssets: (keys, asset) => {\n    const out = {};\n    keys.forEach((key) => {\n      asset.forEach((item, i) => {\n        out[key + (i === 0 ? \"\" : i + 1)] = item;\n      });\n    });\n    return out;\n  }\n};\n\nexport { cacheTextureArray };\n//# sourceMappingURL=cacheTextureArray.mjs.map\n","\"use strict\";\nasync function testImageFormat(imageData) {\n  if (\"Image\" in globalThis) {\n    return new Promise((resolve) => {\n      const image = new Image();\n      image.onload = () => {\n        resolve(true);\n      };\n      image.onerror = () => {\n        resolve(false);\n      };\n      image.src = imageData;\n    });\n  }\n  if (\"createImageBitmap\" in globalThis && \"fetch\" in globalThis) {\n    try {\n      const blob = await (await fetch(imageData)).blob();\n      await createImageBitmap(blob);\n    } catch (_e) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { testImageFormat };\n//# sourceMappingURL=testImageFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectAvif = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 1\n  },\n  test: async () => testImageFormat(\n    // eslint-disable-next-line max-len\n    \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=\"\n  ),\n  add: async (formats) => [...formats, \"avif\"],\n  remove: async (formats) => formats.filter((f) => f !== \"avif\")\n};\n\nexport { detectAvif };\n//# sourceMappingURL=detectAvif.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst imageFormats = [\"png\", \"jpg\", \"jpeg\"];\nconst detectDefaults = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: -1\n  },\n  test: () => Promise.resolve(true),\n  add: async (formats) => [...formats, ...imageFormats],\n  remove: async (formats) => formats.filter((f) => !imageFormats.includes(f))\n};\n\nexport { detectDefaults };\n//# sourceMappingURL=detectDefaults.mjs.map\n","\"use strict\";\nconst inWorker = \"WorkerGlobalScope\" in globalThis && globalThis instanceof globalThis.WorkerGlobalScope;\nfunction testVideoFormat(mimeType) {\n  if (inWorker) {\n    return false;\n  }\n  const video = document.createElement(\"video\");\n  return video.canPlayType(mimeType) !== \"\";\n}\n\nexport { testVideoFormat };\n//# sourceMappingURL=testVideoFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectMp4 = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/mp4\"),\n  add: async (formats) => [...formats, \"mp4\", \"m4v\"],\n  remove: async (formats) => formats.filter((f) => f !== \"mp4\" && f !== \"m4v\")\n};\n\nexport { detectMp4 };\n//# sourceMappingURL=detectMp4.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectOgv = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/ogg\"),\n  add: async (formats) => [...formats, \"ogv\"],\n  remove: async (formats) => formats.filter((f) => f !== \"ogv\")\n};\n\nexport { detectOgv };\n//# sourceMappingURL=detectOgv.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectWebm = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/webm\"),\n  add: async (formats) => [...formats, \"webm\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webm\")\n};\n\nexport { detectWebm };\n//# sourceMappingURL=detectWebm.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectWebp = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testImageFormat(\n    \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\"\n  ),\n  add: async (formats) => [...formats, \"webp\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webp\")\n};\n\nexport { detectWebp };\n//# sourceMappingURL=detectWebp.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Loader {\n  constructor() {\n    this._parsers = [];\n    this._parsersValidated = false;\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    this.parsers = new Proxy(this._parsers, {\n      set: (target, key, value) => {\n        this._parsersValidated = false;\n        target[key] = value;\n        return true;\n      }\n    });\n    /** Cache loading promises that ae currently active */\n    this.promiseCache = {};\n  }\n  /** function used for testing */\n  reset() {\n    this._parsersValidated = false;\n    this.promiseCache = {};\n  }\n  /**\n   * Used internally to generate a promise for the asset to be loaded.\n   * @param url - The URL to be loaded\n   * @param data - any custom additional information relevant to the asset being loaded\n   * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n   */\n  _getLoadPromiseAndParser(url, data) {\n    const result = {\n      promise: null,\n      parser: null\n    };\n    result.promise = (async () => {\n      let asset = null;\n      let parser = null;\n      if (data.parser || data.loadParser) {\n        parser = this._parserHash[data.parser || data.loadParser];\n        if (data.loadParser) {\n          warn(\n            `[Assets] \"loadParser\" is deprecated, use \"parser\" instead for ${url}`\n          );\n        }\n        if (!parser) {\n          warn(\n            `[Assets] specified load parser \"${data.parser || data.loadParser}\" not found while loading ${url}`\n          );\n        }\n      }\n      if (!parser) {\n        for (let i = 0; i < this.parsers.length; i++) {\n          const parserX = this.parsers[i];\n          if (parserX.load && parserX.test?.(url, data, this)) {\n            parser = parserX;\n            break;\n          }\n        }\n        if (!parser) {\n          warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n          return null;\n        }\n      }\n      asset = await parser.load(url, data, this);\n      result.parser = parser;\n      for (let i = 0; i < this.parsers.length; i++) {\n        const parser2 = this.parsers[i];\n        if (parser2.parse) {\n          if (parser2.parse && await parser2.testParse?.(asset, data, this)) {\n            asset = await parser2.parse(asset, data, this) || asset;\n            result.parser = parser2;\n          }\n        }\n      }\n      return asset;\n    })();\n    return result;\n  }\n  async load(assetsToLoadIn, onProgress) {\n    if (!this._parsersValidated) {\n      this._validateParsers();\n    }\n    let count = 0;\n    const assets = {};\n    const singleAsset = isSingleItem(assetsToLoadIn);\n    const assetsToLoad = convertToList(assetsToLoadIn, (item) => ({\n      alias: [item],\n      src: item,\n      data: {}\n    }));\n    const total = assetsToLoad.length;\n    const promises = assetsToLoad.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      if (!assets[asset.src]) {\n        try {\n          if (!this.promiseCache[url]) {\n            this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n          }\n          assets[asset.src] = await this.promiseCache[url].promise;\n          if (onProgress)\n            onProgress(++count / total);\n        } catch (e) {\n          delete this.promiseCache[url];\n          delete assets[asset.src];\n          throw new Error(`[Loader.load] Failed to load ${url}.\n${e}`);\n        }\n      }\n    });\n    await Promise.all(promises);\n    return singleAsset ? assets[assetsToLoad[0].src] : assets;\n  }\n  /**\n   * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n   * The parser that created the asset, will be the one that unloads it.\n   * @example\n   * // Single asset:\n   * const asset = await Loader.load('cool.png');\n   *\n   * await Loader.unload('cool.png');\n   *\n   * console.log(asset.destroyed); // true\n   * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n   */\n  async unload(assetsToUnloadIn) {\n    const assetsToUnload = convertToList(assetsToUnloadIn, (item) => ({\n      alias: [item],\n      src: item\n    }));\n    const promises = assetsToUnload.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      const loadPromise = this.promiseCache[url];\n      if (loadPromise) {\n        const loadedAsset = await loadPromise.promise;\n        delete this.promiseCache[url];\n        await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n      }\n    });\n    await Promise.all(promises);\n  }\n  /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n  _validateParsers() {\n    this._parsersValidated = true;\n    this._parserHash = this._parsers.filter((parser) => parser.name || parser.id).reduce((hash, parser) => {\n      if (!parser.name && !parser.id) {\n        warn(`[Assets] parser should have an id`);\n      } else if (hash[parser.name] || hash[parser.id]) {\n        warn(`[Assets] parser id conflict \"${parser.id}\"`);\n      }\n      hash[parser.name] = parser;\n      if (parser.id)\n        hash[parser.id] = parser;\n      return hash;\n    }, {});\n  }\n}\n\nexport { Loader };\n//# sourceMappingURL=Loader.mjs.map\n","\"use strict\";\nfunction checkDataUrl(url, mimes) {\n  if (Array.isArray(mimes)) {\n    for (const mime of mimes) {\n      if (url.startsWith(`data:${mime}`))\n        return true;\n    }\n    return false;\n  }\n  return url.startsWith(`data:${mimes}`);\n}\n\nexport { checkDataUrl };\n//# sourceMappingURL=checkDataUrl.mjs.map\n","import { path } from '../../utils/path.mjs';\n\n\"use strict\";\nfunction checkExtension(url, extension) {\n  const tempURL = url.split(\"?\")[0];\n  const ext = path.extname(tempURL).toLowerCase();\n  if (Array.isArray(extension)) {\n    return extension.includes(ext);\n  }\n  return ext === extension;\n}\n\nexport { checkExtension };\n//# sourceMappingURL=checkExtension.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validJSONExtension = \".json\";\nconst validJSONMIME = \"application/json\";\nconst loadJson = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  /** used for deprecation purposes */\n  name: \"loadJson\",\n  id: \"json\",\n  test(url) {\n    return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const json = await response.json();\n    return json;\n  }\n};\n\nexport { loadJson };\n//# sourceMappingURL=loadJson.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validTXTExtension = \".txt\";\nconst validTXTMIME = \"text/plain\";\nconst loadTxt = {\n  /** used for deprecation purposes */\n  name: \"loadTxt\",\n  id: \"text\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadTxt\"\n  },\n  test(url) {\n    return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const txt = await response.text();\n    return txt;\n  }\n};\n\nexport { loadTxt };\n//# sourceMappingURL=loadTxt.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { Cache } from '../../cache/Cache.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validWeights = [\n  \"normal\",\n  \"bold\",\n  \"100\",\n  \"200\",\n  \"300\",\n  \"400\",\n  \"500\",\n  \"600\",\n  \"700\",\n  \"800\",\n  \"900\"\n];\nconst validFontExtensions = [\".ttf\", \".otf\", \".woff\", \".woff2\"];\nconst validFontMIMEs = [\n  \"font/ttf\",\n  \"font/otf\",\n  \"font/woff\",\n  \"font/woff2\"\n];\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\nfunction getFontFamilyName(url) {\n  const ext = path.extname(url);\n  const name = path.basename(url, ext);\n  const nameWithSpaces = name.replace(/(-|_)/g, \" \");\n  const nameTokens = nameWithSpaces.toLowerCase().split(\" \").map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n  let valid = nameTokens.length > 0;\n  for (const token of nameTokens) {\n    if (!token.match(CSS_IDENT_TOKEN_REGEX)) {\n      valid = false;\n      break;\n    }\n  }\n  let fontFamilyName = nameTokens.join(\" \");\n  if (!valid) {\n    fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, \"\\\\$&\")}\"`;\n  }\n  return fontFamilyName;\n}\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\nfunction encodeURIWhenNeeded(uri) {\n  if (validURICharactersRegex.test(uri)) {\n    return uri;\n  }\n  return encodeURI(uri);\n}\nconst loadWebFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  /** used for deprecation purposes */\n  name: \"loadWebFont\",\n  id: \"web-font\",\n  test(url) {\n    return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n  },\n  async load(url, options) {\n    const fonts = DOMAdapter.get().getFontFaceSet();\n    if (fonts) {\n      const fontFaces = [];\n      const name = options.data?.family ?? getFontFamilyName(url);\n      const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? [\"normal\"];\n      const data = options.data ?? {};\n      for (let i = 0; i < weights.length; i++) {\n        const weight = weights[i];\n        const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n          ...data,\n          weight\n        });\n        await font.load();\n        fonts.add(font);\n        fontFaces.push(font);\n      }\n      if (Cache.has(`${name}-and-url`)) {\n        const cached = Cache.get(`${name}-and-url`);\n        cached.entries.push({ url, faces: fontFaces });\n      } else {\n        Cache.set(`${name}-and-url`, {\n          entries: [{ url, faces: fontFaces }]\n        });\n      }\n      return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n    }\n    warn(\"[loadWebFont] FontFace API is not supported. Skipping loading font\");\n    return null;\n  },\n  unload(font) {\n    const fonts = Array.isArray(font) ? font : [font];\n    const fontFamily = fonts[0].family;\n    const cached = Cache.get(`${fontFamily}-and-url`);\n    const entry = cached.entries.find((f) => f.faces.some((t) => fonts.indexOf(t) !== -1));\n    entry.faces = entry.faces.filter((f) => fonts.indexOf(f) === -1);\n    if (entry.faces.length === 0) {\n      cached.entries = cached.entries.filter((f) => f !== entry);\n    }\n    fonts.forEach((t) => {\n      DOMAdapter.get().getFontFaceSet().delete(t);\n    });\n    if (cached.entries.length === 0) {\n      Cache.remove(`${fontFamily}-and-url`);\n    }\n  }\n};\n\nexport { getFontFamilyName, loadWebFont };\n//# sourceMappingURL=loadWebFont.mjs.map\n","import { Resolver } from '../../assets/resolver/Resolver.mjs';\n\n\"use strict\";\nfunction getResolutionOfUrl(url, defaultValue = 1) {\n  const resolution = Resolver.RETINA_PREFIX?.exec(url);\n  if (resolution) {\n    return parseFloat(resolution[1]);\n  }\n  return defaultValue;\n}\n\nexport { getResolutionOfUrl };\n//# sourceMappingURL=getResolutionOfUrl.mjs.map\n","import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { Cache } from '../../../../cache/Cache.mjs';\n\n\"use strict\";\nfunction createTexture(source, loader, url) {\n  source.label = url;\n  source._sourceOrigin = url;\n  const texture = new Texture({\n    source,\n    label: url\n  });\n  const unload = () => {\n    delete loader.promiseCache[url];\n    if (Cache.has(url)) {\n      Cache.remove(url);\n    }\n  };\n  texture.source.once(\"destroy\", () => {\n    if (loader.promiseCache[url]) {\n      warn(\"[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.\");\n      unload();\n    }\n  });\n  texture.once(\"destroy\", () => {\n    if (!source.destroyed) {\n      warn(\"[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.\");\n      unload();\n    }\n  });\n  return texture;\n}\n\nexport { createTexture };\n//# sourceMappingURL=createTexture.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validSVGExtension = \".svg\";\nconst validSVGMIME = \"image/svg+xml\";\nconst loadSvg = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadSVG\"\n  },\n  /** used for deprecation purposes */\n  name: \"loadSVG\",\n  id: \"svg\",\n  config: {\n    crossOrigin: \"anonymous\",\n    parseAsGraphicsContext: false\n  },\n  test(url) {\n    return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n  },\n  async load(url, asset, loader) {\n    if (asset.data?.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext) {\n      return loadAsGraphics(url);\n    }\n    return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n  },\n  unload(asset) {\n    asset.destroy(true);\n  }\n};\nasync function loadAsTexture(url, asset, loader, crossOrigin) {\n  const response = await DOMAdapter.get().fetch(url);\n  const image = DOMAdapter.get().createImage();\n  image.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(await response.text())}`;\n  image.crossOrigin = crossOrigin;\n  await image.decode();\n  const width = asset.data?.width ?? image.width;\n  const height = asset.data?.height ?? image.height;\n  const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n  const canvasWidth = Math.ceil(width * resolution);\n  const canvasHeight = Math.ceil(height * resolution);\n  const canvas = DOMAdapter.get().createCanvas(canvasWidth, canvasHeight);\n  const context = canvas.getContext(\"2d\");\n  context.imageSmoothingEnabled = true;\n  context.imageSmoothingQuality = \"high\";\n  context.drawImage(image, 0, 0, width * resolution, height * resolution);\n  const { parseAsGraphicsContext: _p, ...rest } = asset.data ?? {};\n  const base = new ImageSource({\n    resource: canvas,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    resolution,\n    ...rest\n  });\n  return createTexture(base, loader, url);\n}\nasync function loadAsGraphics(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const svgSource = await response.text();\n  const context = new GraphicsContext();\n  context.svg(svgSource);\n  return context;\n}\n\nexport { loadSvg };\n//# sourceMappingURL=loadSVG.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\")\\n          return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (_e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url, alphaMode) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      return alphaMode === \\\"premultiplied-alpha\\\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \\\"none\\\" }) : createImageBitmap(imageBlob);\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n","import WorkerInstance from '../../../_virtual/checkImageBitmap.worker.mjs';\nimport WorkerInstance$1 from '../../../_virtual/loadImageBitmap.worker.mjs';\n\n\"use strict\";\nlet UUID = 0;\nlet MAX_WORKERS;\nclass WorkerManagerClass {\n  constructor() {\n    /** Whether the worker manager has been initialized */\n    this._initialized = false;\n    /** Current number of created workers (used to enforce MAX_WORKERS limit) */\n    this._createdWorkers = 0;\n    this._workerPool = [];\n    this._queue = [];\n    this._resolveHash = {};\n  }\n  /**\n   * Checks if ImageBitmap is supported in the current environment.\n   *\n   * This method uses a dedicated worker to test ImageBitmap support\n   * and caches the result for subsequent calls.\n   * @returns Promise that resolves to true if ImageBitmap is supported, false otherwise\n   */\n  isImageBitmapSupported() {\n    if (this._isImageBitmapSupported !== void 0)\n      return this._isImageBitmapSupported;\n    this._isImageBitmapSupported = new Promise((resolve) => {\n      const { worker } = new WorkerInstance();\n      worker.addEventListener(\"message\", (event) => {\n        worker.terminate();\n        WorkerInstance.revokeObjectURL();\n        resolve(event.data);\n      });\n    });\n    return this._isImageBitmapSupported;\n  }\n  /**\n   * Loads an image as an ImageBitmap using a web worker.\n   * @param src - The source URL or path of the image to load\n   * @param asset - Optional resolved asset containing additional texture source options\n   * @returns Promise that resolves to the loaded ImageBitmap\n   * @example\n   * ```typescript\n   * const bitmap = await WorkerManager.loadImageBitmap('image.png');\n   * const bitmapWithOptions = await WorkerManager.loadImageBitmap('image.png', asset);\n   * ```\n   */\n  loadImageBitmap(src, asset) {\n    return this._run(\"loadImageBitmap\", [src, asset?.data?.alphaMode]);\n  }\n  /**\n   * Initializes the worker pool if not already initialized.\n   * Currently a no-op but reserved for future initialization logic.\n   */\n  async _initWorkers() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n  }\n  /**\n   * Gets an available worker from the pool or creates a new one if needed.\n   *\n   * Workers are created up to the MAX_WORKERS limit (based on navigator.hardwareConcurrency).\n   * Each worker is configured with a message handler for processing results.\n   * @returns Available worker or undefined if pool is at capacity and no workers are free\n   */\n  _getWorker() {\n    if (MAX_WORKERS === void 0) {\n      MAX_WORKERS = navigator.hardwareConcurrency || 4;\n    }\n    let worker = this._workerPool.pop();\n    if (!worker && this._createdWorkers < MAX_WORKERS) {\n      this._createdWorkers++;\n      worker = new WorkerInstance$1().worker;\n      worker.addEventListener(\"message\", (event) => {\n        this._complete(event.data);\n        this._returnWorker(event.target);\n        this._next();\n      });\n    }\n    return worker;\n  }\n  /**\n   * Returns a worker to the pool after completing a task.\n   * @param worker - The worker to return to the pool\n   */\n  _returnWorker(worker) {\n    this._workerPool.push(worker);\n  }\n  /**\n   * Handles completion of a worker task by resolving or rejecting the corresponding promise.\n   * @param data - Result data from the worker containing uuid, data, and optional error\n   */\n  _complete(data) {\n    if (data.error !== void 0) {\n      this._resolveHash[data.uuid].reject(data.error);\n    } else {\n      this._resolveHash[data.uuid].resolve(data.data);\n    }\n    this._resolveHash[data.uuid] = null;\n  }\n  /**\n   * Executes a task using the worker pool system.\n   *\n   * Queues the task and processes it when a worker becomes available.\n   * @param id - Identifier for the type of task to run\n   * @param args - Arguments to pass to the worker\n   * @returns Promise that resolves with the worker's result\n   */\n  async _run(id, args) {\n    await this._initWorkers();\n    const promise = new Promise((resolve, reject) => {\n      this._queue.push({ id, arguments: args, resolve, reject });\n    });\n    this._next();\n    return promise;\n  }\n  /**\n   * Processes the next item in the queue if workers are available.\n   *\n   * This method is called after worker initialization and when workers\n   * complete tasks to continue processing the queue.\n   */\n  _next() {\n    if (!this._queue.length)\n      return;\n    const worker = this._getWorker();\n    if (!worker) {\n      return;\n    }\n    const toDo = this._queue.pop();\n    const id = toDo.id;\n    this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n    worker.postMessage({\n      data: toDo.arguments,\n      uuid: UUID++,\n      id\n    });\n  }\n  /**\n   * Resets the worker manager, terminating all workers and clearing the queue.\n   *\n   * This method:\n   * - Terminates all active workers\n   * - Rejects all pending promises with an error\n   * - Clears all internal state\n   * - Resets initialization flags\n   *\n   * This should be called when the worker manager is no longer needed\n   * to prevent memory leaks and ensure proper cleanup.\n   * @example\n   * ```typescript\n   * // Clean up when shutting down\n   * WorkerManager.reset();\n   * ```\n   */\n  reset() {\n    this._workerPool.forEach((worker) => worker.terminate());\n    this._workerPool.length = 0;\n    Object.values(this._resolveHash).forEach(({ reject }) => {\n      reject?.(new Error(\"WorkerManager destroyed\"));\n    });\n    this._resolveHash = {};\n    this._queue.length = 0;\n    this._initialized = false;\n    this._createdWorkers = 0;\n  }\n}\nconst WorkerManager = new WorkerManagerClass();\n\nexport { WorkerManager };\n//# sourceMappingURL=WorkerManager.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { WorkerManager } from '../../workers/WorkerManager.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validImageExtensions = [\".jpeg\", \".jpg\", \".png\", \".webp\", \".avif\"];\nconst validImageMIMEs = [\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/webp\",\n  \"image/avif\"\n];\nasync function loadImageBitmap(url, asset) {\n  const response = await DOMAdapter.get().fetch(url);\n  if (!response.ok) {\n    throw new Error(`[loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n  }\n  const imageBlob = await response.blob();\n  return asset?.data?.alphaMode === \"premultiplied-alpha\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \"none\" }) : createImageBitmap(imageBlob);\n}\nconst loadTextures = {\n  /** used for deprecation purposes */\n  name: \"loadTextures\",\n  id: \"texture\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.High,\n    name: \"loadTextures\"\n  },\n  config: {\n    preferWorkers: true,\n    preferCreateImageBitmap: true,\n    crossOrigin: \"anonymous\"\n  },\n  test(url) {\n    return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n  },\n  async load(url, asset, loader) {\n    let src = null;\n    if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap) {\n      if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported()) {\n        src = await WorkerManager.loadImageBitmap(url, asset);\n      } else {\n        src = await loadImageBitmap(url, asset);\n      }\n    } else {\n      src = await new Promise((resolve, reject) => {\n        src = DOMAdapter.get().createImage();\n        src.crossOrigin = this.config.crossOrigin;\n        src.src = url;\n        if (src.complete) {\n          resolve(src);\n        } else {\n          src.onload = () => {\n            resolve(src);\n          };\n          src.onerror = reject;\n        }\n      });\n    }\n    const base = new ImageSource({\n      resource: src,\n      alphaMode: \"premultiply-alpha-on-upload\",\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      ...asset.data\n    });\n    return createTexture(base, loader, url);\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { loadImageBitmap, loadTextures };\n//# sourceMappingURL=loadTextures.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource.mjs';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { testVideoFormat } from '../../../detections/utils/testVideoFormat.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst potentialVideoExtensions = [\".mp4\", \".m4v\", \".webm\", \".ogg\", \".ogv\", \".h264\", \".avi\", \".mov\"];\nlet validVideoExtensions;\nlet validVideoMIMEs;\nfunction crossOrigin(element, url, crossorigin) {\n  if (crossorigin === void 0 && !url.startsWith(\"data:\")) {\n    element.crossOrigin = determineCrossOrigin(url);\n  } else if (crossorigin !== false) {\n    element.crossOrigin = typeof crossorigin === \"string\" ? crossorigin : \"anonymous\";\n  }\n}\nfunction preloadVideo(element) {\n  return new Promise((resolve, reject) => {\n    element.addEventListener(\"canplaythrough\", loaded);\n    element.addEventListener(\"error\", error);\n    element.load();\n    function loaded() {\n      cleanup();\n      resolve();\n    }\n    function error(err) {\n      cleanup();\n      reject(err);\n    }\n    function cleanup() {\n      element.removeEventListener(\"canplaythrough\", loaded);\n      element.removeEventListener(\"error\", error);\n    }\n  });\n}\nfunction determineCrossOrigin(url, loc = globalThis.location) {\n  if (url.startsWith(\"data:\")) {\n    return \"\";\n  }\n  loc || (loc = globalThis.location);\n  const parsedUrl = new URL(url, document.baseURI);\n  if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol) {\n    return \"anonymous\";\n  }\n  return \"\";\n}\nfunction getBrowserSupportedVideoExtensions() {\n  const supportedExtensions = [];\n  const supportedMimes = [];\n  for (const ext of potentialVideoExtensions) {\n    const mimeType = VideoSource.MIME_TYPES[ext.substring(1)] || `video/${ext.substring(1)}`;\n    if (testVideoFormat(mimeType)) {\n      supportedExtensions.push(ext);\n      if (!supportedMimes.includes(mimeType)) {\n        supportedMimes.push(mimeType);\n      }\n    }\n  }\n  return {\n    validVideoExtensions: supportedExtensions,\n    validVideoMime: supportedMimes\n  };\n}\nconst loadVideoTextures = {\n  /** used for deprecation purposes */\n  name: \"loadVideo\",\n  id: \"video\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    name: \"loadVideo\"\n  },\n  test(url) {\n    if (!validVideoExtensions || !validVideoMIMEs) {\n      const { validVideoExtensions: ve, validVideoMime: vm } = getBrowserSupportedVideoExtensions();\n      validVideoExtensions = ve;\n      validVideoMIMEs = vm;\n    }\n    const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n    const isValidExtension = checkExtension(url, validVideoExtensions);\n    return isValidDataUrl || isValidExtension;\n  },\n  async load(url, asset, loader) {\n    const options = {\n      ...VideoSource.defaultOptions,\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n      ...asset.data\n    };\n    const videoElement = document.createElement(\"video\");\n    const attributeMap = {\n      preload: options.autoLoad !== false ? \"auto\" : void 0,\n      \"webkit-playsinline\": options.playsinline !== false ? \"\" : void 0,\n      playsinline: options.playsinline !== false ? \"\" : void 0,\n      muted: options.muted === true ? \"\" : void 0,\n      loop: options.loop === true ? \"\" : void 0,\n      autoplay: options.autoPlay !== false ? \"\" : void 0\n    };\n    Object.keys(attributeMap).forEach((key) => {\n      const value = attributeMap[key];\n      if (value !== void 0)\n        videoElement.setAttribute(key, value);\n    });\n    if (options.muted === true) {\n      videoElement.muted = true;\n    }\n    crossOrigin(videoElement, url, options.crossorigin);\n    const sourceElement = document.createElement(\"source\");\n    let mime;\n    if (options.mime) {\n      mime = options.mime;\n    } else if (url.startsWith(\"data:\")) {\n      mime = url.slice(5, url.indexOf(\";\"));\n    } else if (!url.startsWith(\"blob:\")) {\n      const ext = url.split(\"?\")[0].slice(url.lastIndexOf(\".\") + 1).toLowerCase();\n      mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n    }\n    sourceElement.src = url;\n    if (mime) {\n      sourceElement.type = mime;\n    }\n    return new Promise((resolve) => {\n      const onCanPlay = async () => {\n        const base = new VideoSource({ ...options, resource: videoElement });\n        videoElement.removeEventListener(\"canplay\", onCanPlay);\n        if (asset.data.preload) {\n          await preloadVideo(videoElement);\n        }\n        resolve(createTexture(base, loader, url));\n      };\n      if (options.preload && !options.autoPlay) {\n        videoElement.load();\n      }\n      videoElement.addEventListener(\"canplay\", onCanPlay);\n      videoElement.appendChild(sourceElement);\n    });\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo };\n//# sourceMappingURL=loadVideoTextures.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures.mjs';\nimport { Resolver } from '../Resolver.mjs';\n\n\"use strict\";\nconst resolveTextureUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    name: \"resolveTexture\"\n  },\n  test: loadTextures.test,\n  parse: (value) => ({\n    resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n    format: value.split(\".\").pop(),\n    src: value\n  })\n};\n\nexport { resolveTextureUrl };\n//# sourceMappingURL=resolveTextureUrl.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Resolver } from '../Resolver.mjs';\nimport { resolveTextureUrl } from './resolveTextureUrl.mjs';\n\n\"use strict\";\nconst resolveJsonUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    priority: -2,\n    name: \"resolveJson\"\n  },\n  test: (value) => Resolver.RETINA_PREFIX.test(value) && value.endsWith(\".json\"),\n  parse: resolveTextureUrl.parse\n};\n\nexport { resolveJsonUrl };\n//# sourceMappingURL=resolveJsonUrl.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { loadBitmapFont, bitmapFontCachePlugin } from '../scene/text-bitmap/asset/loadBitmapFont.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\nimport { BackgroundLoader } from './BackgroundLoader.mjs';\nimport { Cache } from './cache/Cache.mjs';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray.mjs';\nimport { detectAvif } from './detections/parsers/detectAvif.mjs';\nimport { detectDefaults } from './detections/parsers/detectDefaults.mjs';\nimport { detectMp4 } from './detections/parsers/detectMp4.mjs';\nimport { detectOgv } from './detections/parsers/detectOgv.mjs';\nimport { detectWebm } from './detections/parsers/detectWebm.mjs';\nimport { detectWebp } from './detections/parsers/detectWebp.mjs';\nimport { Loader } from './loader/Loader.mjs';\nimport { loadJson } from './loader/parsers/loadJson.mjs';\nimport { loadTxt } from './loader/parsers/loadTxt.mjs';\nimport { loadWebFont } from './loader/parsers/loadWebFont.mjs';\nimport { loadSvg } from './loader/parsers/textures/loadSVG.mjs';\nimport { loadTextures } from './loader/parsers/textures/loadTextures.mjs';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures.mjs';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl.mjs';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl.mjs';\nimport { Resolver } from './resolver/Resolver.mjs';\nimport { convertToList } from './utils/convertToList.mjs';\nimport { isSingleItem } from './utils/isSingleItem.mjs';\n\n\"use strict\";\nclass AssetsClass {\n  constructor() {\n    this._detections = [];\n    this._initialized = false;\n    this.resolver = new Resolver();\n    this.loader = new Loader();\n    this.cache = Cache;\n    this._backgroundLoader = new BackgroundLoader(this.loader);\n    this._backgroundLoader.active = true;\n    this.reset();\n  }\n  /**\n   * Initializes the Assets class with configuration options. While not required,\n   * calling this before loading assets is recommended to set up default behaviors.\n   * @param options - Configuration options for the Assets system\n   * @example\n   * ```ts\n   * // Basic initialization (optional as Assets.load will call this automatically)\n   * await Assets.init();\n   *\n   * // With CDN configuration\n   * await Assets.init({\n   *     basePath: 'https://my-cdn.com/assets/',\n   *     defaultSearchParams: { version: '1.0.0' }\n   * });\n   *\n   * // With manifest and preferences\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [{\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'hero',\n   *                     src: 'hero.{png,webp}',\n   *                     data: { scaleMode: SCALE_MODES.NEAREST }\n   *                 },\n   *                 {\n   *                     alias: 'map',\n   *                     src: 'map.json'\n   *                 }\n   *             ]\n   *         }]\n   *     },\n   *     // Optimize for device capabilities\n   *     texturePreference: {\n   *         resolution: window.devicePixelRatio,\n   *         format: ['webp', 'png']\n   *     },\n   *     // Set global preferences\n   *     preferences: {\n   *         crossOrigin: 'anonymous',\n   *     }\n   * });\n   *\n   * // Load assets after initialization\n   * const heroTexture = await Assets.load('hero');\n   * ```\n   * @remarks\n   * - Can be called only once; subsequent calls will be ignored with a warning\n   * - Format detection runs automatically unless `skipDetections` is true\n   * - The manifest can be a URL to a JSON file or an inline object\n   * @see {@link AssetInitOptions} For all available initialization options\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async init(options = {}) {\n    if (this._initialized) {\n      warn(\"[Assets]AssetManager already initialized, did you load before calling this Assets.init()?\");\n      return;\n    }\n    this._initialized = true;\n    if (options.defaultSearchParams) {\n      this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n    }\n    if (options.basePath) {\n      this.resolver.basePath = options.basePath;\n    }\n    if (options.bundleIdentifier) {\n      this.resolver.setBundleIdentifier(options.bundleIdentifier);\n    }\n    if (options.manifest) {\n      let manifest = options.manifest;\n      if (typeof manifest === \"string\") {\n        manifest = await this.load(manifest);\n      }\n      this.resolver.addManifest(manifest);\n    }\n    const resolutionPref = options.texturePreference?.resolution ?? 1;\n    const resolution = typeof resolutionPref === \"number\" ? [resolutionPref] : resolutionPref;\n    const formats = await this._detectFormats({\n      preferredFormats: options.texturePreference?.format,\n      skipDetections: options.skipDetections,\n      detections: this._detections\n    });\n    this.resolver.prefer({\n      params: {\n        format: formats,\n        resolution\n      }\n    });\n    if (options.preferences) {\n      this.setPreferences(options.preferences);\n    }\n  }\n  /**\n   * Registers assets with the Assets resolver. This method maps keys (aliases) to asset sources,\n   * allowing you to load assets using friendly names instead of direct URLs.\n   * @param assets - The unresolved assets to add to the resolver\n   * @example\n   * ```ts\n   * // Basic usage - single asset\n   * Assets.add({\n   *     alias: 'myTexture',\n   *     src: 'assets/texture.png'\n   * });\n   * const texture = await Assets.load('myTexture');\n   *\n   * // Multiple aliases for the same asset\n   * Assets.add({\n   *     alias: ['hero', 'player'],\n   *     src: 'hero.png'\n   * });\n   * const hero1 = await Assets.load('hero');\n   * const hero2 = await Assets.load('player'); // Same texture\n   *\n   * // Multiple format support\n   * Assets.add({\n   *     alias: 'character',\n   *     src: 'character.{webp,png}' // Will choose best format\n   * });\n   * Assets.add({\n   *     alias: 'character',\n   *     src: ['character.webp', 'character.png'], // Explicitly specify formats\n   * });\n   *\n   * // With texture options\n   * Assets.add({\n   *     alias: 'sprite',\n   *     src: 'sprite.png',\n   *     data: { scaleMode: 'nearest' }\n   * });\n   *\n   * // Multiple assets at once\n   * Assets.add([\n   *     { alias: 'bg', src: 'background.png' },\n   *     { alias: 'music', src: 'music.mp3' },\n   *     { alias: 'spritesheet', src: 'sheet.json', data: { ignoreMultiPack: false } }\n   * ]);\n   * ```\n   * @remarks\n   * - Assets are resolved when loaded, not when added\n   * - Multiple formats use the best available format for the browser\n   * - Adding with same alias overwrites previous definition\n   * - The `data` property is passed to the asset loader\n   * @see {@link Resolver} For details on asset resolution\n   * @see {@link LoaderParser} For asset-specific data options\n   * @advanced\n   */\n  add(assets) {\n    this.resolver.add(assets);\n  }\n  async load(urls, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const singleAsset = isSingleItem(urls);\n    const urlArray = convertToList(urls).map((url) => {\n      if (typeof url !== \"string\") {\n        const aliases = this.resolver.getAlias(url);\n        if (aliases.some((alias) => !this.resolver.hasKey(alias))) {\n          this.add(url);\n        }\n        return Array.isArray(aliases) ? aliases[0] : aliases;\n      }\n      if (!this.resolver.hasKey(url))\n        this.add({ alias: url, src: url });\n      return url;\n    });\n    const resolveResults = this.resolver.resolve(urlArray);\n    const out = await this._mapLoadToResolve(resolveResults, onProgress);\n    return singleAsset ? out[urlArray[0]] : out;\n  }\n  /**\n   * Registers a bundle of assets that can be loaded as a group. Bundles are useful for organizing\n   * assets into logical groups, such as game levels or UI screens.\n   * @param bundleId - Unique identifier for the bundle\n   * @param assets - Assets to include in the bundle\n   * @example\n   * ```ts\n   * // Add a bundle using array format\n   * Assets.addBundle('animals', [\n   *     { alias: 'bunny', src: 'bunny.png' },\n   *     { alias: 'chicken', src: 'chicken.png' },\n   *     { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   *\n   * // Add a bundle using object format\n   * Assets.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * // Add a bundle with advanced options\n   * Assets.addBundle('ui', [\n   *     {\n   *         alias: 'button',\n   *         src: 'button.{webp,png}',\n   *         data: { scaleMode: 'nearest' }\n   *     },\n   *     {\n   *         alias: ['logo', 'brand'],  // Multiple aliases\n   *         src: 'logo.svg',\n   *         data: { resolution: 2 }\n   *     }\n   * ]);\n   *\n   * // Load the bundle\n   * await Assets.loadBundle('animals');\n   *\n   * // Use the loaded assets\n   * const bunny = Sprite.from('bunny');\n   * const chicken = Sprite.from('chicken');\n   * ```\n   * @remarks\n   * - Bundle IDs must be unique\n   * - Assets in bundles are not loaded until `loadBundle` is called\n   * - Bundles can be background loaded using `backgroundLoadBundle`\n   * - Assets in bundles can be loaded individually using their aliases\n   * @see {@link Assets.loadBundle} For loading bundles\n   * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n   * @see {@link Assets.unloadBundle} For unloading bundles\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  addBundle(bundleId, assets) {\n    this.resolver.addBundle(bundleId, assets);\n  }\n  /**\n   * Loads a bundle or multiple bundles of assets. Bundles are collections of related assets\n   * that can be loaded together.\n   * @param bundleIds - Single bundle ID or array of bundle IDs to load\n   * @param onProgress - Optional callback for load progress (0.0 to 1.0)\n   * @returns Promise that resolves with the loaded bundle assets\n   * @example\n   * ```ts\n   * // Define bundles in your manifest\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}', // use an array of individual assets\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * // Initialize with manifest\n   * await Assets.init({ manifest });\n   *\n   * // Or add bundles programmatically\n   * Assets.addBundle('load-screen', [...]);\n   * Assets.loadBundle('load-screen');\n   *\n   * // Load a single bundle\n   * await Assets.loadBundle('load-screen');\n   * const bg = Sprite.from('background'); // Uses alias from bundle\n   *\n   * // Load multiple bundles\n   * await Assets.loadBundle([\n   *     'load-screen',\n   *     'game-screen'\n   * ]);\n   *\n   * // Load with progress tracking\n   * await Assets.loadBundle('game-screen', (progress) => {\n   *     console.log(`Loading: ${Math.round(progress * 100)}%`);\n   * });\n   * ```\n   * @remarks\n   * - Bundle assets are cached automatically\n   * - Bundles can be pre-loaded using `backgroundLoadBundle`\n   * - Assets in bundles can be accessed by their aliases\n   * - Progress callback receives values from 0.0 to 1.0\n   * @throws {Error} If the bundle ID doesn't exist in the manifest\n   * @see {@link Assets.addBundle} For adding bundles programmatically\n   * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n   * @see {@link Assets.unloadBundle} For unloading bundles\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async loadBundle(bundleIds, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    let singleAsset = false;\n    if (typeof bundleIds === \"string\") {\n      singleAsset = true;\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const out = {};\n    const keys = Object.keys(resolveResults);\n    let count = 0;\n    let total = 0;\n    const _onProgress = () => {\n      onProgress?.(++count / total);\n    };\n    const promises = keys.map((bundleId) => {\n      const resolveResult = resolveResults[bundleId];\n      const values = Object.values(resolveResult);\n      const totalAssetsToLoad = [...new Set(values.flat())];\n      total += totalAssetsToLoad.length;\n      return this._mapLoadToResolve(resolveResult, _onProgress).then((resolveResult2) => {\n        out[bundleId] = resolveResult2;\n      });\n    });\n    await Promise.all(promises);\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Initiates background loading of assets. This allows assets to be loaded passively while other operations\n   * continue, making them instantly available when needed later.\n   *\n   * Background loading is useful for:\n   * - Preloading game levels while in a menu\n   * - Loading non-critical assets during gameplay\n   * - Reducing visible loading screens\n   * @param urls - Single URL/alias or array of URLs/aliases to load in the background\n   * @example\n   * ```ts\n   * // Basic background loading\n   * Assets.backgroundLoad('images/level2-assets.png');\n   *\n   * // Background load multiple assets\n   * Assets.backgroundLoad([\n   *     'images/sprite1.png',\n   *     'images/sprite2.png',\n   *     'images/background.png'\n   * ]);\n   *\n   * // Later, when you need the assets\n   * const textures = await Assets.load([\n   *     'images/sprite1.png',\n   *     'images/sprite2.png'\n   * ]); // Resolves immediately if background loading completed\n   * ```\n   * @remarks\n   * - Background loading happens one asset at a time to avoid blocking the main thread\n   * - Loading can be interrupted safely by calling `Assets.load()`\n   * - Assets are cached as they complete loading\n   * - No progress tracking is available for background loading\n   */\n  async backgroundLoad(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof urls === \"string\") {\n      urls = [urls];\n    }\n    const resolveResults = this.resolver.resolve(urls);\n    this._backgroundLoader.add(Object.values(resolveResults));\n  }\n  /**\n   * Initiates background loading of asset bundles. Similar to backgroundLoad but works with\n   * predefined bundles of assets.\n   *\n   * Perfect for:\n   * - Preloading level bundles during gameplay\n   * - Loading UI assets during splash screens\n   * - Preparing assets for upcoming game states\n   * @param bundleIds - Single bundle ID or array of bundle IDs to load in the background\n   * @example\n   * ```ts\n   * // Define bundles in your manifest\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [\n   *             {\n   *               name: 'home',\n   *               assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'images/home-bg.png',\n   *                 },\n   *                 {\n   *                     alias: 'logo',\n   *                     src: 'images/logo.png',\n   *                 }\n   *              ]\n   *            },\n   *            {\n   *             name: 'level-1',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'images/level1/bg.png',\n   *                 },\n   *                 {\n   *                     alias: 'sprites',\n   *                     src: 'images/level1/sprites.json'\n   *                 }\n   *             ]\n   *         }]\n   *     }\n   * });\n   *\n   * // Load the home screen assets right away\n   * await Assets.loadBundle('home');\n   * showHomeScreen();\n   *\n   * // Start background loading while showing home screen\n   * Assets.backgroundLoadBundle('level-1');\n   *\n   * // When player starts level, load completes faster\n   * await Assets.loadBundle('level-1');\n   * hideHomeScreen();\n   * startLevel();\n   * ```\n   * @remarks\n   * - Bundle assets are loaded one at a time\n   * - Loading can be interrupted safely by calling `Assets.loadBundle()`\n   * - Assets are cached as they complete loading\n   * - Requires bundles to be registered via manifest or `addBundle`\n   * @see {@link Assets.addBundle} For adding bundles programmatically\n   * @see {@link Assets.loadBundle} For immediate bundle loading\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async backgroundLoadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof bundleIds === \"string\") {\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    Object.values(resolveResults).forEach((resolveResult) => {\n      this._backgroundLoader.add(Object.values(resolveResult));\n    });\n  }\n  /**\n   * Only intended for development purposes.\n   * This will wipe the resolver and caches.\n   * You will need to reinitialize the Asset\n   * @internal\n   */\n  reset() {\n    this.resolver.reset();\n    this.loader.reset();\n    this.cache.reset();\n    this._initialized = false;\n  }\n  get(keys) {\n    if (typeof keys === \"string\") {\n      return Cache.get(keys);\n    }\n    const assets = {};\n    for (let i = 0; i < keys.length; i++) {\n      assets[i] = Cache.get(keys[i]);\n    }\n    return assets;\n  }\n  /**\n   * helper function to map resolved assets back to loaded assets\n   * @param resolveResults - the resolve results from the resolver\n   * @param onProgress - the progress callback\n   */\n  async _mapLoadToResolve(resolveResults, onProgress) {\n    const resolveArray = [...new Set(Object.values(resolveResults))];\n    this._backgroundLoader.active = false;\n    const loadedAssets = await this.loader.load(resolveArray, onProgress);\n    this._backgroundLoader.active = true;\n    const out = {};\n    resolveArray.forEach((resolveResult) => {\n      const asset = loadedAssets[resolveResult.src];\n      const keys = [resolveResult.src];\n      if (resolveResult.alias) {\n        keys.push(...resolveResult.alias);\n      }\n      keys.forEach((key) => {\n        out[key] = asset;\n      });\n      Cache.set(keys, asset);\n    });\n    return out;\n  }\n  /**\n   * Unloads assets and releases them from memory. This method ensures proper cleanup of\n   * loaded assets when they're no longer needed.\n   * @param urls - Single URL/alias or array of URLs/aliases to unload\n   * @example\n   * ```ts\n   * // Unload a single asset\n   * await Assets.unload('images/sprite.png');\n   *\n   * // Unload using an alias\n   * await Assets.unload('hero'); // Unloads the asset registered with 'hero' alias\n   *\n   * // Unload multiple assets\n   * await Assets.unload([\n   *     'images/background.png',\n   *     'images/character.png',\n   *     'hero'\n   * ]);\n   *\n   * // Unload and handle creation of new instances\n   * await Assets.unload('hero');\n   * const newHero = await Assets.load('hero'); // Will load fresh from source\n   * ```\n   * @remarks\n   * > [!WARNING]\n   * > Make sure assets aren't being used before unloading:\n   * > - Remove sprites using the texture\n   * > - Clear any references to the asset\n   * > - Textures will be destroyed and can't be used after unloading\n   * @throws {Error} If the asset is not found in cache\n   */\n  async unload(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const urlArray = convertToList(urls).map((url) => typeof url !== \"string\" ? url.src : url);\n    const resolveResults = this.resolver.resolve(urlArray);\n    await this._unloadFromResolved(resolveResults);\n  }\n  /**\n   * Unloads all assets in a bundle. Use this to free memory when a bundle's assets\n   * are no longer needed, such as when switching game levels.\n   * @param bundleIds - Single bundle ID or array of bundle IDs to unload\n   * @example\n   * ```ts\n   * // Define and load a bundle\n   * Assets.addBundle('level-1', {\n   *     background: 'level1/bg.png',\n   *     sprites: 'level1/sprites.json',\n   *     music: 'level1/music.mp3'\n   * });\n   *\n   * // Load the bundle\n   * const level1 = await Assets.loadBundle('level-1');\n   *\n   * // Use the assets\n   * const background = Sprite.from(level1.background);\n   *\n   * // When done with the level, unload everything\n   * await Assets.unloadBundle('level-1');\n   * // background sprite is now invalid!\n   *\n   * // Unload multiple bundles\n   * await Assets.unloadBundle([\n   *     'level-1',\n   *     'level-2',\n   *     'ui-elements'\n   * ]);\n   * ```\n   * @remarks\n   * > [!WARNING]\n   * > - All assets in the bundle will be destroyed\n   * > - Bundle needs to be reloaded to use assets again\n   * > - Make sure no sprites or other objects are using the assets\n   * @throws {Error} If the bundle is not found\n   * @see {@link Assets.addBundle} For adding bundles\n   * @see {@link Assets.loadBundle} For loading bundles\n   */\n  async unloadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    bundleIds = convertToList(bundleIds);\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const promises = Object.keys(resolveResults).map((bundleId) => this._unloadFromResolved(resolveResults[bundleId]));\n    await Promise.all(promises);\n  }\n  async _unloadFromResolved(resolveResult) {\n    const resolveArray = Object.values(resolveResult);\n    resolveArray.forEach((resolveResult2) => {\n      Cache.remove(resolveResult2.src);\n    });\n    await this.loader.unload(resolveArray);\n  }\n  /**\n   * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n   * the users preferred formats order.\n   * @param options - the options to use when detecting formats\n   * @param options.preferredFormats - the preferred formats to use\n   * @param options.skipDetections - if we should skip the detections altogether\n   * @param options.detections - the detections to use\n   * @returns - the detected formats\n   */\n  async _detectFormats(options) {\n    let formats = [];\n    if (options.preferredFormats) {\n      formats = Array.isArray(options.preferredFormats) ? options.preferredFormats : [options.preferredFormats];\n    }\n    for (const detection of options.detections) {\n      if (options.skipDetections || await detection.test()) {\n        formats = await detection.add(formats);\n      } else if (!options.skipDetections) {\n        formats = await detection.remove(formats);\n      }\n    }\n    formats = formats.filter((format, index) => formats.indexOf(format) === index);\n    return formats;\n  }\n  /**\n   * All the detection parsers currently added to the Assets class.\n   * @advanced\n   */\n  get detections() {\n    return this._detections;\n  }\n  /**\n   * Sets global preferences for asset loading behavior. This method configures how assets\n   * are loaded and processed across all parsers.\n   * @param preferences - Asset loading preferences\n   * @example\n   * ```ts\n   * // Basic preferences\n   * Assets.setPreferences({\n   *     crossOrigin: 'anonymous',\n   *     parseAsGraphicsContext: false\n   * });\n   * ```\n   * @remarks\n   * Preferences are applied to all compatible parsers and affect future asset loading.\n   * Common preferences include:\n   * - `crossOrigin`: CORS setting for loaded assets\n   * - `preferWorkers`: Whether to use web workers for loading textures\n   * - `preferCreateImageBitmap`: Use `createImageBitmap` for texture creation. Turning this off will use the `Image` constructor instead.\n   * @see {@link AssetsPreferences} For all available preferences\n   */\n  setPreferences(preferences) {\n    this.loader.parsers.forEach((parser) => {\n      if (!parser.config)\n        return;\n      Object.keys(parser.config).filter((key) => key in preferences).forEach((key) => {\n        parser.config[key] = preferences[key];\n      });\n    });\n  }\n}\nconst Assets = new AssetsClass();\nextensions.handleByList(ExtensionType.LoadParser, Assets.loader.parsers).handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers).handleByList(ExtensionType.CacheParser, Assets.cache.parsers).handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n  cacheTextureArray,\n  detectDefaults,\n  detectAvif,\n  detectWebp,\n  detectMp4,\n  detectOgv,\n  detectWebm,\n  loadJson,\n  loadTxt,\n  loadWebFont,\n  loadSvg,\n  loadTextures,\n  loadVideoTextures,\n  loadBitmapFont,\n  bitmapFontCachePlugin,\n  resolveTextureUrl,\n  resolveJsonUrl\n);\nconst assetKeyMap = {\n  loader: ExtensionType.LoadParser,\n  resolver: ExtensionType.ResolveParser,\n  cache: ExtensionType.CacheParser,\n  detection: ExtensionType.DetectionParser\n};\nextensions.handle(ExtensionType.Asset, (extension) => {\n  const ref = extension.ref;\n  Object.entries(assetKeyMap).filter(([key]) => !!ref[key]).forEach(([key, type]) => extensions.add(Object.assign(\n    ref[key],\n    // Allow the function to optionally define it's own\n    // ExtensionMetadata, the use cases here is priority for LoaderParsers\n    { extension: ref[key].extension ?? type }\n  )));\n}, (extension) => {\n  const ref = extension.ref;\n  Object.keys(assetKeyMap).filter((key) => !!ref[key]).forEach((key) => extensions.remove(ref[key]));\n});\n\nexport { Assets, AssetsClass };\n//# sourceMappingURL=Assets.mjs.map\n","import { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { UPDATE_PRIORITY } from '../../ticker/const.mjs';\nimport { Ticker } from '../../ticker/Ticker.mjs';\nimport { Sprite } from '../sprite/Sprite.mjs';\n\n\"use strict\";\nclass AnimatedSprite extends Sprite {\n  constructor(...args) {\n    let options = args[0];\n    if (Array.isArray(args[0])) {\n      options = {\n        textures: args[0],\n        autoUpdate: args[1]\n      };\n    }\n    const {\n      animationSpeed = 1,\n      autoPlay = false,\n      autoUpdate = true,\n      loop = true,\n      onComplete = null,\n      onFrameChange = null,\n      onLoop = null,\n      textures,\n      updateAnchor = false,\n      ...rest\n    } = options;\n    const [firstFrame] = textures;\n    super({\n      ...rest,\n      texture: firstFrame instanceof Texture ? firstFrame : firstFrame.texture\n    });\n    this._textures = null;\n    this._durations = null;\n    this._autoUpdate = autoUpdate;\n    this._isConnectedToTicker = false;\n    this.animationSpeed = animationSpeed;\n    this.loop = loop;\n    this.updateAnchor = updateAnchor;\n    this.onComplete = onComplete;\n    this.onFrameChange = onFrameChange;\n    this.onLoop = onLoop;\n    this._currentTime = 0;\n    this._playing = false;\n    this._previousFrame = null;\n    this.textures = textures;\n    if (autoPlay) {\n      this.play();\n    }\n  }\n  /**\n   * Stops the animation playback and freezes the current frame.\n   * Does not reset the current frame or animation progress.\n   * @example\n   * ```ts\n   * // Create an animated sprite\n   * const sprite = new AnimatedSprite({\n   *     textures: [\n   *         Texture.from('walk1.png'),\n   *         Texture.from('walk2.png'),\n   *         Texture.from('walk3.png')\n   *     ],\n   *     autoPlay: true\n   * });\n   *\n   * // Stop at current frame\n   * sprite.stop();\n   *\n   * // Stop at specific frame\n   * sprite.gotoAndStop(1); // Stops at second frame\n   *\n   * // Stop and reset\n   * sprite.stop();\n   * sprite.currentFrame = 0;\n   *\n   * // Stop with completion check\n   * if (sprite.playing) {\n   *     sprite.stop();\n   *     sprite.onComplete?.();\n   * }\n   * ```\n   * @see {@link AnimatedSprite#play} For starting playback\n   * @see {@link AnimatedSprite#gotoAndStop} For stopping at a specific frame\n   * @see {@link AnimatedSprite#playing} For checking play state\n   */\n  stop() {\n    if (!this._playing) {\n      return;\n    }\n    this._playing = false;\n    if (this._autoUpdate && this._isConnectedToTicker) {\n      Ticker.shared.remove(this.update, this);\n      this._isConnectedToTicker = false;\n    }\n  }\n  /**\n   * Starts or resumes the animation playback.\n   * If the animation was previously stopped, it will continue from where it left off.\n   * @example\n   * ```ts\n   * // Basic playback\n   * const sprite = new AnimatedSprite({\n   *     textures: [\n   *         Texture.from('walk1.png'),\n   *         Texture.from('walk2.png'),\n   *     ],\n   *     autoPlay: false\n   * });\n   * sprite.play();\n   *\n   * // Play after stopping\n   * sprite.stop();\n   * sprite.currentFrame = 0; // Reset to start\n   * sprite.play(); // Play from beginning\n   *\n   * // Play with auto-update disabled\n   * sprite.autoUpdate = false;\n   * sprite.play();\n   * app.ticker.add(() => {\n   *     sprite.update(app.ticker); // Manual updates\n   * });\n   * ```\n   * @see {@link AnimatedSprite#stop} For stopping playback\n   * @see {@link AnimatedSprite#gotoAndPlay} For playing from a specific frame\n   * @see {@link AnimatedSprite#playing} For checking play state\n   */\n  play() {\n    if (this._playing) {\n      return;\n    }\n    this._playing = true;\n    if (this._autoUpdate && !this._isConnectedToTicker) {\n      Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH);\n      this._isConnectedToTicker = true;\n    }\n  }\n  /**\n   * Stops the AnimatedSprite and sets it to a specific frame.\n   * @example\n   * ```ts\n   * // Create an animated sprite\n   * const sprite = new AnimatedSprite({\n   *     textures: [\n   *         Texture.from('walk1.png'),\n   *         Texture.from('walk2.png'),\n   *         Texture.from('walk3.png'),\n   *     ]\n   * });\n   *\n   * // Go to specific frames\n   * sprite.gotoAndStop(0);  // First frame\n   * sprite.gotoAndStop(2);  // Third frame\n   *\n   * // Jump to last frame\n   * sprite.gotoAndStop(sprite.totalFrames - 1);\n   * ```\n   * @param frameNumber - Frame index to stop at (0-based)\n   * @throws {Error} If frameNumber is out of bounds\n   * @see {@link AnimatedSprite#gotoAndPlay} For going to a frame and playing\n   * @see {@link AnimatedSprite#currentFrame} For getting/setting current frame\n   * @see {@link AnimatedSprite#totalFrames} For total number of frames\n   */\n  gotoAndStop(frameNumber) {\n    this.stop();\n    this.currentFrame = frameNumber;\n  }\n  /**\n   * Goes to a specific frame and begins playing the AnimatedSprite from that point.\n   * Combines frame navigation and playback start in one operation.\n   * @example\n   * ```ts\n   * // Start from specific frame\n   * sprite.gotoAndPlay(1); // Starts playing from second frame\n   * ```\n   * @param frameNumber - Frame index to start playing from (0-based)\n   * @throws {Error} If frameNumber is out of bounds\n   * @see {@link AnimatedSprite#gotoAndStop} For going to a frame without playing\n   * @see {@link AnimatedSprite#play} For playing from current frame\n   * @see {@link AnimatedSprite#currentFrame} For getting/setting current frame\n   */\n  gotoAndPlay(frameNumber) {\n    this.currentFrame = frameNumber;\n    this.play();\n  }\n  /**\n   * Updates the object transform for rendering. This method handles animation timing, frame updates,\n   * and manages looping behavior.\n   * @example\n   * ```ts\n   * // Create an animated sprite with manual updates\n   * const sprite = new AnimatedSprite({\n   *     textures: [\n   *         Texture.from('frame1.png'),\n   *         Texture.from('frame2.png'),\n   *         Texture.from('frame3.png')\n   *     ],\n   *     autoUpdate: false // Disable automatic updates\n   * });\n   *\n   * // Manual update with app ticker\n   * app.ticker.add((ticker) => {\n   *     sprite.update(ticker);\n   * });\n   * ```\n   * @param ticker - The ticker to use for updating the animation timing\n   * @see {@link AnimatedSprite#autoUpdate} For controlling automatic updates\n   * @see {@link AnimatedSprite#animationSpeed} For controlling animation speed\n   * @see {@link Ticker} For timing system details\n   */\n  update(ticker) {\n    if (!this._playing) {\n      return;\n    }\n    const deltaTime = ticker.deltaTime;\n    const elapsed = this.animationSpeed * deltaTime;\n    const previousFrame = this.currentFrame;\n    if (this._durations !== null) {\n      let lag = this._currentTime % 1 * this._durations[this.currentFrame];\n      lag += elapsed / 60 * 1e3;\n      while (lag < 0) {\n        this._currentTime--;\n        lag += this._durations[this.currentFrame];\n      }\n      const sign = Math.sign(this.animationSpeed * deltaTime);\n      this._currentTime = Math.floor(this._currentTime);\n      while (lag >= this._durations[this.currentFrame]) {\n        lag -= this._durations[this.currentFrame] * sign;\n        this._currentTime += sign;\n      }\n      this._currentTime += lag / this._durations[this.currentFrame];\n    } else {\n      this._currentTime += elapsed;\n    }\n    if (this._currentTime < 0 && !this.loop) {\n      this.gotoAndStop(0);\n      if (this.onComplete) {\n        this.onComplete();\n      }\n    } else if (this._currentTime >= this._textures.length && !this.loop) {\n      this.gotoAndStop(this._textures.length - 1);\n      if (this.onComplete) {\n        this.onComplete();\n      }\n    } else if (previousFrame !== this.currentFrame) {\n      if (this.loop && this.onLoop) {\n        if (this.animationSpeed > 0 && this.currentFrame < previousFrame || this.animationSpeed < 0 && this.currentFrame > previousFrame) {\n          this.onLoop();\n        }\n      }\n      this._updateTexture();\n    }\n  }\n  /** Updates the displayed texture to match the current frame index. */\n  _updateTexture() {\n    const currentFrame = this.currentFrame;\n    if (this._previousFrame === currentFrame) {\n      return;\n    }\n    this._previousFrame = currentFrame;\n    this.texture = this._textures[currentFrame];\n    if (this.updateAnchor && this.texture.defaultAnchor) {\n      this.anchor.copyFrom(this.texture.defaultAnchor);\n    }\n    if (this.onFrameChange) {\n      this.onFrameChange(this.currentFrame);\n    }\n  }\n  /**\n   * Stops the AnimatedSprite and destroys it.\n   * This method stops the animation playback, removes it from the ticker,\n   * and cleans up any resources associated with the sprite.\n   * @param options - Options for destroying the sprite, such as whether to remove from parent\n   * @example\n   * ```ts\n   * // Destroy the sprite when done\n   * sprite.destroy();\n   * // Or with options\n   * sprite.destroy({ children: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options = false) {\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._textures.forEach((texture) => {\n        if (this.texture !== texture) {\n          texture.destroy(destroyTextureSource);\n        }\n      });\n    }\n    this._textures = [];\n    this._durations = null;\n    this.stop();\n    super.destroy(options);\n    this.onComplete = null;\n    this.onFrameChange = null;\n    this.onLoop = null;\n  }\n  /**\n   * A short hand way of creating an AnimatedSprite from an array of frame ids.\n   * Uses texture frames from the cache to create an animation sequence.\n   * @example\n   * ```ts\n   * // Create from frame IDs\n   * const frameIds = [\n   *     'walk_001.png',\n   *     'walk_002.png',\n   *     'walk_003.png'\n   * ];\n   *\n   * const walkingAnimation = AnimatedSprite.fromFrames(frameIds);\n   * walkingAnimation.play();\n   * ```\n   * @param frames - The array of frame ids to use for the animation\n   * @returns A new animated sprite using the frames\n   * @see {@link Texture.from} For texture creation from frames\n   * @see {@link Spritesheet} For loading spritesheets\n   */\n  static fromFrames(frames) {\n    const textures = [];\n    for (let i = 0; i < frames.length; ++i) {\n      textures.push(Texture.from(frames[i]));\n    }\n    return new AnimatedSprite(textures);\n  }\n  /**\n   * A short hand way of creating an AnimatedSprite from an array of image urls.\n   * Each image will be used as a frame in the animation.\n   * @example\n   * ```ts\n   * // Create from image URLs\n   * const images = [\n   *     'assets/walk1.png',\n   *     'assets/walk2.png',\n   *     'assets/walk3.png'\n   * ];\n   *\n   * const walkingSprite = AnimatedSprite.fromImages(images);\n   * walkingSprite.play();\n   * ```\n   * @param images - The array of image urls to use as frames\n   * @returns A new animated sprite using the images as frames\n   * @see {@link Assets} For asset loading and management\n   * @see {@link Texture.from} For texture creation from images\n   */\n  static fromImages(images) {\n    const textures = [];\n    for (let i = 0; i < images.length; ++i) {\n      textures.push(Texture.from(images[i]));\n    }\n    return new AnimatedSprite(textures);\n  }\n  /**\n   * The total number of frames in the AnimatedSprite. This is the same as number of textures\n   * assigned to the AnimatedSprite.\n   * @example\n   * ```ts\n   * // Create an animated sprite\n   * const sprite = new AnimatedSprite({\n   *     textures: [\n   *         Texture.from('frame1.png'),\n   *         Texture.from('frame2.png'),\n   *         Texture.from('frame3.png')\n   *     ]\n   * });\n   *\n   * // Get total frames\n   * console.log(sprite.totalFrames); // Outputs: 3\n   *\n   * // Use with frame navigation\n   * sprite.gotoAndStop(sprite.totalFrames - 1); // Go to last frame\n   * ```\n   * @readonly\n   * @see {@link AnimatedSprite#currentFrame} For the current frame index\n   * @see {@link AnimatedSprite#textures} For the array of textures\n   * @returns {number} The total number of frames\n   */\n  get totalFrames() {\n    return this._textures.length;\n  }\n  /**\n   * The array of textures or frame objects used for the animation sequence.\n   * Can be set to either an array of Textures or an array of FrameObjects with custom timing.\n   * @example\n   * ```ts\n   * // Update textures at runtime\n   * sprite.textures = [\n   *     Texture.from('run1.png'),\n   *     Texture.from('run2.png')\n   * ];\n   *\n   * // Use custom frame timing\n   * sprite.textures = [\n   *     { texture: Texture.from('explosion1.png'), time: 100 },\n   *     { texture: Texture.from('explosion2.png'), time: 200 },\n   *     { texture: Texture.from('explosion3.png'), time: 300 }\n   * ];\n   *\n   * // Use with spritesheet\n   * const sheet = await Assets.load('animations.json');\n   * sprite.textures = sheet.animations['walk'];\n   * ```\n   * @type {AnimatedSpriteFrames}\n   * @see {@link FrameObject} For frame timing options\n   * @see {@link Spritesheet} For loading from spritesheets\n   */\n  get textures() {\n    return this._textures;\n  }\n  set textures(value) {\n    if (value[0] instanceof Texture) {\n      this._textures = value;\n      this._durations = null;\n    } else {\n      this._textures = [];\n      this._durations = [];\n      for (let i = 0; i < value.length; i++) {\n        this._textures.push(value[i].texture);\n        this._durations.push(value[i].time);\n      }\n    }\n    this._previousFrame = null;\n    this.gotoAndStop(0);\n    this._updateTexture();\n  }\n  /**\n   * Gets or sets the current frame index of the animation.\n   * When setting, the value will be clamped between 0 and totalFrames - 1.\n   * @example\n   * ```ts\n   * // Create an animated sprite\n   * const sprite = new AnimatedSprite({\n   *     textures: [\n   *         Texture.from('walk1.png'),\n   *         Texture.from('walk2.png'),\n   *         Texture.from('walk3.png')\n   *     ]\n   * });\n   *\n   * // Get current frame\n   * console.log(sprite.currentFrame); // 0\n   *\n   * // Set specific frame\n   * sprite.currentFrame = 1; // Show second frame\n   *\n   * // Use with frame callbacks\n   * sprite.onFrameChange = (frame) => {\n   *     console.log(`Now showing frame: ${frame}`);\n   * };\n   * sprite.currentFrame = 2;\n   * ```\n   * @throws {Error} If attempting to set a frame index out of bounds\n   * @see {@link AnimatedSprite#totalFrames} For the total number of frames\n   * @see {@link AnimatedSprite#gotoAndPlay} For playing from a specific frame\n   * @see {@link AnimatedSprite#gotoAndStop} For stopping at a specific frame\n   */\n  get currentFrame() {\n    let currentFrame = Math.floor(this._currentTime) % this._textures.length;\n    if (currentFrame < 0) {\n      currentFrame += this._textures.length;\n    }\n    return currentFrame;\n  }\n  set currentFrame(value) {\n    if (value < 0 || value > this.totalFrames - 1) {\n      throw new Error(`[AnimatedSprite]: Invalid frame index value ${value}, expected to be between 0 and totalFrames ${this.totalFrames}.`);\n    }\n    const previousFrame = this.currentFrame;\n    this._currentTime = value;\n    if (previousFrame !== this.currentFrame) {\n      this._updateTexture();\n    }\n  }\n  /**\n   * Indicates if the AnimatedSprite is currently playing.\n   * This is a read-only property that reflects the current playback state.\n   * @example\n   * ```ts\n   * // Check if animation is playing\n   * console.log('Playing:', sprite.playing); // true\n   *\n   * // Use with play control\n   * if (!sprite.playing) {\n   *     sprite.play();\n   * }\n   * ```\n   * @readonly\n   * @returns {boolean} True if the animation is currently playing\n   * @see {@link AnimatedSprite#play} For starting playback\n   * @see {@link AnimatedSprite#stop} For stopping playback\n   * @see {@link AnimatedSprite#loop} For controlling looping behavior\n   */\n  get playing() {\n    return this._playing;\n  }\n  /**\n   * Controls whether the animation automatically updates using the shared ticker.\n   * When enabled, the animation will update on each frame. When disabled, you must\n   * manually call update() to advance the animation.\n   * @example\n   * ```ts\n   * // Create sprite with auto-update disabled\n   * const sprite = new AnimatedSprite({\n   *     textures: [],\n   *     autoUpdate: false\n   * });\n   *\n   * // Manual update with app ticker\n   * app.ticker.add((ticker) => {\n   *     sprite.update(ticker);\n   * });\n   *\n   * // Enable auto-update later\n   * sprite.autoUpdate = true;\n   * ```\n   * @default true\n   * @see {@link AnimatedSprite#update} For manual animation updates\n   * @see {@link Ticker} For the timing system\n   */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      if (!this._autoUpdate && this._isConnectedToTicker) {\n        Ticker.shared.remove(this.update, this);\n        this._isConnectedToTicker = false;\n      } else if (this._autoUpdate && !this._isConnectedToTicker && this._playing) {\n        Ticker.shared.add(this.update, this);\n        this._isConnectedToTicker = true;\n      }\n    }\n  }\n}\n\nexport { AnimatedSprite };\n//# sourceMappingURL=AnimatedSprite.mjs.map\n","import { browserExt } from './environment-browser/browserExt.mjs';\nimport { webworkerExt } from './environment-webworker/webworkerExt.mjs';\nimport { extensions } from './extensions/Extensions.mjs';\nexport { ExtensionType, normalizeExtensionPriority } from './extensions/Extensions.mjs';\nimport './rendering/init.mjs';\nimport './spritesheet/init.mjs';\nimport './accessibility/index.mjs';\nimport './advanced-blend-modes/index.mjs';\nimport './app/index.mjs';\nimport './assets/index.mjs';\nimport './color/index.mjs';\nimport './compressed-textures/index.mjs';\nimport './culling/index.mjs';\nimport './dom/index.mjs';\nimport './environment/index.mjs';\nimport './environment-browser/index.mjs';\nimport './environment-webworker/index.mjs';\nimport './events/index.mjs';\nimport './extensions/index.mjs';\nimport './filters/index.mjs';\nimport './maths/index.mjs';\nimport './prepare/index.mjs';\nimport './rendering/index.mjs';\nimport './scene/index.mjs';\nimport './spritesheet/index.mjs';\nimport './ticker/index.mjs';\nimport './utils/index.mjs';\nexport { AccessibilitySystem } from './accessibility/AccessibilitySystem.mjs';\nexport { accessibilityTarget } from './accessibility/accessibilityTarget.mjs';\nexport { ColorBlend } from './advanced-blend-modes/ColorBlend.mjs';\nexport { ColorBurnBlend } from './advanced-blend-modes/ColorBurnBlend.mjs';\nexport { ColorDodgeBlend } from './advanced-blend-modes/ColorDodgeBlend.mjs';\nexport { DarkenBlend } from './advanced-blend-modes/DarkenBlend.mjs';\nexport { DifferenceBlend } from './advanced-blend-modes/DifferenceBlend.mjs';\nexport { DivideBlend } from './advanced-blend-modes/DivideBlend.mjs';\nexport { ExclusionBlend } from './advanced-blend-modes/ExclusionBlend.mjs';\nexport { HardLightBlend } from './advanced-blend-modes/HardLightBlend.mjs';\nexport { HardMixBlend } from './advanced-blend-modes/HardMixBlend.mjs';\nexport { LightenBlend } from './advanced-blend-modes/LightenBlend.mjs';\nexport { LinearBurnBlend } from './advanced-blend-modes/LinearBurnBlend.mjs';\nexport { LinearDodgeBlend } from './advanced-blend-modes/LinearDodgeBlend.mjs';\nexport { LinearLightBlend } from './advanced-blend-modes/LinearLightBlend.mjs';\nexport { LuminosityBlend } from './advanced-blend-modes/LuminosityBlend.mjs';\nexport { NegationBlend } from './advanced-blend-modes/NegationBlend.mjs';\nexport { OverlayBlend } from './advanced-blend-modes/OverlayBlend.mjs';\nexport { PinLightBlend } from './advanced-blend-modes/PinLightBlend.mjs';\nexport { SaturationBlend } from './advanced-blend-modes/SaturationBlend.mjs';\nexport { SoftLightBlend } from './advanced-blend-modes/SoftLightBlend.mjs';\nexport { SubtractBlend } from './advanced-blend-modes/SubtractBlend.mjs';\nexport { VividLightBlend } from './advanced-blend-modes/VividLightBlend.mjs';\nexport { Application } from './app/Application.mjs';\nexport { ResizePlugin } from './app/ResizePlugin.mjs';\nexport { TickerPlugin } from './app/TickerPlugin.mjs';\nexport { Assets, AssetsClass } from './assets/Assets.mjs';\nexport { BackgroundLoader } from './assets/BackgroundLoader.mjs';\nexport { Cache } from './assets/cache/Cache.mjs';\nexport { cacheTextureArray } from './assets/cache/parsers/cacheTextureArray.mjs';\nexport { detectAvif } from './assets/detections/parsers/detectAvif.mjs';\nexport { detectDefaults } from './assets/detections/parsers/detectDefaults.mjs';\nexport { detectMp4 } from './assets/detections/parsers/detectMp4.mjs';\nexport { detectOgv } from './assets/detections/parsers/detectOgv.mjs';\nexport { detectWebm } from './assets/detections/parsers/detectWebm.mjs';\nexport { detectWebp } from './assets/detections/parsers/detectWebp.mjs';\nexport { testImageFormat } from './assets/detections/utils/testImageFormat.mjs';\nexport { testVideoFormat } from './assets/detections/utils/testVideoFormat.mjs';\nexport { Loader } from './assets/loader/Loader.mjs';\nexport { LoaderParserPriority } from './assets/loader/parsers/LoaderParser.mjs';\nexport { loadJson } from './assets/loader/parsers/loadJson.mjs';\nexport { loadTxt } from './assets/loader/parsers/loadTxt.mjs';\nexport { getFontFamilyName, loadWebFont } from './assets/loader/parsers/loadWebFont.mjs';\nexport { loadSvg } from './assets/loader/parsers/textures/loadSVG.mjs';\nexport { loadImageBitmap, loadTextures } from './assets/loader/parsers/textures/loadTextures.mjs';\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo } from './assets/loader/parsers/textures/loadVideoTextures.mjs';\nexport { createTexture } from './assets/loader/parsers/textures/utils/createTexture.mjs';\nexport { WorkerManager } from './assets/loader/workers/WorkerManager.mjs';\nexport { resolveJsonUrl } from './assets/resolver/parsers/resolveJsonUrl.mjs';\nexport { resolveTextureUrl } from './assets/resolver/parsers/resolveTextureUrl.mjs';\nexport { Resolver, getUrlExtension } from './assets/resolver/Resolver.mjs';\nexport { checkDataUrl } from './assets/utils/checkDataUrl.mjs';\nexport { checkExtension } from './assets/utils/checkExtension.mjs';\nexport { convertToList } from './assets/utils/convertToList.mjs';\nexport { copySearchParams } from './assets/utils/copySearchParams.mjs';\nexport { createStringVariations } from './assets/utils/createStringVariations.mjs';\nexport { isSingleItem } from './assets/utils/isSingleItem.mjs';\nexport { Color } from './color/Color.mjs';\nexport { detectBasis } from './compressed-textures/basis/detectBasis.mjs';\nexport { loadBasis } from './compressed-textures/basis/loadBasis.mjs';\nexport { createLevelBuffers } from './compressed-textures/basis/utils/createLevelBuffers.mjs';\nexport { gpuFormatToBasisTranscoderFormat } from './compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.mjs';\nexport { basisTranscoderUrls, setBasisTranscoderPath } from './compressed-textures/basis/utils/setBasisTranscoderPath.mjs';\nexport { loadBasisOnWorker } from './compressed-textures/basis/worker/loadBasisOnWorker.mjs';\nexport { D3D10_RESOURCE_DIMENSION, D3DFMT, DDS, DXGI_FORMAT, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './compressed-textures/dds/const.mjs';\nexport { loadDDS } from './compressed-textures/dds/loadDDS.mjs';\nexport { parseDDS } from './compressed-textures/dds/parseDDS.mjs';\nexport { loadKTX } from './compressed-textures/ktx/loadKTX.mjs';\nexport { parseKTX } from './compressed-textures/ktx/parseKTX.mjs';\nexport { GL_INTERNAL_FORMAT, KTX } from './compressed-textures/ktx2/const.mjs';\nexport { loadKTX2 } from './compressed-textures/ktx2/loadKTX2.mjs';\nexport { convertFormatIfRequired } from './compressed-textures/ktx2/utils/convertFormatIfRequired.mjs';\nexport { createLevelBuffersFromKTX } from './compressed-textures/ktx2/utils/createLevelBuffersFromKTX.mjs';\nexport { getTextureFormatFromKTXTexture } from './compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.mjs';\nexport { glFormatToGPUFormat } from './compressed-textures/ktx2/utils/glFormatToGPUFormat.mjs';\nexport { gpuFormatToKTXBasisTranscoderFormat } from './compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.mjs';\nexport { ktxTranscoderUrls, setKTXTranscoderPath } from './compressed-textures/ktx2/utils/setKTXTranscoderPath.mjs';\nexport { vkFormatToGPUFormat } from './compressed-textures/ktx2/utils/vkFormatToGPUFormat.mjs';\nexport { loadKTX2onWorker } from './compressed-textures/ktx2/worker/loadKTX2onWorker.mjs';\nexport { detectCompressed } from './compressed-textures/shared/detectCompressed.mjs';\nexport { resolveCompressedTextureUrl, validFormats } from './compressed-textures/shared/resolveCompressedTextureUrl.mjs';\nexport { Culler } from './culling/Culler.mjs';\nexport { CullerPlugin } from './culling/CullerPlugin.mjs';\nexport { cullingMixin } from './culling/cullingMixin.mjs';\nexport { CanvasObserver } from './dom/CanvasObserver.mjs';\nexport { DOMContainer } from './dom/DOMContainer.mjs';\nexport { DOMPipe } from './dom/DOMPipe.mjs';\nexport { DOMAdapter } from './environment/adapter.mjs';\nexport { autoDetectEnvironment, loadEnvironmentExtensions } from './environment/autoDetectEnvironment.mjs';\nexport { BrowserAdapter } from './environment-browser/BrowserAdapter.mjs';\nexport { WebWorkerAdapter } from './environment-webworker/WebWorkerAdapter.mjs';\nexport { EventBoundary } from './events/EventBoundary.mjs';\nexport { EventSystem } from './events/EventSystem.mjs';\nexport { EventsTicker } from './events/EventTicker.mjs';\nexport { FederatedEvent } from './events/FederatedEvent.mjs';\nexport { FederatedContainer } from './events/FederatedEventTarget.mjs';\nexport { FederatedMouseEvent } from './events/FederatedMouseEvent.mjs';\nexport { FederatedPointerEvent } from './events/FederatedPointerEvent.mjs';\nexport { FederatedWheelEvent } from './events/FederatedWheelEvent.mjs';\nexport { default as blendTemplateFrag } from './filters/blend-modes/blend-template.frag.mjs';\nexport { default as blendTemplateVert } from './filters/blend-modes/blend-template.vert.mjs';\nexport { default as blendTemplateWgsl } from './filters/blend-modes/blend-template.wgsl.mjs';\nexport { default as hslWgsl } from './filters/blend-modes/hsl.wgsl.mjs';\nexport { default as alphaFrag } from './filters/defaults/alpha/alpha.frag.mjs';\nexport { default as alphaWgsl } from './filters/defaults/alpha/alpha.wgsl.mjs';\nexport { default as blurTemplateWgsl } from './filters/defaults/blur/gpu/blur-template.wgsl.mjs';\nexport { default as colorMatrixFilterFrag } from './filters/defaults/color-matrix/colorMatrixFilter.frag.mjs';\nexport { default as colorMatrixFilterWgsl } from './filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs';\nexport { default as defaultFilterVert } from './filters/defaults/defaultFilter.vert.mjs';\nexport { default as displacementFrag } from './filters/defaults/displacement/displacement.frag.mjs';\nexport { default as displacementVert } from './filters/defaults/displacement/displacement.vert.mjs';\nexport { default as displacementWgsl } from './filters/defaults/displacement/displacement.wgsl.mjs';\nexport { default as noiseFrag } from './filters/defaults/noise/noise.frag.mjs';\nexport { default as noiseWgsl } from './filters/defaults/noise/noise.wgsl.mjs';\nexport { default as maskFrag } from './filters/mask/mask.frag.mjs';\nexport { default as maskVert } from './filters/mask/mask.vert.mjs';\nexport { default as maskWgsl } from './filters/mask/mask.wgsl.mjs';\nexport { BlendModeFilter } from './filters/blend-modes/BlendModeFilter.mjs';\nexport { hslgl } from './filters/blend-modes/hls/GLhls.mjs';\nexport { hslgpu } from './filters/blend-modes/hls/GPUhls.mjs';\nexport { AlphaFilter } from './filters/defaults/alpha/AlphaFilter.mjs';\nexport { BlurFilter } from './filters/defaults/blur/BlurFilter.mjs';\nexport { BlurFilterPass } from './filters/defaults/blur/BlurFilterPass.mjs';\nexport { GAUSSIAN_VALUES } from './filters/defaults/blur/const.mjs';\nexport { generateBlurFragSource } from './filters/defaults/blur/gl/generateBlurFragSource.mjs';\nexport { generateBlurGlProgram } from './filters/defaults/blur/gl/generateBlurGlProgram.mjs';\nexport { generateBlurVertSource } from './filters/defaults/blur/gl/generateBlurVertSource.mjs';\nexport { generateBlurProgram } from './filters/defaults/blur/gpu/generateBlurProgram.mjs';\nexport { ColorMatrixFilter } from './filters/defaults/color-matrix/ColorMatrixFilter.mjs';\nexport { DisplacementFilter } from './filters/defaults/displacement/DisplacementFilter.mjs';\nexport { NoiseFilter } from './filters/defaults/noise/NoiseFilter.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { FilterEffect } from './filters/FilterEffect.mjs';\nexport { FilterPipe } from './filters/FilterPipe.mjs';\nexport { FilterSystem } from './filters/FilterSystem.mjs';\nexport { MaskFilter } from './filters/mask/MaskFilter.mjs';\nexport { groupD8 } from './maths/matrix/groupD8.mjs';\nexport { Matrix } from './maths/matrix/Matrix.mjs';\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG } from './maths/misc/const.mjs';\nexport { isPow2, log2, nextPow2 } from './maths/misc/pow2.mjs';\nexport { squaredDistanceToLineSegment } from './maths/misc/squaredDistanceToLineSegment.mjs';\nexport { ObservablePoint } from './maths/point/ObservablePoint.mjs';\nexport { Point } from './maths/point/Point.mjs';\nexport { pointInTriangle } from './maths/point/pointInTriangle.mjs';\nexport { Circle } from './maths/shapes/Circle.mjs';\nexport { Ellipse } from './maths/shapes/Ellipse.mjs';\nexport { Polygon } from './maths/shapes/Polygon.mjs';\nexport { Rectangle } from './maths/shapes/Rectangle.mjs';\nexport { RoundedRectangle } from './maths/shapes/RoundedRectangle.mjs';\nexport { Triangle } from './maths/shapes/Triangle.mjs';\nexport { PrepareBase } from './prepare/PrepareBase.mjs';\nexport { PrepareQueue } from './prepare/PrepareQueue.mjs';\nexport { PrepareSystem } from './prepare/PrepareSystem.mjs';\nexport { PrepareUpload } from './prepare/PrepareUpload.mjs';\nexport { GlBatchAdaptor } from './rendering/batcher/gl/GlBatchAdaptor.mjs';\nexport { checkMaxIfStatementsInShader } from './rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs';\nexport { getMaxTexturesPerBatch } from './rendering/batcher/gl/utils/maxRecommendedTextures.mjs';\nexport { generateGPULayout } from './rendering/batcher/gpu/generateGPULayout.mjs';\nexport { generateLayout } from './rendering/batcher/gpu/generateLayout.mjs';\nexport { getTextureBatchBindGroup } from './rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nexport { GpuBatchAdaptor } from './rendering/batcher/gpu/GpuBatchAdaptor.mjs';\nexport { Batch, Batcher } from './rendering/batcher/shared/Batcher.mjs';\nexport { BatcherPipe } from './rendering/batcher/shared/BatcherPipe.mjs';\nexport { BatchGeometry } from './rendering/batcher/shared/BatchGeometry.mjs';\nexport { BatchTextureArray } from './rendering/batcher/shared/BatchTextureArray.mjs';\nexport { DefaultBatcher } from './rendering/batcher/shared/DefaultBatcher.mjs';\nexport { DefaultShader } from './rendering/batcher/shared/DefaultShader.mjs';\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram } from './rendering/high-shader/compileHighShaderToProgram.mjs';\nexport { compileHighShader, compileHighShaderGl } from './rendering/high-shader/compiler/compileHighShader.mjs';\nexport { addBits } from './rendering/high-shader/compiler/utils/addBits.mjs';\nexport { compileHooks } from './rendering/high-shader/compiler/utils/compileHooks.mjs';\nexport { compileInputs } from './rendering/high-shader/compiler/utils/compileInputs.mjs';\nexport { compileOutputs } from './rendering/high-shader/compiler/utils/compileOutputs.mjs';\nexport { formatShader } from './rendering/high-shader/compiler/utils/formatShader.mjs';\nexport { injectBits } from './rendering/high-shader/compiler/utils/injectBits.mjs';\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate } from './rendering/high-shader/defaultProgramTemplate.mjs';\nexport { colorBit, colorBitGl } from './rendering/high-shader/shader-bits/colorBit.mjs';\nexport { generateTextureBatchBit, generateTextureBatchBitGl } from './rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl } from './rendering/high-shader/shader-bits/globalUniformsBit.mjs';\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 } from './rendering/high-shader/shader-bits/localUniformBit.mjs';\nexport { roundPixelsBit, roundPixelsBitGl } from './rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nexport { textureBit, textureBitGl } from './rendering/high-shader/shader-bits/textureBit.mjs';\nexport { AlphaMask } from './rendering/mask/alpha/AlphaMask.mjs';\nexport { AlphaMaskPipe } from './rendering/mask/alpha/AlphaMaskPipe.mjs';\nexport { ColorMask } from './rendering/mask/color/ColorMask.mjs';\nexport { ColorMaskPipe } from './rendering/mask/color/ColorMaskPipe.mjs';\nexport { MaskEffectManager, MaskEffectManagerClass } from './rendering/mask/MaskEffectManager.mjs';\nexport { ScissorMask } from './rendering/mask/scissor/ScissorMask.mjs';\nexport { StencilMask } from './rendering/mask/stencil/StencilMask.mjs';\nexport { StencilMaskPipe } from './rendering/mask/stencil/StencilMaskPipe.mjs';\nexport { addMaskBounds } from './rendering/mask/utils/addMaskBounds.mjs';\nexport { addMaskLocalBounds } from './rendering/mask/utils/addMaskLocalBounds.mjs';\nexport { autoDetectRenderer } from './rendering/renderers/autoDetectRenderer.mjs';\nexport { BUFFER_TYPE } from './rendering/renderers/gl/buffer/const.mjs';\nexport { GlBuffer } from './rendering/renderers/gl/buffer/GlBuffer.mjs';\nexport { GlBufferSystem } from './rendering/renderers/gl/buffer/GlBufferSystem.mjs';\nexport { CLEAR } from './rendering/renderers/gl/const.mjs';\nexport { GlContextSystem } from './rendering/renderers/gl/context/GlContextSystem.mjs';\nexport { GlGeometrySystem } from './rendering/renderers/gl/geometry/GlGeometrySystem.mjs';\nexport { getGlTypeFromFormat } from './rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs';\nexport { GlBackBufferSystem } from './rendering/renderers/gl/GlBackBufferSystem.mjs';\nexport { GlColorMaskSystem } from './rendering/renderers/gl/GlColorMaskSystem.mjs';\nexport { GlEncoderSystem } from './rendering/renderers/gl/GlEncoderSystem.mjs';\nexport { GlLimitsSystem } from './rendering/renderers/gl/GlLimitsSystem.mjs';\nexport { GlRenderTarget } from './rendering/renderers/gl/GlRenderTarget.mjs';\nexport { GlStencilSystem } from './rendering/renderers/gl/GlStencilSystem.mjs';\nexport { GlUboSystem } from './rendering/renderers/gl/GlUboSystem.mjs';\nexport { GlRenderTargetAdaptor } from './rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs';\nexport { GlRenderTargetSystem } from './rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs';\nexport { generateShaderSyncCode } from './rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs';\nexport { getBatchSamplersUniformGroup } from './rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nexport { GlProgram } from './rendering/renderers/gl/shader/GlProgram.mjs';\nexport { GlProgramData, IGLUniformData } from './rendering/renderers/gl/shader/GlProgramData.mjs';\nexport { GlShaderSystem } from './rendering/renderers/gl/shader/GlShaderSystem.mjs';\nexport { GlUniformGroupSystem } from './rendering/renderers/gl/shader/GlUniformGroupSystem.mjs';\nexport { migrateFragmentFromV7toV8 } from './rendering/renderers/gl/shader/migrateFragmentFromV7toV8.mjs';\nexport { compileShader } from './rendering/renderers/gl/shader/program/compileShader.mjs';\nexport { defaultValue } from './rendering/renderers/gl/shader/program/defaultValue.mjs';\nexport { ensureAttributes } from './rendering/renderers/gl/shader/program/ensureAttributes.mjs';\nexport { extractAttributesFromGlProgram } from './rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs';\nexport { generateProgram } from './rendering/renderers/gl/shader/program/generateProgram.mjs';\nexport { getMaxFragmentPrecision } from './rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs';\nexport { getTestContext } from './rendering/renderers/gl/shader/program/getTestContext.mjs';\nexport { getUboData } from './rendering/renderers/gl/shader/program/getUboData.mjs';\nexport { getUniformData } from './rendering/renderers/gl/shader/program/getUniformData.mjs';\nexport { logProgramError } from './rendering/renderers/gl/shader/program/logProgramError.mjs';\nexport { mapSize } from './rendering/renderers/gl/shader/program/mapSize.mjs';\nexport { mapGlToVertexFormat, mapType } from './rendering/renderers/gl/shader/program/mapType.mjs';\nexport { addProgramDefines } from './rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs';\nexport { ensurePrecision } from './rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs';\nexport { insertVersion } from './rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs';\nexport { setProgramName } from './rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs';\nexport { stripVersion } from './rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs';\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 } from './rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs';\nexport { createUboSyncFunctionSTD40 } from './rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs';\nexport { generateArraySyncSTD40 } from './rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs';\nexport { generateUniformsSync } from './rendering/renderers/gl/shader/utils/generateUniformsSync.mjs';\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs';\nexport { GlStateSystem } from './rendering/renderers/gl/state/GlStateSystem.mjs';\nexport { mapWebGLBlendModesToPixi } from './rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs';\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES } from './rendering/renderers/gl/texture/const.mjs';\nexport { GlTexture } from './rendering/renderers/gl/texture/GlTexture.mjs';\nexport { GlTextureSystem } from './rendering/renderers/gl/texture/GlTextureSystem.mjs';\nexport { glUploadBufferImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs';\nexport { glUploadCompressedTextureResource } from './rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs';\nexport { glUploadImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs';\nexport { glUploadVideoResource } from './rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs';\nexport { applyStyleParams } from './rendering/renderers/gl/texture/utils/applyStyleParams.mjs';\nexport { getSupportedGlCompressedTextureFormats } from './rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.mjs';\nexport { mapFormatToGlFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs';\nexport { mapFormatToGlInternalFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs';\nexport { mapFormatToGlType } from './rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs';\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress } from './rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs';\nexport { unpremultiplyAlpha } from './rendering/renderers/gl/texture/utils/unpremultiplyAlpha.mjs';\nexport { WebGLRenderer } from './rendering/renderers/gl/WebGLRenderer.mjs';\nexport { BindGroupSystem } from './rendering/renderers/gpu/BindGroupSystem.mjs';\nexport { GpuBufferSystem } from './rendering/renderers/gpu/buffer/GpuBufferSystem.mjs';\nexport { UboBatch } from './rendering/renderers/gpu/buffer/UboBatch.mjs';\nexport { GpuColorMaskSystem } from './rendering/renderers/gpu/GpuColorMaskSystem.mjs';\nexport { GpuDeviceSystem } from './rendering/renderers/gpu/GpuDeviceSystem.mjs';\nexport { GpuEncoderSystem } from './rendering/renderers/gpu/GpuEncoderSystem.mjs';\nexport { GpuLimitsSystem } from './rendering/renderers/gpu/GpuLimitsSystem.mjs';\nexport { GpuStencilSystem } from './rendering/renderers/gpu/GpuStencilSystem.mjs';\nexport { GpuUboSystem } from './rendering/renderers/gpu/GpuUboSystem.mjs';\nexport { GpuUniformBatchPipe } from './rendering/renderers/gpu/GpuUniformBatchPipe.mjs';\nexport { PipelineSystem } from './rendering/renderers/gpu/pipeline/PipelineSystem.mjs';\nexport { calculateProjection } from './rendering/renderers/gpu/renderTarget/calculateProjection.mjs';\nexport { GpuRenderTarget } from './rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs';\nexport { GpuRenderTargetAdaptor } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs';\nexport { GpuRenderTargetSystem } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs';\nexport { BindGroup } from './rendering/renderers/gpu/shader/BindGroup.mjs';\nexport { GpuProgram } from './rendering/renderers/gpu/shader/GpuProgram.mjs';\nexport { GpuShaderSystem } from './rendering/renderers/gpu/shader/GpuShaderSystem.mjs';\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL } from './rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs';\nexport { createUboSyncFunctionWGSL } from './rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs';\nexport { extractAttributesFromGpuProgram } from './rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs';\nexport { extractStructAndGroups } from './rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs';\nexport { generateArraySyncWGSL } from './rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs';\nexport { generateGpuLayoutGroups } from './rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs';\nexport { generateLayoutHash } from './rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs';\nexport { removeStructAndGroupDuplicates } from './rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs';\nexport { GpuBlendModesToPixi } from './rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs';\nexport { GpuStateSystem } from './rendering/renderers/gpu/state/GpuStateSystem.mjs';\nexport { GpuStencilModesToPixi } from './rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs';\nexport { GpuTextureSystem } from './rendering/renderers/gpu/texture/GpuTextureSystem.mjs';\nexport { gpuUploadBufferImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs';\nexport { blockDataMap, gpuUploadCompressedTextureResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs';\nexport { gpuUploadImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs';\nexport { gpuUploadVideoResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs';\nexport { getSupportedGPUCompressedTextureFormats } from './rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.mjs';\nexport { GpuMipmapGenerator } from './rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs';\nexport { WebGPURenderer } from './rendering/renderers/gpu/WebGPURenderer.mjs';\nexport { BackgroundSystem } from './rendering/renderers/shared/background/BackgroundSystem.mjs';\nexport { BlendModePipe } from './rendering/renderers/shared/blendModes/BlendModePipe.mjs';\nexport { Buffer } from './rendering/renderers/shared/buffer/Buffer.mjs';\nexport { BufferResource } from './rendering/renderers/shared/buffer/BufferResource.mjs';\nexport { BufferUsage } from './rendering/renderers/shared/buffer/const.mjs';\nexport { fastCopy } from './rendering/renderers/shared/buffer/utils/fastCopy.mjs';\nexport { ExtractSystem } from './rendering/renderers/shared/extract/ExtractSystem.mjs';\nexport { GenerateTextureSystem } from './rendering/renderers/shared/extract/GenerateTextureSystem.mjs';\nexport { DRAW_MODES } from './rendering/renderers/shared/geometry/const.mjs';\nexport { Geometry } from './rendering/renderers/shared/geometry/Geometry.mjs';\nexport { buildSimpleUvs, buildUvs } from './rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nexport { ensureIsBuffer } from './rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs';\nexport { getAttributeInfoFromFormat } from './rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nexport { getGeometryBounds } from './rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs';\nexport { transformVertices } from './rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nexport { InstructionSet } from './rendering/renderers/shared/instructions/InstructionSet.mjs';\nexport { GlobalUniformSystem } from './rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs';\nexport { isRenderingToScreen } from './rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs';\nexport { RenderTarget } from './rendering/renderers/shared/renderTarget/RenderTarget.mjs';\nexport { RenderTargetSystem } from './rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs';\nexport { SchedulerSystem } from './rendering/renderers/shared/SchedulerSystem.mjs';\nexport { ShaderStage } from './rendering/renderers/shared/shader/const.mjs';\nexport { Shader } from './rendering/renderers/shared/shader/Shader.mjs';\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './rendering/renderers/shared/shader/types.mjs';\nexport { UboSystem } from './rendering/renderers/shared/shader/UboSystem.mjs';\nexport { UniformGroup } from './rendering/renderers/shared/shader/UniformGroup.mjs';\nexport { createUboSyncFunction } from './rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs';\nexport { getDefaultUniformValue } from './rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs';\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL } from './rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs';\nexport { uniformParsers } from './rendering/renderers/shared/shader/utils/uniformParsers.mjs';\nexport { HelloSystem } from './rendering/renderers/shared/startup/HelloSystem.mjs';\nexport { BLEND_TO_NPM, STENCIL_MODES } from './rendering/renderers/shared/state/const.mjs';\nexport { getAdjustedBlendModeBlend } from './rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nexport { State } from './rendering/renderers/shared/state/State.mjs';\nexport { AbstractRenderer } from './rendering/renderers/shared/system/AbstractRenderer.mjs';\nexport { SharedRenderPipes, SharedSystems } from './rendering/renderers/shared/system/SharedSystems.mjs';\nexport { SystemRunner } from './rendering/renderers/shared/system/SystemRunner.mjs';\nexport { CanvasPool, CanvasPoolClass } from './rendering/renderers/shared/texture/CanvasPool.mjs';\nexport { DEPRECATED_SCALE_MODES, DEPRECATED_WRAP_MODES, SCALE_MODES, WRAP_MODES } from './rendering/renderers/shared/texture/const.mjs';\nexport { RenderableGCSystem } from './rendering/renderers/shared/texture/RenderableGCSystem.mjs';\nexport { RenderTexture } from './rendering/renderers/shared/texture/RenderTexture.mjs';\nexport { BufferImageSource } from './rendering/renderers/shared/texture/sources/BufferImageSource.mjs';\nexport { CanvasSource } from './rendering/renderers/shared/texture/sources/CanvasSource.mjs';\nexport { CompressedSource } from './rendering/renderers/shared/texture/sources/CompressedSource.mjs';\nexport { ImageSource } from './rendering/renderers/shared/texture/sources/ImageSource.mjs';\nexport { TextureSource } from './rendering/renderers/shared/texture/sources/TextureSource.mjs';\nexport { VideoSource } from './rendering/renderers/shared/texture/sources/VideoSource.mjs';\nexport { Texture } from './rendering/renderers/shared/texture/Texture.mjs';\nexport { TextureGCSystem } from './rendering/renderers/shared/texture/TextureGCSystem.mjs';\nexport { TextureMatrix } from './rendering/renderers/shared/texture/TextureMatrix.mjs';\nexport { TexturePool, TexturePoolClass } from './rendering/renderers/shared/texture/TexturePool.mjs';\nexport { TextureStyle } from './rendering/renderers/shared/texture/TextureStyle.mjs';\nexport { TextureUvs } from './rendering/renderers/shared/texture/TextureUvs.mjs';\nexport { getCanvasTexture, hasCachedCanvasTexture } from './rendering/renderers/shared/texture/utils/getCanvasTexture.mjs';\nexport { getSupportedCompressedTextureFormats } from './rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.mjs';\nexport { getSupportedTextureFormats, nonCompressedFormats } from './rendering/renderers/shared/texture/utils/getSupportedTextureFormats.mjs';\nexport { autoDetectSource, resourceToTexture, textureFrom } from './rendering/renderers/shared/texture/utils/textureFrom.mjs';\nexport { createIdFromString } from './rendering/renderers/shared/utils/createIdFromString.mjs';\nexport { parseFunctionBody } from './rendering/renderers/shared/utils/parseFunctionBody.mjs';\nexport { ViewSystem } from './rendering/renderers/shared/view/ViewSystem.mjs';\nexport { RendererType } from './rendering/renderers/types.mjs';\nexport { default as particlesFrag } from './scene/particle-container/shared/shader/particles.frag.mjs';\nexport { default as particlesVert } from './scene/particle-container/shared/shader/particles.vert.mjs';\nexport { default as particlesWgsl } from './scene/particle-container/shared/shader/particles.wgsl.mjs';\nexport { Bounds } from './scene/container/bounds/Bounds.mjs';\nexport { getFastGlobalBounds } from './scene/container/bounds/getFastGlobalBounds.mjs';\nexport { getGlobalBounds, updateTransformBackwards } from './scene/container/bounds/getGlobalBounds.mjs';\nexport { getLocalBounds } from './scene/container/bounds/getLocalBounds.mjs';\nexport { getGlobalRenderableBounds } from './scene/container/bounds/getRenderableBounds.mjs';\nexport { boundsPool, matrixPool } from './scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nexport { cacheAsTextureMixin } from './scene/container/container-mixins/cacheAsTextureMixin.mjs';\nexport { childrenHelperMixin } from './scene/container/container-mixins/childrenHelperMixin.mjs';\nexport { collectRenderablesMixin } from './scene/container/container-mixins/collectRenderablesMixin.mjs';\nexport { effectsMixin } from './scene/container/container-mixins/effectsMixin.mjs';\nexport { findMixin } from './scene/container/container-mixins/findMixin.mjs';\nexport { getFastGlobalBoundsMixin } from './scene/container/container-mixins/getFastGlobalBoundsMixin.mjs';\nexport { bgr2rgb, getGlobalMixin } from './scene/container/container-mixins/getGlobalMixin.mjs';\nexport { measureMixin } from './scene/container/container-mixins/measureMixin.mjs';\nexport { onRenderMixin } from './scene/container/container-mixins/onRenderMixin.mjs';\nexport { sortMixin } from './scene/container/container-mixins/sortMixin.mjs';\nexport { toLocalGlobalMixin } from './scene/container/container-mixins/toLocalGlobalMixin.mjs';\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE } from './scene/container/Container.mjs';\nexport { CustomRenderPipe } from './scene/container/CustomRenderPipe.mjs';\nexport { RenderContainer } from './scene/container/RenderContainer.mjs';\nexport { RenderGroup } from './scene/container/RenderGroup.mjs';\nexport { RenderGroupPipe } from './scene/container/RenderGroupPipe.mjs';\nexport { RenderGroupSystem } from './scene/container/RenderGroupSystem.mjs';\nexport { assignWithIgnore } from './scene/container/utils/assignWithIgnore.mjs';\nexport { checkChildrenDidChange } from './scene/container/utils/checkChildrenDidChange.mjs';\nexport { clearList } from './scene/container/utils/clearList.mjs';\nexport { collectAllRenderables } from './scene/container/utils/collectAllRenderables.mjs';\nexport { definedProps } from './scene/container/utils/definedProps.mjs';\nexport { executeInstructions } from './scene/container/utils/executeInstructions.mjs';\nexport { multiplyColors } from './scene/container/utils/multiplyColors.mjs';\nexport { multiplyHexColors } from './scene/container/utils/multiplyHexColors.mjs';\nexport { updateLocalTransform } from './scene/container/utils/updateLocalTransform.mjs';\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren } from './scene/container/utils/updateRenderGroupTransforms.mjs';\nexport { updateWorldTransform } from './scene/container/utils/updateWorldTransform.mjs';\nexport { validateRenderables } from './scene/container/utils/validateRenderables.mjs';\nexport { GlGraphicsAdaptor } from './scene/graphics/gl/GlGraphicsAdaptor.mjs';\nexport { color32BitToUniform, colorToUniform } from './scene/graphics/gpu/colorToUniform.mjs';\nexport { GpuGraphicsAdaptor } from './scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nexport { BatchableGraphics } from './scene/graphics/shared/BatchableGraphics.mjs';\nexport { buildAdaptiveBezier } from './scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs';\nexport { buildAdaptiveQuadratic } from './scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs';\nexport { buildArc } from './scene/graphics/shared/buildCommands/buildArc.mjs';\nexport { buildArcTo } from './scene/graphics/shared/buildCommands/buildArcTo.mjs';\nexport { buildArcToSvg } from './scene/graphics/shared/buildCommands/buildArcToSvg.mjs';\nexport { buildCircle, buildEllipse, buildRoundedRectangle } from './scene/graphics/shared/buildCommands/buildCircle.mjs';\nexport { buildLine } from './scene/graphics/shared/buildCommands/buildLine.mjs';\nexport { buildPixelLine } from './scene/graphics/shared/buildCommands/buildPixelLine.mjs';\nexport { buildPolygon } from './scene/graphics/shared/buildCommands/buildPolygon.mjs';\nexport { buildRectangle } from './scene/graphics/shared/buildCommands/buildRectangle.mjs';\nexport { buildTriangle } from './scene/graphics/shared/buildCommands/buildTriangle.mjs';\nexport { closePointEps, curveEps } from './scene/graphics/shared/const.mjs';\nexport { FillGradient } from './scene/graphics/shared/fill/FillGradient.mjs';\nexport { FillPattern } from './scene/graphics/shared/fill/FillPattern.mjs';\nexport { Graphics } from './scene/graphics/shared/Graphics.mjs';\nexport { GraphicsContext } from './scene/graphics/shared/GraphicsContext.mjs';\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem } from './scene/graphics/shared/GraphicsContextSystem.mjs';\nexport { GraphicsGpuData, GraphicsPipe } from './scene/graphics/shared/GraphicsPipe.mjs';\nexport { GraphicsPath } from './scene/graphics/shared/path/GraphicsPath.mjs';\nexport { roundedShapeArc, roundedShapeQuadraticCurve } from './scene/graphics/shared/path/roundShape.mjs';\nexport { ShapePath } from './scene/graphics/shared/path/ShapePath.mjs';\nexport { parseSVGDefinitions } from './scene/graphics/shared/svg/parseSVGDefinitions.mjs';\nexport { parseSVGFloatAttribute } from './scene/graphics/shared/svg/parseSVGFloatAttribute.mjs';\nexport { parseSVGPath } from './scene/graphics/shared/svg/parseSVGPath.mjs';\nexport { parseSVGStyle, styleAttributes } from './scene/graphics/shared/svg/parseSVGStyle.mjs';\nexport { SVGParser } from './scene/graphics/shared/svg/SVGParser.mjs';\nexport { extractSvgUrlId } from './scene/graphics/shared/svg/utils/extractSvgUrlId.mjs';\nexport { checkForNestedPattern, getFillInstructionData } from './scene/graphics/shared/svg/utils/fillOperations.mjs';\nexport { appendSVGPath, calculatePathArea, extractSubpaths } from './scene/graphics/shared/svg/utils/pathOperations.mjs';\nexport { buildContextBatches, shapeBuilders } from './scene/graphics/shared/utils/buildContextBatches.mjs';\nexport { buildGeometryFromPath } from './scene/graphics/shared/utils/buildGeometryFromPath.mjs';\nexport { toFillStyle, toStrokeStyle } from './scene/graphics/shared/utils/convertFillInputToFillStyle.mjs';\nexport { generateTextureMatrix } from './scene/graphics/shared/utils/generateTextureFillMatrix.mjs';\nexport { getOrientationOfPoints } from './scene/graphics/shared/utils/getOrientationOfPoints.mjs';\nexport { triangulateWithHoles } from './scene/graphics/shared/utils/triangulateWithHoles.mjs';\nexport { RenderLayer } from './scene/layers/RenderLayer.mjs';\nexport { PerspectiveMesh } from './scene/mesh-perspective/PerspectiveMesh.mjs';\nexport { PerspectivePlaneGeometry } from './scene/mesh-perspective/PerspectivePlaneGeometry.mjs';\nexport { applyProjectiveTransformationToPlane } from './scene/mesh-perspective/utils/applyProjectiveTransformationToPlane.mjs';\nexport { compute2DProjection } from './scene/mesh-perspective/utils/compute2DProjections.mjs';\nexport { MeshPlane } from './scene/mesh-plane/MeshPlane.mjs';\nexport { PlaneGeometry } from './scene/mesh-plane/PlaneGeometry.mjs';\nexport { MeshRope } from './scene/mesh-simple/MeshRope.mjs';\nexport { MeshSimple } from './scene/mesh-simple/MeshSimple.mjs';\nexport { RopeGeometry } from './scene/mesh-simple/RopeGeometry.mjs';\nexport { GlMeshAdaptor } from './scene/mesh/gl/GlMeshAdaptor.mjs';\nexport { GpuMeshAdapter } from './scene/mesh/gpu/GpuMeshAdapter.mjs';\nexport { BatchableMesh } from './scene/mesh/shared/BatchableMesh.mjs';\nexport { getTextureDefaultMatrix } from './scene/mesh/shared/getTextureDefaultMatrix.mjs';\nexport { Mesh } from './scene/mesh/shared/Mesh.mjs';\nexport { MeshGeometry } from './scene/mesh/shared/MeshGeometry.mjs';\nexport { MeshGpuData, MeshPipe } from './scene/mesh/shared/MeshPipe.mjs';\nexport { GlParticleContainerAdaptor } from './scene/particle-container/gl/GlParticleContainerAdaptor.mjs';\nexport { GpuParticleContainerAdaptor } from './scene/particle-container/gpu/GpuParticleContainerAdaptor.mjs';\nexport { GlParticleContainerPipe } from './scene/particle-container/shared/GlParticleContainerPipe.mjs';\nexport { GpuParticleContainerPipe } from './scene/particle-container/shared/GpuParticleContainerPipe.mjs';\nexport { Particle } from './scene/particle-container/shared/Particle.mjs';\nexport { ParticleBuffer } from './scene/particle-container/shared/ParticleBuffer.mjs';\nexport { ParticleContainer } from './scene/particle-container/shared/ParticleContainer.mjs';\nexport { ParticleContainerPipe } from './scene/particle-container/shared/ParticleContainerPipe.mjs';\nexport { particleData } from './scene/particle-container/shared/particleData.mjs';\nexport { ParticleShader } from './scene/particle-container/shared/shader/ParticleShader.mjs';\nexport { createIndicesForQuads } from './scene/particle-container/shared/utils/createIndicesForQuads.mjs';\nexport { generateParticleUpdateFunction } from './scene/particle-container/shared/utils/generateParticleUpdateFunction.mjs';\nexport { AnimatedSprite } from './scene/sprite-animated/AnimatedSprite.mjs';\nexport { NineSliceGeometry } from './scene/sprite-nine-slice/NineSliceGeometry.mjs';\nexport { NineSlicePlane, NineSliceSprite } from './scene/sprite-nine-slice/NineSliceSprite.mjs';\nexport { NineSliceSpriteGpuData, NineSliceSpritePipe } from './scene/sprite-nine-slice/NineSliceSpritePipe.mjs';\nexport { tilingBit, tilingBitGl } from './scene/sprite-tiling/shader/tilingBit.mjs';\nexport { TilingSpriteShader } from './scene/sprite-tiling/shader/TilingSpriteShader.mjs';\nexport { TilingSprite } from './scene/sprite-tiling/TilingSprite.mjs';\nexport { TilingSpriteGpuData, TilingSpritePipe } from './scene/sprite-tiling/TilingSpritePipe.mjs';\nexport { applyMatrix } from './scene/sprite-tiling/utils/applyMatrix.mjs';\nexport { QuadGeometry } from './scene/sprite-tiling/utils/QuadGeometry.mjs';\nexport { setPositions } from './scene/sprite-tiling/utils/setPositions.mjs';\nexport { setUvs } from './scene/sprite-tiling/utils/setUvs.mjs';\nexport { BatchableSprite } from './scene/sprite/BatchableSprite.mjs';\nexport { Sprite } from './scene/sprite/Sprite.mjs';\nexport { SpritePipe } from './scene/sprite/SpritePipe.mjs';\nexport { AbstractBitmapFont } from './scene/text-bitmap/AbstractBitmapFont.mjs';\nexport { bitmapFontTextParser } from './scene/text-bitmap/asset/bitmapFontTextParser.mjs';\nexport { bitmapFontXMLParser } from './scene/text-bitmap/asset/bitmapFontXMLParser.mjs';\nexport { bitmapFontXMLStringParser } from './scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs';\nexport { bitmapFontCachePlugin, loadBitmapFont } from './scene/text-bitmap/asset/loadBitmapFont.mjs';\nexport { BitmapFont } from './scene/text-bitmap/BitmapFont.mjs';\nexport { BitmapFontManager } from './scene/text-bitmap/BitmapFontManager.mjs';\nexport { BitmapText } from './scene/text-bitmap/BitmapText.mjs';\nexport { BitmapTextGraphics, BitmapTextPipe } from './scene/text-bitmap/BitmapTextPipe.mjs';\nexport { DynamicBitmapFont } from './scene/text-bitmap/DynamicBitmapFont.mjs';\nexport { bitmapTextSplit } from './scene/text-bitmap/utils/bitmapTextSplit.mjs';\nexport { getBitmapTextLayout } from './scene/text-bitmap/utils/getBitmapTextLayout.mjs';\nexport { resolveCharacters } from './scene/text-bitmap/utils/resolveCharacters.mjs';\nexport { BatchableHTMLText } from './scene/text-html/BatchableHTMLText.mjs';\nexport { HTMLText } from './scene/text-html/HTMLText.mjs';\nexport { HTMLTextPipe } from './scene/text-html/HTMLTextPipe.mjs';\nexport { HTMLTextRenderData } from './scene/text-html/HTMLTextRenderData.mjs';\nexport { HTMLTextStyle } from './scene/text-html/HTMLTextStyle.mjs';\nexport { HTMLTextSystem } from './scene/text-html/HTMLTextSystem.mjs';\nexport { extractFontFamilies } from './scene/text-html/utils/extractFontFamilies.mjs';\nexport { FontStylePromiseCache, getFontCss } from './scene/text-html/utils/getFontCss.mjs';\nexport { getSVGUrl } from './scene/text-html/utils/getSVGUrl.mjs';\nexport { getTemporaryCanvasFromImage } from './scene/text-html/utils/getTemporaryCanvasFromImage.mjs';\nexport { loadFontAsBase64 } from './scene/text-html/utils/loadFontAsBase64.mjs';\nexport { loadFontCSS } from './scene/text-html/utils/loadFontCSS.mjs';\nexport { loadSVGImage } from './scene/text-html/utils/loadSVGImage.mjs';\nexport { measureHtmlText } from './scene/text-html/utils/measureHtmlText.mjs';\nexport { textStyleToCSS } from './scene/text-html/utils/textStyleToCSS.mjs';\nexport { AbstractSplitText } from './scene/text-split/AbstractSplitText.mjs';\nexport { SplitBitmapText } from './scene/text-split/SplitBitmapText.mjs';\nexport { SplitText } from './scene/text-split/SplitText.mjs';\nexport { AbstractText, ensureTextOptions } from './scene/text/AbstractText.mjs';\nexport { BatchableText } from './scene/text/canvas/BatchableText.mjs';\nexport { CanvasTextGenerator } from './scene/text/canvas/CanvasTextGenerator.mjs';\nexport { CanvasTextMetrics } from './scene/text/canvas/CanvasTextMetrics.mjs';\nexport { CanvasTextPipe } from './scene/text/canvas/CanvasTextPipe.mjs';\nexport { CanvasTextSystem } from './scene/text/canvas/CanvasTextSystem.mjs';\nexport { fontStringFromTextStyle } from './scene/text/canvas/utils/fontStringFromTextStyle.mjs';\nexport { getCanvasFillStyle } from './scene/text/canvas/utils/getCanvasFillStyle.mjs';\nexport { SdfShader } from './scene/text/sdfShader/SdfShader.mjs';\nexport { localUniformMSDFBit, localUniformMSDFBitGl } from './scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs';\nexport { mSDFBit, mSDFBitGl } from './scene/text/sdfShader/shader-bits/mSDFBit.mjs';\nexport { Text } from './scene/text/Text.mjs';\nexport { TextStyle } from './scene/text/TextStyle.mjs';\nexport { canvasTextSplit } from './scene/text/utils/canvasTextSplit.mjs';\nexport { generateTextStyleKey } from './scene/text/utils/generateTextStyleKey.mjs';\nexport { getPo2TextureFromSource } from './scene/text/utils/getPo2TextureFromSource.mjs';\nexport { updateTextBounds } from './scene/text/utils/updateTextBounds.mjs';\nexport { ViewContainer } from './scene/view/ViewContainer.mjs';\nexport { Spritesheet } from './spritesheet/Spritesheet.mjs';\nexport { spritesheetAsset } from './spritesheet/spritesheetAsset.mjs';\nexport { UPDATE_PRIORITY } from './ticker/const.mjs';\nexport { Ticker } from './ticker/Ticker.mjs';\nexport { TickerListener } from './ticker/TickerListener.mjs';\nexport { detectVideoAlphaMode } from './utils/browser/detectVideoAlphaMode.mjs';\nexport { isMobile } from './utils/browser/isMobile.mjs';\nexport { isSafari } from './utils/browser/isSafari.mjs';\nexport { isWebGLSupported } from './utils/browser/isWebGLSupported.mjs';\nexport { isWebGPUSupported } from './utils/browser/isWebGPUSupported.mjs';\nexport { unsafeEvalSupported } from './utils/browser/unsafeEvalSupported.mjs';\nexport { getCanvasBoundingBox } from './utils/canvas/getCanvasBoundingBox.mjs';\nexport { DATA_URI, VERSION } from './utils/const.mjs';\nexport { default as EventEmitter } from 'eventemitter3';\nexport { cleanArray, cleanHash } from './utils/data/clean.mjs';\nexport { removeItems } from './utils/data/removeItems.mjs';\nexport { resetUids, uid } from './utils/data/uid.mjs';\nexport { updateQuadBounds } from './utils/data/updateQuadBounds.mjs';\nexport { ViewableBuffer } from './utils/data/ViewableBuffer.mjs';\nexport { ApplicationInitHook, RendererInitHook } from './utils/global/globalHooks.mjs';\nexport { deprecation, v8_0_0, v8_3_4 } from './utils/logging/deprecation.mjs';\nexport { logDebugTexture } from './utils/logging/logDebugTexture.mjs';\nexport { logRenderGroupScene, logScene } from './utils/logging/logScene.mjs';\nexport { warn } from './utils/logging/warn.mjs';\nexport { NOOP } from './utils/misc/NOOP.mjs';\nexport { Transform } from './utils/misc/Transform.mjs';\nexport { getResolutionOfUrl } from './utils/network/getResolutionOfUrl.mjs';\nexport { path } from './utils/path.mjs';\nexport { GlobalResourceRegistry } from './utils/pool/GlobalResourceRegistry.mjs';\nexport { Pool } from './utils/pool/Pool.mjs';\nexport { BigPool, PoolGroupClass } from './utils/pool/PoolGroup.mjs';\nexport { sayHello } from './utils/sayHello.mjs';\nexport { earcut } from './utils/utils.mjs';\n\n\"use strict\";\nextensions.add(browserExt, webworkerExt);\n\nexport { browserExt, extensions, webworkerExt };\n//# sourceMappingURL=index.mjs.map\n","\n      import API from \"!../node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/.pnpm/style-loader@4.0.0_webpack@5.101.3/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js!./styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/.pnpm/css-loader@7.1.2_webpack@5.101.3/node_modules/css-loader/dist/cjs.js!./styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","let instance;\nfunction setInstance(sound) {\n  instance = sound;\n  return sound;\n}\nfunction getInstance() {\n  return instance;\n}\n\nexport { getInstance, instance, setInstance };\n//# sourceMappingURL=instance.mjs.map\n","class Filter {\n  /**\n   * @param {AudioNode} destination - The audio node to use as the destination for the input AudioNode\n   * @param {AudioNode} [source] - Optional output node, defaults to destination node. This is useful\n   *        when creating filters which contains multiple AudioNode elements chained together.\n   */\n  constructor(destination, source) {\n    this.init(destination, source);\n  }\n  /** Reinitialize */\n  init(destination, source) {\n    this.destination = destination;\n    this.source = source || destination;\n  }\n  /**\n   * Connect to the destination.\n   * @param {AudioNode} destination - The destination node to connect the output to\n   */\n  connect(destination) {\n    this.source?.connect(destination);\n  }\n  /** Completely disconnect filter from destination and source nodes. */\n  disconnect() {\n    this.source?.disconnect();\n  }\n  /** Destroy the filter and don't use after this. */\n  destroy() {\n    this.disconnect();\n    this.destination = null;\n    this.source = null;\n  }\n}\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","import { getInstance } from '../instance.mjs';\n\nclass WebAudioUtils {\n  /**\n   * Dezippering is removed in the future Web Audio API, instead\n   * we use the `setValueAtTime` method, however, this is not available\n   * in all environments (e.g., Android webview), so we fallback to the `value` setter.\n   * @param param - AudioNode parameter object\n   * @param value - Value to set\n   * @return The value set\n   */\n  static setParamValue(param, value) {\n    if (param.setValueAtTime) {\n      const context = getInstance().context;\n      param.setValueAtTime(value, context.audioContext.currentTime);\n    } else {\n      param.value = value;\n    }\n    return value;\n  }\n}\n\nexport { WebAudioUtils };\n//# sourceMappingURL=WebAudioUtils.mjs.map\n","import { getInstance } from '../instance.mjs';\nimport { WebAudioUtils } from '../webaudio/WebAudioUtils.mjs';\nimport { Filter } from './Filter.mjs';\n\nconst _EqualizerFilter = class extends Filter {\n  /**\n   * @param f32 - Default gain for 32 Hz\n   * @param f64 - Default gain for 64 Hz\n   * @param f125 - Default gain for 125 Hz\n   * @param f250 - Default gain for 250 Hz\n   * @param f500 - Default gain for 500 Hz\n   * @param f1k - Default gain for 1000 Hz\n   * @param f2k - Default gain for 2000 Hz\n   * @param f4k - Default gain for 4000 Hz\n   * @param f8k - Default gain for 8000 Hz\n   * @param f16k - Default gain for 16000 Hz\n   */\n  constructor(f32 = 0, f64 = 0, f125 = 0, f250 = 0, f500 = 0, f1k = 0, f2k = 0, f4k = 0, f8k = 0, f16k = 0) {\n    let bands = [];\n    const equalizerBands = [\n      {\n        f: _EqualizerFilter.F32,\n        type: \"lowshelf\",\n        gain: f32\n      },\n      {\n        f: _EqualizerFilter.F64,\n        type: \"peaking\",\n        gain: f64\n      },\n      {\n        f: _EqualizerFilter.F125,\n        type: \"peaking\",\n        gain: f125\n      },\n      {\n        f: _EqualizerFilter.F250,\n        type: \"peaking\",\n        gain: f250\n      },\n      {\n        f: _EqualizerFilter.F500,\n        type: \"peaking\",\n        gain: f500\n      },\n      {\n        f: _EqualizerFilter.F1K,\n        type: \"peaking\",\n        gain: f1k\n      },\n      {\n        f: _EqualizerFilter.F2K,\n        type: \"peaking\",\n        gain: f2k\n      },\n      {\n        f: _EqualizerFilter.F4K,\n        type: \"peaking\",\n        gain: f4k\n      },\n      {\n        f: _EqualizerFilter.F8K,\n        type: \"peaking\",\n        gain: f8k\n      },\n      {\n        f: _EqualizerFilter.F16K,\n        type: \"highshelf\",\n        gain: f16k\n      }\n    ];\n    if (!getInstance().useLegacy) {\n      bands = equalizerBands.map((band) => {\n        const node = getInstance().context.audioContext.createBiquadFilter();\n        node.type = band.type;\n        WebAudioUtils.setParamValue(node.Q, 1);\n        node.frequency.value = band.f;\n        WebAudioUtils.setParamValue(node.gain, band.gain);\n        return node;\n      });\n    }\n    super(bands[0], bands[bands.length - 1]);\n    this.bands = bands;\n    this.bandsMap = {};\n    for (let i = 0; i < this.bands.length; i++) {\n      const node = this.bands[i];\n      if (i > 0) {\n        this.bands[i - 1].connect(node);\n      }\n      this.bandsMap[node.frequency.value] = node;\n    }\n  }\n  /**\n   * Set gain on a specific frequency.\n   * @param frequency - The frequency, see EqualizerFilter.F* for bands\n   * @param gain - Recommended -40 to 40.\n   */\n  setGain(frequency, gain = 0) {\n    if (!this.bandsMap[frequency]) {\n      throw new Error(`No band found for frequency ${frequency}`);\n    }\n    WebAudioUtils.setParamValue(this.bandsMap[frequency].gain, gain);\n  }\n  /**\n   * Get gain amount on a specific frequency.\n   * @return The amount of gain set.\n   */\n  getGain(frequency) {\n    if (!this.bandsMap[frequency]) {\n      throw new Error(`No band found for frequency ${frequency}`);\n    }\n    return this.bandsMap[frequency].gain.value;\n  }\n  /**\n   * Gain at 32 Hz frequencey.\n   * @default 0\n   */\n  set f32(value) {\n    this.setGain(_EqualizerFilter.F32, value);\n  }\n  get f32() {\n    return this.getGain(_EqualizerFilter.F32);\n  }\n  /**\n   * Gain at 64 Hz frequencey.\n   * @default 0\n   */\n  set f64(value) {\n    this.setGain(_EqualizerFilter.F64, value);\n  }\n  get f64() {\n    return this.getGain(_EqualizerFilter.F64);\n  }\n  /**\n   * Gain at 125 Hz frequencey.\n   * @default 0\n   */\n  set f125(value) {\n    this.setGain(_EqualizerFilter.F125, value);\n  }\n  get f125() {\n    return this.getGain(_EqualizerFilter.F125);\n  }\n  /**\n   * Gain at 250 Hz frequencey.\n   * @default 0\n   */\n  set f250(value) {\n    this.setGain(_EqualizerFilter.F250, value);\n  }\n  get f250() {\n    return this.getGain(_EqualizerFilter.F250);\n  }\n  /**\n   * Gain at 500 Hz frequencey.\n   * @default 0\n   */\n  set f500(value) {\n    this.setGain(_EqualizerFilter.F500, value);\n  }\n  get f500() {\n    return this.getGain(_EqualizerFilter.F500);\n  }\n  /**\n   * Gain at 1 KHz frequencey.\n   * @default 0\n   */\n  set f1k(value) {\n    this.setGain(_EqualizerFilter.F1K, value);\n  }\n  get f1k() {\n    return this.getGain(_EqualizerFilter.F1K);\n  }\n  /**\n   * Gain at 2 KHz frequencey.\n   * @default 0\n   */\n  set f2k(value) {\n    this.setGain(_EqualizerFilter.F2K, value);\n  }\n  get f2k() {\n    return this.getGain(_EqualizerFilter.F2K);\n  }\n  /**\n   * Gain at 4 KHz frequencey.\n   * @default 0\n   */\n  set f4k(value) {\n    this.setGain(_EqualizerFilter.F4K, value);\n  }\n  get f4k() {\n    return this.getGain(_EqualizerFilter.F4K);\n  }\n  /**\n   * Gain at 8 KHz frequencey.\n   * @default 0\n   */\n  set f8k(value) {\n    this.setGain(_EqualizerFilter.F8K, value);\n  }\n  get f8k() {\n    return this.getGain(_EqualizerFilter.F8K);\n  }\n  /**\n   * Gain at 16 KHz frequencey.\n   * @default 0\n   */\n  set f16k(value) {\n    this.setGain(_EqualizerFilter.F16K, value);\n  }\n  get f16k() {\n    return this.getGain(_EqualizerFilter.F16K);\n  }\n  /** Reset all frequency bands to have gain of 0 */\n  reset() {\n    this.bands.forEach((band) => {\n      WebAudioUtils.setParamValue(band.gain, 0);\n    });\n  }\n  destroy() {\n    this.bands.forEach((band) => {\n      band.disconnect();\n    });\n    this.bands = null;\n    this.bandsMap = null;\n  }\n};\nlet EqualizerFilter = _EqualizerFilter;\n/**\n * Band at 32 Hz\n * @readonly\n */\nEqualizerFilter.F32 = 32;\n/**\n * Band at 64 Hz\n * @readonly\n */\nEqualizerFilter.F64 = 64;\n/**\n * Band at 125 Hz\n * @readonly\n */\nEqualizerFilter.F125 = 125;\n/**\n * Band at 250 Hz\n * @readonly\n */\nEqualizerFilter.F250 = 250;\n/**\n * Band at 500 Hz\n * @readonly\n */\nEqualizerFilter.F500 = 500;\n/**\n * Band at 1000 Hz\n * @readonly\n */\nEqualizerFilter.F1K = 1e3;\n/**\n * Band at 2000 Hz\n * @readonly\n */\nEqualizerFilter.F2K = 2e3;\n/**\n * Band at 4000 Hz\n * @readonly\n */\nEqualizerFilter.F4K = 4e3;\n/**\n * Band at 8000 Hz\n * @readonly\n */\nEqualizerFilter.F8K = 8e3;\n/**\n * Band at 16000 Hz\n * @readonly\n */\nEqualizerFilter.F16K = 16e3;\n\nexport { EqualizerFilter };\n//# sourceMappingURL=EqualizerFilter.mjs.map\n","import { EventEmitter } from 'pixi.js';\n\nclass HTMLAudioContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** Current global speed from 0 to 1 */\n    this.speed = 1;\n    /** Current muted status of the context */\n    this.muted = false;\n    /** Current volume from 0 to 1  */\n    this.volume = 1;\n    /** Current paused status */\n    this.paused = false;\n  }\n  /** Internal trigger when volume, mute or speed changes */\n  refresh() {\n    this.emit(\"refresh\");\n  }\n  /** Internal trigger paused changes */\n  refreshPaused() {\n    this.emit(\"refreshPaused\");\n  }\n  /**\n   * HTML Audio does not support filters, this is non-functional API.\n   */\n  get filters() {\n    console.warn(\"HTML Audio does not support filters\");\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  /**\n   * HTML Audio does not support `audioContext`\n   * @readonly\n   * @type {AudioContext}\n   */\n  get audioContext() {\n    console.warn(\"HTML Audio does not support audioContext\");\n    return null;\n  }\n  /**\n   * Toggles the muted state.\n   * @return The current muted state.\n   */\n  toggleMute() {\n    this.muted = !this.muted;\n    this.refresh();\n    return this.muted;\n  }\n  /**\n   * Toggles the paused state.\n   * @return The current paused state.\n   */\n  togglePause() {\n    this.paused = !this.paused;\n    this.refreshPaused();\n    return this.paused;\n  }\n  /** Destroy and don't use after this */\n  destroy() {\n    this.removeAllListeners();\n  }\n}\n\nexport { HTMLAudioContext };\n//# sourceMappingURL=HTMLAudioContext.mjs.map\n","import { EventEmitter, Ticker } from 'pixi.js';\n\nlet id = 0;\nconst _HTMLAudioInstance = class extends EventEmitter {\n  /** @param parent - Parent element */\n  constructor(parent) {\n    super();\n    this.id = id++;\n    this.init(parent);\n  }\n  /**\n   * Set a property by name, this makes it easy to chain values\n   * @param name - Name of the property to set\n   * @param value - Value to set property to\n   */\n  set(name, value) {\n    if (this[name] === void 0) {\n      throw new Error(`Property with name ${name} does not exist.`);\n    } else {\n      switch (name) {\n        case \"speed\":\n          this.speed = value;\n          break;\n        case \"volume\":\n          this.volume = value;\n          break;\n        case \"paused\":\n          this.paused = value;\n          break;\n        case \"loop\":\n          this.loop = value;\n          break;\n        case \"muted\":\n          this.muted = value;\n          break;\n      }\n    }\n    return this;\n  }\n  /** The current playback progress from 0 to 1. */\n  get progress() {\n    const { currentTime } = this._source;\n    return currentTime / this._duration;\n  }\n  /** Pauses the sound. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /**\n   * Reference: http://stackoverflow.com/a/40370077\n   * @private\n   */\n  _onPlay() {\n    this._playing = true;\n  }\n  /**\n   * Reference: http://stackoverflow.com/a/40370077\n   * @private\n   */\n  _onPause() {\n    this._playing = false;\n  }\n  /**\n   * Initialize the instance.\n   * @param {htmlaudio.HTMLAudioMedia} media - Same as constructor\n   */\n  init(media) {\n    this._playing = false;\n    this._duration = media.source.duration;\n    const source = this._source = media.source.cloneNode(false);\n    source.src = media.parent.url;\n    source.onplay = this._onPlay.bind(this);\n    source.onpause = this._onPause.bind(this);\n    media.context.on(\"refresh\", this.refresh, this);\n    media.context.on(\"refreshPaused\", this.refreshPaused, this);\n    this._media = media;\n  }\n  /**\n   * Stop the sound playing\n   * @private\n   */\n  _internalStop() {\n    if (this._source && this._playing) {\n      this._source.onended = null;\n      this._source.pause();\n    }\n  }\n  /** Stop the sound playing */\n  stop() {\n    this._internalStop();\n    if (this._source) {\n      this.emit(\"stop\");\n    }\n  }\n  /** Set the instance speed from 0 to 1 */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n  }\n  /** Get the set the volume for this instance from 0 to 1 */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** If the sound instance should loop playback */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** `true` if the sound is muted */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /**\n   * HTML Audio does not support filters, this is non-functional API.\n   */\n  get filters() {\n    console.warn(\"HTML Audio does not support filters\");\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  /** Call whenever the loop, speed or volume changes */\n  refresh() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    this._source.loop = this._loop || sound.loop;\n    const globalVolume = global.volume * (global.muted ? 0 : 1);\n    const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n    const instanceVolume = this._volume * (this._muted ? 0 : 1);\n    this._source.volume = instanceVolume * globalVolume * soundVolume;\n    this._source.playbackRate = this._speed * global.speed * sound.speed;\n  }\n  /** Handle changes in paused state, either globally or sound or instance */\n  refreshPaused() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    const pausedReal = this._paused || sound.paused || global.paused;\n    if (pausedReal !== this._pausedReal) {\n      this._pausedReal = pausedReal;\n      if (pausedReal) {\n        this._internalStop();\n        this.emit(\"paused\");\n      } else {\n        this.emit(\"resumed\");\n        this.play({\n          start: this._source.currentTime,\n          end: this._end,\n          volume: this._volume,\n          speed: this._speed,\n          loop: this._loop\n        });\n      }\n      this.emit(\"pause\", pausedReal);\n    }\n  }\n  /** Start playing the sound/ */\n  play(options) {\n    const { start, end, speed, loop, volume, muted } = options;\n    if (end) {\n      console.assert(end > start, \"End time is before start time\");\n    }\n    this._speed = speed;\n    this._volume = volume;\n    this._loop = !!loop;\n    this._muted = muted;\n    this.refresh();\n    if (this.loop && end !== null) {\n      console.warn('Looping not support when specifying an \"end\" time');\n      this.loop = false;\n    }\n    this._start = start;\n    this._end = end || this._duration;\n    this._start = Math.max(0, this._start - _HTMLAudioInstance.PADDING);\n    this._end = Math.min(this._end + _HTMLAudioInstance.PADDING, this._duration);\n    this._source.onloadedmetadata = () => {\n      if (this._source) {\n        this._source.currentTime = start;\n        this._source.onloadedmetadata = null;\n        this.emit(\"progress\", start / this._duration, this._duration);\n        Ticker.shared.add(this._onUpdate, this);\n      }\n    };\n    this._source.onended = this._onComplete.bind(this);\n    this._source.play();\n    this.emit(\"start\");\n  }\n  /**\n   * Handle time update on sound.\n   * @private\n   */\n  _onUpdate() {\n    this.emit(\"progress\", this.progress, this._duration);\n    if (this._source.currentTime >= this._end && !this._source.loop) {\n      this._onComplete();\n    }\n  }\n  /**\n   * Callback when completed.\n   * @private\n   */\n  _onComplete() {\n    Ticker.shared.remove(this._onUpdate, this);\n    this._internalStop();\n    this.emit(\"progress\", 1, this._duration);\n    this.emit(\"end\", this);\n  }\n  /** Don't use after this. */\n  destroy() {\n    Ticker.shared.remove(this._onUpdate, this);\n    this.removeAllListeners();\n    const source = this._source;\n    if (source) {\n      source.onended = null;\n      source.onplay = null;\n      source.onpause = null;\n      this._internalStop();\n    }\n    this._source = null;\n    this._speed = 1;\n    this._volume = 1;\n    this._loop = false;\n    this._end = null;\n    this._start = 0;\n    this._duration = 0;\n    this._playing = false;\n    this._pausedReal = false;\n    this._paused = false;\n    this._muted = false;\n    if (this._media) {\n      this._media.context.off(\"refresh\", this.refresh, this);\n      this._media.context.off(\"refreshPaused\", this.refreshPaused, this);\n      this._media = null;\n    }\n  }\n  /**\n   * To string method for instance.\n   * @return The string representation of instance.\n   */\n  toString() {\n    return `[HTMLAudioInstance id=${this.id}]`;\n  }\n};\nlet HTMLAudioInstance = _HTMLAudioInstance;\n/** Extra padding, in seconds, to deal with low-latecy of HTMLAudio. */\nHTMLAudioInstance.PADDING = 0.1;\n\nexport { HTMLAudioInstance };\n//# sourceMappingURL=HTMLAudioInstance.mjs.map\n","import { EventEmitter } from 'pixi.js';\nimport { HTMLAudioInstance } from './HTMLAudioInstance.mjs';\n\nclass HTMLAudioMedia extends EventEmitter {\n  init(parent) {\n    this.parent = parent;\n    this._source = parent.options.source || new Audio();\n    if (parent.url) {\n      this._source.src = parent.url;\n    }\n  }\n  // Implement create\n  create() {\n    return new HTMLAudioInstance(this);\n  }\n  /**\n   * If the audio media is playable (ready).\n   * @readonly\n   */\n  get isPlayable() {\n    return !!this._source && this._source.readyState === 4;\n  }\n  /**\n   * THe duration of the media in seconds.\n   * @readonly\n   */\n  get duration() {\n    return this._source.duration;\n  }\n  /**\n   * Reference to the context.\n   * @readonly\n   */\n  get context() {\n    return this.parent.context;\n  }\n  /** The collection of filters, does not apply to HTML Audio. */\n  get filters() {\n    return null;\n  }\n  set filters(_filters) {\n    console.warn(\"HTML Audio does not support filters\");\n  }\n  // Override the destroy\n  destroy() {\n    this.removeAllListeners();\n    this.parent = null;\n    if (this._source) {\n      this._source.src = \"\";\n      this._source.load();\n      this._source = null;\n    }\n  }\n  /**\n   * Get the audio source element.\n   * @type {HTMLAudioElement}\n   * @readonly\n   */\n  get source() {\n    return this._source;\n  }\n  // Implement the method to being preloading\n  load(callback) {\n    const source = this._source;\n    const sound = this.parent;\n    if (source.readyState === 4) {\n      sound.isLoaded = true;\n      const instance = sound.autoPlayStart();\n      if (callback) {\n        setTimeout(() => {\n          callback(null, sound, instance);\n        }, 0);\n      }\n      return;\n    }\n    if (!sound.url) {\n      callback(new Error(\"sound.url or sound.source must be set\"));\n      return;\n    }\n    source.src = sound.url;\n    const onLoad = () => {\n      removeListeners();\n      sound.isLoaded = true;\n      const instance = sound.autoPlayStart();\n      if (callback) {\n        callback(null, sound, instance);\n      }\n    };\n    const onAbort = () => {\n      removeListeners();\n      if (callback) {\n        callback(new Error(\"Sound loading has been aborted\"));\n      }\n    };\n    const onError = () => {\n      removeListeners();\n      const message = `Failed to load audio element (code: ${source.error.code})`;\n      if (callback) {\n        callback(new Error(message));\n      } else {\n        console.error(message);\n      }\n    };\n    const removeListeners = () => {\n      source.removeEventListener(\"canplaythrough\", onLoad);\n      source.removeEventListener(\"load\", onLoad);\n      source.removeEventListener(\"abort\", onAbort);\n      source.removeEventListener(\"error\", onError);\n    };\n    source.addEventListener(\"canplaythrough\", onLoad, false);\n    source.addEventListener(\"load\", onLoad, false);\n    source.addEventListener(\"abort\", onAbort, false);\n    source.addEventListener(\"error\", onError, false);\n    source.load();\n  }\n}\n\nexport { HTMLAudioMedia };\n//# sourceMappingURL=HTMLAudioMedia.mjs.map\n","class SoundSprite {\n  /**\n   * @param parent - The parent sound\n   * @param options - Data associated with object.\n   */\n  constructor(parent, options) {\n    this.parent = parent;\n    Object.assign(this, options);\n    this.duration = this.end - this.start;\n    console.assert(this.duration > 0, \"End time must be after start time\");\n  }\n  /**\n   * Play the sound sprite.\n   * @param {Function} [complete] - Function call when complete\n   * @return Sound instance being played.\n   */\n  play(complete) {\n    return this.parent.play({\n      complete,\n      speed: this.speed || this.parent.speed,\n      end: this.end,\n      start: this.start,\n      loop: this.loop\n    });\n  }\n  /** Destroy and don't use after this */\n  destroy() {\n    this.parent = null;\n  }\n}\n\nexport { SoundSprite };\n//# sourceMappingURL=SoundSprite.mjs.map\n","const extensions = [\n  \"ogg\",\n  \"oga\",\n  \"opus\",\n  \"m4a\",\n  \"mp3\",\n  \"mpeg\",\n  \"wav\",\n  \"aiff\",\n  \"wma\",\n  \"mid\",\n  \"caf\"\n];\nconst mimes = [\n  \"audio/mpeg\",\n  \"audio/ogg\"\n];\nconst supported = {};\nfunction validateFormats(typeOverrides) {\n  const overrides = {\n    m4a: \"audio/mp4\",\n    oga: \"audio/ogg\",\n    opus: 'audio/ogg; codecs=\"opus\"',\n    caf: 'audio/x-caf; codecs=\"opus\"',\n    ...typeOverrides || {}\n  };\n  const audio = document.createElement(\"audio\");\n  const formats = {};\n  const no = /^no$/;\n  extensions.forEach((ext) => {\n    const canByExt = audio.canPlayType(`audio/${ext}`).replace(no, \"\");\n    const canByType = overrides[ext] ? audio.canPlayType(overrides[ext]).replace(no, \"\") : \"\";\n    formats[ext] = !!canByExt || !!canByType;\n  });\n  Object.assign(supported, formats);\n}\nvalidateFormats();\n\nexport { extensions, mimes, supported, validateFormats };\n//# sourceMappingURL=supported.mjs.map\n","import { EventEmitter, Ticker } from 'pixi.js';\nimport { WebAudioUtils } from './WebAudioUtils.mjs';\n\nlet id = 0;\nclass WebAudioInstance extends EventEmitter {\n  constructor(media) {\n    super();\n    this.id = id++;\n    this._media = null;\n    this._paused = false;\n    this._muted = false;\n    this._elapsed = 0;\n    this.init(media);\n  }\n  /**\n   * Set a property by name, this makes it easy to chain values\n   * @param name - Name of the property to set.\n   * @param value - Value to set property to.\n   */\n  set(name, value) {\n    if (this[name] === void 0) {\n      throw new Error(`Property with name ${name} does not exist.`);\n    } else {\n      switch (name) {\n        case \"speed\":\n          this.speed = value;\n          break;\n        case \"volume\":\n          this.volume = value;\n          break;\n        case \"muted\":\n          this.muted = value;\n          break;\n        case \"loop\":\n          this.loop = value;\n          break;\n        case \"paused\":\n          this.paused = value;\n          break;\n      }\n    }\n    return this;\n  }\n  /** Stops the instance, don't use after this. */\n  stop() {\n    if (this._source) {\n      this._internalStop();\n      this.emit(\"stop\");\n    }\n  }\n  /** Set the instance speed from 0 to 1 */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n    this._update(true);\n  }\n  /** Get the set the volume for this instance from 0 to 1 */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** `true` if the sound is muted */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /** If the sound instance should loop playback */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** The collection of filters. */\n  get filters() {\n    return this._filters;\n  }\n  set filters(filters) {\n    if (this._filters) {\n      this._filters?.filter((filter) => filter).forEach((filter) => filter.disconnect());\n      this._filters = null;\n      this._source.connect(this._gain);\n    }\n    this._filters = filters?.length ? filters.slice(0) : null;\n    this.refresh();\n  }\n  /** Refresh loop, volume and speed based on changes to parent */\n  refresh() {\n    if (!this._source) {\n      return;\n    }\n    const global = this._media.context;\n    const sound = this._media.parent;\n    this._source.loop = this._loop || sound.loop;\n    const globalVolume = global.volume * (global.muted ? 0 : 1);\n    const soundVolume = sound.volume * (sound.muted ? 0 : 1);\n    const instanceVolume = this._volume * (this._muted ? 0 : 1);\n    WebAudioUtils.setParamValue(this._gain.gain, instanceVolume * soundVolume * globalVolume);\n    WebAudioUtils.setParamValue(this._source.playbackRate, this._speed * sound.speed * global.speed);\n    this.applyFilters();\n  }\n  /** Connect filters nodes to audio context */\n  applyFilters() {\n    if (this._filters?.length) {\n      this._source.disconnect();\n      let source = this._source;\n      this._filters.forEach((filter) => {\n        source.connect(filter.destination);\n        source = filter;\n      });\n      source.connect(this._gain);\n    }\n  }\n  /** Handle changes in paused state, either globally or sound or instance */\n  refreshPaused() {\n    const global = this._media.context;\n    const sound = this._media.parent;\n    const pausedReal = this._paused || sound.paused || global.paused;\n    if (pausedReal !== this._pausedReal) {\n      this._pausedReal = pausedReal;\n      if (pausedReal) {\n        this._internalStop();\n        this.emit(\"paused\");\n      } else {\n        this.emit(\"resumed\");\n        this.play({\n          start: this._elapsed % this._duration,\n          end: this._end,\n          speed: this._speed,\n          loop: this._loop,\n          volume: this._volume\n        });\n      }\n      this.emit(\"pause\", pausedReal);\n    }\n  }\n  /**\n   * Plays the sound.\n   * @param options - Play options.\n   */\n  play(options) {\n    const { start, end, speed, loop, volume, muted, filters } = options;\n    if (end) {\n      console.assert(end > start, \"End time is before start time\");\n    }\n    this._paused = false;\n    const { source, gain } = this._media.nodes.cloneBufferSource();\n    this._source = source;\n    this._gain = gain;\n    this._speed = speed;\n    this._volume = volume;\n    this._loop = !!loop;\n    this._muted = muted;\n    this._filters = filters;\n    this.refresh();\n    const duration = this._source.buffer.duration;\n    this._duration = duration;\n    this._end = end;\n    this._lastUpdate = this._now();\n    this._elapsed = start;\n    this._source.onended = this._onComplete.bind(this);\n    if (this._loop) {\n      this._source.loopEnd = end;\n      this._source.loopStart = start;\n      this._source.start(0, start);\n    } else if (end) {\n      this._source.start(0, start, end - start);\n    } else {\n      this._source.start(0, start);\n    }\n    this.emit(\"start\");\n    this._update(true);\n    this.enableTicker(true);\n  }\n  /** Start the update progress. */\n  enableTicker(enabled) {\n    Ticker.shared.remove(this._updateListener, this);\n    if (enabled) {\n      Ticker.shared.add(this._updateListener, this);\n    }\n  }\n  /** The current playback progress from 0 to 1. */\n  get progress() {\n    return this._progress;\n  }\n  /** Pauses the sound. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /** Don't use after this. */\n  destroy() {\n    this.removeAllListeners();\n    this._internalStop();\n    if (this._gain) {\n      this._gain.disconnect();\n      this._gain = null;\n    }\n    if (this._media) {\n      this._media.context.events.off(\"refresh\", this.refresh, this);\n      this._media.context.events.off(\"refreshPaused\", this.refreshPaused, this);\n      this._media = null;\n    }\n    this._filters?.forEach((filter) => filter.disconnect());\n    this._filters = null;\n    this._end = null;\n    this._speed = 1;\n    this._volume = 1;\n    this._loop = false;\n    this._elapsed = 0;\n    this._duration = 0;\n    this._paused = false;\n    this._muted = false;\n    this._pausedReal = false;\n  }\n  /**\n   * To string method for instance.\n   * @return The string representation of instance.\n   */\n  toString() {\n    return `[WebAudioInstance id=${this.id}]`;\n  }\n  /**\n   * Get the current time in seconds.\n   * @return Seconds since start of context\n   */\n  _now() {\n    return this._media.context.audioContext.currentTime;\n  }\n  /** Callback for update listener */\n  _updateListener() {\n    this._update();\n  }\n  /** Internal update the progress. */\n  _update(force = false) {\n    if (this._source) {\n      const now = this._now();\n      const delta = now - this._lastUpdate;\n      if (delta > 0 || force) {\n        const speed = this._source.playbackRate.value;\n        this._elapsed += delta * speed;\n        this._lastUpdate = now;\n        const duration = this._duration;\n        let progress;\n        if (this._source.loopStart) {\n          const soundLength = this._source.loopEnd - this._source.loopStart;\n          progress = (this._source.loopStart + this._elapsed % soundLength) / duration;\n        } else {\n          progress = this._elapsed % duration / duration;\n        }\n        this._progress = progress;\n        this.emit(\"progress\", this._progress, duration);\n      }\n    }\n  }\n  /** Initializes the instance. */\n  init(media) {\n    this._media = media;\n    media.context.events.on(\"refresh\", this.refresh, this);\n    media.context.events.on(\"refreshPaused\", this.refreshPaused, this);\n  }\n  /** Stops the instance. */\n  _internalStop() {\n    if (this._source) {\n      this.enableTicker(false);\n      this._source.onended = null;\n      this._source.stop(0);\n      this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch (err) {\n        console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n      }\n      this._source = null;\n    }\n  }\n  /** Callback when completed. */\n  _onComplete() {\n    if (this._source) {\n      this.enableTicker(false);\n      this._source.onended = null;\n      this._source.disconnect();\n      try {\n        this._source.buffer = null;\n      } catch (err) {\n        console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n      }\n    }\n    this._source = null;\n    this._progress = 1;\n    this.emit(\"progress\", 1, this._duration);\n    this.emit(\"end\", this);\n  }\n}\n\nexport { WebAudioInstance };\n//# sourceMappingURL=WebAudioInstance.mjs.map\n","class Filterable {\n  /**\n   * @param input - The source audio node\n   * @param output - The output audio node\n   */\n  constructor(input, output) {\n    this._output = output;\n    this._input = input;\n  }\n  /** The destination output audio node */\n  get destination() {\n    return this._input;\n  }\n  /** The collection of filters. */\n  get filters() {\n    return this._filters;\n  }\n  set filters(filters) {\n    if (this._filters) {\n      this._filters.forEach((filter) => {\n        if (filter) {\n          filter.disconnect();\n        }\n      });\n      this._filters = null;\n      this._input.connect(this._output);\n    }\n    if (filters && filters.length) {\n      this._filters = filters.slice(0);\n      this._input.disconnect();\n      let prevFilter = null;\n      filters.forEach((filter) => {\n        if (prevFilter === null) {\n          this._input.connect(filter.destination);\n        } else {\n          prevFilter.connect(filter.destination);\n        }\n        prevFilter = filter;\n      });\n      prevFilter.connect(this._output);\n    }\n  }\n  /** Cleans up. */\n  destroy() {\n    this.filters = null;\n    this._input = null;\n    this._output = null;\n  }\n}\n\nexport { Filterable };\n//# sourceMappingURL=Filterable.mjs.map\n","import { Filterable } from '../Filterable.mjs';\nimport { WebAudioUtils } from './WebAudioUtils.mjs';\n\nconst _WebAudioNodes = class extends Filterable {\n  /**\n   * @param context - The audio context.\n   */\n  constructor(context) {\n    const audioContext = context.audioContext;\n    const bufferSource = audioContext.createBufferSource();\n    const gain = audioContext.createGain();\n    const analyser = audioContext.createAnalyser();\n    bufferSource.connect(analyser);\n    analyser.connect(gain);\n    gain.connect(context.destination);\n    super(analyser, gain);\n    this.context = context;\n    this.bufferSource = bufferSource;\n    this.gain = gain;\n    this.analyser = analyser;\n  }\n  /**\n   * Get the script processor node.\n   * @readonly\n   */\n  get script() {\n    if (!this._script) {\n      this._script = this.context.audioContext.createScriptProcessor(_WebAudioNodes.BUFFER_SIZE);\n      this._script.connect(this.context.destination);\n    }\n    return this._script;\n  }\n  /** Cleans up. */\n  destroy() {\n    super.destroy();\n    this.bufferSource.disconnect();\n    if (this._script) {\n      this._script.disconnect();\n    }\n    this.gain.disconnect();\n    this.analyser.disconnect();\n    this.bufferSource = null;\n    this._script = null;\n    this.gain = null;\n    this.analyser = null;\n    this.context = null;\n  }\n  /**\n   * Clones the bufferSource. Used just before playing a sound.\n   * @returns {SourceClone} The clone AudioBufferSourceNode.\n   */\n  cloneBufferSource() {\n    const orig = this.bufferSource;\n    const source = this.context.audioContext.createBufferSource();\n    source.buffer = orig.buffer;\n    WebAudioUtils.setParamValue(source.playbackRate, orig.playbackRate.value);\n    source.loop = orig.loop;\n    const gain = this.context.audioContext.createGain();\n    source.connect(gain);\n    gain.connect(this.destination);\n    return { source, gain };\n  }\n  /**\n   * Get buffer size of `ScriptProcessorNode`.\n   * @readonly\n   */\n  get bufferSize() {\n    return this.script.bufferSize;\n  }\n};\nlet WebAudioNodes = _WebAudioNodes;\n/**\n * The buffer size for script processor, default is `0` which auto-detects. If you plan to use\n * script node on iOS, you'll need to provide a non-zero amount.\n * @default 0\n */\nWebAudioNodes.BUFFER_SIZE = 0;\n\nexport { WebAudioNodes };\n//# sourceMappingURL=WebAudioNodes.mjs.map\n","import { DOMAdapter } from 'pixi.js';\nimport { WebAudioInstance } from './WebAudioInstance.mjs';\nimport { WebAudioNodes } from './WebAudioNodes.mjs';\n\nclass WebAudioMedia {\n  /**\n   * Re-initialize without constructing.\n   * @param parent - - Instance of parent Sound container\n   */\n  init(parent) {\n    this.parent = parent;\n    this._nodes = new WebAudioNodes(this.context);\n    this._source = this._nodes.bufferSource;\n    this.source = parent.options.source;\n  }\n  /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n  destroy() {\n    this.parent = null;\n    this._nodes.destroy();\n    this._nodes = null;\n    try {\n      this._source.buffer = null;\n    } catch (err) {\n      console.warn(\"Failed to set AudioBufferSourceNode.buffer to null:\", err);\n    }\n    this._source = null;\n    this.source = null;\n  }\n  // Implement create\n  create() {\n    return new WebAudioInstance(this);\n  }\n  // Implement context\n  get context() {\n    return this.parent.context;\n  }\n  // Implement isPlayable\n  get isPlayable() {\n    return !!this._source && !!this._source.buffer;\n  }\n  // Implement filters\n  get filters() {\n    return this._nodes.filters;\n  }\n  set filters(filters) {\n    this._nodes.filters = filters;\n  }\n  // Implements duration\n  get duration() {\n    console.assert(this.isPlayable, \"Sound not yet playable, no duration\");\n    return this._source.buffer.duration;\n  }\n  /** Gets and sets the buffer. */\n  get buffer() {\n    return this._source.buffer;\n  }\n  set buffer(buffer) {\n    this._source.buffer = buffer;\n  }\n  /** Get the current chained nodes object */\n  get nodes() {\n    return this._nodes;\n  }\n  // Implements load\n  load(callback) {\n    if (this.source) {\n      this._decode(this.source, callback);\n    } else if (this.parent.url) {\n      this._loadUrl(callback);\n    } else if (callback) {\n      callback(new Error(\"sound.url or sound.source must be set\"));\n    } else {\n      console.error(\"sound.url or sound.source must be set\");\n    }\n  }\n  /** Loads a sound using XHMLHttpRequest object. */\n  async _loadUrl(callback) {\n    const url = this.parent.url;\n    const response = await DOMAdapter.get().fetch(url);\n    this._decode(await response.arrayBuffer(), callback);\n  }\n  /**\n   * Decodes the array buffer.\n   * @param arrayBuffer - From load.\n   * @param {Function} callback - Callback optional\n   */\n  _decode(arrayBuffer, callback) {\n    const audioBufferReadyFn = (err, buffer) => {\n      if (err) {\n        if (callback) {\n          callback(err);\n        }\n      } else {\n        this.parent.isLoaded = true;\n        this.buffer = buffer;\n        const instance = this.parent.autoPlayStart();\n        if (callback) {\n          callback(null, this.parent, instance);\n        }\n      }\n    };\n    if (arrayBuffer instanceof AudioBuffer) {\n      audioBufferReadyFn(null, arrayBuffer);\n    } else {\n      const context = this.parent.context;\n      context.decode(arrayBuffer, audioBufferReadyFn);\n    }\n  }\n}\n\nexport { WebAudioMedia };\n//# sourceMappingURL=WebAudioMedia.mjs.map\n","import { path } from 'pixi.js';\nimport { HTMLAudioMedia } from './htmlaudio/HTMLAudioMedia.mjs';\nimport { getInstance } from './instance.mjs';\nimport { SoundSprite } from './SoundSprite.mjs';\nimport { supported, extensions } from './utils/supported.mjs';\nimport { WebAudioMedia } from './webaudio/WebAudioMedia.mjs';\n\nconst _Sound = class {\n  /**\n   * Create a new sound instance from source.\n   * @param source - Either the path or url to the source file.\n   *        or the object of options to use.\n   * @return Created sound instance.\n   */\n  static from(source) {\n    let options = {};\n    if (typeof source === \"string\") {\n      options.url = source;\n    } else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement) {\n      options.source = source;\n    } else if (Array.isArray(source)) {\n      options.url = source;\n    } else {\n      options = source;\n    }\n    options = {\n      autoPlay: false,\n      singleInstance: false,\n      url: null,\n      source: null,\n      preload: false,\n      volume: 1,\n      speed: 1,\n      complete: null,\n      loaded: null,\n      loop: false,\n      ...options\n    };\n    Object.freeze(options);\n    const media = getInstance().useLegacy ? new HTMLAudioMedia() : new WebAudioMedia();\n    return new _Sound(media, options);\n  }\n  /**\n   * Use `Sound.from`\n   * @ignore\n   */\n  constructor(media, options) {\n    this.media = media;\n    this.options = options;\n    this._instances = [];\n    this._sprites = {};\n    this.media.init(this);\n    const complete = options.complete;\n    this._autoPlayOptions = complete ? { complete } : null;\n    this.isLoaded = false;\n    this._preloadQueue = null;\n    this.isPlaying = false;\n    this.autoPlay = options.autoPlay;\n    this.singleInstance = options.singleInstance;\n    this.preload = options.preload || this.autoPlay;\n    this.url = Array.isArray(options.url) ? this.preferUrl(options.url) : options.url;\n    this.speed = options.speed;\n    this.volume = options.volume;\n    this.loop = options.loop;\n    if (options.sprites) {\n      this.addSprites(options.sprites);\n    }\n    if (this.preload) {\n      this._preload(options.loaded);\n    }\n  }\n  /**\n   * Internal help for resolving which file to use if there are multiple provide\n   * this is especially helpful for working with bundlers (non Assets loading).\n   */\n  preferUrl(urls) {\n    const [file] = urls.map((url) => ({ url, ext: path.extname(url).slice(1) })).filter(({ ext }) => supported[ext]).sort((a, b) => extensions.indexOf(a.ext) - extensions.indexOf(b.ext));\n    if (!file) {\n      throw new Error(\"No supported file type found\");\n    }\n    return file.url;\n  }\n  /** Instance of the media context. */\n  get context() {\n    return getInstance().context;\n  }\n  /** Stops all the instances of this sound from playing. */\n  pause() {\n    this.isPlaying = false;\n    this.paused = true;\n    return this;\n  }\n  /** Resuming all the instances of this sound from playing */\n  resume() {\n    this.isPlaying = this._instances.length > 0;\n    this.paused = false;\n    return this;\n  }\n  /** Stops all the instances of this sound from playing. */\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n    this.refreshPaused();\n  }\n  /** The playback rate. */\n  get speed() {\n    return this._speed;\n  }\n  set speed(speed) {\n    this._speed = speed;\n    this.refresh();\n  }\n  /** Set the filters. Only supported with WebAudio. */\n  get filters() {\n    return this.media.filters;\n  }\n  set filters(filters) {\n    this.media.filters = filters;\n  }\n  /**\n   * @ignore\n   */\n  addSprites(source, data) {\n    if (typeof source === \"object\") {\n      const results = {};\n      for (const alias in source) {\n        results[alias] = this.addSprites(alias, source[alias]);\n      }\n      return results;\n    }\n    console.assert(!this._sprites[source], `Alias ${source} is already taken`);\n    const sprite = new SoundSprite(this, data);\n    this._sprites[source] = sprite;\n    return sprite;\n  }\n  /** Destructor, safer to use `SoundLibrary.remove(alias)` to remove this sound. */\n  destroy() {\n    this._removeInstances();\n    this.removeSprites();\n    this.media.destroy();\n    this.media = null;\n    this._sprites = null;\n    this._instances = null;\n  }\n  /**\n   * Remove a sound sprite.\n   * @param alias - The unique name of the sound sprite, if alias is omitted, removes all sprites.\n   */\n  removeSprites(alias) {\n    if (!alias) {\n      for (const name in this._sprites) {\n        this.removeSprites(name);\n      }\n    } else {\n      const sprite = this._sprites[alias];\n      if (sprite !== void 0) {\n        sprite.destroy();\n        delete this._sprites[alias];\n      }\n    }\n    return this;\n  }\n  /** If the current sound is playable (loaded). */\n  get isPlayable() {\n    return this.isLoaded && this.media && this.media.isPlayable;\n  }\n  /** Stops all the instances of this sound from playing. */\n  stop() {\n    if (!this.isPlayable) {\n      this.autoPlay = false;\n      this._autoPlayOptions = null;\n      return this;\n    }\n    this.isPlaying = false;\n    for (let i = this._instances.length - 1; i >= 0; i--) {\n      this._instances[i].stop();\n    }\n    return this;\n  }\n  // Overloaded function\n  play(source, complete) {\n    let options;\n    if (typeof source === \"string\") {\n      const sprite = source;\n      options = { sprite, loop: this.loop, complete };\n    } else if (typeof source === \"function\") {\n      options = {};\n      options.complete = source;\n    } else {\n      options = source;\n    }\n    options = {\n      complete: null,\n      loaded: null,\n      sprite: null,\n      end: null,\n      start: 0,\n      volume: 1,\n      speed: 1,\n      muted: false,\n      loop: false,\n      ...options || {}\n    };\n    if (options.sprite) {\n      const alias = options.sprite;\n      console.assert(!!this._sprites[alias], `Alias ${alias} is not available`);\n      const sprite = this._sprites[alias];\n      options.start = sprite.start + (options.start || 0);\n      options.end = sprite.end;\n      options.speed = sprite.speed || 1;\n      options.loop = sprite.loop || options.loop;\n      delete options.sprite;\n    }\n    if (options.offset) {\n      options.start = options.offset;\n    }\n    if (!this.isLoaded) {\n      if (this._preloadQueue) {\n        return new Promise((resolve) => {\n          this._preloadQueue.push(() => {\n            resolve(this.play(options));\n          });\n        });\n      }\n      this._preloadQueue = [];\n      this.autoPlay = true;\n      this._autoPlayOptions = options;\n      return new Promise((resolve, reject) => {\n        this._preload((err, sound, media) => {\n          this._preloadQueue.forEach((resolve2) => resolve2());\n          this._preloadQueue = null;\n          if (err) {\n            reject(err);\n          } else {\n            if (options.loaded) {\n              options.loaded(err, sound, media);\n            }\n            resolve(media);\n          }\n        });\n      });\n    }\n    if (this.singleInstance || options.singleInstance) {\n      this._removeInstances();\n    }\n    const instance = this._createInstance();\n    this._instances.push(instance);\n    this.isPlaying = true;\n    instance.once(\"end\", () => {\n      if (options.complete) {\n        options.complete(this);\n      }\n      this._onComplete(instance);\n    });\n    instance.once(\"stop\", () => {\n      this._onComplete(instance);\n    });\n    instance.play(options);\n    return instance;\n  }\n  /** Internal only, speed, loop, volume change occured. */\n  refresh() {\n    const len = this._instances.length;\n    for (let i = 0; i < len; i++) {\n      this._instances[i].refresh();\n    }\n  }\n  /** Handle changes in paused state. Internal only. */\n  refreshPaused() {\n    const len = this._instances.length;\n    for (let i = 0; i < len; i++) {\n      this._instances[i].refreshPaused();\n    }\n  }\n  /** Gets and sets the volume. */\n  get volume() {\n    return this._volume;\n  }\n  set volume(volume) {\n    this._volume = volume;\n    this.refresh();\n  }\n  /** Gets and sets the muted flag. */\n  get muted() {\n    return this._muted;\n  }\n  set muted(muted) {\n    this._muted = muted;\n    this.refresh();\n  }\n  /** Gets and sets the looping. */\n  get loop() {\n    return this._loop;\n  }\n  set loop(loop) {\n    this._loop = loop;\n    this.refresh();\n  }\n  /** Starts the preloading of sound. */\n  _preload(callback) {\n    this.media.load(callback);\n  }\n  /** Gets the list of instances that are currently being played of this sound. */\n  get instances() {\n    return this._instances;\n  }\n  /** Get the map of sprites. */\n  get sprites() {\n    return this._sprites;\n  }\n  /** Get the duration of the audio in seconds. */\n  get duration() {\n    return this.media.duration;\n  }\n  /** Auto play the first instance. */\n  autoPlayStart() {\n    let instance;\n    if (this.autoPlay) {\n      instance = this.play(this._autoPlayOptions);\n    }\n    return instance;\n  }\n  /** Removes all instances. */\n  _removeInstances() {\n    for (let i = this._instances.length - 1; i >= 0; i--) {\n      this._poolInstance(this._instances[i]);\n    }\n    this._instances.length = 0;\n  }\n  /**\n   * Sound instance completed.\n   * @param instance\n   */\n  _onComplete(instance) {\n    if (this._instances) {\n      const index = this._instances.indexOf(instance);\n      if (index > -1) {\n        this._instances.splice(index, 1);\n      }\n      this.isPlaying = this._instances.length > 0;\n    }\n    this._poolInstance(instance);\n  }\n  /** Create a new instance. */\n  _createInstance() {\n    if (_Sound._pool.length > 0) {\n      const instance = _Sound._pool.pop();\n      instance.init(this.media);\n      return instance;\n    }\n    return this.media.create();\n  }\n  /**\n   * Destroy/recycling the instance object.\n   * @param instance - Instance to recycle\n   */\n  _poolInstance(instance) {\n    instance.destroy();\n    if (_Sound._pool.indexOf(instance) < 0) {\n      _Sound._pool.push(instance);\n    }\n  }\n};\nlet Sound = _Sound;\n/** Pool of instances */\nSound._pool = [];\n\nexport { Sound };\n//# sourceMappingURL=Sound.mjs.map\n","import { EventEmitter } from 'pixi.js';\nimport { Filterable } from '../Filterable.mjs';\n\nclass WebAudioContext extends Filterable {\n  constructor() {\n    const win = window;\n    const ctx = new WebAudioContext.AudioContext();\n    const compressor = ctx.createDynamicsCompressor();\n    const analyser = ctx.createAnalyser();\n    analyser.connect(compressor);\n    compressor.connect(ctx.destination);\n    super(analyser, compressor);\n    /** Set to false ignore suspending when window is blurred */\n    this.autoPause = true;\n    this._ctx = ctx;\n    this._offlineCtx = new WebAudioContext.OfflineAudioContext(\n      1,\n      2,\n      win.OfflineAudioContext ? Math.max(8e3, Math.min(96e3, ctx.sampleRate)) : 44100\n    );\n    this.compressor = compressor;\n    this.analyser = analyser;\n    this.events = new EventEmitter();\n    this.volume = 1;\n    this.speed = 1;\n    this.muted = false;\n    this.paused = false;\n    this._locked = ctx.state === \"suspended\" && (\"ontouchstart\" in globalThis || \"onclick\" in globalThis);\n    if (this._locked) {\n      this._unlock();\n      this._unlock = this._unlock.bind(this);\n      document.addEventListener(\"mousedown\", this._unlock, true);\n      document.addEventListener(\"touchstart\", this._unlock, true);\n      document.addEventListener(\"touchend\", this._unlock, true);\n    }\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    globalThis.addEventListener(\"focus\", this.onFocus);\n    globalThis.addEventListener(\"blur\", this.onBlur);\n  }\n  /** Handle mobile WebAudio context resume */\n  onFocus() {\n    if (!this.autoPause) {\n      return;\n    }\n    const state = this._ctx.state;\n    if (state === \"suspended\" || state === \"interrupted\" || !this._locked) {\n      this.paused = this._pausedOnBlur;\n      this.refreshPaused();\n    }\n  }\n  /** Handle mobile WebAudio context suspend */\n  onBlur() {\n    if (!this.autoPause) {\n      return;\n    }\n    if (!this._locked) {\n      this._pausedOnBlur = this._paused;\n      this.paused = true;\n      this.refreshPaused();\n    }\n  }\n  /**\n   * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n   * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n   * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n   *\n   * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n   * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n   * stick with `mousedown` and `touchend`.\n   */\n  _unlock() {\n    if (!this._locked) {\n      return;\n    }\n    this.playEmptySound();\n    if (this._ctx.state === \"running\") {\n      document.removeEventListener(\"mousedown\", this._unlock, true);\n      document.removeEventListener(\"touchend\", this._unlock, true);\n      document.removeEventListener(\"touchstart\", this._unlock, true);\n      this._locked = false;\n    }\n  }\n  /**\n   * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n   * require the first sound to be played inside of a user initiated event (touch/click).\n   */\n  playEmptySound() {\n    const source = this._ctx.createBufferSource();\n    source.buffer = this._ctx.createBuffer(1, 1, 22050);\n    source.connect(this._ctx.destination);\n    source.start(0, 0, 0);\n    if (source.context.state === \"suspended\") {\n      source.context.resume();\n    }\n  }\n  /**\n   * Get AudioContext class, if not supported returns `null`\n   * @type {AudioContext}\n   * @readonly\n   */\n  static get AudioContext() {\n    const win = window;\n    return win.AudioContext || win.webkitAudioContext || null;\n  }\n  /**\n   * Get OfflineAudioContext class, if not supported returns `null`\n   * @type {OfflineAudioContext}\n   * @readonly\n   */\n  static get OfflineAudioContext() {\n    const win = window;\n    return win.OfflineAudioContext || win.webkitOfflineAudioContext || null;\n  }\n  /** Destroy this context. */\n  destroy() {\n    super.destroy();\n    const ctx = this._ctx;\n    if (typeof ctx.close !== \"undefined\") {\n      ctx.close();\n    }\n    globalThis.removeEventListener(\"focus\", this.onFocus);\n    globalThis.removeEventListener(\"blur\", this.onBlur);\n    this.events.removeAllListeners();\n    this.analyser.disconnect();\n    this.compressor.disconnect();\n    this.analyser = null;\n    this.compressor = null;\n    this.events = null;\n    this._offlineCtx = null;\n    this._ctx = null;\n  }\n  /**\n   * The WebAudio API AudioContext object.\n   * @readonly\n   * @type {AudioContext}\n   */\n  get audioContext() {\n    return this._ctx;\n  }\n  /**\n   * The WebAudio API OfflineAudioContext object.\n   * @readonly\n   * @type {OfflineAudioContext}\n   */\n  get offlineContext() {\n    return this._offlineCtx;\n  }\n  /**\n   * Pauses all sounds, even though we handle this at the instance\n   * level, we'll also pause the audioContext so that the\n   * time used to compute progress isn't messed up.\n   * @default false\n   */\n  set paused(paused) {\n    if (paused && this._ctx.state === \"running\") {\n      this._ctx.suspend();\n    } else if (!paused && this._ctx.state === \"suspended\") {\n      this._ctx.resume();\n    }\n    this._paused = paused;\n  }\n  get paused() {\n    return this._paused;\n  }\n  /** Emit event when muted, volume or speed changes */\n  refresh() {\n    this.events.emit(\"refresh\");\n  }\n  /** Emit event when muted, volume or speed changes */\n  refreshPaused() {\n    this.events.emit(\"refreshPaused\");\n  }\n  /**\n   * Toggles the muted state.\n   * @return The current muted state.\n   */\n  toggleMute() {\n    this.muted = !this.muted;\n    this.refresh();\n    return this.muted;\n  }\n  /**\n   * Toggles the paused state.\n   * @return The current muted state.\n   */\n  togglePause() {\n    this.paused = !this.paused;\n    this.refreshPaused();\n    return this._paused;\n  }\n  /**\n   * Decode the audio data\n   * @param arrayBuffer - Buffer from loader\n   * @param callback - When completed, error and audioBuffer are parameters.\n   */\n  decode(arrayBuffer, callback) {\n    const handleError = (err) => {\n      callback(new Error(err?.message || \"Unable to decode file\"));\n    };\n    const result = this._offlineCtx.decodeAudioData(\n      arrayBuffer,\n      (buffer) => {\n        callback(null, buffer);\n      },\n      handleError\n    );\n    if (result) {\n      result.catch(handleError);\n    }\n  }\n}\n\nexport { WebAudioContext };\n//# sourceMappingURL=WebAudioContext.mjs.map\n","import { ExtensionType, LoaderParserPriority, path, extensions as extensions$1 } from 'pixi.js';\nimport { getInstance } from './instance.mjs';\nimport { Sound } from './Sound.mjs';\nimport { extensions, supported, mimes } from './utils/supported.mjs';\n\nconst getAlias = (asset) => {\n  const src = asset.src;\n  let alias = asset?.alias?.[0];\n  if (!alias || asset.src === alias) {\n    alias = path.basename(src, path.extname(src));\n  }\n  return alias;\n};\nconst soundAsset = {\n  extension: ExtensionType.Asset,\n  detection: {\n    test: async () => true,\n    add: async (formats) => [...formats, ...extensions.filter((ext) => supported[ext])],\n    remove: async (formats) => formats.filter((ext) => formats.includes(ext))\n  },\n  loader: {\n    name: \"sound\",\n    extension: {\n      type: [ExtensionType.LoadParser],\n      priority: LoaderParserPriority.High\n    },\n    /** Should we attempt to load this file? */\n    test(url) {\n      const ext = path.extname(url).slice(1);\n      return !!supported[ext] || mimes.some((mime) => url.startsWith(`data:${mime}`));\n    },\n    /** Load the sound file, this is mostly handled by Sound.from() */\n    async load(url, asset) {\n      const sound = await new Promise((resolve, reject) => Sound.from({\n        ...asset.data,\n        url,\n        preload: true,\n        loaded(err, sound2) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(sound2);\n          }\n          asset.data?.loaded?.(err, sound2);\n        }\n      }));\n      getInstance().add(getAlias(asset), sound);\n      return sound;\n    },\n    /** Remove the sound from the library */\n    async unload(_sound, asset) {\n      getInstance().remove(getAlias(asset));\n    }\n  }\n};\nextensions$1.add(soundAsset);\n\nexport { soundAsset };\n//# sourceMappingURL=soundAsset.mjs.map\n","import * as index from './filters/index.mjs';\nexport { index as filters };\nimport * as index$1 from './htmlaudio/index.mjs';\nexport { index$1 as htmlaudio };\nimport { setInstance } from './instance.mjs';\nimport { SoundLibrary } from './SoundLibrary.mjs';\nimport * as index$2 from './utils/index.mjs';\nexport { index$2 as utils };\nimport * as index$3 from './webaudio/index.mjs';\nexport { index$3 as webaudio };\nexport { Filterable } from './Filterable.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { Sound } from './Sound.mjs';\nexport { soundAsset } from './soundAsset.mjs';\nexport { SoundSprite } from './SoundSprite.mjs';\n\nconst sound = setInstance(new SoundLibrary());\n\nexport { SoundLibrary, sound };\n//# sourceMappingURL=index.mjs.map\n","import { HTMLAudioContext } from './htmlaudio/HTMLAudioContext.mjs';\nimport { Sound } from './Sound.mjs';\nimport { WebAudioContext } from './webaudio/WebAudioContext.mjs';\n\nclass SoundLibrary {\n  constructor() {\n    this.init();\n  }\n  /**\n   * Re-initialize the sound library, this will\n   * recreate the AudioContext. If there's a hardware-failure\n   * call `close` and then `init`.\n   * @return Sound instance\n   */\n  init() {\n    if (this.supported) {\n      this._webAudioContext = new WebAudioContext();\n    }\n    this._htmlAudioContext = new HTMLAudioContext();\n    this._sounds = {};\n    this.useLegacy = !this.supported;\n    return this;\n  }\n  /**\n   * The global context to use.\n   * @readonly\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * Apply filters to all sounds. Can be useful\n   * for setting global planning or global effects.\n   * **Only supported with WebAudio.**\n   * @example\n   * import { sound, filters } from '@pixi/sound';\n   * // Adds a filter to pan all output left\n   * sound.filtersAll = [\n   *     new filters.StereoFilter(-1)\n   * ];\n   */\n  get filtersAll() {\n    if (!this.useLegacy) {\n      return this._context.filters;\n    }\n    return [];\n  }\n  set filtersAll(filtersAll) {\n    if (!this.useLegacy) {\n      this._context.filters = filtersAll;\n    }\n  }\n  /**\n   * `true` if WebAudio is supported on the current browser.\n   */\n  get supported() {\n    return WebAudioContext.AudioContext !== null;\n  }\n  /**\n   * @ignore\n   */\n  add(source, sourceOptions) {\n    if (typeof source === \"object\") {\n      const results = {};\n      for (const alias in source) {\n        const options2 = this._getOptions(\n          source[alias],\n          sourceOptions\n        );\n        results[alias] = this.add(alias, options2);\n      }\n      return results;\n    }\n    console.assert(!this._sounds[source], `Sound with alias ${source} already exists.`);\n    if (sourceOptions instanceof Sound) {\n      this._sounds[source] = sourceOptions;\n      return sourceOptions;\n    }\n    const options = this._getOptions(sourceOptions);\n    const sound = Sound.from(options);\n    this._sounds[source] = sound;\n    return sound;\n  }\n  /**\n   * Internal methods for getting the options object\n   * @private\n   * @param source - The source options\n   * @param overrides - Override default options\n   * @return The construction options\n   */\n  _getOptions(source, overrides) {\n    let options;\n    if (typeof source === \"string\") {\n      options = { url: source };\n    } else if (Array.isArray(source)) {\n      options = { url: source };\n    } else if (source instanceof ArrayBuffer || source instanceof AudioBuffer || source instanceof HTMLAudioElement) {\n      options = { source };\n    } else {\n      options = source;\n    }\n    options = { ...options, ...overrides || {} };\n    return options;\n  }\n  /**\n   * Do not use WebAudio, force the use of legacy. This **must** be called before loading any files.\n   */\n  get useLegacy() {\n    return this._useLegacy;\n  }\n  set useLegacy(legacy) {\n    this._useLegacy = legacy;\n    this._context = !legacy && this.supported ? this._webAudioContext : this._htmlAudioContext;\n  }\n  /**\n   * This disables auto-pause all playback when the window blurs (WebAudio only).\n   * This is helpful to keep from playing sounds when the user switches tabs.\n   * However, if you're running content within an iframe, this may be undesirable\n   * and you should disable (set to `true`) this behavior.\n   * @default false\n   */\n  get disableAutoPause() {\n    return !this._webAudioContext.autoPause;\n  }\n  set disableAutoPause(autoPause) {\n    this._webAudioContext.autoPause = !autoPause;\n  }\n  /**\n   * Removes a sound by alias.\n   * @param alias - The sound alias reference.\n   * @return Instance for chaining.\n   */\n  remove(alias) {\n    this.exists(alias, true);\n    this._sounds[alias].destroy();\n    delete this._sounds[alias];\n    return this;\n  }\n  /**\n   * Set the global volume for all sounds. To set per-sound volume see {@link SoundLibrary#volume}.\n   */\n  get volumeAll() {\n    return this._context.volume;\n  }\n  set volumeAll(volume) {\n    this._context.volume = volume;\n    this._context.refresh();\n  }\n  /**\n   * Set the global speed for all sounds. To set per-sound speed see {@link SoundLibrary#speed}.\n   */\n  get speedAll() {\n    return this._context.speed;\n  }\n  set speedAll(speed) {\n    this._context.speed = speed;\n    this._context.refresh();\n  }\n  /**\n   * Toggle paused property for all sounds.\n   * @return `true` if all sounds are paused.\n   */\n  togglePauseAll() {\n    return this._context.togglePause();\n  }\n  /**\n   * Pauses any playing sounds.\n   * @return Instance for chaining.\n   */\n  pauseAll() {\n    this._context.paused = true;\n    this._context.refreshPaused();\n    return this;\n  }\n  /**\n   * Resumes any sounds.\n   * @return Instance for chaining.\n   */\n  resumeAll() {\n    this._context.paused = false;\n    this._context.refreshPaused();\n    return this;\n  }\n  /**\n   * Toggle muted property for all sounds.\n   * @return `true` if all sounds are muted.\n   */\n  toggleMuteAll() {\n    return this._context.toggleMute();\n  }\n  /**\n   * Mutes all playing sounds.\n   * @return Instance for chaining.\n   */\n  muteAll() {\n    this._context.muted = true;\n    this._context.refresh();\n    return this;\n  }\n  /**\n   * Unmutes all playing sounds.\n   * @return Instance for chaining.\n   */\n  unmuteAll() {\n    this._context.muted = false;\n    this._context.refresh();\n    return this;\n  }\n  /**\n   * Stops and removes all sounds. They cannot be used after this.\n   * @return Instance for chaining.\n   */\n  removeAll() {\n    for (const alias in this._sounds) {\n      this._sounds[alias].destroy();\n      delete this._sounds[alias];\n    }\n    return this;\n  }\n  /**\n   * Stops all sounds.\n   * @return Instance for chaining.\n   */\n  stopAll() {\n    for (const alias in this._sounds) {\n      this._sounds[alias].stop();\n    }\n    return this;\n  }\n  /**\n   * Checks if a sound by alias exists.\n   * @param alias - Check for alias.\n   * @param assert - Whether enable console.assert.\n   * @return true if the sound exists.\n   */\n  exists(alias, assert = false) {\n    const exists = !!this._sounds[alias];\n    if (assert) {\n      console.assert(exists, `No sound matching alias '${alias}'.`);\n    }\n    return exists;\n  }\n  /**\n   * Convenience function to check to see if any sound is playing.\n   * @returns `true` if any sound is currently playing.\n   */\n  isPlaying() {\n    for (const alias in this._sounds) {\n      if (this._sounds[alias].isPlaying) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Find a sound by alias.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  find(alias) {\n    this.exists(alias, true);\n    return this._sounds[alias];\n  }\n  /**\n   * Plays a sound.\n   * @method play\n   * @instance\n   * @param {string} alias - The sound alias reference.\n   * @param {string} sprite - The alias of the sprite to play.\n   * @return {IMediaInstance|null} The sound instance, this cannot be reused\n   *         after it is done playing. Returns `null` if the sound has not yet loaded.\n   */\n  /**\n   * Plays a sound.\n   * @param alias - The sound alias reference.\n   * @param {PlayOptions|Function} options - The options or callback when done.\n   * @return The sound instance,\n   *        this cannot be reused after it is done playing. Returns a Promise if the sound\n   *        has not yet loaded.\n   */\n  play(alias, options) {\n    return this.find(alias).play(options);\n  }\n  /**\n   * Stops a sound.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  stop(alias) {\n    return this.find(alias).stop();\n  }\n  /**\n   * Pauses a sound.\n   * @param alias - The sound alias reference.\n   * @return Sound object.\n   */\n  pause(alias) {\n    return this.find(alias).pause();\n  }\n  /**\n   * Resumes a sound.\n   * @param alias - The sound alias reference.\n   * @return Instance for chaining.\n   */\n  resume(alias) {\n    return this.find(alias).resume();\n  }\n  /**\n   * Get or set the volume for a sound.\n   * @param alias - The sound alias reference.\n   * @param volume - Optional current volume to set.\n   * @return The current volume.\n   */\n  volume(alias, volume) {\n    const sound = this.find(alias);\n    if (volume !== void 0) {\n      sound.volume = volume;\n    }\n    return sound.volume;\n  }\n  /**\n   * Get or set the speed for a sound.\n   * @param alias - The sound alias reference.\n   * @param speed - Optional current speed to set.\n   * @return The current speed.\n   */\n  speed(alias, speed) {\n    const sound = this.find(alias);\n    if (speed !== void 0) {\n      sound.speed = speed;\n    }\n    return sound.speed;\n  }\n  /**\n   * Get the length of a sound in seconds.\n   * @param alias - The sound alias reference.\n   * @return The current duration in seconds.\n   */\n  duration(alias) {\n    return this.find(alias).duration;\n  }\n  /**\n   * Closes the sound library. This will release/destroy\n   * the AudioContext(s). Can be used safely if you want to\n   * initialize the sound library later. Use `init` method.\n   */\n  close() {\n    this.removeAll();\n    this._sounds = null;\n    if (this._webAudioContext) {\n      this._webAudioContext.destroy();\n      this._webAudioContext = null;\n    }\n    if (this._htmlAudioContext) {\n      this._htmlAudioContext.destroy();\n      this._htmlAudioContext = null;\n    }\n    this._context = null;\n    return this;\n  }\n}\n\nexport { SoundLibrary };\n//# sourceMappingURL=SoundLibrary.mjs.map\n","export const CELL_WIDTH = 64\nexport const CELL_HEIGHT = 32\nexport const CELL_DEPTH = 16\n\nexport const ACCELERATOR = 1.5\nexport const STEP_TIME = 20\n\nexport const IS_MOBILE = window.innerWidth <= 800 && window.innerHeight <= 600\nexport const LONG_CLICK_DURATION = 200\n\nexport const WORK_FOOD_TYPES = ['fisher', 'hunter', 'farmer', 'forager']\nexport const LOADING_FOOD_TYPES = ['meat', 'wheat', 'berry', 'fish']\n\nexport const COLOR_WHITE = 0xffffff\nexport const COLOR_BLACK = 0x000000\nexport const COLOR_GREY = 0x808080\nexport const COLOR_RED = 0xff0000\nexport const COLOR_ORANGE = 0xffa500\nexport const COLOR_YELLOW = 0xffff00\nexport const COLOR_GREEN = 0x008000\nexport const COLOR_BLUE = 0x0000ff\nexport const COLOR_INDIGO = 0x4b0082\nexport const COLOR_VIOLET = 0xee82ee\nexport const COLOR_BONE = 0xe2dac2\nexport const COLOR_SHIP_GREY = 0x3c3b3d\nexport const COLOR_FOG = 0x999999\nexport const COLOR_FLASHY_GREEN = 0x00ff00\nexport const COLOR_ARROW = 0xe8e3df\n\nexport const TYPE_ACTION = {\n  Stone: 'minestone',\n  Gold: 'minegold',\n  Berrybush: 'forageberry',\n  Tree: 'chopwood',\n  Fish: 'fishing',\n}\n\nexport const CORPSE_TIME = 120\nexport const RUBBLE_TIME = 120\nexport const MAX_SELECT_UNITS = 10\nexport const POPULATION_MAX = 200\n","import { Filter, deprecation, GpuProgram, GlProgram, Color } from 'pixi.js';\nimport vertex from '../defaults/default.mjs';\nimport wgslVertex from '../defaults/default2.mjs';\nimport fragment from './multi-color-replace.mjs';\nimport source from './multi-color-replace2.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nconst _MultiColorReplaceFilter = class _MultiColorReplaceFilter extends Filter {\n  /** @ignore */\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (Array.isArray(options)) {\n      deprecation(\"6.0.0\", \"MultiColorReplaceFilter constructor params are now options object. See params: { replacements, tolerance, maxColors }\");\n      options = { replacements: options };\n      if (args[1])\n        options.tolerance = args[1];\n      if (args[2])\n        options.maxColors = args[2];\n    }\n    options = { ..._MultiColorReplaceFilter.DEFAULT_OPTIONS, ...options };\n    const maxColors = options.maxColors ?? options.replacements.length;\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source: wgslVertex,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source: source.replace(/\\$\\{MAX_COLORS\\}/g, maxColors.toFixed(0)),\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment: fragment.replace(/\\$\\{MAX_COLORS\\}/g, maxColors.toFixed(0)),\n      name: \"multi-color-replace-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram,\n      resources: {\n        multiColorReplaceUniforms: {\n          uOriginalColors: {\n            value: new Float32Array(3 * maxColors),\n            type: \"vec3<f32>\",\n            size: maxColors\n          },\n          uTargetColors: {\n            value: new Float32Array(3 * maxColors),\n            type: \"vec3<f32>\",\n            size: maxColors\n          },\n          uTolerance: { value: options.tolerance, type: \"f32\" }\n        }\n      }\n    });\n    __publicField(this, \"uniforms\");\n    __publicField(this, \"_replacements\", []);\n    __publicField(this, \"_maxColors\");\n    this._maxColors = maxColors;\n    this.uniforms = this.resources.multiColorReplaceUniforms.uniforms;\n    this.replacements = options.replacements;\n  }\n  /**\n   * The collection of replacement items. Each item is color-pair\n   * (an array length is 2). In the pair, the first value is original color , the second value is target color\n   */\n  set replacements(replacements) {\n    const originals = this.uniforms.uOriginalColors;\n    const targets = this.uniforms.uTargetColors;\n    const colorCount = replacements.length;\n    const color = new Color();\n    if (colorCount > this._maxColors) {\n      throw new Error(`Length of replacements (${colorCount}) exceeds the maximum colors length (${this._maxColors})`);\n    }\n    originals[colorCount * 3] = -1;\n    let r;\n    let g;\n    let b;\n    for (let i = 0; i < colorCount; i++) {\n      const pair = replacements[i];\n      color.setValue(pair[0]);\n      [r, g, b] = color.toArray();\n      originals[i * 3] = r;\n      originals[i * 3 + 1] = g;\n      originals[i * 3 + 2] = b;\n      color.setValue(pair[1]);\n      [r, g, b] = color.toArray();\n      targets[i * 3] = r;\n      targets[i * 3 + 1] = g;\n      targets[i * 3 + 2] = b;\n    }\n    this._replacements = replacements;\n  }\n  get replacements() {\n    return this._replacements;\n  }\n  /**\n    * Should be called after changing any of the contents of the replacements.\n    * This is a convenience method for resetting the `replacements`.\n    * @todo implement nested proxy to remove the need for this function\n    */\n  refresh() {\n    this.replacements = this._replacements;\n  }\n  /**\n    * The maximum number of color replacements supported by this filter. Can be changed\n    * _only_ during construction.\n    * @readonly\n    */\n  get maxColors() {\n    return this._maxColors;\n  }\n  /**\n    * Tolerance of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n    * @default 0.05\n    */\n  get tolerance() {\n    return this.uniforms.uTolerance;\n  }\n  set tolerance(value) {\n    this.uniforms.uTolerance = value;\n  }\n  /**\n   * @deprecated since 6.0.0\n   *\n   * Tolerance of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n   * @default 0.05\n   */\n  set epsilon(value) {\n    deprecation(\"6.0.0\", \"MultiColorReplaceFilter.epsilon is deprecated, please use MultiColorReplaceFilter.tolerance instead\");\n    this.tolerance = value;\n  }\n  get epsilon() {\n    deprecation(\"6.0.0\", \"MultiColorReplaceFilter.epsilon is deprecated, please use MultiColorReplaceFilter.tolerance instead\");\n    return this.tolerance;\n  }\n};\n/** Default values for options. */\n__publicField(_MultiColorReplaceFilter, \"DEFAULT_OPTIONS\", {\n  replacements: [[16711680, 255]],\n  tolerance: 0.05,\n  maxColors: void 0\n});\nlet MultiColorReplaceFilter = _MultiColorReplaceFilter;\n\nexport { MultiColorReplaceFilter };\n//# sourceMappingURL=MultiColorReplaceFilter.mjs.map\n","var wgslVertex = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\";\n\nexport { wgslVertex as default };\n//# sourceMappingURL=default2.mjs.map\n","var source = \"struct MultiColorReplaceUniforms {\\n  uOriginalColors: array<vec3<f32>, MAX_COLORS>,\\n  uTargetColors: array<vec3<f32>, MAX_COLORS>,\\n  uTolerance:f32,\\n};\\n\\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \\n@group(0) @binding(2) var uSampler: sampler;\\n@group(1) @binding(0) var<uniform> multiColorReplaceUniforms : MultiColorReplaceUniforms;\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv : vec2<f32>\\n) -> @location(0) vec4<f32> {\\n  let uOriginalColors = multiColorReplaceUniforms.uOriginalColors;\\n  let uTargetColors = multiColorReplaceUniforms.uTargetColors;\\n  let uTolerance = multiColorReplaceUniforms.uTolerance;\\n\\n  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);\\n\\n  let alpha: f32 = color.a;\\n\\n  if (alpha > 0.0001)\\n  {\\n    var modColor: vec3<f32> = vec3<f32>(color.rgb) / alpha;\\n\\n    for(var i: i32 = 0; i < MAX_COLORS; i += 1)\\n    {\\n      let origColor: vec3<f32> = uOriginalColors[i];\\n      if (origColor.r < 0.0)\\n      {\\n        break;\\n      }\\n      let colorDiff: vec3<f32> = origColor - modColor;\\n      \\n      if (length(colorDiff) < uTolerance)\\n      {\\n        let targetColor: vec3<f32> = uTargetColors[i];\\n        color = vec4((targetColor + colorDiff) * alpha, alpha);\\n        return color;\\n      }\\n    }\\n  }\\n\\n  return color;\\n}\\n\\nconst MAX_COLORS: i32 = ${MAX_COLORS};\";\n\nexport { source as default };\n//# sourceMappingURL=multi-color-replace2.mjs.map\n","var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=default.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\n\\nconst int MAX_COLORS = ${MAX_COLORS};\\n\\nuniform sampler2D uTexture;\\nuniform vec3 uOriginalColors[MAX_COLORS];\\nuniform vec3 uTargetColors[MAX_COLORS];\\nuniform float uTolerance;\\n\\nvoid main(void)\\n{\\n    finalColor = texture(uTexture, vTextureCoord);\\n\\n    float alpha = finalColor.a;\\n    if (alpha < 0.0001)\\n    {\\n      return;\\n    }\\n\\n    vec3 color = finalColor.rgb / alpha;\\n\\n    for(int i = 0; i < MAX_COLORS; i++)\\n    {\\n      vec3 origColor = uOriginalColors[i];\\n      if (origColor.r < 0.0)\\n      {\\n        break;\\n      }\\n      vec3 colorDiff = origColor - color;\\n      if (length(colorDiff) < uTolerance)\\n      {\\n        vec3 targetColor = uTargetColors[i];\\n        finalColor = vec4((targetColor + colorDiff) * alpha, alpha);\\n        return;\\n      }\\n    }\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=multi-color-replace.mjs.map\n","import { Graphics } from 'pixi.js'\nimport { Texture } from 'pixi.js'\nimport { COLOR_FLASHY_GREEN } from '../constants'\nimport { MultiColorReplaceFilter } from 'pixi-filters'\n\nexport function getIconPath(name) {\n  const id = name.split('_')[1]\n  const index = name.split('_')[0]\n  return `assets/interface/${id}/${index}_${id}.png`\n}\n\nexport function getBuildingTextureNameWithSize(size) {\n  switch (size) {\n    case 1:\n      return '000_256'\n    case 2:\n      return '000_258'\n    case 3:\n      return '000_261'\n  }\n}\n\nexport function getBuildingRubbleTextureNameWithSize(size) {\n  switch (size) {\n    case 1:\n      return '000_153'\n    case 2:\n      return '000_154'\n    case 3:\n      return '000_155'\n  }\n}\n\nexport function getBuildingAsset(type, owner, assets) {\n  const path = assets.cache.get(owner.civ.toLowerCase()).buildings\n  if (path[owner.age][type]) {\n    return path[owner.age][type]\n  } else if (path[owner.age - 1][type]) {\n    return path[owner.age - 1][type]\n  } else if (path[owner.age - 2][type]) {\n    return path[owner.age - 2][type]\n  } else if (path[0][type]) {\n    return path[0][type]\n  }\n}\n\n/**\n * Retrieve a texture from the assets cache based on its name.\n *\n * @param {string} name - The name of the texture, formatted as 'index_id'.\n * @param {object} assets - The assets object containing the cache of textures.\n * @returns {object} - The requested texture from the spritesheet.\n * @throws {Error} - If the texture cannot be found in the spritesheet.\n */\nexport function getTexture(name, assets) {\n  const [index, id] = name.split('_')\n  const spritesheet = assets.cache.get(id)\n\n  if (!spritesheet || !spritesheet.textures) {\n    throw new Error(`Spritesheet for ID \"${id}\" not found in assets.`)\n  }\n\n  const textureName = `${index}_${id}.png`\n  const texture = spritesheet.textures[textureName]\n\n  if (!texture) {\n    throw new Error(`Texture \"${textureName}\" not found in spritesheet.`)\n  }\n\n  // Set the hit area for the texture\n  texture.hitArea = spritesheet.data.frames[textureName].hitArea\n\n  return texture\n}\n\nexport const colors = ['blue', 'red', 'yellow', 'brown', 'orange', 'green', 'grey', 'cyan']\n\n/**\n * Get the hex color code for a given color name.\n * @param {string} name - The name of the color.\n * @returns {string} The hex color code, or '#ffffff' if the color is not found.\n */\nexport function getHexColor(name) {\n  const colorMap = {\n    blue: '#3f5f9f',\n    red: '#e30b00',\n    yellow: '#c3a31b',\n    brown: '#8b5b37',\n    orange: '#ef6307',\n    green: '#4b6b2b',\n    grey: '#8f8f8f',\n    cyan: '#00837b',\n  }\n  return colorMap[name] || '#ffffff' // Default to white if not found\n}\n\n/**\n * Change the color of a sprite directly by manipulating its texture.\n * @param {object} sprite - The sprite to change the color of.\n * @param {string} color - The new color to apply to the sprite.\n */\nexport function changeSpriteColorDirectly(sprite, color) {\n  if (color === 'blue') {\n    return // Skip processing if color is blue\n  }\n\n  const sourceColors = [0x93bbd7, 0x739bc7, 0x577bb3, 0x3f5f9f, 0x273f8f, 0x17277b, 0x070f67, 0x000057]\n\n  const colors = {\n    red: [0xff8f8f, 0xff5f5f, 0xff2f2f, 0xe30b00, 0xc71700, 0x8f1f00, 0x6f0b07, 0x530b00],\n    yellow: [0xe3e300, 0xdfcf0f, 0xdfcf0f, 0xc3a31b, 0xa37317, 0x876727, 0x6b4b27, 0x4f3723],\n    brown: [0xcfa343, 0xb78b2b, 0xa3734f, 0x8b5b37, 0x734727, 0x5f331b, 0x3f3723, 0x23231f],\n    orange: [0xfb9f1f, 0xf78b17, 0xf3770f, 0xef6307, 0xcf4300, 0x9f3300, 0x872b00, 0x6f2300],\n    green: [0x8b9f4f, 0x7f8b37, 0x637b2f, 0x4b6b2b, 0x375f27, 0x1b431b, 0x133313, 0x0b1b0b],\n    grey: [0xdbdbdb, 0xc7c7c7, 0xb3b3b3, 0x8f8f8f, 0x6b6b6b, 0x474747, 0x373737, 0x232323],\n    cyan: [0x5fd39f, 0x2bbf93, 0x00ab93, 0x00837b, 0x006f6b, 0x004f4f, 0x003f43, 0x002327],\n  }\n\n  const targetColors = colors[color]\n\n  if (!targetColors) {\n    throw new Error('Invalid color selected.') // Throw error for invalid color\n  }\n\n  const baseTexture = sprite.texture.baseTexture.resource\n\n  const canvas = document.createElement('canvas')\n  canvas.width = sprite.texture.width\n  canvas.height = sprite.texture.height\n\n  const ctx = canvas.getContext('2d')\n  ctx.drawImage(\n    baseTexture,\n    sprite.texture.frame.x,\n    sprite.texture.frame.y,\n    sprite.texture.frame.width,\n    sprite.texture.frame.height,\n    0,\n    0,\n    sprite.texture.frame.width,\n    sprite.texture.frame.height\n  )\n\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n  const data = imageData.data\n\n  const sourceColorMap = new Map(sourceColors.map((color, index) => [color, targetColors[index]]))\n\n  for (let i = 0; i < data.length; i += 4) {\n    const r = data[i]\n    const g = data[i + 1]\n    const b = data[i + 2]\n    const rgb = (r << 16) | (g << 8) | b\n\n    if (sourceColorMap.has(rgb)) {\n      const targetColor = sourceColorMap.get(rgb)\n      data[i] = (targetColor >> 16) & 0xff // Red\n      data[i + 1] = (targetColor >> 8) & 0xff // Green\n      data[i + 2] = targetColor & 0xff // Blue\n    }\n  }\n\n  ctx.putImageData(imageData, 0, 0)\n\n  const newTexture = Texture.from(canvas)\n  sprite.texture = newTexture\n}\n\n/**\n * Change the color of a sprite based on the specified color.\n *\n * @param {object} sprite - The sprite object whose color will be changed.\n * @param {string} color - The target color. Supported colors: 'red', 'yellow', 'brown', 'orange', 'green', 'grey', 'cyan'.\n * @returns {void}\n */\nexport function changeSpriteColor(sprite, color) {\n  // Skip color change if the specified color is blue\n  if (color === 'blue') {\n    return\n  }\n\n  // Source colors (Hex)\n  const source = [0x93bbd7, 0x739bc7, 0x577bb3, 0x3f5f9f, 0x273f8f, 0x17277b, 0x070f67, 0x000057]\n\n  // Define color mappings\n  const colors = {\n    red: [0xff8f8f, 0xff5f5f, 0xff2f2f, 0xe30b00, 0xc71700, 0x8f1f00, 0x6f0b07, 0x530b00],\n    yellow: [0xe3e300, 0xdfcf0f, 0xdfcf0f, 0xc3a31b, 0xa37317, 0x876727, 0x6b4b27, 0x4f3723],\n    brown: [0xcfa343, 0xb78b2b, 0xa3734f, 0x8b5b37, 0x734727, 0x5f331b, 0x3f3723, 0x23231f],\n    orange: [0xfb9f1f, 0xf78b17, 0xf3770f, 0xef6307, 0xcf4300, 0x9f3300, 0x872b00, 0x6f2300],\n    green: [0x8b9f4f, 0x7f8b37, 0x637b2f, 0x4b6b2b, 0x375f27, 0x1b431b, 0x133313, 0x0b1b0b],\n    grey: [0xdbdbdb, 0xc7c7c7, 0xb3b3b3, 0x8f8f8f, 0x6b6b6b, 0x474747, 0x373737, 0x232323],\n    cyan: [0x5fd39f, 0x2bbf93, 0x00ab93, 0x00837b, 0x006f6b, 0x004f4f, 0x003f43, 0x002327],\n  }\n\n  // Check if the color is supported\n  if (!colors[color]) {\n    return\n  }\n\n  // Create final color mapping\n  const replacements = []\n  for (let i = 0; i < source.length; i++) {\n    replacements.push([source[i], colors[color][i]])\n  }\n\n  const filter = new MultiColorReplaceFilter({ replacements, tolerance: 0.1 })\n\n  sprite.filters = [filter]\n}\n\n/**\n * Draws a blinking selection around the given instance.\n * @param {object} instance - The instance to draw the selection around.\n */\nexport function drawInstanceBlinkingSelection(instance) {\n  const selection = new Graphics()\n  selection.name = 'selection'\n  selection.zIndex = 3\n\n  // Define the path for the selection\n  const path = [-32 * instance.size, 0, 0, -16 * instance.size, 32 * instance.size, 0, 0, 16 * instance.size]\n  selection.poly(path)\n  selection.stroke(COLOR_FLASHY_GREEN)\n  instance.addChildAt(selection, 0)\n\n  // Helper function for blinking effect\n  const blink = (alpha, duration) => {\n    return new Promise(resolve => {\n      selection.alpha = alpha\n      setTimeout(resolve, duration)\n    })\n  }\n\n  const blinkSequence = async () => {\n    await blink(1, 500) // Show\n    await blink(0, 300) // Hide\n    await blink(1, 300) // Show\n    await blink(0, 300) // Hide\n    await blink(1, 300) // Show\n    instance.removeChild(selection) // Clean up\n  }\n\n  blinkSequence()\n}\n/**\n * Draw a filled rectangle on the canvas.\n * @param {CanvasRenderingContext2D} context\n * @param {number} x - The x-coordinate of the rectangle's top-left corner.\n * @param {number} y - The y-coordinate of the rectangle's top-left corner.\n * @param {number} width - The width of the rectangle.\n * @param {number} height - The height of the rectangle.\n * @param {string} color - The fill color for the rectangle.\n */\nexport function canvasDrawRectangle(context, x, y, width, height, color) {\n  context.fillStyle = color\n  context.fillRect(x, y, width, height)\n}\n\n/**\n * Draw a stroked rectangle on the canvas.\n * @param {CanvasRenderingContext2D} context\n * @param {number} x - The x-coordinate of the rectangle's top-left corner.\n * @param {number} y - The y-coordinate of the rectangle's top-left corner.\n * @param {number} width - The width of the rectangle.\n * @param {number} height - The height of the rectangle.\n * @param {string} color - The stroke color for the rectangle.\n */\nexport function canvasDrawStrokeRectangle(context, x, y, width, height, color) {\n  context.strokeStyle = color\n  context.strokeRect(x, y, width, height)\n}\n\n/**\n * Draw a diamond shape on the canvas.\n * @param {CanvasRenderingContext2D} context\n * @param {number} x - The x-coordinate of the diamond's center.\n * @param {number} y - The y-coordinate of the diamond's center.\n * @param {number} width - The width of the diamond.\n * @param {number} height - The height of the diamond.\n * @param {string} color - The fill color for the diamond.\n */\nexport function canvasDrawDiamond(context, x, y, width, height, color) {\n  context.save()\n  context.beginPath()\n  context.moveTo(x, y)\n  context.lineTo(x - width / 2, y + height / 2)\n  context.lineTo(x, y + height)\n  context.lineTo(x + width / 2, y + height / 2)\n  context.closePath()\n\n  context.fillStyle = color\n  context.fill()\n  context.restore() // Restore the context state\n}\n\n/**\n * Execute a callback when a sprite reaches a specific frame.\n * @param {object} sprite - The sprite to monitor.\n * @param {number} frame - The target frame to trigger the callback.\n * @param {function} cb - The callback to execute.\n */\nexport function onSpriteLoopAtFrame(sprite, frame, cb) {\n  sprite.onFrameChange = currentFrame => {\n    if (currentFrame === frame) {\n      cb()\n    }\n  }\n}\n","/**\n * Refunds costs to the player's resources.\n * @param {object} player - The player object containing resources.\n * @param {object} cost - An object representing the costs to refund.\n */\nexport function refundCost(player, cost) {\n  if (!player || typeof player !== 'object' || !cost || typeof cost !== 'object') {\n    console.error('Invalid arguments provided to refundCost.')\n    return\n  }\n\n  Object.keys(cost).forEach(prop => {\n    if (typeof cost[prop] === 'number') {\n      player[prop] += cost[prop]\n    } else {\n      console.warn(`Cost for ${prop} is not a number:`, cost[prop])\n    }\n  })\n}\n\n/**\n * Deducts costs from the player's resources.\n * @param {object} player - The player object containing resources.\n * @param {object} cost - An object representing the costs to pay.\n */\nexport function payCost(player, cost) {\n  if (!player || typeof player !== 'object' || !cost || typeof cost !== 'object') {\n    console.error('Invalid arguments provided to payCost.')\n    return\n  }\n\n  Object.keys(cost).forEach(prop => {\n    if (typeof cost[prop] === 'number') {\n      player[prop] -= cost[prop]\n    } else {\n      console.warn(`Cost for ${prop} is not a number:`, cost[prop])\n    }\n  })\n}\n\n/**\n * Checks if the player can afford the given costs.\n * @param {object} player - The player object containing resources.\n * @param {object} cost - An object representing the costs to check.\n * @returns {boolean} - True if the player can afford the costs, false otherwise.\n */\nexport function canAfford(player, cost) {\n  // Validate inputs\n  if (!player || typeof player !== 'object' || !cost || typeof cost !== 'object') {\n    console.error('Invalid arguments provided to canAfford.')\n    return false\n  }\n\n  // Iterate over the cost object\n  for (const prop in cost) {\n    // Check if the cost for the property is a number\n    if (typeof cost[prop] === 'number') {\n      // Early return if player cannot afford the cost\n      if (player[prop] < cost[prop]) {\n        return false\n      }\n    }\n  }\n\n  // If all costs are affordable, return true\n  return true\n}\n","import { CELL_WIDTH, CELL_HEIGHT, CELL_DEPTH } from '../constants'\n\n/**\n * Generate a version 4 UUID.\n * @returns {string} - A random UUID.\n */\nexport function uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const randomValue = crypto.getRandomValues(new Uint8Array(1))[0] & 15 // Get a random value\n    const hexValue = (c === 'x' ? randomValue : (randomValue & 0x3) | 0x8).toString(16) // Adjust for 'y'\n    return hexValue\n  })\n}\n\n/**\n * Format a number with three character\n * @param {number} nbr\n */\nexport function formatNumber(nbr) {\n  return ('00' + nbr).slice(-3)\n}\n\n/**\n * Convert cartesian to isometric\n * @param {number} x\n * @param {number} y\n */\nexport function cartesianToIsometric(x, y) {\n  return [Math.floor(((x - y) * CELL_WIDTH) / 2), Math.floor(((x + y) * CELL_HEIGHT) / 2)]\n}\n\n/**\n * Convert isometric position to cartesian\n * @param {number} x\n * @param {number} y\n */\nexport function isometricToCartesian(x, y) {\n  return [\n    Math.round((x / (CELL_WIDTH / 2) + y / (CELL_HEIGHT / 2)) / 2),\n    Math.round((y / (CELL_HEIGHT / 2) - x / (CELL_WIDTH / 2)) / 2),\n  ]\n}\n\n/**\n * Get percentage with two numbers\n * @param {number} a\n * @param {number} b\n */\nexport function getPercentage(a, b) {\n  return Math.floor((a / b) * 100)\n}\n\n/**\n * Get value of percentage\n * @param {number} a\n * @param {number} b\n */\nexport function getValuePercentage(val, perc) {\n  return Math.floor((perc * val) / 100)\n}\n\n/**\n * Get average between two numbers\n * @param {number} a\n * @param {number} b\n */\nexport function average(a, b) {\n  return (a + b) / 2\n}\n\n/**\n * Check if point is between two points can be used with line thickness\n * @param {object} line1\n * @param {object} line2\n * @param {object} pnt\n * @param {number} lineThickness\n */\n/**\n * Check if a point is within a certain distance from a line segment\n * @param {{x:number, y:number}} line1 - Start point of the line\n * @param {{x:number, y:number}} line2 - End point of the line\n * @param {{x:number, y:number}} pnt - Point to check\n * @param {number} lineThickness - Maximum allowed distance from the line\n * @returns {boolean}\n */\nexport function pointIsBetweenTwoPoint(line1, line2, pnt, lineThickness) {\n  const dx = line2.x - line1.x\n  const dy = line2.y - line1.y\n  const L2 = dx * dx + dy * dy\n  if (L2 === 0) {\n    // line1 == line2\n    const dist = Math.hypot(line1.x - pnt.x, line1.y - pnt.y)\n    return dist <= lineThickness\n  }\n\n  // Projection parameter\n  const r = ((pnt.x - line1.x) * dx + (pnt.y - line1.y) * dy) / L2\n\n  if (r < 0) {\n    return Math.hypot(line1.x - pnt.x, line1.y - pnt.y) <= lineThickness\n  } else if (r > 1) {\n    return Math.hypot(line2.x - pnt.x, line2.y - pnt.y) <= lineThickness\n  } else {\n    // Perpendicular distance from point to line\n    const s = ((line1.y - pnt.y) * dx - (line1.x - pnt.x) * dy) / L2\n    return Math.abs(s) * Math.sqrt(L2) <= lineThickness\n  }\n}\n\n/**\n * Get a random number between two numbers\n * @param {number} min\n * @param {number} max\n */\nexport function randomRange(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\n/**\n * Get a random item from a array\n * @param {array} array\n */\nexport function randomItem(array = []) {\n  return array[Math.round(Math.random() * (array.length - 1))]\n}\n\n/**\n * Get distance between two instances, can use iso (x, y) or cartesian (i, j)\n * @param {object} a\n * @param {object} b\n * @param {boolean} useCartesian\n */\nexport function instancesDistance(a, b, useCartesian = true) {\n  return useCartesian ? pointsDistance(a.i, a.j, b.i, b.j) : pointsDistance(a.x, a.y, b.x, b.y)\n}\n\n/**\n * Get the instance zIndex according to his position\n * @param {object} instance\n */\nexport function getInstanceZIndex(instance) {\n  const pos = isometricToCartesian(instance.x, instance.y + instance.z * CELL_DEPTH)\n  return pos[0] + pos[1]\n}\n\n/**\n * Get the difference between two number\n * @param {number} a\n * @param {number} b\n */\nexport function diff(a, b) {\n  return Math.abs(a - b)\n}\n\n/**\n * Get degree of instance according to a point\n * @param {object} instance\n * @param {number} x\n * @param {number} y\n */\nexport function getInstanceDegree(instance, x, y) {\n  return getPointsDegree(instance.x, instance.y, x, y)\n}\n\n/**\n * Get the degree from one point to another.\n * @param {number} x1 - The x-coordinate of the first point.\n * @param {number} y1 - The y-coordinate of the first point.\n * @param {number} x2 - The x-coordinate of the second point.\n * @param {number} y2 - The y-coordinate of the second point.\n * @returns {number} - The angle in degrees from the first point to the second.\n */\nexport function getPointsDegree(x1, y1, x2, y2) {\n  const tX = x2 - x1\n  const tY = y2 - y1\n  return Math.round((Math.atan2(tY, tX) * 180) / Math.PI + 180)\n}\n\n/**\n * Convert degrees to radians.\n * @param {number} degrees - The angle in degrees.\n * @returns {number} - The angle in radians.\n */\nexport function degreesToRadians(degrees) {\n  return degrees * (Math.PI / 180)\n}\n\n/**\n * Get distance between two points\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n */\nexport function pointsDistance(x1, y1, x2, y2) {\n  let a = x1 - x2\n  let b = y1 - y2\n  return Math.floor(Math.sqrt(a * a + b * b))\n}\n\n/**\n * Check if point is in a rectangle or not\n * @param {number} x\n * @param {number} y\n * @param {number} left\n * @param {number} top\n * @param {number} width\n * @param {number} height\n */\nexport function pointInRectangle(x, y, left, top, width, height, allDirection = false) {\n  return allDirection\n    ? (x > left && x < left + width && y > top && y < top + height) ||\n        (x < left && x > left + width && y < top && y > top + height) ||\n        (x > left && x < left + width && y < top && y > top + height) ||\n        (x < left && x > left + width && y > top && y < top + height)\n    : x > left && x < left + width && y > top && y < top + height\n}\n\n/**\n * Check if two instance are on diagonal axes\n * @param {object} instance\n * @param {object} instance\n */\nexport function cellIsDiag(src, target) {\n  return Math.abs(target.i - src.i) === Math.abs(target.j - src.j)\n}\n\nexport function degreeToDirection(degree) {\n  if (degree > 67.5 && degree < 112.5) {\n    return 'north'\n  } else if (degree > 247.5 && degree < 292.5) {\n    return 'south'\n  } else if (degree > 337.5 || degree < 22.5) {\n    return 'west'\n  } else if (degree >= 22.5 && degree <= 67.5) {\n    return 'northwest'\n  } else if (degree >= 292.5 && degree <= 337.5) {\n    return 'southwest'\n  } else if (degree > 157.5 && degree < 202.5) {\n    return 'est'\n  } else if (degree > 112.5 && degree < 157.5) {\n    return 'northest'\n  } else if (degree > 202.5 && degree < 247.5) {\n    return 'southest'\n  }\n}\n","import { ACCELERATOR } from '../constants'\nimport * as exports from './maths'\nObject.entries(exports).forEach(([name, exported]) => (window[name] = exported))\n\n/**\n * Check if two instances are in contact.\n *\n * @param {object} a - The first instance. Should have properties like `x`, `y`, and `size`.\n * @param {object} b - The second instance. Should have properties like `x`, `y`, `size`, and `isDestroyed`.\n * @returns {boolean} - True if instance `a` is in contact with instance `b`, false otherwise.\n */\nexport function instanceContactInstance(a, b) {\n  // Check if the distance between instances is less than or equal to (b.size - 1) and b is not destroyed\n  return Math.floor(instancesDistance(a, b)) <= (b.size - 1 || 1) && !b.isDestroyed\n}\n\n/**\n * Move an instance towards a specific point (x, y) at a given speed.\n *\n * @param {object} instance - The instance to move. Should have properties like `x`, `y`, and `degree`.\n * @param {number} x - The target x-coordinate to move towards.\n * @param {number} y - The target y-coordinate to move towards.\n * @param {number} speed - The speed at which the instance should move.\n */\nexport function moveTowardPoint(instance, x, y, speed) {\n  const dist = pointsDistance(x, y, instance.x, instance.y)\n\n  if (dist === 0) return // Prevent division by zero\n\n  // Calculate the direction vector from the instance to the target point\n  const tX = x - instance.x\n  const tY = y - instance.y\n\n  // Calculate the velocity based on the speed and distance\n  const velX = (tX / dist) * (speed * ACCELERATOR)\n  const velY = (tY / dist) * (speed * ACCELERATOR)\n\n  // Update the instance's degree (rotation) to face the target point\n  instance.degree = getInstanceDegree(instance, x, y)\n\n  // Update the instance's position by adding the velocity components\n  instance.x += velX\n  instance.y += velY\n}\n\n/**\n * Get the first free cell coordinate around a point\n * @param {number} x - The x-coordinate of the starting point\n * @param {number} y - The y-coordinate of the starting point\n * @param {number} size - The starting search radius\n * @param {object} grid - The grid to search in\n * @param {function} condition - A function to test if a cell is free\n * @returns {object|null} - The coordinates of the first free cell or null if none found\n */\nexport function getFreeCellAroundPoint(x, y, size, grid, condition) {\n  const maxDistance = 50\n\n  for (let distance = size; distance < maxDistance; distance++) {\n    const cells = getCellsAroundPoint(x, y, grid, distance, condition)\n    if (cells.length > 0) {\n      return randomItem(cells)\n    }\n  }\n\n  return null\n}\n\n/**\n * Get the closest available path for an instance to a destination\n * @param {object} instance - The instance seeking a path\n * @param {object} target - The target object to reach\n * @param {object} map - The map containing grid information\n * @returns {Array} - The shortest path to a free cell or an empty array if none found\n */\nexport function getInstanceClosestFreeCellPath(instance, target, map) {\n  const size = target.size || (target.has && target.has.size) || 1\n  const paths = []\n\n  // Get cells around the target based on size\n  const distance = size === 3 ? 2 : 1\n  getCellsAroundPoint(target.i, target.j, map.grid, distance, cell => {\n    const path = getInstancePath(instance, cell.i, cell.j, map)\n    if (path.length) {\n      paths.push(path)\n    }\n  })\n\n  // Return the shortest path if available\n  return paths.length\n    ? paths.reduce((shortest, current) => (current.length < shortest.length ? current : shortest))\n    : []\n}\n\n/**\n * Get the shortest path for a instance to a destination\n * @param {object} instance\n * @param {number} x\n * @param {number} y\n * @param {object} map\n */\nexport function getInstancePath(instance, x, y, map) {\n  const maxZone = 10\n  const end = map.grid[x][y]\n  const start = map.grid[instance.i][instance.j]\n  let minX = Math.max(Math.min(start.i, end.i) - maxZone, 0)\n  let maxX = Math.min(Math.max(start.i, end.i) + maxZone, map.size)\n  let minY = Math.max(Math.min(start.j, end.j) - maxZone, 0)\n  let maxY = Math.min(Math.max(start.j, end.j) + maxZone, map.size)\n\n  function isCellReachable(cell) {\n    if (cell.solid) {\n      return false\n    }\n    const allowWaterCellCategory = instance.category === 'Boat'\n    return allowWaterCellCategory ? cell.category === 'Water' : cell.category !== 'Water'\n  }\n\n  let cloneGrid = []\n  for (var i = minX; i <= maxX; i++) {\n    for (var j = minY; j <= maxY; j++) {\n      if (cloneGrid[i] == null) {\n        cloneGrid[i] = []\n      }\n      cloneGrid[i][j] = {\n        i,\n        j,\n        x: map.grid[i][j].x,\n        y: map.grid[i][j].y,\n        z: map.grid[i][j].z,\n        solid: map.grid[i][j].solid,\n        category: map.grid[i][j].category,\n      }\n    }\n  }\n  let isFinish = false\n  let path = []\n  let openCells = []\n  let closedCells = []\n  const cloneEnd = cloneGrid[end.i][end.j]\n  const cloneStart = cloneGrid[start.i][start.j]\n  openCells.push(cloneStart)\n  while (!isFinish) {\n    if (openCells.length > 0) {\n      // find the lowest f in open cells\n      let lowestF = 0\n      for (let i = 0; i < openCells.length; i++) {\n        if (openCells[i].f < openCells[lowestF].f) {\n          lowestF = i\n        }\n\n        if (openCells[i].f == openCells[lowestF].f) {\n          if (openCells[i].g > openCells[lowestF].g) {\n            lowestF = i\n          }\n        }\n      }\n      let current = openCells[lowestF]\n      if (current === cloneEnd) {\n        // reached the end cell\n        isFinish = true\n      }\n      // calculate path\n      path = [cloneEnd]\n      let temp = current\n\n      while (temp.previous) {\n        path.push(temp.previous)\n        temp = temp.previous\n      }\n      openCells.splice(openCells.indexOf(current), 1)\n      closedCells.push(current)\n      // check neighbours\n      getCellsAroundPoint(current.i, current.j, cloneGrid, 1, neighbour => {\n        const validDiag =\n          !cellIsDiag(current, neighbour) ||\n          (isCellReachable(cloneGrid[current.i][neighbour.j]) && isCellReachable(cloneGrid[neighbour.i][current.j]))\n        if (!closedCells.includes(neighbour) && isCellReachable(neighbour) && validDiag) {\n          let tempG = current.g + instancesDistance(neighbour, current)\n          if (!openCells.includes(neighbour)) {\n            openCells.push(neighbour)\n            neighbour.g = tempG\n            neighbour.h = instancesDistance(neighbour, cloneEnd)\n            neighbour.f = neighbour.g + neighbour.h\n            neighbour.previous = current\n          }\n        }\n      })\n    } else {\n      // no solution\n      path = []\n      isFinish = true\n    }\n  }\n  path.pop()\n  return [...path]\n}\n\n/**\n * Find a sized zone in the grid that meets a condition.\n *\n * This function searches within a given zone in the grid for a region of the specified `size`,\n * and checks whether all cells within that region meet a specified condition.\n *\n * @param {object} zone - An object containing the boundaries of the search area (minX, maxX, minY, maxY).\n * @param {object[][]} grid - A 2D grid representing the map.\n * @param {number} size - The size of the area to check around each grid point.\n * @param {function} condition - A callback function that evaluates whether a cell is valid.\n * @returns {object|null} The coordinates {i, j} of the first valid zone found, or null if none are found.\n */\nexport function getZoneInGridWithCondition(zone, grid, size, condition) {\n  // Iterate over the specified zone in the grid\n  for (let i = zone.minX; i <= zone.maxX; i++) {\n    if (!grid[i]) continue // Skip if out of bounds\n\n    for (let j = zone.minY; j <= zone.maxY; j++) {\n      const cell = grid[i]?.[j]\n      if (!cell) continue // Skip if cell doesn't exist\n\n      // Assume the area around (i, j) is free initially\n      let isFree = true\n\n      // Check the surrounding cells of size `size` to ensure they all meet the condition\n      const surroundingCells = getPlainCellsAroundPoint(i, j, grid, size)\n      for (const surroundingCell of surroundingCells) {\n        if (!condition(surroundingCell)) {\n          isFree = false\n          break // Exit early if a cell does not meet the condition\n        }\n      }\n\n      // Return the first valid {i, j} coordinates if the area is free\n      if (isFree) {\n        return { i, j }\n      }\n    }\n  }\n\n  // Return null if no valid zone is found\n  return null\n}\n\n/**\n * Finds all instances within the sight range of a given instance that meet a specific condition.\n *\n * @param {object} instance - The instance whose sight is being processed. Should have properties like `i`, `j`, `sight`, and `parent.grid`.\n * @param {function} condition - A callback function that receives an instance and returns `true` if the instance matches the desired condition.\n * @returns {Array} - List of instances that are within the sight range and match the condition.\n */\nexport function findInstancesInSight(instance, condition) {\n  const {\n    i: instX,\n    j: instY,\n    sight,\n    parent: { grid },\n  } = instance\n  let instances = []\n\n  for (let x = Math.max(instX - sight, 0); x <= Math.min(instX + sight, grid.length - 1); x++) {\n    for (let y = Math.max(instY - sight, 0); y <= Math.min(instY + sight, grid[x].length - 1); y++) {\n      // Check if the cell is within the instance's sight range\n      if (pointsDistance(instX, instY, x, y) <= sight) {\n        const cell = grid[x][y]\n\n        // Ensure the cell has an instance and the condition is met\n        if (cell?.has && typeof condition === 'function' && condition(cell.has)) {\n          instances.push(cell.has)\n        }\n      }\n    }\n  }\n\n  return instances\n}\n\n/**\n * Renders cells in the instance's line of sight, updating their visibility and interactions based on the instance's sight.\n *\n * @param {object} instance - The instance whose sight is being processed.\n *                            Must include properties like `i`, `j`, `sight`, `owner`, `parent`, and `context`.\n */\nexport function renderCellOnInstanceSight(instance) {\n  const { player, controls, map } = instance.context\n  const { owner, sight } = instance\n\n  // Check if instance should be visible based on player interaction and sight\n  if (\n    player &&\n    (!map.revealEverything ? !instanceIsInPlayerSight(instance, player) : !controls.instanceInCamera(instance)) &&\n    !owner.isPlayed\n  ) {\n    instance.visible = false\n  } else {\n    instance.visible = true\n  }\n\n  // Process cells around the instance based on its sight\n  getPlainCellsAroundPoint(instance.i, instance.j, owner.views, sight, cell => {\n    const pointDistance = pointsDistance(instance.i, instance.j, cell.i, cell.j)\n    const globalCell = map.grid[cell.i][cell.j]\n\n    if (pointDistance <= sight) {\n      // If the global cell has an instance with sight and a detection function\n      if (\n        globalCell.has &&\n        globalCell.has.sight &&\n        instancesDistance(instance, globalCell.has) <= globalCell.has.sight &&\n        typeof globalCell.has.detect === 'function'\n      ) {\n        globalCell.has.detect(instance)\n      }\n\n      // Add the instance to the cell's viewBy list if not already present\n      if (!cell.viewBy.includes(instance)) {\n        cell.viewBy.push(instance)\n      }\n\n      // Mark the cell as viewed if it hasn't been already\n      if (!cell.viewed) {\n        owner.cellViewed++\n        cell.onViewed()\n        cell.viewed = true\n      }\n\n      // Handle fog removal for the instance's owner (player vs AI)\n      if (owner.isPlayed && !map.revealEverything) {\n        globalCell.removeFog()\n      } else if (owner.type === 'AI') {\n        // Update AI's knowledge of the surroundings (trees, berrybushes, enemy buildings)\n        updateAIKnowledge(globalCell, cell, instance)\n      }\n    }\n  })\n}\n\n/**\n * Updates AI knowledge of trees, berrybushes, and enemy buildings when an AI instance views a global cell.\n *\n * @param {object} globalCell - The cell in the global grid.\n * @param {object} cell - The current local cell being processed.\n * @param {object} instance - The AI instance viewing the cell.\n */\nfunction updateAIKnowledge(globalCell, cell, instance) {\n  const { owner } = instance\n\n  // Sync local cell's \"has\" object with the global cell if different\n  if (globalCell.has && (!cell.has || cell.has.name !== globalCell.has.name)) {\n    cell.has = globalCell.has\n\n    // Detect tree resources and update AI's knowledge\n    if (globalCell.has.type === 'Tree' && globalCell.has.quantity > 0 && !owner.foundedTrees.includes(globalCell.has)) {\n      owner.foundedTrees.push(globalCell.has)\n    }\n\n    // Detect berrybush resources and update AI's knowledge\n    if (\n      globalCell.has.type === 'Berrybush' &&\n      globalCell.has.quantity > 0 &&\n      !owner.foundedBerrybushs.includes(globalCell.has)\n    ) {\n      owner.foundedBerrybushs.push(globalCell.has)\n    }\n\n    // Detect enemy buildings and update AI's knowledge\n    if (\n      globalCell.has.family === 'building' &&\n      globalCell.has.hitPoints > 0 &&\n      globalCell.has.owner.name !== owner.name &&\n      !owner.foundedEnemyBuildings.includes(globalCell.has)\n    ) {\n      owner.foundedEnemyBuildings.push(globalCell.has)\n    }\n  }\n}\n\n/**\n * Clears the cells within the instance's line of sight from the owner's view.\n *\n * This function removes the instance from the `viewBy` list of cells around it, within its line of sight.\n * If a cell is no longer viewed by any instance and meets certain conditions, fog is applied to that cell.\n *\n * @param {object} instance - The instance whose sight is being cleared (must have properties `i`, `j`, `sight`, `owner`, and `parent`).\n */\nexport function clearCellOnInstanceSight(instance) {\n  // If the entire map is revealed, skip the process\n  if (instance.parent.revealEverything) return\n\n  const { i: instX, j: instY, sight, owner, parent } = instance\n  const views = owner.views\n\n  // Get cells around the instance within its sight range\n  getPlainCellsAroundPoint(instX, instY, views, sight, cell => {\n    // Check if the cell is within the sight radius based on distance\n    if (pointsDistance(instX, instY, cell.i, cell.j) <= sight) {\n      const idx = cell.viewBy.indexOf(instance)\n\n      // If the instance is in the viewBy array, remove it\n      if (idx !== -1) {\n        cell.viewBy.splice(idx, 1)\n\n        // If the cell is no longer viewed by any instance, apply fog after a slight delay\n        if (!cell.viewBy.length && owner.isPlayed && !parent.revealEverything) {\n          setTimeout(() => {\n            if (parent && !cell.viewBy.length) {\n              parent.grid[cell.i][cell.j].setFog()\n            }\n          }, 30)\n        }\n      }\n    }\n  })\n}\n\n/**\n * Randomly finds a valid position in the grid within a specified zone and size, considering certain conditions.\n *\n * This function attempts to find a valid cell in the grid around the specified zone by randomly generating coordinates\n * and checking if they meet specific conditions, such as avoiding inclined, solid, or border cells.\n *\n * @param {object} zone - The area of the grid to search within (must have properties `minX`, `minY`, `maxX`, `maxY`).\n * @param {object[][]} grid - The grid representing the map, where each cell contains coordinates and attributes.\n * @param {number} size - The size of the instance for which we are finding space.\n * @param {function} condition - A function that returns true if the cell meets the conditions, false otherwise.\n * @param {number} attempts - The number of random attempts to find a valid cell.\n * @returns {object|null} The position {i, j} of a valid cell or null if no valid cell is found.\n */\nexport function getRandomZoneInGridWithCondition(zone, grid, size, condition, attempts = 100) {\n  for (let attempt = 0; attempt < attempts; attempt++) {\n    // Generate random coordinates within the zone\n    const randomX = Math.floor(Math.random() * (zone.maxX - zone.minX + 1)) + zone.minX\n    const randomY = Math.floor(Math.random() * (zone.maxY - zone.minY + 1)) + zone.minY\n\n    const cell = grid[randomX]?.[randomY]\n    if (!cell) continue // Skip if cell doesn't exist\n\n    // Assume the area around (randomX, randomY) is free initially\n    let isFree = true\n\n    // Check the surrounding cells of size `size` to ensure they all meet the condition\n    const surroundingCells = getPlainCellsAroundPoint(randomX, randomY, grid, size)\n    for (const surroundingCell of surroundingCells) {\n      if (!condition(surroundingCell)) {\n        isFree = false\n        break // Exit early if a cell does not meet the condition\n      }\n    }\n\n    // If the area is free, return the valid cell\n    if (isFree) {\n      return { i: randomX, j: randomY }\n    }\n  }\n\n  // Return null if no valid cells found after all attempts\n  return null\n}\n\n/**\n * Find a valid position in the grid around an instance within a specified space range.\n *\n * This function searches for a position around a given instance within the grid, considering a range of space,\n * the size of the object, and additional conditions like avoiding inclined, solid, or border cells. It can\n * use either a random zone search or a fixed zone search depending on the `random` parameter.\n *\n * @param {object} instance - The instance around which to search (must have properties `i`, `j`, and `parent` grid).\n * @param {object[][]} grid - The grid representing the map, where each cell contains coordinates and attributes.\n * @param {number[]} space - An array [minSpace, maxSpace] that defines the distance range to search within.\n * @param {number} size - The size of the instance for which we are finding space.\n * @param {boolean} [allowInclined=false] - Whether to allow inclined cells in the search.\n * @param {function} [extraCondition] - An optional callback for extra conditions that a valid cell must meet.\n * @param {boolean} [random=true] - If `true`, uses `getRandomZoneInGridWithCondition`; otherwise, uses `getZoneInGridWithCondition`.\n * @returns {object|null} The position {i, j} of a valid cell or null if no valid cell is found.\n */\nexport function getPositionInGridAroundInstance(\n  instance,\n  grid,\n  space,\n  size,\n  allowInclined = false,\n  extraCondition,\n  random = true\n) {\n  const [minSpace, maxSpace] = space\n\n  // Define the search zone based on instance's position and maxSpace\n  const zone = {\n    minX: Math.max(instance.i - maxSpace, 0),\n    minY: Math.max(instance.j - maxSpace, 0),\n    maxX: Math.min(instance.i + maxSpace, instance.parent.size - 1),\n    maxY: Math.min(instance.j + maxSpace, instance.parent.size - 1),\n  }\n\n  // Condition to check if the cell is valid based on space, solid, inclined, etc.\n  const cellCondition = cell => {\n    const distance = instancesDistance(instance, cell, true)\n    return (\n      distance >= minSpace && // Ensure it's at least the minimum distance away\n      distance <= maxSpace && // Ensure it's within the maximum distance\n      !cell.solid && // Ensure the cell is not solid\n      !cell.border && // Ensure the cell is not at the border\n      (allowInclined || !cell.inclined) && // Check inclined condition\n      (!extraCondition || extraCondition(cell)) // Apply any additional conditions\n    )\n  }\n\n  // Use either the random zone search or fixed zone search based on the 'random' flag\n  let pos\n  if (random) {\n    pos = getRandomZoneInGridWithCondition(zone, grid, size, cellCondition)\n  } else {\n    pos = getZoneInGridWithCondition(zone, grid, size, cellCondition)\n  }\n\n  // Return the found position or null if none is found\n  return pos || null\n}\n\n/**\n * Instance is in a player sight\n * @param {object} instance\n * @param {object} player\n */\nexport function instanceIsInPlayerSight(instance, player) {\n  const dist = instance.size === 3 ? 1 : 0\n  let isInSight = false // Flag to track if the instance is in player sight\n\n  player?.views &&\n    getPlainCellsAroundPoint(instance.i, instance.j, player.views, dist, cell => {\n      if (cell.viewBy.length > 0) {\n        isInSight = true // Set the flag if the condition is met\n      }\n    })\n\n  return isInSight // Return the flag\n}\n\n/**\n * Get all the coordinates around a point within a maximum distance.\n *\n * @param {number} startX - The X coordinate of the center point.\n * @param {number} startY - The Y coordinate of the center point.\n * @param {number} dist - The maximum distance from the center point.\n * @param {object[][]} grid - 2D array representing the grid.\n * @param {function} [callback] - Optional callback function to filter cells. If provided, it should return true for valid cells.\n * @returns {object[]} - Array of valid cells around the point within the distance.\n */\nexport function getPlainCellsAroundPoint(startX, startY, grid, dist = 0, callback) {\n  const result = []\n\n  // Handle single-cell case\n  if (dist === 0) {\n    const row = grid[startX]\n    if (row) {\n      const cell = row[startY]\n      if (cell && (!callback || callback(cell))) result.push(cell)\n    }\n    return result\n  }\n\n  const minX = Math.max(startX - dist, 0)\n  const maxX = Math.min(startX + dist, grid.length - 1)\n\n  for (let i = minX; i <= maxX; i++) {\n    const row = grid[i]\n    if (!row) continue\n    const minY = Math.max(startY - dist, 0)\n    const maxY = Math.min(startY + dist, row.length - 1)\n\n    for (let j = minY; j <= maxY; j++) {\n      const cell = row[j]\n      if (cell && (!callback || callback(cell))) result.push(cell)\n    }\n  }\n\n  return result\n}\n\n/**\n * Get the coordinates around a point within a Manhattan distance\n * @param {number} startX\n * @param {number} startY\n * @param {Array} grid\n * @param {number} dist\n * @param {Function} callback\n * @returns {Array} Array of cells that match the criteria\n */\n/**\n * Get the coordinates around a point within a Manhattan distance (safe for irregular grids)\n * @param {number} startX\n * @param {number} startY\n * @param {Array} grid\n * @param {number} dist\n * @param {Function} callback\n * @returns {Array} Array of cells that match the criteria\n */\nexport function getCellsAroundPoint(startX, startY, grid, dist, callback) {\n  const result = []\n\n  // Special case: distance 0\n  const startCell = grid[startX]?.[startY]\n  if (dist === 0) {\n    if (startCell && (!callback || callback(startCell))) result.push(startCell)\n    return result\n  }\n\n  // Iterate over Manhattan distance\n  for (let dx = -dist; dx <= dist; dx++) {\n    const x = startX + dx\n    if (!grid[x]) continue // Skip if row does not exist\n\n    const dyMax = dist - Math.abs(dx)\n    for (let dy = -dyMax; dy <= dyMax; dy++) {\n      const y = startY + dy\n      const row = grid[x]\n      if (!row || !row[y]) continue // Skip if cell does not exist\n\n      const cell = row[y]\n      if (!callback || callback(cell)) result.push(cell)\n    }\n  }\n\n  return result\n}\n\n/**\n * Get the closest instance to a given instance.\n *\n * @param {object} instance - The reference instance. Should have properties like `x`, `y`.\n * @param {Array<object>} instances - The array of other instances to check. Each should have properties like `x`, `y`.\n * @returns {object|boolean} - The closest instance or false if no instances are found.\n */\nexport function getClosestInstance(instance, instances) {\n  let closestInstance = null\n  let closestDistance = Infinity\n\n  // Iterate through the instances to find the one with the minimum distance to the reference instance\n  for (const targetInstance of instances) {\n    const distance = instancesDistance(instance, targetInstance)\n\n    if (distance < closestDistance) {\n      closestDistance = distance\n      closestInstance = targetInstance\n    }\n  }\n\n  // Return the closest instance, or false if no valid instance was found\n  return closestInstance || false\n}\n\n/**\n * Get the closest instance with a valid path.\n *\n * This function calculates the closest instance that can be reached by a valid path\n * from the given `instance`. It checks all provided `instances` and computes the path\n * to each of them, then returns the instance with the shortest valid path.\n *\n * @param {object} instance - The current instance trying to reach other instances.\n * @param {Array<object>} instances - An array of target instances to find the closest reachable one.\n * @returns {object|null} The closest instance with its path or null if no valid path is found.\n */\nexport function getClosestInstanceWithPath(instance, instances) {\n  let closest = null\n\n  for (const target of instances) {\n    const path = getInstanceClosestFreeCellPath(instance, target, instance.parent)\n\n    // If a valid path exists, compare its length to the current closest\n    if (path.length && (!closest || path.length < closest.path.length)) {\n      closest = {\n        instance: target,\n        path,\n      }\n    }\n  }\n\n  return closest\n}\n","import { instanceIsInPlayerSight } from './grid'\nimport { degreeToDirection, uuidv4 } from './maths'\n\nexport function setUnitTexture(sheet, instance, ACCELERATOR) {\n  const animationSpeed = {\n    standingSheet: 0.15,\n    corpseSheet: 0,\n  }\n  const { paused } = instance.context\n  if (paused) {\n    return\n  }\n  const sheetToReset = ['actionSheet', 'dyingSheet', 'corpseSheet']\n  // Sheet don't exist we just block the current sheet\n  if (!instance[sheet]) {\n    if (instance.currentSheet !== 'walkingSheet' && instance.walkingSheet) {\n      instance.sprite.textures = [instance.walkingSheet.textures[Object.keys(instance.walkingSheet.textures)[0]]]\n    } else {\n      instance.sprite.textures = [instance.sprite.textures[instance.sprite.currentFrame]]\n    }\n    instance.currentSheet = 'walkingSheet'\n    instance.sprite.stop()\n    instance.sprite.anchor.set(\n      instance.sprite.textures[instance.sprite.currentFrame].defaultAnchor.x,\n      instance.sprite.textures[instance.sprite.currentFrame].defaultAnchor.y\n    )\n    return\n  }\n  // Reset action loop\n  if (!sheetToReset.includes(sheet)) {\n    instance.sprite.onLoop = null\n    instance.sprite.onFrameChange = null\n  }\n  const goto = instance.currentSheet === sheet && instance.sprite.currentFrame\n  instance.currentSheet = sheet\n  const direction = degreeToDirection(instance.degree)\n  switch (direction) {\n    case 'southest':\n      instance.sprite.scale.x = -1\n      instance.sprite.textures = instance[sheet].animations['southwest']\n      break\n    case 'northest':\n      instance.sprite.scale.x = -1\n      instance.sprite.textures = instance[sheet].animations['northwest']\n      break\n    case 'est':\n      instance.sprite.scale.x = -1\n      instance.sprite.textures = instance[sheet].animations['west']\n      break\n    default:\n      instance.sprite.scale.x = 1\n      instance.sprite.textures = instance[sheet].animations[direction]\n  }\n  instance.sprite.animationSpeed = (instance[sheet].data.animationSpeed ?? animationSpeed[sheet] ?? 0.3) * ACCELERATOR\n  goto && goto < instance.sprite.textures.length ? instance.sprite.gotoAndPlay(goto) : instance.sprite.play()\n}\n\n/**\n * Filters an object by the specified keys.\n * @param {object} obj - The object to filter.\n * @param {Array<string>} keys - The keys to retain in the new object.\n * @returns {object} - The filtered object.\n */\nexport function filterObject(obj, keys) {\n  if (typeof obj !== 'object' || obj === null) {\n    throw new Error('Expected an object to filter.')\n  }\n  return keys.reduce((acc, key) => {\n    if (obj.hasOwnProperty(key)) {\n      acc[key] = obj[key]\n    }\n    return acc\n  }, {})\n}\n\n/**\n * Modal constructor for displaying content in a modal dialog.\n * @param {HTMLElement} content - The content to display inside the modal.\n */\nexport var Modal = function (content) {\n  if (!(content instanceof HTMLElement)) {\n    throw new Error('Content must be an HTML element.')\n  }\n\n  const id = uuidv4()\n\n  this.open = () => {\n    const modal = document.createElement('div')\n    modal.id = id\n    modal.className = 'modal'\n\n    const modalContent = document.createElement('div')\n    modalContent.className = 'modal-content'\n    modalContent.appendChild(content)\n\n    modal.appendChild(modalContent)\n    document.body.appendChild(modal)\n    return modal\n  }\n\n  this.close = () => {\n    const modal = document.getElementById(id)\n    if (modal) {\n      modal.remove()\n    }\n  }\n\n  this.open()\n}\n\n/**\n * Custom timeout implementation with pause and resume functionality.\n * @param {function} callback - The function to execute after the delay.\n * @param {number} delay - The delay in milliseconds.\n */\nexport var CustomTimeout = function (callback, delay) {\n  if (typeof callback !== 'function' || typeof delay !== 'number') {\n    throw new Error('Invalid arguments for CustomTimeout.')\n  }\n\n  let timerId,\n    start,\n    remaining = delay\n\n  this.pause = () => {\n    window.clearTimeout(timerId)\n    timerId = null\n    remaining -= Date.now() - start\n    return remaining\n  }\n\n  this.resume = () => {\n    if (timerId) {\n      return // Already running\n    }\n\n    start = Date.now()\n    timerId = window.setTimeout(callback, remaining)\n  }\n\n  this.reset = () => {\n    this.pause()\n    remaining = delay\n    this.resume()\n  }\n\n  this.resume() // Start the timer immediately\n}\n\n/**\n * Throttles a function to ensure it only executes once within a specified time frame.\n * @param {Function} callback - The function to throttle.\n * @param {number} wait - The time frame in milliseconds to throttle calls.\n * @param {boolean} [immediate=false] - If true, trigger the function on the leading edge instead of the trailing.\n * @returns {Function} - The throttled function.\n */\nexport function throttle(callback, wait, immediate = false) {\n  if (typeof callback !== 'function' || typeof wait !== 'number') {\n    throw new Error('Invalid arguments: callback must be a function and wait must be a number.')\n  }\n\n  let timeout = null\n  let initialCall = true\n\n  return function (...args) {\n    const callNow = immediate && initialCall\n\n    const next = () => {\n      callback.apply(this, args)\n      timeout = null\n    }\n\n    if (callNow) {\n      initialCall = false\n      next()\n    }\n\n    if (!timeout) {\n      timeout = setTimeout(next, wait)\n    }\n  }\n}\n\n/**\n * Debounces a function to ensure it only executes after a specified delay.\n * @param {Function} callback - The function to debounce.\n * @param {number} wait - The delay in milliseconds before the function can be called again.\n * @returns {Function} - The debounced function.\n */\nexport const debounce = (callback, wait) => {\n  if (typeof callback !== 'function' || typeof wait !== 'number') {\n    throw new Error('Invalid arguments: callback must be a function and wait must be a number.')\n  }\n\n  let timeoutId = null\n  return function (...args) {\n    window.clearTimeout(timeoutId)\n    timeoutId = window.setTimeout(() => {\n      callback.apply(this, args)\n    }, wait)\n  }\n}\n\n/**\n * Maps loading types to their corresponding work roles.\n * @param {string} loadingType - The type of resource being loaded.\n * @returns {string} - The corresponding work role for the loading type.\n */\nexport function getWorkWithLoadingType(loadingType) {\n  const workMapping = {\n    wheat: 'farmer',\n    wood: 'woodcutter',\n    berry: 'forager',\n    stone: 'stoneminer',\n    gold: 'goldminer',\n    meat: 'hunter',\n    fish: 'fisher',\n  }\n\n  return workMapping[loadingType] || 'default' // Fallback to 'default' if loadingType is not found\n}\n\n/**\n * Capitalizes the first letter of a string.\n * @param {string} string - The input string to capitalize.\n * @returns {string} - The string with the first letter capitalized.\n */\nexport function capitalizeFirstLetter(string) {\n  if (typeof string !== 'string') {\n    throw new TypeError('Expected a string')\n  }\n\n  return string.length > 0 ? string.charAt(0).toUpperCase() + string.slice(1) : ''\n}\n\n/**\n * Calculates the damage dealt by a source to a target.\n * @param {object} source - The attacking unit with attack attributes.\n * @param {object} target - The defending unit with armor attributes.\n * @returns {number} The calculated damage, at least 1.\n */\nexport function getDamage(source, target) {\n  const meleeAttack = source.meleeAttack || 0\n  const pierceAttack = source.pierceAttack || 0\n  const meleeArmor = target.meleeArmor || 0\n  const pierceArmor = target.pierceArmor || 0\n\n  // Calculate damage considering armor\n  return Math.max(1, Math.max(0, meleeAttack - meleeArmor) + Math.max(0, pierceAttack - pierceArmor))\n}\n\n/**\n * Calculates the remaining hit points of a target after taking damage.\n * @param {object} source - The attacking unit (for damage calculation).\n * @param {object} target - The defending unit with hit points.\n * @param {number} [defaultDamage] - An optional damage value.\n * @returns {number} The remaining hit points of the target, at least 0.\n */\nexport function getHitPointsWithDamage(source, target, defaultDamage) {\n  const damage = defaultDamage || getDamage(source, target)\n  return Math.max(0, target.hitPoints - damage)\n}\n\n/**\n * Updates a nested property in an object based on the specified operation.\n * @param {Object} target - The object to be updated.\n * @param {Object} operation - An object describing the update operation.\n * @param {string} operation.key - The key representing the path to the property.\n * @param {string} operation.op - The operation to perform ('*' or '+').\n * @param {number} operation.value - The value to use in the operation.\n */\nexport const updateObject = (target, operation) => {\n  if (typeof target !== 'object' || target === null) {\n    throw new Error('Target must be a non-null object.')\n  }\n\n  if (!operation || !operation.key || !operation.op || typeof operation.value !== 'number') {\n    throw new Error('Invalid operation: key, op, and value are required.')\n  }\n\n  function setToValue(obj, value, path) {\n    const keys = path.split('.')\n    for (let i = 0; i < keys.length - 1; i++) {\n      if (!obj[keys[i]]) {\n        throw new Error(`Path not found: ${keys.slice(0, i + 1).join('.')}`)\n      }\n      obj = obj[keys[i]]\n    }\n    obj[keys[keys.length - 1]] = value\n  }\n\n  const keys = operation.key.split('.')\n  let result = target\n\n  // Navigate to the specified path\n  for (const key of keys) {\n    if (result[key] === undefined) {\n      throw new Error(`Key not found: ${operation.key}`)\n    }\n    result = result[key]\n  }\n\n  switch (operation.op) {\n    case '*':\n      setToValue(target, result * Number(operation.value), operation.key)\n      break\n    case '+':\n      setToValue(target, result + Number(operation.value), operation.key)\n      break\n    default:\n      throw new Error(`Invalid operation: ${operation.op}`)\n  }\n}\n\nexport const canUpdateMinimap = (instance, player) => {\n  return instance.owner.isPlayed || (player.name !== instance.owner.name && instanceIsInPlayerSight(instance, player))\n}\n\n/**\n * Checks if a given condition is valid based on specified values.\n * @param {Object} condition - The condition object containing operation, key, and value.\n * @param {Object} values - The values to evaluate against.\n * @returns {boolean} - True if the condition is valid, false otherwise.\n */\nexport const isValidCondition = (condition, values) => {\n  if (!condition) {\n    return true // No condition means it's always valid\n  }\n\n  const { op, key, value } = condition\n  const expectedValue = values[key]\n\n  if (expectedValue === undefined) {\n    throw new Error(`Key not found in values: ${key}`)\n  }\n\n  switch (op) {\n    case '=':\n    case '!=': {\n      const result = Array.isArray(value) ? arraysEqual(value, expectedValue) : value === expectedValue\n\n      return op === '!=' ? !result : result\n    }\n    case '<':\n      return expectedValue < value\n    case '<=':\n      return expectedValue <= value\n    case '>=':\n      return expectedValue >= value\n    case '>':\n      return expectedValue > value\n    case 'includes':\n      return expectedValue.includes(value)\n    case 'notincludes':\n      return !expectedValue.includes(value)\n    default:\n      throw new Error(`Invalid condition operation provided: ${op}`)\n  }\n}\n\n/**\n * Compares two arrays for equality, disregarding order.\n * @param {Array} a - The first array.\n * @param {Array} b - The second array.\n * @returns {boolean} - True if arrays are equal, false otherwise.\n */\nconst arraysEqual = (a, b) => {\n  if (!Array.isArray(a) || !Array.isArray(b)) return false\n  if (a.length !== b.length) return false\n\n  const sortedA = a.slice().sort()\n  const sortedB = b.slice().sort()\n\n  return sortedA.every((val, index) => val === sortedB[index])\n}\n\nexport const getActionCondition = (source, target, action, props) => {\n  if (!action) {\n    return false\n  }\n  const conditions = {\n    delivery: props =>\n      source.loading > 0 &&\n      target.hitPoints > 0 &&\n      target.isBuilt &&\n      (!props || props.buildingTypes.includes(target.type)),\n    takemeat: () =>\n      source.type === 'Villager' &&\n      target.family === 'animal' &&\n      target.quantity > 0 &&\n      target.isDead &&\n      !target.isDestroyed,\n    fishing: () =>\n      target.category === 'Fish' &&\n      target.allowAction.includes(source.type) &&\n      target.quantity > 0 &&\n      !target.isDestroyed,\n    hunt: () =>\n      source.type === 'Villager' &&\n      target.family === 'animal' &&\n      target.quantity > 0 &&\n      target.hitPoints > 0 &&\n      !target.isDead,\n    chopwood: () => source.type === 'Villager' && target.type === 'Tree' && target.quantity > 0 && !target.isDead,\n    farm: () =>\n      source.type === 'Villager' &&\n      target.type === 'Farm' &&\n      target.hitPoints > 0 &&\n      target.owner?.name === source.owner.name &&\n      target.quantity > 0 &&\n      (!target.isUsedBy || target.isUsedBy === source) &&\n      !target.isDead,\n    forageberry: () =>\n      source.type === 'Villager' && target.type === 'Berrybush' && target.quantity > 0 && !target.isDead,\n    minestone: () => source.type === 'Villager' && target.type === 'Stone' && target.quantity > 0 && !target.isDead,\n    minegold: () => source.type === 'Villager' && target.type === 'Gold' && target.quantity > 0 && !target.isDead,\n    build: () =>\n      source.type === 'Villager' &&\n      target.owner?.name === source.owner.name &&\n      target.family === 'building' &&\n      target.hitPoints > 0 &&\n      (!target.isBuilt || target.hitPoints < target.totalHitPoints) &&\n      !target.isDead,\n    attack: () =>\n      target &&\n      target.owner?.name !== source.owner.name &&\n      ['building', 'unit', 'animal'].includes(target.family) &&\n      target.hitPoints > 0 &&\n      !target.isDead,\n    heal: () =>\n      target &&\n      target.owner?.name === source.owner.name &&\n      target.family === 'unit' &&\n      target.hitPoints > 0 &&\n      target.hitPoints < target.totalHitPoints &&\n      !target.isDead,\n  }\n  return target && target !== source && source.hitPoints > 0 && !source.isDead && conditions[action](props)\n}\n","import { sound } from '@pixi/sound'\nimport { Container, Graphics, Sprite, Assets, Polygon, AnimatedSprite } from 'pixi.js'\nimport {\n  getInstanceZIndex,\n  instanceIsInPlayerSight,\n  getIconPath,\n  randomItem,\n  drawInstanceBlinkingSelection,\n  getActionCondition,\n  uuidv4,\n} from '../lib'\nimport { TYPE_ACTION, CELL_WIDTH, CELL_HEIGHT, COLOR_WHITE } from '../constants'\n\nexport class Resource extends Container {\n  constructor(options, context) {\n    super()\n\n    this.context = context\n\n    const {\n      context: { map },\n    } = this\n\n    this.name = uuidv4()\n    this.family = 'resource'\n\n    this.selected = false\n    this.isDead = false\n    this.isDestroyed = false\n    this.size = 1\n\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n    const config = Assets.cache.get('config')\n    Object.keys(config.resources[this.type]).forEach(prop => {\n      this[prop] = config.resources[this.type][prop]\n    })\n\n    this.quantity = this.quantity ?? this.totalQuantity\n    this.hitPoints = this.hitPoints ?? this.totalHitPoints\n    this.x = map.grid[this.i][this.j].x\n    this.y = map.grid[this.i][this.j].y\n    this.z = map.grid[this.i][this.j].z\n    this.zIndex = getInstanceZIndex(this)\n    this.visible = false\n\n    // Set solid zone\n    const cell = map.grid[this.i][this.j]\n    cell.solid = true\n    cell.has = this\n\n    this.eventMode = 'auto'\n    this.allowClick = false\n    this.allowMove = false\n\n    this.interface = {\n      info: element => {\n        const data = config.resources[this.type]\n        this.setDefaultInterface(element, data)\n      },\n    }\n    if (this.isAnimated) {\n      const spritesheetJump = Assets.cache.get(this.assets)\n      this.sprite = new AnimatedSprite(spritesheetJump.animations.jump)\n      this.sprite.play()\n      this.sprite.animationSpeed = 0.2\n    } else {\n      this.textureName =\n        this.textureName || randomItem(Array.isArray(this.assets) ? this.assets : this.assets[cell.type])\n      const resourceName = this.textureName.split('_')[1]\n      const textureFile = this.textureName + '.png'\n      const spritesheet = Assets.cache.get(resourceName)\n      const texture = spritesheet.textures[textureFile]\n      this.sprite = Sprite.from(texture)\n      this.sprite.hitArea =\n        spritesheet.data.frames[textureFile].hitArea && new Polygon(spritesheet.data.frames[textureFile].hitArea)\n    }\n\n    this.sprite.updateAnchor = true\n    this.sprite.name = 'sprite'\n    if (this.sprite) {\n      this.sprite.allowMove = false\n      this.sprite.eventMode = 'static'\n      this.sprite.roundPixels = true\n\n      this.sprite.on('pointertap', () => {\n        const {\n          context: { player, menu },\n        } = this\n        if (!player.selectedUnits.length && (instanceIsInPlayerSight(this, player) || map.revealEverything)) {\n          player.unselectAll()\n          this.select()\n          menu.setBottombar(this)\n          player.selectedOther = this\n        }\n      })\n      this.sprite.on('pointerup', evt => {\n        const {\n          context: { player, controls },\n        } = this\n        const action = TYPE_ACTION[this.category || this.type]\n        if (controls.mouseBuilding || controls.mouseRectangle || !controls.isMouseInApp(evt)) {\n          return\n        }\n        controls.mouse.prevent = true\n        // Send Villager to forage the berry\n        let hasVillager = false\n        let hasOther = false\n        for (let i = 0; i < player.selectedUnits.length; i++) {\n          const unit = player.selectedUnits[i]\n          if (getActionCondition(unit, this, action)) {\n            hasVillager = true\n            const sendToFunc = `sendTo${this.category || this.type}`\n            typeof unit[sendToFunc] === 'function' ? unit[sendToFunc](this) : unit.sendTo(this)\n          } else {\n            hasOther = true\n            unit.sendTo(this)\n          }\n        }\n        if (hasVillager) {\n          drawInstanceBlinkingSelection(this)\n        }\n        if (hasOther) {\n          const voice = randomItem(['5075', '5076', '5128', '5164'])\n          voice && sound.play(voice)\n        } else if (hasVillager) {\n          const voice = Assets.cache.get('config').units.Villager.sounds[action]\n          voice && sound.play(voice)\n        }\n      })\n\n      this.addChild(this.sprite)\n    }\n  }\n\n  select() {\n    if (this.selected) {\n      return\n    }\n    this.selected = true\n    const selection = new Graphics()\n    selection.name = 'selection'\n    selection.zIndex = 3\n    const path = [-32 * this.size, 0, 0, -16 * this.size, 32 * this.size, 0, 0, 16 * this.size]\n    selection.poly(path)\n    selection.stroke(COLOR_WHITE)\n    this.addChildAt(selection, 0)\n  }\n\n  unselect() {\n    if (!this.selected) {\n      return\n    }\n    this.selected = false\n    const selection = this.getChildByName('selection')\n    if (selection) {\n      this.removeChild(selection)\n    }\n  }\n\n  die(immediate) {\n    if (this.isDead) {\n      return\n    }\n    const {\n      context: { player, players, map, menu },\n    } = this\n    if (this.selected && player.selectedOther === this) {\n      player.unselectAll()\n    }\n    const listName = 'founded' + this.type + 's'\n    for (let i = 0; i < players.length; i++) {\n      if (players[i].type === 'AI') {\n        const list = players[i][listName]\n        if (list) {\n          const index = list.indexOf(this)\n          list.splice(index, 1)\n        }\n      }\n    }\n    // Remove from map resources\n    let index = map.resources.indexOf(this)\n    if (index >= 0) {\n      map.resources.splice(index, 1)\n    }\n    menu.updateResourcesMiniMap()\n    this.isDead = true\n    if (this.type === 'Tree' && !immediate) {\n      this.onTreeDie()\n    } else {\n      this.clear()\n    }\n  }\n\n  setCuttedTreeTexture() {\n    const { sprite } = this\n    const spritesheet = Assets.cache.get('636')\n    this.textureName = `00${randomRange(0, 3)}_636.png`\n    const texture = spritesheet.textures[this.textureName]\n    sprite.texture = texture\n    const points = [-CELL_WIDTH / 2, 0, 0, -CELL_HEIGHT / 2, CELL_WIDTH / 2, 0, 0, CELL_HEIGHT / 2]\n    sprite.hitArea = new Polygon(points)\n    sprite.anchor.set(texture.defaultAnchor.x, texture.defaultAnchor.y)\n  }\n\n  onTreeDie() {\n    const {\n      context: { map },\n    } = this\n    const spritesheet = Assets.cache.get('623')\n    this.textureName = `00${randomRange(0, 3)}_623.png`\n    const texture = spritesheet.textures[this.textureName]\n    const { sprite } = this\n    sprite.texture = texture\n    sprite.eventMode = 'none'\n    this.zIndex--\n    if (map.grid[this.i][this.j].has === this) {\n      map.grid[this.i][this.j].has = null\n      map.grid[this.i][this.j].corpses.push(this)\n      map.grid[this.i][this.j].solid = false\n    }\n  }\n\n  clear() {\n    if (this.isDestroyed) {\n      return\n    }\n    const {\n      context: { map },\n    } = this\n    this.isDestroyed = true\n    if (map.grid[this.i][this.j].has === this) {\n      map.grid[this.i][this.j].has = null\n      map.grid[this.i][this.j].solid = false\n    }\n    const corpseIndex = map.grid[this.i][this.j].corpses.indexOf(this)\n    corpseIndex >= 0 && map.grid[this.i][this.j].corpses.splice(corpseIndex, 1)\n    map.removeChild(this)\n    this.destroy({ child: true, texture: true })\n  }\n\n  setDefaultInterface(element, data) {\n    const {\n      context: { menu },\n    } = this\n    const typeDiv = document.createElement('div')\n    typeDiv.id = 'type'\n    typeDiv.textContent = this.type\n    element.appendChild(typeDiv)\n\n    const iconImg = document.createElement('img')\n    iconImg.id = 'icon'\n    iconImg.src = getIconPath(data.icon)\n    element.appendChild(iconImg)\n\n    if (this.hitPoints) {\n      const hitPointsDiv = document.createElement('div')\n      hitPointsDiv.id = 'hitPoints'\n      hitPointsDiv.textContent = this.hitPoints + '/' + this.totalHitPoints\n      element.appendChild(hitPointsDiv)\n    }\n    if (this.quantity) {\n      const quantityDiv = document.createElement('div')\n\n      quantityDiv.id = 'quantity'\n      quantityDiv.className = 'resource-quantity'\n\n      let iconToUse\n      switch (this.type) {\n        case 'Tree':\n          iconToUse = menu.infoIcons['wood']\n          break\n        case 'Salmon':\n        case 'Berrybush':\n          iconToUse = menu.infoIcons['food']\n          break\n        case 'Stone':\n          iconToUse = menu.infoIcons['stone']\n          break\n        case 'Gold':\n          iconToUse = menu.infoIcons['gold']\n          break\n      }\n      const smallIconImg = document.createElement('img')\n      smallIconImg.src = iconToUse\n      smallIconImg.className = 'resource-quantity-icon'\n      const textDiv = document.createElement('div')\n      textDiv.id = 'quantity-text'\n      textDiv.textContent = this.quantity\n      quantityDiv.appendChild(smallIconImg)\n      quantityDiv.appendChild(textDiv)\n      element.appendChild(quantityDiv)\n    }\n  }\n}\n","import { Container, Graphics } from 'pixi.js'\nimport {\n  degreesToRadians,\n  getHitPointsWithDamage,\n  moveTowardPoint,\n  pointsDistance,\n  instancesDistance,\n  average,\n  randomItem,\n  uuidv4,\n} from '../lib'\nimport { COLOR_ARROW, STEP_TIME } from '../constants'\nimport { sound } from '@pixi/sound'\n\nexport class Projectile extends Container {\n  constructor(options, context) {\n    super()\n\n    this.context = context\n\n    const {\n      context: { map },\n    } = this\n    this.name = uuidv4()\n    this.family = 'projectile'\n\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n    Object.keys(this.owner.owner.config.projectiles[this.type]).forEach(prop => {\n      this[prop] = this.owner.owner.config.projectiles[this.type][prop]\n    })\n\n    this.x = this.owner.x\n    this.y = this.owner.y - this.owner.sprite.height / 2\n    const { x: targetX, y: targetY } = this.destination || this.target\n\n    this.owner.visible &&\n      this.sounds.start &&\n      sound.play(Array.isArray(this.sounds.start) ? randomItem(this.sounds.start) : this.sounds.start)\n\n    this.distance = instancesDistance(this, this.target, false)\n    const degree = this.degree || getPointsDegree(this.x, this.y, targetX, targetY)\n    const sprite = new Graphics()\n    sprite.rect(1, 1, this.size, 1)\n    sprite.fill(COLOR_ARROW)\n    sprite.rotation = degreesToRadians(degree)\n    sprite.name = 'sprite'\n    sprite.allowMove = false\n    sprite.eventMode = 'none'\n    sprite.allowClick = false\n    sprite.roundPixels = true\n    this.addChild(sprite)\n\n    const interval = setInterval(() => {\n      if (pointsDistance(this.x, this.y, targetX, targetY) <= Math.max(this.speed, this.size)) {\n        if (\n          pointsDistance(targetX, targetY, this.target.x, this.target.y) <=\n          average(this.target.width, this.target.height)\n        ) {\n          this.onHit(this.target)\n        }\n        clearInterval(interval)\n        this.die()\n        return\n      }\n      moveTowardPoint(this, targetX, targetY, this.speed)\n    }, STEP_TIME)\n  }\n\n  onHit(instance) {\n    const {\n      context: { menu, player },\n    } = this\n    instance.hitPoints = getHitPointsWithDamage(this.owner, instance, this.damage)\n    if (instance.selected && player.selectedOther === instance) {\n      menu.updateInfo('hitPoints', instance.hitPoints + '/' + instance.totalHitPoints)\n    }\n    if (instance.hitPoints <= 0) {\n      instance.die()\n    } else {\n      typeof instance.isAttacked === 'function' && instance.isAttacked(this.owner)\n    }\n  }\n\n  die() {\n    this.isDead = true\n    this.destroy({ child: true, texture: true })\n  }\n}\n","import { sound } from '@pixi/sound'\nimport { Container, Assets, Sprite, AnimatedSprite, Graphics } from 'pixi.js'\nimport { ACCELERATOR, COLOR_WHITE, POPULATION_MAX, RUBBLE_TIME } from '../constants'\nimport {\n  getTexture,\n  getInstanceZIndex,\n  getPlainCellsAroundPoint,\n  getPercentage,\n  renderCellOnInstanceSight,\n  getFreeCellAroundPoint,\n  getIconPath,\n  canAfford,\n  drawInstanceBlinkingSelection,\n  payCost,\n  instanceIsInPlayerSight,\n  clearCellOnInstanceSight,\n  getActionCondition,\n  capitalizeFirstLetter,\n  refundCost,\n  getBuildingAsset,\n  getBuildingRubbleTextureNameWithSize,\n  instancesDistance,\n  getBuildingTextureNameWithSize,\n  uuidv4,\n  canUpdateMinimap,\n  CustomTimeout,\n  changeSpriteColorDirectly,\n} from '../lib'\nimport { Projectile } from './projectile'\nimport { Polygon } from 'pixi.js'\n\nexport class Building extends Container {\n  constructor(options, context) {\n    super()\n\n    this.context = context\n\n    const { map, controls } = context\n\n    this.name = uuidv4()\n    this.family = 'building'\n    this.selected = false\n    this.queue = []\n    this.technology = null\n    this.loading = null\n    this.isDead = false\n    this.isDestroyed = false\n    this.timeout\n    this.isUsedBy = null\n\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n    Object.keys(this.owner.config.buildings[this.type]).forEach(prop => {\n      this[prop] = this.owner.config.buildings[this.type][prop]\n    })\n\n    this.interval\n    this.attackInterval\n\n    if (this.queue.length) {\n      this.buyUnit(this.queue[0], true, true)\n    } else if (this.technology) {\n      this.buyTechnology(this.technology.type, true, true)\n    }\n\n    this.quantity = this.quantity ?? this.totalQuantity\n    this.hitPoints = this.hitPoints ?? (this.isBuilt ? this.totalHitPoints : 1)\n\n    this.x = map.grid[this.i][this.j].x\n    this.y = map.grid[this.i][this.j].y\n    this.z = map.grid[this.i][this.j].z\n    this.zIndex = getInstanceZIndex(this)\n    this.visible = map.revealEverything && controls.instanceInCamera(this) ? true : false\n    let spriteSheet = getBuildingTextureNameWithSize(this.size)\n    if (this.type === 'House' && this.owner.age === 0) {\n      spriteSheet = '000_489'\n    } else if (this.type === 'Dock') {\n      spriteSheet = '000_356'\n    }\n    const texture = getTexture(spriteSheet, Assets)\n    this.sprite = Sprite.from(texture)\n    this.sprite.updateAnchor = true\n    this.sprite.name = 'sprite'\n    this.sprite.hitArea = texture.hitArea\n      ? new Polygon(texture.hitArea)\n      : new Polygon([-32 * this.size, 0, 0, -16 * this.size, 32 * this.size, 0, 0, 16 * this.size])\n    const units = (this.units || []).map(key => context.menu.getUnitButton(key))\n    const technologies = (this.technologies || []).map(key => context.menu.getTechnologyButton(key))\n    this.interface = {\n      info: element => {\n        const assets = getBuildingAsset(this.type, this.owner, Assets)\n        this.setDefaultInterface(element, assets)\n        if (this.displayPopulation && this.owner.isPlayed && this.isBuilt) {\n          const populationDiv = document.createElement('div')\n          populationDiv.id = 'population'\n\n          const populationIcon = document.createElement('img')\n          const populationSpan = document.createElement('span')\n          populationSpan.id = 'population-text'\n          populationSpan.textContent = this.owner.population + '/' + Math.min(POPULATION_MAX, this.owner.POPULATION_MAX)\n\n          populationIcon.src = getIconPath('004_50731')\n          populationDiv.appendChild(populationIcon)\n          populationDiv.appendChild(populationSpan)\n          element.appendChild(populationDiv)\n        }\n        element.appendChild(this.getLoadingElement())\n      },\n      menu: this.owner.isPlayed || map.devMode ? [...units, ...technologies] : [],\n    }\n\n    // Set solid zone\n    const dist = this.size === 3 ? 1 : 0\n    getPlainCellsAroundPoint(this.i, this.j, map.grid, dist, cell => {\n      const set = cell.getChildByName('set')\n      if (set) {\n        cell.removeChild(set)\n      }\n      for (let i = 0; i < cell.corpses.length; i++) {\n        typeof cell.corpses[i].clear === 'function' && cell.corpses[i].clear()\n      }\n      cell.has = this\n      cell.solid = true\n      this.owner.views[cell.i][cell.j].viewBy.push(this)\n      if (this.owner.isPlayed && !map.revealEverything) {\n        cell.removeFog()\n      }\n    })\n\n    this.allowMove = false\n    if (this.sprite) {\n      this.sprite.allowMove = false\n      this.sprite.eventMode = 'static'\n      this.sprite.roundPixels = true\n\n      this.sprite.on('pointertap', evt => {\n        const {\n          context: { controls, player, menu },\n        } = this\n        if (controls.mouseBuilding || controls.mouseRectangle || !controls.isMouseInApp(evt)) {\n          return\n        }\n        let hasSentVillager = false\n        let hasSentOther = false\n        controls.mouse.prevent = true\n        if (this.owner.isPlayed) {\n          // Send Villager to build the building\n          if (!this.isBuilt) {\n            for (let i = 0; i < player.selectedUnits.length; i++) {\n              const unit = player.selectedUnits[i]\n              if (unit.type === 'Villager') {\n                if (getActionCondition(unit, this, 'build')) {\n                  hasSentVillager = true\n                  unit.sendToBuilding(this)\n                }\n              } else {\n                unit.sendTo(this)\n                hasSentOther = true\n              }\n            }\n            if (hasSentVillager) {\n              drawInstanceBlinkingSelection(this)\n            }\n            if (hasSentOther) {\n              const voice = randomItem(['5075', '5076', '5128', '5164'])\n              sound.play(voice)\n              return\n            } else if (hasSentVillager) {\n              const voice = Assets.cache.get('config').units.Villager.sounds.build\n              sound.play(voice)\n              return\n            }\n          } else if (player.selectedUnits) {\n            // Send Villager to give loading of resources\n            for (let i = 0; i < player.selectedUnits.length; i++) {\n              const unit = player.selectedUnits[i]\n              const accept =\n                unit.category === 'Boat'\n                  ? this.type === 'Dock'\n                  : this.type === 'TownCenter' || (this.accept && this.accept.includes(unit.loadingType))\n              if (unit.type === 'Villager' && getActionCondition(unit, this, 'build')) {\n                hasSentVillager = true\n                unit.previousDest = null\n                unit.sendToBuilding(this)\n              } else if (unit.type === 'Villager' && getActionCondition(unit, this, 'farm')) {\n                hasSentVillager = true\n                unit.sendToFarm(this)\n              } else if (accept && getActionCondition(unit, this, 'delivery', { buildingTypes: [this.type] })) {\n                hasSentVillager = true\n                unit.previousDest = null\n                unit.sendTo(this, 'delivery')\n              }\n            }\n            if (hasSentVillager) {\n              drawInstanceBlinkingSelection(this)\n            }\n            if (hasSentVillager) {\n              const voice = Assets.cache.get('config').units.Villager.sounds.build\n              sound.play(voice)\n              return\n            }\n          }\n          if (this.owner.selectedBuilding !== this) {\n            this.owner.unselectAll()\n            this.select()\n            menu.setBottombar(this)\n            this.owner.selectedBuilding = this\n          }\n        } else if (player.selectedUnits.length) {\n          drawInstanceBlinkingSelection(this)\n          for (let i = 0; i < player.selectedUnits.length; i++) {\n            const playerUnit = player.selectedUnits[i]\n            if (playerUnit.type === 'Villager') {\n              playerUnit.sendToAttack(this)\n            } else {\n              playerUnit.sendTo(this, 'attack')\n            }\n          }\n        } else if (instanceIsInPlayerSight(this, player) || map.revealEverything) {\n          player.unselectAll()\n          this.select()\n          menu.setBottombar(this)\n          player.selectedOther = this\n        }\n      })\n\n      this.addChild(this.sprite)\n    }\n\n    if (this.isBuilt) {\n      renderCellOnInstanceSight(this)\n      this.finalTexture()\n      this.onBuilt()\n    }\n  }\n\n  attackAction(target) {\n    const {\n      context: { map },\n    } = this\n\n    this.startAttackInterval(() => {\n      if (getActionCondition(this, target, 'attack') && instancesDistance(this, target) <= this.range) {\n        if (target.hitPoints <= 0) {\n          target.die()\n        } else {\n          const projectile = new Projectile(\n            {\n              owner: this,\n              type: this.projectile,\n              target,\n            },\n            this.context\n          )\n          map.addChild(projectile)\n        }\n      } else {\n        this.stopAttackInterval()\n      }\n    }, this.rateOfFire)\n  }\n\n  startInterval(callback, time) {\n    const finalCb = () => {\n      const { paused } = this.context\n      if (paused) {\n        return\n      }\n      callback()\n    }\n    this.stopInterval()\n    this.interval = setInterval(finalCb, (time * 1000) / 100 / ACCELERATOR)\n  }\n\n  stopInterval() {\n    if (this.interval) {\n      clearInterval(this.interval)\n      this.interval = null\n    }\n  }\n\n  startAttackInterval(callback, time) {\n    const finalCb = () => {\n      const { paused } = this.context\n      if (paused) {\n        return\n      }\n      callback()\n    }\n    this.stopAttackInterval()\n    finalCb()\n    this.attackInterval = setInterval(finalCb, time * 1000)\n  }\n\n  stopAttackInterval() {\n    if (this.attackInterval) {\n      clearInterval(this.attackInterval)\n      this.attackInterval = null\n    }\n  }\n\n  pause() {\n    this.timeout?.pause()\n  }\n\n  resume() {\n    this.timeout?.resume()\n  }\n\n  startTimeout(cb, time) {\n    this.stopTimeout()\n    this.timeout = new CustomTimeout(() => cb(), (time * 1000) / ACCELERATOR)\n  }\n\n  stopTimeout() {\n    if (this.timeout) {\n      clearInterval(this.timeout)\n      this.timeout = null\n    }\n  }\n\n  isAttacked(instance) {\n    if (this.isDead) {\n      return\n    }\n    if (this.range && getActionCondition(this, instance, 'attack') && instancesDistance(this, instance) <= this.range) {\n      this.attackAction(instance)\n    }\n    this.updateHitPoints('attack')\n  }\n\n  updateTexture() {\n    const {\n      context: { menu },\n    } = this\n    const percentage = getPercentage(this.hitPoints, this.totalHitPoints)\n    const buildSpritesheetId = this.sprite.texture.label.split('_')[1].split('.')[0]\n    const buildSpritesheet = Assets.cache.get(buildSpritesheetId)\n\n    if (percentage >= 25 && percentage < 50) {\n      const textureName = `001_${buildSpritesheetId}.png`\n      this.sprite.texture = buildSpritesheet.textures[textureName]\n    } else if (percentage >= 50 && percentage < 75) {\n      const textureName = `002_${buildSpritesheetId}.png`\n      this.sprite.texture = buildSpritesheet.textures[textureName]\n    } else if (percentage >= 75 && percentage < 99) {\n      const textureName = `003_${buildSpritesheetId}.png`\n      this.sprite.texture = buildSpritesheet.textures[textureName]\n    } else if (percentage >= 100) {\n      this.finalTexture()\n      if (!this.isBuilt) {\n        if (this.owner.isPlayed && this.sounds && this.sounds.create) {\n          sound.play(this.sounds.create)\n        }\n        this.onBuilt()\n      }\n      this.isBuilt = true\n      if (!this.owner.hasBuilt.includes(this.type)) {\n        this.owner.hasBuilt.push(this.type)\n      }\n      if (this.owner.isPlayed && this.selected) {\n        menu.setBottombar(this)\n      }\n      renderCellOnInstanceSight(this)\n    }\n  }\n\n  onBuilt() {\n    const {\n      context: { menu },\n    } = this\n    if (this.increasePopulation) {\n      // Increase player population and continue all unit creation that was paused\n      this.owner.POPULATION_MAX += this.increasePopulation\n      // Update bottombar with POPULATION_MAX if house selected\n      if (this.owner.isPlayed && this.owner.selectedBuilding && this.owner.selectedBuilding.displayPopulation) {\n        menu.updateInfo(\n          'population-text',\n          this.owner.population + '/' + Math.min(POPULATION_MAX, this.owner.POPULATION_MAX)\n        )\n      }\n    }\n    if (this.owner.isPlayed && this.selected) {\n      menu.setBottombar(this)\n    }\n  }\n\n  finalTexture() {\n    const assets = getBuildingAsset(this.type, this.owner, Assets)\n\n    const texture = getTexture(assets.images.final, Assets)\n    this.sprite.texture = texture\n    this.sprite.hitArea = texture.hitArea\n      ? new Polygon(texture.hitArea)\n      : new Polygon([-32 * this.size, 0, 0, -16 * this.size, 32 * this.size, 0, 0, 16 * this.size])\n    this.sprite.anchor.set(texture.defaultAnchor.x, texture.defaultAnchor.y)\n\n    const color = this.getChildByName('color')\n    if (color) {\n      color.destroy()\n    }\n\n    if (assets.images.color) {\n      const spriteColor = Sprite.from(getTexture(assets.images.color, Assets))\n      spriteColor.name = 'color'\n      changeSpriteColorDirectly(spriteColor, this.owner.color)\n      this.addChild(spriteColor)\n    } else {\n      changeSpriteColorDirectly(this.sprite, this.owner.color)\n    }\n\n    if (this.type === 'House') {\n      if (this.owner.age === 0) {\n        const spritesheetFire = Assets.cache.get('347')\n        const spriteFire = new AnimatedSprite(spritesheetFire.animations['fire'])\n        spriteFire.name = 'deco'\n        spriteFire.allowMove = false\n        spriteFire.allowClick = false\n        spriteFire.eventMode = 'none'\n        spriteFire.roundPixels = true\n        spriteFire.x = 10\n        spriteFire.y = 5\n        spriteFire.play()\n        spriteFire.animationSpeed = 0.2 * ACCELERATOR\n        this.addChild(spriteFire)\n      } else {\n        const fire = this.getChildByName('deco')\n        if (fire) {\n          fire.destroy()\n        }\n      }\n    }\n  }\n\n  detect(instance) {\n    if (\n      this.range &&\n      instance.name !== 'animal' &&\n      !this.attackInterval &&\n      getActionCondition(this, instance, 'attack') &&\n      instancesDistance(this, instance) <= this.range\n    ) {\n      this.attackAction(instance)\n    }\n  }\n\n  updateHitPoints(action) {\n    if (this.hitPoints > this.totalHitPoints) {\n      this.hitPoints = this.totalHitPoints\n    }\n    const percentage = getPercentage(this.hitPoints, this.totalHitPoints)\n\n    if (this.hitPoints <= 0) {\n      this.die()\n    }\n    if (action === 'build' && !this.isBuilt) {\n      this.updateTexture()\n    } else if ((action === 'attack' && this.isBuilt) || (action === 'build' && this.isBuilt)) {\n      if (percentage > 0 && percentage < 25) {\n        generateFire(this, '450')\n      }\n      if (percentage >= 25 && percentage < 50) {\n        generateFire(this, '452')\n      }\n      if (percentage >= 50 && percentage < 75) {\n        generateFire(this, '347')\n      }\n      if (percentage >= 75) {\n        const fire = this.getChildByName('fire')\n        if (fire) {\n          this.removeChild(fire)\n        }\n      }\n    }\n    function generateFire(building, spriteId) {\n      const fire = building.getChildByName('fire')\n      const spritesheetFire = Assets.cache.get(spriteId)\n      if (fire) {\n        for (let i = 0; i < fire.children.length; i++) {\n          fire.children[i].textures = spritesheetFire.animations['fire']\n          fire.children[i].play()\n        }\n      } else {\n        const newFire = new Container()\n        newFire.name = 'fire'\n        newFire.allowMove = false\n        newFire.allowClick = false\n        newFire.eventMode = 'none'\n        let poses = [[0, 0]]\n        if (building.size === 3) {\n          poses = [\n            [0, -32],\n            [-64, 0],\n            [0, 32],\n            [64, 0],\n          ]\n        }\n        for (let i = 0; i < poses.length; i++) {\n          const spriteFire = new AnimatedSprite(spritesheetFire.animations['fire'])\n          spriteFire.allowMove = false\n          spriteFire.allowClick = false\n          spriteFire.eventMode = 'none'\n          spriteFire.roundPixels = true\n          spriteFire.x = poses[i][0]\n          spriteFire.y = poses[i][1]\n          spriteFire.play()\n          spriteFire.animationSpeed = 0.2 * ACCELERATOR\n          newFire.addChild(spriteFire)\n        }\n        building.addChild(newFire)\n      }\n    }\n  }\n\n  die() {\n    if (this.isDead) {\n      return\n    }\n    const {\n      context: { map, player, players, menu },\n    } = this\n    this.stopInterval()\n    this.isDead = true\n    if (this.selected && player) {\n      player.unselectAll()\n    }\n\n    // Remove from player buildings\n    const index = this.owner.buildings.indexOf(this)\n    if (index >= 0) {\n      this.owner.buildings.splice(index, 1)\n    }\n    // Remove from view of others players\n    for (let i = 0; i < players.length; i++) {\n      if (players[i].type === 'AI') {\n        const list = players[i].foundedEnemyBuildings\n        list.splice(list.indexOf(this), 1)\n      }\n    }\n    const color = this.getChildByName('color')\n    color && color.destroy()\n    const deco = this.getChildByName('deco')\n    deco && deco.destroy()\n    const fire = this.getChildByName('fire')\n    fire && fire.destroy()\n\n    let rubbleSheet = getBuildingRubbleTextureNameWithSize(this.size, Assets)\n    if (this.type === 'Farm') {\n      rubbleSheet = '000_239'\n    }\n    this.sprite.texture = getTexture(rubbleSheet, Assets)\n    this.sprite.allowMove = false\n    this.sprite.eventMode = 'none'\n    this.sprite.allowClick = false\n    this.zIndex--\n    if (this.type === 'Farm') {\n      changeSpriteColorDirectly(this.sprite, this.owner.color)\n    }\n    // Remove solid zone\n    clearCellOnInstanceSight(this)\n    const dist = this.size === 3 ? 1 : 0\n    getPlainCellsAroundPoint(this.i, this.j, map.grid, dist, cell => {\n      if (cell.has === this) {\n        cell.has = null\n        cell.solid = false\n        cell.corpses.push(this)\n      }\n    })\n    this.startTimeout(() => this.clear(), RUBBLE_TIME)\n    canUpdateMinimap(this, player) && menu.updatePlayerMiniMapEvt(this.owner)\n  }\n\n  clear() {\n    if (this.isDestroyed) {\n      return\n    }\n    const {\n      context: { map },\n    } = this\n    const dist = this.size === 3 ? 1 : 0\n    getPlainCellsAroundPoint(this.i, this.j, map.grid, dist, cell => {\n      const index = cell.corpses.indexOf(this)\n      if (index >= 0) {\n        cell.corpses.splice(index, 1)\n      }\n    })\n    this.isDestroyed = true\n    this.destroy({ child: true, texture: true })\n  }\n\n  select() {\n    if (this.selected) {\n      return\n    }\n    const {\n      context: { menu, player },\n    } = this\n\n    if (this.owner.isPlayed && this.sounds && this.sounds.create) {\n      sound.play(this.sounds.create)\n    }\n\n    this.selected = true\n    const selection = new Graphics()\n    selection.name = 'selection'\n    selection.zIndex = 3\n    const path = [-32 * this.size, 0, 0, -16 * this.size, 32 * this.size, 0, 0, 16 * this.size]\n    selection.poly(path)\n    selection.stroke(COLOR_WHITE)\n    if (this.loading && this.owner.isPlayed) {\n      this.updateInterfaceLoading()\n    }\n    this.addChildAt(selection, 0)\n    canUpdateMinimap(this, player) && menu.updatePlayerMiniMapEvt(this.owner)\n  }\n\n  unselect() {\n    if (!this.selected) {\n      return\n    }\n    const {\n      context: { menu, player },\n    } = this\n\n    this.selected = false\n    const selection = this.getChildByName('selection')\n    if (selection) {\n      this.removeChild(selection)\n    }\n    canUpdateMinimap(this, player) && menu.updatePlayerMiniMapEvt(this.owner)\n  }\n\n  placeUnit(type) {\n    const {\n      context: { map, menu },\n    } = this\n    let spawnCell\n    const config = this.owner.config.units[type]\n    if (config.category === 'Boat') {\n      spawnCell = getFreeCellAroundPoint(\n        this.i,\n        this.j,\n        this.size,\n        map.grid,\n        cell => cell.category === 'Water' && !cell.solid\n      )\n    } else {\n      spawnCell = getFreeCellAroundPoint(\n        this.i,\n        this.j,\n        this.size,\n        map.grid,\n        cell => cell.category !== 'Water' && !cell.solid\n      )\n    }\n    if (!spawnCell) {\n      return\n    }\n    this.owner.population++\n\n    const extra = (this.owner.getUnitExtraOptions && this.owner.getUnitExtraOptions(type)) || {}\n    this.owner.createUnit({ i: spawnCell.i, j: spawnCell.j, type, ...extra })\n\n    if (this.owner.isPlayed && this.owner.selectedBuilding && this.owner.selectedBuilding.displayPopulation) {\n      menu.updateInfo(\n        'population-text',\n        this.owner.population + '/' + Math.min(POPULATION_MAX, this.owner.POPULATION_MAX)\n      )\n    }\n  }\n\n  buyUnit(type, alreadyPaid = false, force = false, extra) {\n    const {\n      context: { menu, map },\n    } = this\n    let success = false\n    const unit = this.owner.config.units[type]\n    if (this.isBuilt && !this.isDead && (canAfford(this.owner, unit.cost) || alreadyPaid)) {\n      if (!alreadyPaid) {\n        if (this.owner.type === 'AI') {\n          if (!this.queue.length && this.loading === null) {\n            payCost(this.owner, unit.cost)\n            this.queue.push(type)\n            success = true\n          }\n        } else {\n          payCost(this.owner, unit.cost)\n          this.queue.push(type)\n          if (this.selected && this.owner.isPlayed) {\n            menu.updateButtonContent(type, this.queue.filter(q => q === type).length)\n          }\n          this.owner.isPlayed && menu.updateTopbar()\n          success = true\n        }\n      }\n      if ((this.loading === null && this.queue[0]) || force) {\n        let hasShowedMessage = false\n        this.loading = force ? this.loading : 0\n        if (this.selected && this.owner.isPlayed) {\n          this.updateInterfaceLoading()\n        }\n        this.startInterval(() => {\n          if (this.queue[0] !== type) {\n            this.stopInterval()\n            this.loading = null\n            if (this.queue.length) {\n              this.buyUnit(this.queue[0], true)\n            }\n            hasShowedMessage = false\n            if (this.selected && this.owner.isPlayed) {\n              const still = this.queue.filter(q => q === type).length\n              menu.updateButtonContent(type, still || '')\n              if (still === 0) {\n                menu.toggleButtonCancel(type, false)\n              }\n              this.updateInterfaceLoading()\n            }\n          } else if (this.loading >= 100 || map.devMode) {\n            this.stopInterval()\n            this.placeUnit(type, extra)\n            this.loading = null\n            this.queue.shift()\n            if (this.queue.length) {\n              this.buyUnit(this.queue[0], true)\n            }\n            hasShowedMessage = false\n            if (this.selected && this.owner.isPlayed) {\n              const still = this.queue.filter(q => q === type).length\n              menu.updateButtonContent(type, still || '')\n              if (still === 0) {\n                menu.toggleButtonCancel(type, false)\n              }\n              this.updateInterfaceLoading()\n            }\n          } else if (this.loading < 100) {\n            if (this.owner.population < Math.min(POPULATION_MAX, this.owner.POPULATION_MAX)) {\n              this.loading += 1\n            } else if (this.owner.isPlayed && !hasShowedMessage) {\n              menu.showMessage('You need to build more houses')\n              hasShowedMessage = true\n            }\n            if (this.selected && this.owner.isPlayed) {\n              this.updateInterfaceLoading()\n            }\n          }\n        }, unit.trainingTime)\n      }\n      return success\n    }\n  }\n\n  updateInterfaceLoading() {\n    const {\n      context: { menu },\n    } = this\n    if (this.owner.isPlayed && this.owner.selectedBuilding === this) {\n      if (this.loading === 1) {\n        menu.updateInfo('loading', element => (element.innerHTML = this.getLoadingElement().innerHTML))\n      } else if (this.loading > 1) {\n        menu.updateInfo('loading-text', this.loading + '%')\n      } else {\n        menu.updateInfo('loading', element => (element.innerHTML = ''))\n      }\n    }\n  }\n\n  getLoadingElement() {\n    const loadingDiv = document.createElement('div')\n    loadingDiv.className = 'building-loading'\n    loadingDiv.id = 'loading'\n\n    if (this.loading && this.owner.isPlayed) {\n      const iconImg = document.createElement('img')\n      iconImg.className = 'building-loading-icon'\n      iconImg.src = getIconPath('009_50731')\n      const textDiv = document.createElement('div')\n      textDiv.id = 'loading-text'\n      textDiv.textContent = this.loading + '%'\n      loadingDiv.appendChild(iconImg)\n      loadingDiv.appendChild(textDiv)\n    }\n    return loadingDiv\n  }\n\n  cancelTechnology() {\n    const {\n      context: { player, menu },\n    } = this\n    this.stopInterval()\n    refundCost(player, this.technology.cost)\n    this.technology = null\n    this.loading = null\n    if (this.owner.isPlayed) {\n      menu.updateBottombar()\n      menu.updateTopbar()\n    }\n  }\n\n  upgrade(type) {\n    const data = this.owner.config.buildings[type]\n    this.type = type\n    this.hitPoints = data.totalHitPoints - (this.totalHitPoints - this.hitPoints)\n    for (const [key, value] of Object.entries(data)) {\n      this[key] = value\n    }\n    const assets = getBuildingAsset(this.type, this.owner, Assets)\n    this.sprite.texture = getTexture(assets.images.final, Assets)\n    this.sprite.anchor.set(this.sprite.texture.defaultAnchor.x, this.sprite.texture.defaultAnchor.y)\n    const color = this.getChildByName('color')\n    color?.destroy()\n    if (assets.images.color) {\n      const spriteColor = Sprite.from(getTexture(assets.images.color, Assets))\n      spriteColor.name = 'color'\n      changeSpriteColorDirectly(spriteColor, this.owner.color)\n      this.addChild(spriteColor)\n    } else {\n      changeSpriteColorDirectly(this.sprite, this.owner.color)\n    }\n  }\n\n  buyTechnology(type, alreadyPaid, force) {\n    const {\n      context: { menu, map },\n    } = this\n    let success = false\n    const config = this.owner.techs[type]\n    if (\n      !this.queue.length &&\n      this.isBuilt &&\n      (force || this.loading === null) &&\n      !this.isDead &&\n      (alreadyPaid || canAfford(this.owner, config.cost))\n    ) {\n      !alreadyPaid && payCost(this.owner, config.cost)\n      success = true\n      if (this.owner.isPlayed) {\n        menu.updateTopbar()\n      }\n      this.loading = force ? this.loading : 0\n\n      this.technology = { config, type }\n      if (this.selected && this.owner.selectedBuilding === this) {\n        menu.setBottombar(this)\n      }\n      this.startInterval(() => {\n        const { config, type } = this.technology\n        if (this.loading >= 100 || map.devMode) {\n          this.stopInterval()\n          this.loading = null\n          this.technology = null\n          if (Array.isArray(this.owner[config.key])) {\n            this.owner[config.key].push(config.value || type)\n          } else {\n            this.owner[config.key] = config.value || type\n          }\n          if (config.action) {\n            switch (config.action.type) {\n              case 'upgradeUnit':\n                for (let i = 0; i < this.owner.units.length; i++) {\n                  const unit = this.owner.units[i]\n                  if (unit.type === config.action.source) {\n                    unit.upgrade(config.action.target)\n                  }\n                }\n                break\n              case 'upgradeBuilding':\n                for (let i = 0; i < this.owner.buildings.length; i++) {\n                  const building = this.owner.buildings[i]\n                  if (building.type === config.action.source) {\n                    building.upgrade(technconfigology.action.target)\n                  }\n                }\n                break\n              case 'improve':\n                this.owner.updateConfig(config.action.operations)\n                break\n            }\n          }\n          const functionName = `on${capitalizeFirstLetter(config.key)}Change`\n          typeof this.owner[functionName] === 'function' && this.owner[functionName](config.value)\n          if (this.owner.isPlayed) {\n            menu.updateBottombar()\n            menu.updateTopbar()\n          }\n        } else if (this.loading < 100) {\n          this.loading += 1\n          if (this.owner.isPlayed && this.owner.selectedBuilding === this) {\n            this.updateInterfaceLoading()\n          }\n        }\n      }, config.researchTime)\n    }\n    return success\n  }\n\n  setDefaultInterface(element, data) {\n    const {\n      context: { menu },\n    } = this\n\n    const civDiv = document.createElement('div')\n    civDiv.id = 'civ'\n    civDiv.textContent = this.owner.civ\n    element.appendChild(civDiv)\n\n    const typeDiv = document.createElement('div')\n    typeDiv.id = 'type'\n    typeDiv.textContent = this.type\n    element.appendChild(typeDiv)\n\n    const iconImg = document.createElement('img')\n    iconImg.id = 'icon'\n    iconImg.src = getIconPath(data.icon)\n    element.appendChild(iconImg)\n\n    if (this.owner && this.owner.isPlayed) {\n      const hitPointsDiv = document.createElement('div')\n      hitPointsDiv.id = 'hitPoints'\n      hitPointsDiv.textContent = this.hitPoints + '/' + this.totalHitPoints\n      element.appendChild(hitPointsDiv)\n\n      if (this.isBuilt && this.quantity) {\n        const quantityDiv = document.createElement('div')\n        quantityDiv.id = 'quantity'\n        quantityDiv.className = 'resource-quantity'\n        const smallIconImg = document.createElement('img')\n        smallIconImg.src = menu.icons['food']\n        smallIconImg.className = 'resource-quantity-icon'\n        const textDiv = document.createElement('div')\n        textDiv.id = 'quantity-text'\n        textDiv.textContent = this.quantity\n        quantityDiv.appendChild(smallIconImg)\n        quantityDiv.appendChild(textDiv)\n        element.appendChild(quantityDiv)\n      }\n    }\n  }\n}\n","import { sound } from '@pixi/sound'\nimport { Container, Assets, AnimatedSprite, Graphics } from 'pixi.js'\nimport {\n  ACCELERATOR,\n  STEP_TIME,\n  CORPSE_TIME,\n  LOADING_FOOD_TYPES,\n  MAX_SELECT_UNITS,\n  TYPE_ACTION,\n  POPULATION_MAX,\n  WORK_FOOD_TYPES,\n  COLOR_WHITE,\n} from '../constants'\nimport {\n  getInstanceZIndex,\n  randomRange,\n  renderCellOnInstanceSight,\n  getIconPath,\n  getInstancePath,\n  instancesDistance,\n  moveTowardPoint,\n  clearCellOnInstanceSight,\n  getInstanceClosestFreeCellPath,\n  instanceContactInstance,\n  getInstanceDegree,\n  changeSpriteColor,\n  findInstancesInSight,\n  getClosestInstanceWithPath,\n  getCellsAroundPoint,\n  drawInstanceBlinkingSelection,\n  instanceIsInPlayerSight,\n  degreeToDirection,\n  onSpriteLoopAtFrame,\n  getActionCondition,\n  randomItem,\n  getHitPointsWithDamage,\n  getClosestInstance,\n  throttle,\n  getFreeCellAroundPoint,\n  uuidv4,\n  canUpdateMinimap,\n  getWorkWithLoadingType,\n  setUnitTexture,\n} from '../lib'\nimport { Projectile } from './projectile'\n\nfunction getActionSheet(work, action, Assets, unit) {\n  if (!work) {\n    return\n  }\n  const actionSheet = action === 'takemeat' ? 'harvestSheet' : 'actionSheet'\n  return Assets.cache.get(unit.allAssets[work][actionSheet])\n}\n\nexport class Unit extends Container {\n  constructor(options, context) {\n    super()\n\n    this.context = context\n\n    const {\n      context: { map, menu },\n    } = this\n    this.name = uuidv4()\n    this.family = 'unit'\n\n    this.dest = null\n    this.realDest = null\n    this.previousDest = null\n    this.path = []\n    this.selected = false\n    this.degree = randomRange(1, 360)\n    this.currentFrame = randomRange(0, 4)\n    this.action = null\n    this.loading = 0\n    this.loadingType = null\n    this.currentSheet = 'standingSheet'\n    this.inactif = true\n    this.isDead = false\n    this.isDestroyed = false\n    this.x = null\n    this.y = null\n    this.z = null\n\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n    Object.keys(this.owner.config.units[this.type]).forEach(prop => {\n      this[prop] = this.owner.config.units[this.type][prop]\n    })\n    this.size = 1\n    this.visible = false\n    this.x = this.x ?? map.grid[this.i][this.j].x\n    this.y = this.y ?? map.grid[this.i][this.j].y\n    this.z = this.z ?? map.grid[this.i][this.j].z\n    this.zIndex = getInstanceZIndex(this)\n    this.quantity = this.quantity ?? this.totalQuantity\n    this.hitPoints = this.hitPoints ?? this.totalHitPoints\n\n    this.currentCell = map.grid[this.i][this.j]\n    if (this.currentSheet === 'corpseSheet') {\n      this.owner.corpses.push(this)\n      map.grid[this.i][this.j].corpses.push(this)\n    } else if (!this.isDead) {\n      this.currentCell.has = this\n      this.currentCell.solid = true\n      this.owner.units.push(this)\n    }\n    switch (this.type) {\n      case 'Villager':\n        this.work = this.work || null\n        break\n      case 'Priest':\n        this.work = 'healer'\n        break\n      default:\n        this.work = 'attacker'\n    }\n\n    if (this.assets) {\n      for (const [key, value] of Object.entries(this.assets)) {\n        this[key] = Assets.cache.get(value)\n      }\n    } else if (this.allAssets) {\n      for (const [key, value] of Object.entries(this.allAssets.default)) {\n        this[key] = Assets.cache.get(value)\n      }\n    }\n\n    if (this.owner.isPlayed && map.ready) {\n      sound.play((this.sounds && this.sounds.create) || 5144)\n    }\n\n    this.interface = {\n      info: element => {\n        const data = this.owner.config.units[this.type]\n        this.setDefaultInterface(element, data)\n        if (this.showLoading && this.owner.isPlayed) {\n          element.appendChild(this.getLoadingElement())\n        }\n      },\n      menu:\n        this.showBuildings && this.owner.isPlayed\n          ? [\n              {\n                icon: 'assets/interface/50721/002_50721.png',\n                children: Object.keys(this.owner.config.buildings).map(key => menu.getBuildingButton(key)),\n              },\n            ]\n          : [],\n    }\n\n    this.allowMove = false\n    this.eventMode = 'static'\n    this.actionSheet = this.actionSheet || getActionSheet(this.work, this.action, Assets, this)\n    this.sprite = new AnimatedSprite(this['standingSheet'].animations['south'])\n    this.sprite.name = 'sprite'\n    this.sprite.allowMove = false\n    this.sprite.eventMode = 'auto'\n    this.sprite.allowClick = false\n    this.sprite.roundPixels = true\n    this.sprite.loop = this.loop ?? true\n    if (this.isDead) {\n      this.currentSheet === 'corpseSheet' ? this.decompose() : this.death()\n    } else if (this.loading > 0) {\n      this.walkingSheet = Assets.cache.get(this.allAssets[getWorkWithLoadingType(this.loadingType)].loadedSheet)\n      this.standingSheet = Assets.cache.get(this.allAssets[getWorkWithLoadingType(this.loadingType)].standingSheet)\n    }\n    this.setTextures(this.currentSheet)\n\n    this.sprite.currentFrame = Math.min(this.currentFrame, this.sprite.textures.length - 1)\n    this.sprite.updateAnchor = true\n    this.addChild(this.sprite)\n\n    this.sendTo = this.owner.isPlayed ? throttle(this.sendToEvt, 100, true) : this.sendToEvt\n\n    this.on('pointerdown', evt => {\n      const {\n        context: { controls, player },\n      } = this\n      if (controls.mouseBuilding || controls.mouseRectangle || !controls.isMouseInApp(evt)) {\n        return\n      }\n      if (controls.clicked) {\n        if (this.owner.isPlayed) {\n          controls.getCellOnCamera(cell => {\n            if (\n              player.selectedUnits.length < MAX_SELECT_UNITS &&\n              cell.has &&\n              cell.has.owner &&\n              cell.has.owner.name === this.owner.name &&\n              cell.has.type === this.type\n            ) {\n              cell.has.select()\n              player.selectedUnits.push(cell.has)\n            }\n          })\n        }\n        controls.doubleClicked = true\n      }\n      controls.clicked = false\n    })\n    this.on('pointerup', evt => {\n      const {\n        context: { controls, player, menu },\n      } = this\n      if (controls.doubleClicked || controls.mouseBuilding || controls.mouseRectangle || !controls.isMouseInApp(evt)) {\n        return\n      }\n\n      controls.mouse.prevent = true\n      controls.clicked = true\n      controls.double = setTimeout(() => {\n        controls.clicked = false\n        controls.doubleClicked = false\n      }, 600)\n\n      if (this.owner.isPlayed) {\n        let hasSentHealer = false\n        if (player.selectedUnits.length) {\n          for (let i = 0; i < player.selectedUnits.length; i++) {\n            const playerUnit = player.selectedUnits[i]\n            if (playerUnit.work === 'healer' && this.getActionCondition(playerUnit, 'heal')) {\n              hasSentHealer = true\n              playerUnit.sendTo(this, 'heal')\n            }\n          }\n        }\n        if (hasSentHealer) {\n          drawInstanceBlinkingSelection(this)\n        } else if (player.selectedUnit !== this) {\n          this.owner.unselectAll()\n          this.select()\n          menu.setBottombar(this)\n          player.selectedUnit = this\n          player.selectedUnits = [this]\n        }\n      } else {\n        let hasSentAttacker = false\n        if (player.selectedUnits.length) {\n          for (let i = 0; i < player.selectedUnits.length; i++) {\n            const playerUnit = player.selectedUnits[i]\n            if (this.getActionCondition(playerUnit, 'attack'))\n              if (playerUnit.type === 'Villager') {\n                hasSentAttacker = true\n                playerUnit.sendToAttack(this)\n              } else if (playerUnit.work === 'attacker') {\n                hasSentAttacker = true\n                playerUnit.sendTo(this, 'attack')\n              }\n          }\n        }\n        if (hasSentAttacker) {\n          drawInstanceBlinkingSelection(this)\n        } else if ((player.selectedOther !== this && instanceIsInPlayerSight(this, player)) || map.revealEverything) {\n          player.unselectAll()\n          this.select()\n          menu.setBottombar(this)\n          player.selectedOther = this\n        }\n      }\n    })\n\n    changeSpriteColor(this.sprite, this.owner.color)\n\n    this.interval = null\n\n    renderCellOnInstanceSight(this)\n  }\n\n  pause() {\n    this.sprite?.stop()\n  }\n\n  resume() {\n    this.sprite?.play()\n  }\n\n  select() {\n    if (this.selected) return\n\n    const {\n      context: { menu, player },\n    } = this\n\n    this.selected = true\n\n    const selection = new Graphics()\n    selection.name = 'selection'\n    selection.zIndex = 3\n\n    // Diamond shape\n    const path = [-32 * 0.5, 0, 0, -16 * 0.5, 32 * 0.5, 0, 0, 16 * 0.5]\n    selection.poly(path)\n    selection.stroke(COLOR_WHITE)\n\n    this.addChildAt(selection, 0)\n\n    if (canUpdateMinimap(this, player)) {\n      menu.updatePlayerMiniMapEvt(this.owner)\n    }\n  }\n\n  unselect() {\n    if (!this.selected) {\n      return\n    }\n    const {\n      context: { menu, player },\n    } = this\n\n    this.selected = false\n    const selection = this.getChildByName('selection')\n    if (selection) {\n      this.removeChild(selection)\n    }\n    canUpdateMinimap(this, player) && menu.updatePlayerMiniMapEvt(this.owner)\n  }\n\n  hasPath() {\n    return this.path.length > 0\n  }\n\n  setDest(dest) {\n    if (!dest) {\n      this.stop()\n      return\n    }\n    this.handleSetDest && this.handleSetDest(dest, this)\n    this.dest = dest\n    this.realDest = {\n      i: dest.i,\n      j: dest.j,\n      x: dest.x,\n      y: dest.y,\n      name: dest.name,\n    }\n  }\n\n  setPath(path) {\n    if (!path.length) {\n      this.stop()\n      return\n    }\n    this.setTextures('walkingSheet')\n    this.inactif = false\n    this.path = path\n    this.startInterval(() => this.step(), STEP_TIME)\n  }\n\n  handleChangeDest() {\n    if (this.dest && this.dest.isUsedBy === this) {\n      this.dest.isUsedBy = null\n    }\n  }\n\n  sendToEvt(dest, action) {\n    const {\n      context: { map },\n    } = this\n    this.handleChangeDest()\n    this.stopInterval()\n    let path = []\n    // No instance we cancel the destination\n    if (!dest || this.isDead) {\n      return\n    }\n    // Unit is already beside our target\n    if (\n      this.isUnitAtDest(action, dest) &&\n      (!map.grid[this.i][this.j].solid ||\n        (map.grid[this.i][this.j].solid && map.grid[this.i][this.j].has?.name === this.name))\n    ) {\n      this.setDest(dest)\n      this.action = action\n      this.degree = getInstanceDegree(this, dest.x, dest.y)\n      this.getAction(action)\n      return\n    }\n    // Set unit path\n    if (map.grid[dest.i] && map.grid[dest.i][dest.j]) {\n      const allowWaterCellCategory = this.category === 'Boat'\n      if (map.grid[dest.i][dest.j].solid) {\n        path = getInstanceClosestFreeCellPath(this, dest, map)\n        if (!path.length && this.work) {\n          this.action = action\n          this.affectNewDest()\n          return\n        }\n      } else if (!allowWaterCellCategory && dest.category === 'Water') {\n        const cell = getFreeCellAroundPoint(\n          dest.i,\n          dest.j,\n          1,\n          map.grid,\n          cell => cell.category !== 'Water' && !cell.solid\n        )\n        this.sendToEvt(cell)\n        return\n      }\n    }\n    if (!path.length) {\n      path = getInstancePath(this, dest.i, dest.j, map)\n    }\n    // Unit found a path, set the action and play walking animation\n    if (path.length) {\n      this.setDest(dest)\n      this.action = action\n      this.setPath(path)\n    } else {\n      this.stop()\n    }\n  }\n\n  getActionCondition(target, action = this.action, props) {\n    return getActionCondition(this, target, action, props)\n  }\n\n  goBackToPrevious() {\n    const {\n      context: { map },\n    } = this\n\n    if (!this.previousDest) {\n      this.stop()\n      return\n    }\n    const dest = this.previousDest\n    const type = dest.category || dest.type\n    this.previousDest = null\n    if (dest.family === 'animal') {\n      if (this.getActionCondition(dest, 'takemeat')) {\n        this.sendToTakeMeat(dest)\n      } else {\n        this.sendTo(map.grid[dest.i][dest.j], 'hunt')\n      }\n    } else if (dest.family === 'building') {\n      if (this.getActionCondition(dest, 'build')) {\n        this.sendToBuilding(dest)\n      } else if (this.getActionCondition(dest, 'farm')) {\n        this.sendToFarm(dest)\n      } else {\n        this.sendTo(map.grid[dest.i][dest.j], 'build')\n      }\n    } else if (TYPE_ACTION[type]) {\n      if (this.getActionCondition(dest, TYPE_ACTION[type])) {\n        const sendToFunc = `sendTo${type}`\n        typeof this[sendToFunc] === 'function' ? this[sendToFunc](dest) : this.stop()\n      } else {\n        this.sendTo(map.grid[dest.i][dest.j], TYPE_ACTION[type])\n      }\n    } else {\n      this.sendTo(map.grid[dest.i][dest.j])\n    }\n  }\n\n  getAction(name) {\n    const {\n      context: { menu, player, map },\n    } = this\n    this.sprite.onLoop = null\n    this.sprite.onFrameChange = null\n    switch (name) {\n      case 'delivery':\n        if (!this.getActionCondition(this.dest, this.action)) {\n          this.stop()\n          return\n        }\n        this.owner[LOADING_FOOD_TYPES.includes(this.loadingType) ? 'food' : this.loadingType] += this.loading\n        this.owner.isPlayed && menu.updateTopbar()\n        this.loading = 0\n        this.updateInterfaceLoading()\n        if (this.allAssets && this.allAssets[this.work]) {\n          this.standingSheet = Assets.cache.get(this.allAssets[this.work].standingSheet)\n          this.walkingSheet = Assets.cache.get(this.allAssets[this.work].walkingSheet)\n        }\n\n        if (this.previousDest) {\n          this.goBackToPrevious()\n        } else {\n          this.stop()\n        }\n        break\n      case 'farm':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.dest.isUsedBy = this\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest.quantity <= 0) {\n                this.dest.die()\n              }\n              this.affectNewDest()\n              return\n            }\n            this.dest.isUsedBy = this\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              this.dest.isUsedBy = null\n              return\n            }\n            // Villager farm the farm\n            this.loading++\n            this.loadingType = 'wheat'\n            this.updateInterfaceLoading()\n\n            this.visible && sound.play('5178')\n            this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n            if (this.dest.selected) {\n              menu.updateInfo('quantity-text', this.dest.quantity)\n            }\n            // Destroy farm if it out of quantity\n            if (this.dest.quantity <= 0) {\n              this.dest.die()\n              this.affectNewDest()\n            }\n            // Set the walking with berrybush animation\n            if (this.loading > 0) {\n              if (this.allAssets[this.work]) {\n                this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n              }\n              this.standingSheet = null\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        break\n      case 'chopwood':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest.quantity <= 0) {\n                this.dest.die()\n              }\n              this.affectNewDest()\n              return\n            }\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              return\n            }\n\n            this.visible && sound.play('5048')\n\n            // Tree destination is still alive we cut him until it's dead\n            if (this.dest.hitPoints > 0) {\n              this.dest.hitPoints = Math.max(this.dest.hitPoints - 1, 0)\n\n              if (this.dest.selected) {\n                menu.updateInfo(\n                  'hitPoints',\n                  this.dest.hitPoints > 0 ? this.dest.hitPoints + '/' + this.dest.totalHitPoints : ''\n                )\n              }\n              if (this.dest.hitPoints <= 0) {\n                // Set cutted tree texture\n                this.dest.hitPoints = 0\n                this.dest.setCuttedTreeTexture()\n              }\n            } else {\n              // Villager cut the stump\n              this.loading++\n              this.loadingType = 'wood'\n              this.updateInterfaceLoading()\n\n              this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n              if (this.dest.selected) {\n                menu.updateInfo('quantity-text', this.dest.quantity)\n              }\n              // Destroy tree if stump out of quantity\n              if (this.dest.quantity <= 0) {\n                this.dest.die()\n                this.affectNewDest()\n              }\n              // Set the walking with wood animation\n              if (this.loading > 0) {\n                if (this.allAssets[this.work]) {\n                  this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n                }\n                this.standingSheet = null\n              }\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        break\n      case 'forageberry':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest.quantity <= 0) {\n                this.dest.die()\n              }\n              this.affectNewDest()\n              return\n            }\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              return\n            }\n            // Villager forage the berrybush\n            this.loading++\n            this.loadingType = 'berry'\n            this.updateInterfaceLoading()\n\n            this.visible && sound.play('5085')\n\n            this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n            if (this.dest.selected) {\n              menu.updateInfo('quantity-text', this.dest.quantity)\n            }\n            // Destroy berrybush if it out of quantity\n            if (this.dest.quantity <= 0) {\n              this.dest.die()\n              this.affectNewDest()\n            }\n            // Set the walking with berrybush animation\n            if (this.loading > 0) {\n              if (this.allAssets[this.work]) {\n                this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n              }\n              this.standingSheet = null\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        break\n      case 'minestone':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest.quantity <= 0) {\n                this.dest.die()\n              }\n              this.affectNewDest()\n              return\n            }\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              return\n            }\n            // Villager mine the stone\n            this.loading++\n            this.loadingType = 'stone'\n            this.updateInterfaceLoading()\n\n            this.visible && sound.play('5159')\n\n            this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n            if (this.dest.selected) {\n              menu.updateInfo('quantity-text', this.dest.quantity)\n            }\n            // Destroy stone if it out of quantity\n            if (this.dest.quantity <= 0) {\n              this.dest.die()\n              this.affectNewDest()\n            }\n            // Set the walking with stone animation\n            if (this.loading > 0) {\n              if (this.allAssets[this.work]) {\n                this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n              }\n              this.standingSheet = null\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        break\n      case 'minegold':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              this.affectNewDest()\n              return\n            }\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              return\n            }\n            // Villager mine the gold\n            this.loading++\n            this.loadingType = 'gold'\n            this.updateInterfaceLoading()\n\n            this.visible && sound.play('5159')\n            this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n            if (this.dest.selected) {\n              menu.updateInfo('quantity-text', this.dest.quantity)\n            }\n            // Destroy gold if it out of quantity\n            if (this.dest.quantity <= 0) {\n              this.dest.die()\n              this.affectNewDest()\n            }\n            // Set the walking with gold animation\n            if (this.loading > 0) {\n              if (this.allAssets[this.work]) {\n                this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n              }\n              this.standingSheet = null\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        break\n      case 'build':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest.type === 'Farm' && !this.dest.isUsedBy) {\n                this.sendToFarm(this.dest)\n              }\n              this.affectNewDest()\n              return\n            }\n            if (this.dest.hitPoints < this.dest.totalHitPoints) {\n              this.visible && sound.play('5107')\n              this.dest.hitPoints = Math.min(\n                Math.round(this.dest.hitPoints + this.dest.totalHitPoints / this.dest.constructionTime),\n                this.dest.totalHitPoints\n              )\n              if (this.dest.selected && this.owner.isPlayed) {\n                menu.updateInfo('hitPoints', this.dest.hitPoints + '/' + this.dest.totalHitPoints)\n              }\n              this.dest.updateHitPoints(this.action)\n            } else {\n              if (!this.dest.isBuilt) {\n                this.depst.updateHitPoints(this.action)\n                this.dest.isBuilt = true\n                if (this.dest.type === 'Farm' && !this.dest.isUsedBy) {\n                  this.sendToFarm(this.dest)\n                }\n              }\n              this.affectNewDest()\n            }\n          },\n          1000,\n          false\n        )\n        break\n      case 'attack':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        if (this.range && this.type !== 'Villager') {\n          this.sprite.onLoop = () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest && this.dest.hitPoints <= 0) {\n                this.dest.die()\n              }\n              this.affectNewDest()\n              return\n            }\n            if (!this.isUnitAtDest(this.action, this.dest)) {\n              this.stop()\n              return\n            }\n            if (this.destHasMoved()) {\n              this.realDest.i = this.dest.i\n              this.realDest.j = this.dest.j\n              this.realDest.x = this.dest.x\n              this.realDest.y = this.dest.y\n              const oldDeg = this.degree\n              this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n              if (degreeToDirection(oldDeg) !== degreeToDirection(this.degree)) {\n                this.setTextures('actionSheet')\n              }\n            }\n          }\n          onSpriteLoopAtFrame(this.sprite, 6, () => {\n            const projectile = new Projectile(\n              {\n                owner: this,\n                target: this.dest,\n                type: this.projectile,\n                destination: this.realDest,\n              },\n              this.context\n            )\n            map.addChild(projectile)\n          })\n        } else {\n          this.startInterval(\n            () => {\n              if (!this.getActionCondition(this.dest)) {\n                if (this.dest && this.dest.hitPoints <= 0) {\n                  this.dest.die()\n                }\n                this.affectNewDest()\n                return\n              }\n              if (this.destHasMoved()) {\n                this.realDest.i = this.dest.i\n                this.realDest.j = this.dest.j\n                this.realDest.x = this.dest.x\n                this.realDest.y = this.dest.y\n                const oldDeg = this.degree\n                this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n                if (degreeToDirection(oldDeg) !== degreeToDirection(this.degree)) {\n                  this.setTextures('actionSheet')\n                }\n              }\n              if (!this.isUnitAtDest(this.action, this.dest)) {\n                this.sendTo(this.dest, 'attack')\n                return\n              }\n              if (this.sounds && this.sounds.hit) {\n                this.visible &&\n                  sound.play(Array.isArray(this.sounds.hit) ? randomItem(this.sounds.hit) : this.sounds.hit)\n              }\n              if (this.dest.hitPoints > 0) {\n                this.dest.hitPoints = getHitPointsWithDamage(this, this.dest)\n                if (\n                  this.dest.selected &&\n                  (player.selectedUnit === this.dest ||\n                    player.selectedBuilding === this.dest ||\n                    player.selectedOther === this.dest)\n                ) {\n                  menu.updateInfo('hitPoints', this.dest.hitPoints + '/' + this.dest.totalHitPoints)\n                }\n                this.dest.isAttacked(this)\n                if (this.dest.hitPoints <= 0) {\n                  this.dest.die()\n                  this.affectNewDest()\n                }\n              }\n            },\n            this.rateOfFire * 1000,\n            false\n          )\n        }\n        break\n      case 'heal':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.sprite.onLoop = () => {\n          if (!this.getActionCondition(this.dest)) {\n            this.affectNewDest()\n            return\n          }\n          if (this.destHasMoved()) {\n            this.realDest.i = this.dest.i\n            this.realDest.j = this.dest.j\n            this.realDest.x = this.dest.x\n            this.realDest.y = this.dest.y\n            const oldDeg = this.degree\n            this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n            if (degreeToDirection(oldDeg) !== degreeToDirection(this.degree)) {\n              this.setTextures('actionSheet')\n            }\n          }\n          if (!this.isUnitAtDest(this.action, this.dest)) {\n            this.sendTo(this.dest, 'heal')\n            return\n          }\n          if (this.dest.hitPoints < this.dest.totalHitPoints) {\n            this.dest.hitPoints = Math.min(this.dest.hitPoints + this.healing, this.dest.totalHitPoints)\n            if (this.dest.selected && player.selectedUnit === this.dest) {\n              menu.updateInfo('hitPoints', this.dest.hitPoints + '/' + this.dest.totalHitPoints)\n            }\n          }\n        }\n        break\n      case 'takemeat':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              this.affectNewDest()\n              return\n            }\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              return\n            }\n            // Villager take meat\n            this.visible && sound.play('5178')\n\n            this.loading++\n            this.loadingType = 'meat'\n            this.updateInterfaceLoading()\n\n            this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n            this.dest.updateTexture()\n            if (this.dest.selected && this.owner.isPlayed) {\n              menu.updateInfo('quantity-text', this.dest.quantity)\n            }\n            // Set the walking with meat animation\n            if (this.loading > 0) {\n              if (this.allAssets[this.work]) {\n                this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n              }\n              this.standingSheet = null\n            }\n            // Destroy corps if it out of quantity\n            if (this.dest.quantity <= 0) {\n              this.affectNewDest()\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        break\n      case 'fishing':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              this.affectNewDest()\n              return\n            }\n            // Villager is full we send him delivery first\n            if (this.loading === this.loadingMax[this.loadingType] || !this.dest) {\n              this.sendToDelivery()\n              return\n            }\n            // Villager fish\n            this.loading++\n            this.loadingType = 'fish'\n            this.updateInterfaceLoading()\n\n            this.dest.quantity = Math.max(this.dest.quantity - 1, 0)\n            if (this.dest.selected && this.owner.isPlayed) {\n              menu.updateInfo('quantity-text', this.dest.quantity)\n            }\n            // Set the walking with meat animation\n            if (this.loading > 0) {\n              if (this.allAssets && this.allAssets[this.work]) {\n                this.walkingSheet = Assets.cache.get(this.allAssets[this.work].loadedSheet)\n              }\n              this.standingSheet = null\n            }\n            // Destroy corps if it out of quantity\n            if (this.dest.quantity <= 0) {\n              this.affectNewDest()\n            }\n          },\n          (1 / this.gatheringRate[this.work]) * 1000,\n          false\n        )\n        if (this.category !== 'Boat') {\n          onSpriteLoopAtFrame(this.sprite, 6, () => {\n            this.visible && sound.play('5125')\n          })\n        }\n        break\n      case 'hunt':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        if (this.dest.isDead) {\n          this.previousDest ? this.goBackToPrevious() : this.sendToTakeMeat(this.dest)\n        }\n        this.setTextures('actionSheet')\n        this.sprite.onLoop = () => {\n          if (!this.getActionCondition(this.dest)) {\n            if (this.dest && this.dest.hitPoints <= 0) {\n              this.dest.die()\n              this.previousDest ? this.goBackToPrevious() : this.sendToTakeMeat(this.dest)\n              return\n            }\n            this.affectNewDest()\n            return\n          }\n          if (!this.isUnitAtDest(this.action, this.dest)) {\n            this.stop()\n            return\n          }\n          if (this.destHasMoved()) {\n            this.realDest.i = this.dest.i\n            this.realDest.j = this.dest.j\n            this.realDest.x = this.dest.x\n            this.realDest.y = this.dest.y\n            const oldDeg = this.degree\n            this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n            if (degreeToDirection(oldDeg) !== degreeToDirection(this.degree)) {\n              this.setTextures('actionSheet')\n            }\n          }\n        }\n        onSpriteLoopAtFrame(this.sprite, 6, () => {\n          const projectile = new Projectile(\n            {\n              owner: this,\n              target: this.dest,\n              type: 'Spear',\n              destination: this.realDest,\n              damage: 4,\n            },\n            this.context\n          )\n          map.addChild(projectile)\n        })\n        break\n      default:\n        this.stop()\n    }\n  }\n\n  detect(instance) {\n    if (\n      this.work === 'attacker' &&\n      instance &&\n      instance.family === 'unit' &&\n      !this.path.length &&\n      !this.dest &&\n      this.getActionCondition(instance, 'attack')\n    ) {\n      this.sendTo(instance, 'attack')\n    }\n  }\n\n  handleAffectNewDestHunter() {\n    const firstTargets = findInstancesInSight(this, instance => this.getActionCondition(instance, 'takemeat'))\n    if (firstTargets.length) {\n      const target = getClosestInstanceWithPath(this, firstTargets)\n      if (target) {\n        if (this.action !== 'takemeat') {\n          this.action = 'takemeat'\n          if (this.allAssets[this.work]) {\n            this.actionSheet = Assets.cache.get(this.allAssets[this.work].harvestSheet)\n          }\n        }\n        if (instanceContactInstance(this, target)) {\n          this.degree = getInstanceDegree(this, target.x, target.y)\n          this.getAction(this.action)\n          return true\n        }\n        this.setDest(target.instance)\n        this.setPath(target.path)\n        return true\n      }\n    }\n    const secondTargets = findInstancesInSight(this, instance => this.getActionCondition(instance, 'hunt'))\n    if (secondTargets.length) {\n      const target = getClosestInstanceWithPath(this, secondTargets)\n      if (target) {\n        if (this.action !== 'hunt') {\n          this.action = 'hunt'\n          if (this.allAssets[this.work]) {\n            this.actionSheet = Assets.cache.get(this.allAssets[this.work].actionSheet)\n          }\n        }\n        if (instanceContactInstance(this, target)) {\n          this.degree = getInstanceDegree(this, target.x, target.y)\n          this.getAction(this.action)\n          return true\n        }\n        this.setDest(target.instance)\n        this.setPath(target.path)\n        return true\n      }\n    }\n    return false\n  }\n\n  upgrade(type) {\n    const data = this.owner.config.units[type]\n    this.type = type\n    this.hitPoints = data.totalHitPoints - (this.totalHitPoints - this.hitPoints)\n    for (const [key, value] of Object.entries(data)) {\n      this[key] = value\n    }\n    for (const [key, value] of Object.entries(this.assets)) {\n      this[key] = Assets.cache.get(value)\n    }\n    if (this.action && !this.path.length) {\n      this.getAction(this.action)\n    } else {\n      this.setTextures(this.currentSheet)\n    }\n  }\n\n  affectNewDest() {\n    this.stopInterval()\n    if (this.previousDest && this.work !== 'delivery') {\n      this.goBackToPrevious()\n      return\n    }\n    let handleSuccess = false\n    if (this.type === 'Villager' && (this.action === 'takemeat' || this.action === 'hunt')) {\n      handleSuccess = this.handleAffectNewDestHunter()\n    } else if (!this.dest || this.dest.name !== 'animal') {\n      const targets = findInstancesInSight(this, instance => this.getActionCondition(instance))\n      if (targets.length) {\n        const target = getClosestInstanceWithPath(this, targets)\n        if (target) {\n          if (instanceContactInstance(this, target)) {\n            this.degree = getInstanceDegree(this, target.x, target.y)\n            this.getAction(this.action)\n            return\n          }\n          this.setDest(target.instance)\n          this.setPath(target.path)\n          return\n        }\n      }\n    }\n    if (!handleSuccess) {\n      const notDeliveryWork = ['builder', 'attacker', 'healer']\n      if (this.loading && !notDeliveryWork.includes(this.work)) {\n        this.sendToDelivery()\n      } else {\n        this.stop()\n      }\n    }\n  }\n\n  isUnitAtDest(action, dest) {\n    if (!action) {\n      return false\n    }\n    if (!dest) {\n      this.affectNewDest()\n      return false\n    }\n    if ((this.type !== 'Villager' || action === 'hunt') && this.range && instancesDistance(this, dest) <= this.range) {\n      return true\n    }\n    return instanceContactInstance(this, dest)\n  }\n\n  destHasMoved() {\n    return (\n      (this.dest.i !== this.realDest.i || this.dest.j !== this.realDest.j) &&\n      instancesDistance(this, this.dest) <= this.sight\n    )\n  }\n\n  moveToPath() {\n    const {\n      context: { map },\n    } = this\n    const next = this.path[this.path.length - 1]\n    const nextCell = map.grid[next.i][next.j]\n    if (!this.dest || this.dest.isDestroyed) {\n      this.affectNewDest()\n      return\n    }\n    // Collision with another walking unit, we block the mouvement\n    if (\n      nextCell.has &&\n      nextCell.has.family === 'unit' &&\n      nextCell.has.name !== this.name &&\n      nextCell.has.hasPath() &&\n      instancesDistance(this, nextCell.has) <= 1 &&\n      nextCell.has.sprite.playing\n    ) {\n      this.sprite.stop()\n      return\n    }\n    if (nextCell.solid && this.dest) {\n      this.sendTo(this.dest, this.action)\n      return\n    }\n\n    if (!this.sprite.playing) {\n      this.sprite.play()\n    }\n\n    this.zIndex = getInstanceZIndex(this)\n    if (instancesDistance(this, nextCell, false) <= this.speed) {\n      clearCellOnInstanceSight(this)\n      this.z = nextCell.z\n      this.i = nextCell.i\n      this.j = nextCell.j\n      if (this.currentCell.has === this) {\n        this.currentCell.has = null\n        this.currentCell.solid = false\n      }\n      this.currentCell = map.grid[this.i][this.j]\n      if (this.currentCell.has === null) {\n        this.currentCell.has = this\n        this.currentCell.solid = true\n      }\n      renderCellOnInstanceSight(this)\n      this.path.pop()\n\n      // Destination moved\n      if (this.destHasMoved()) {\n        this.sendTo(this.dest, this.action)\n        return\n      }\n      if (this.isUnitAtDest(this.action, this.dest)) {\n        this.path = []\n        this.stopInterval()\n        this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n        this.getAction(this.action)\n        return\n      }\n\n      if (!this.path.length) {\n        this.stop()\n      }\n    } else {\n      const {\n        context: { menu, player },\n      } = this\n      // Move to next\n      const oldDeg = this.degree\n      let speed = this.speed\n      if (this.loading > 0) {\n        speed *= 0.8\n      }\n      moveTowardPoint(this, nextCell.x, nextCell.y, this.speed)\n      canUpdateMinimap(this, player) && menu.updatePlayerMiniMap(this.owner)\n      if (degreeToDirection(oldDeg) !== degreeToDirection(this.degree)) {\n        // Change animation according to degree\n        this.setTextures('walkingSheet')\n      }\n    }\n  }\n\n  isAttacked(instance) {\n    if (!instance || this.dest === instance || this.isDead) {\n      return\n    }\n    const currentDest = this.dest\n    if (this.type === 'Villager') {\n      if (instance.family === 'animal') {\n        this.sendToHunt(instance)\n      } else {\n        this.sendToAttack(instance)\n      }\n    } else {\n      this.sendTo(instance, 'attack')\n    }\n    this.previousDest = currentDest\n  }\n\n  stop() {\n    if (this.currentCell.has.name !== this.name && this.currentCell.solid) {\n      this.sendTo(this.currentCell)\n      return\n    }\n    this.handleChangeDest()\n    this.inactif = true\n    this.action = null\n    this.dest = null\n    this.realDest = null\n    this.currentCell.has = this\n    this.currentCell.solid = true\n    this.path = []\n    this.stopInterval()\n    this.setTextures('standingSheet')\n  }\n\n  startInterval(callback, time, immediate = true) {\n    const finalCb = () => {\n      const { paused } = this.context\n      if (paused) {\n        return\n      }\n      callback()\n    }\n    if (this.isDead) {\n      return\n    }\n    this.stopInterval()\n    immediate && finalCb()\n    this.interval = setInterval(finalCb, time)\n  }\n\n  stopInterval() {\n    if (this.interval) {\n      clearInterval(this.interval)\n      this.interval = null\n    }\n  }\n\n  step() {\n    if (this.hitPoints <= 0) {\n      this.die()\n    } else if (this.hasPath()) {\n      this.moveToPath()\n    }\n  }\n\n  explore() {\n    const {\n      context: { map },\n    } = this\n    let dest\n    for (let i = 3; i < 50; i++) {\n      getCellsAroundPoint(this.i, this.j, map.grid, i, cell => {\n        if (!this.owner.views[cell.i][cell.j].viewed && !cell.solid) {\n          dest = this.owner.views[cell.i][cell.j]\n          return\n        }\n      })\n      if (dest) {\n        this.sendTo(dest)\n        break\n      }\n    }\n  }\n\n  runaway(instance) {\n    const {\n      context: { map },\n    } = this\n    let dest = null\n    getCellsAroundPoint(this.i, this.j, map.grid, this.sight, cell => {\n      if (\n        !cell.solid &&\n        (!dest ||\n          pointsDistance(cell.i, cell.j, instance.i, instance.j) >\n            pointsDistance(dest.i, dest.j, instance.i, instance.j))\n      ) {\n        dest = this.owner.views[cell.i][cell.j]\n        return\n      }\n    })\n    if (dest) {\n      this.sendTo(dest)\n    } else {\n      this.stop()\n    }\n  }\n\n  decompose() {\n    const {\n      context: { map },\n    } = this\n    this.setTextures('corpseSheet')\n    this.sprite.animationSpeed = (1 / (CORPSE_TIME * 1000)) * ACCELERATOR\n    if (map.grid[this.i][this.j].has === this) {\n      map.grid[this.i][this.j].has = null\n      map.grid[this.i][this.j].corpses.push(this)\n      map.grid[this.i][this.j].solid = false\n    }\n    this.sprite.onComplete = () => {\n      //this.clear()\n    }\n  }\n\n  death() {\n    this.setTextures('dyingSheet')\n    this.zIndex--\n    this.sprite.loop = false\n    this.sprite.onComplete = () => {\n      clearCellOnInstanceSight(this)\n      // Remove from player units\n      let index = this.owner.corpses.indexOf(this)\n      if (index < 0) {\n        this.owner.corpses.push(this)\n      }\n      this.decompose()\n    }\n  }\n\n  die() {\n    if (this.isDead) {\n      return\n    }\n    const {\n      context: { player, menu },\n    } = this\n\n    this.sounds &&\n      this.sounds.die &&\n      this.visible &&\n      sound.play(Array.isArray(this.sounds.die) ? randomItem(this.sounds.die) : this.sounds.die)\n\n    this.stopInterval()\n    if (this.selected && player.selectedOther === this) {\n      player.unselectUnit(this)\n    }\n    if (this.dest && this.dest.isUsedBy === this) {\n      this.dest.isUsedBy = null\n    }\n    this.hitPoints = 0\n    this.path = []\n    this.action = null\n    this.eventMode = 'none'\n    this.isDead = true\n    this.unselect()\n    if (this.owner) {\n      this.owner.population--\n      if (this.owner.isPlayed && this.owner.selectedBuilding && this.owner.selectedBuilding.displayPopulation) {\n        menu.updateInfo(\n          'population-text',\n          this.owner.population + '/' + Math.min(POPULATION_MAX, this.owner.POPULATION_MAX)\n        )\n      }\n      // Remove from player units\n      let index = this.owner.units.indexOf(this)\n      if (index >= 0) {\n        this.owner.units.splice(index, 1)\n      }\n      // Update from player selected unit\n      if (this.owner.selectedUnit === this) {\n        menu.updateInfo('hitPoints', this.hitPoints + '/' + this.totalHitPoints)\n      }\n    }\n    this.death()\n    canUpdateMinimap(this, player) && menu.updatePlayerMiniMapEvt(this.owner)\n  }\n\n  clear() {\n    const {\n      context: { map },\n    } = this\n    this.isDestroyed = true\n    // Remove from player units\n    let index = this.owner.corpses.indexOf(this)\n    if (index >= 0) {\n      this.owner.corpses.splice(index, 1)\n    }\n    // Remove from map corpses\n    const corpsesIndex = map.grid[this.i][this.j].corpses.indexOf(this)\n    if (index >= 0) {\n      map.grid[this.i][this.j].corpses.splice(corpsesIndex, 1)\n    }\n    map.removeChild(this)\n    this.destroy({ child: true, texture: true })\n  }\n\n  setTextures(sheet) {\n    setUnitTexture(sheet, this, ACCELERATOR)\n  }\n\n  updateInterfaceLoading() {\n    const {\n      context: { menu },\n    } = this\n    if (this.selected && this.owner.isPlayed && this.owner.selectedUnit === this) {\n      if (this.loading === 1) {\n        menu.updateInfo('loading', element => (element.innerHTML = this.getLoadingElement().innerHTML))\n      } else if (this.loading > 1) {\n        menu.updateInfo('loading-text', this.loading)\n      } else {\n        menu.updateInfo('loading', element => (element.innerHTML = ''))\n      }\n    }\n  }\n\n  getLoadingElement() {\n    const {\n      context: { menu },\n    } = this\n    const loadingDiv = document.createElement('div')\n    loadingDiv.className = 'unit-loading'\n    loadingDiv.id = 'loading'\n\n    if (this.loading) {\n      const iconImg = document.createElement('img')\n      iconImg.className = 'unit-loading-icon'\n      iconImg.src = menu.infoIcons[LOADING_FOOD_TYPES.includes(this.loadingType) ? 'food' : this.loadingType]\n      const textDiv = document.createElement('div')\n      textDiv.id = 'loading-text'\n      textDiv.textContent = this.loading\n      loadingDiv.appendChild(iconImg)\n      loadingDiv.appendChild(textDiv)\n    }\n    return loadingDiv\n  }\n\n  commonSendTo(target, work, action, keepPrevious) {\n    const {\n      context: { menu },\n    } = this\n    const workFromLoading = getWorkWithLoadingType(this.loadingType)\n    if (\n      work !== 'builder' &&\n      work !== workFromLoading &&\n      !(WORK_FOOD_TYPES.includes(work) && WORK_FOOD_TYPES.includes(workFromLoading))\n    ) {\n      this.loading = 0\n      this.loadingType = null\n      this.updateInterfaceLoading()\n    }\n    if (this.work !== work || this.action !== action) {\n      this.work = work\n      this.owner.isPlayed && this.owner.selectedUnit === this && menu.updateInfo('type', this.work)\n      if (this.allAssets && this.allAssets[work]) {\n        this.actionSheet = getActionSheet(work, action, Assets, this)\n        if (!this.loading) {\n          this.standingSheet = Assets.cache.get(this.allAssets[work]['standingSheet'])\n          this.walkingSheet = Assets.cache.get(this.allAssets[work]['walkingSheet'])\n          this.dyingSheet = Assets.cache.get(this.allAssets[work]['dyingSheet'])\n          this.corpseSheet = Assets.cache.get(this.allAssets[work]['corpseSheet'])\n        }\n      }\n    }\n    this.previousDest = keepPrevious ? this.previousDest : null\n    return this.sendTo(target, action)\n  }\n\n  sendToDelivery() {\n    const {\n      context: { map },\n    } = this\n    let buildingTypes = []\n    if (this.category === 'Boat') {\n      buildingTypes = ['Dock']\n    } else {\n      buildingTypes = ['TownCenter']\n      const buildings = {\n        Granary: this.owner.config.buildings.Granary,\n        StoragePit: this.owner.config.buildings.StoragePit,\n      }\n      for (const [key, value] of Object.entries(buildings)) {\n        if (value.accept && value.accept.includes(this.loadingType)) {\n          buildingTypes.push(key)\n          break\n        }\n      }\n    }\n\n    const targets = this.owner.buildings.filter(building =>\n      getActionCondition(this, building, 'delivery', { buildingTypes })\n    )\n    const target = getClosestInstance(this, targets)\n    if (this.dest) {\n      this.previousDest = this.dest\n    } else {\n      this.previousDest = map.grid[this.i][this.j]\n    }\n    this.sendTo(target, 'delivery')\n  }\n\n  sendToFish(target) {\n    return this.commonSendTo(target, 'fisher', 'fishing')\n  }\n\n  sendToAttack(target) {\n    return this.commonSendTo(target, 'attacker', 'attack', { resource: 'attack' })\n  }\n\n  sendToTakeMeat(target) {\n    return this.commonSendTo(target, 'hunter', 'takemeat', { actionSheet: 'harvestSheet' })\n  }\n\n  sendToHunt(target) {\n    return this.commonSendTo(target, 'hunter', 'hunt')\n  }\n\n  sendToBuilding(target) {\n    return this.commonSendTo(target, 'builder', 'build')\n  }\n\n  sendToFarm(target) {\n    return this.commonSendTo(target, 'farmer', 'farm')\n  }\n\n  sendToTree(target) {\n    return this.commonSendTo(target, 'woodcutter', 'chopwood')\n  }\n\n  sendToBerrybush(target) {\n    return this.commonSendTo(target, 'forager', 'forageberry')\n  }\n\n  sendToStone(target) {\n    return this.commonSendTo(target, 'stoneminer', 'minestone')\n  }\n\n  sendToGold(target) {\n    return this.commonSendTo(target, 'goldminer', 'minegold')\n  }\n\n  setDefaultInterface(element, data) {\n    const civDiv = document.createElement('div')\n    civDiv.id = 'civ'\n    civDiv.textContent = this.owner.civ\n    element.appendChild(civDiv)\n\n    const typeDiv = document.createElement('div')\n    typeDiv.id = 'type'\n    typeDiv.textContent = this.type === 'Villager' ? this.work || this.type : this.type\n    element.appendChild(typeDiv)\n\n    const iconImg = document.createElement('img')\n    iconImg.id = 'icon'\n    iconImg.src = getIconPath(data.icon)\n    element.appendChild(iconImg)\n\n    const hitPointsDiv = document.createElement('div')\n    hitPointsDiv.id = 'hitPoints'\n    hitPointsDiv.textContent = this.hitPoints + '/' + this.totalHitPoints\n    element.appendChild(hitPointsDiv)\n\n    const infosDiv = document.createElement('div')\n    infosDiv.id = 'infos'\n\n    const infos = [\n      ['meleeAttack', '007_50731'],\n      ['pierceAttack', '006_50731'],\n      ['meleeArmor', '008_50731'],\n      ['pierceArmor', '010_50731'],\n    ]\n\n    for (let i = 0; i < infos.length; i++) {\n      const info = infos[i]\n      if (data[info[0]]) {\n        const infoDiv = document.createElement('div')\n        infoDiv.id = 'info'\n\n        const attackImg = document.createElement('img')\n        attackImg.src = getIconPath(info[1])\n        const attackDiv = document.createElement('div')\n        attackDiv.id = info[0]\n        attackDiv.textContent = data[info[0]]\n        infoDiv.appendChild(attackImg)\n        infoDiv.appendChild(attackDiv)\n        infosDiv.appendChild(infoDiv)\n      }\n    }\n\n    element.appendChild(infosDiv)\n  }\n}\n","import { Assets } from 'pixi.js'\nimport {\n  canAfford,\n  drawInstanceBlinkingSelection,\n  payCost,\n  uuidv4,\n  getHexColor,\n  updateObject,\n  getActionCondition,\n  canUpdateMinimap,\n  isValidCondition,\n} from '../../lib'\nimport { sound } from '@pixi/sound'\nimport { Building } from '../building'\nimport { Unit } from '../unit'\nimport { POPULATION_MAX } from '../../constants'\n\nexport class Player {\n  constructor(options, context) {\n    this.family = 'player'\n    this.context = context\n\n    const { map } = context\n    this.name = uuidv4()\n    this.parent = map\n\n    this.wood = map.devMode ? 10000 : 200\n    this.food = map.devMode ? 10000 : 200\n    this.stone = map.devMode ? 10000 : 150\n    this.gold = map.devMode ? 10000 : 0\n    this.corpses = []\n    this.units = []\n    this.buildings = []\n    this.population = 0\n    this.technologies = []\n    this.cellViewed = 0\n    this.age = 0\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n\n    this.POPULATION_MAX = this.POPULATION_MAX || map.devMode ? POPULATION_MAX : 0\n\n    this.colorHex = getHexColor(this.color)\n    this.config = { ...Assets.cache.get('config') }\n    this.techs = { ...Assets.cache.get('technology') }\n    this.hasBuilt = this.hasBuilt || map.devMode ? Object.keys(this.config.buildings).map(key => key) : []\n    const cloneGrid = []\n    for (let i = 0; i <= map.size; i++) {\n      for (let j = 0; j <= map.size; j++) {\n        if (cloneGrid[i] == null) {\n          cloneGrid[i] = []\n        }\n        cloneGrid[i][j] = {\n          i,\n          j,\n          viewBy: this.views?.[i][j].viewBy ?? [],\n          onViewed: () => {\n            const {\n              context: { menu, map },\n            } = this\n            if (this.isPlayed && !map.revealEverything) {\n              menu.updateTerrainMiniMap(i, j)\n            }\n          },\n          viewed: this.views?.[i][j].viewed ?? ((this.isPlayed && this.type === 'Human' && map.revealTerrain) || false),\n        }\n      }\n    }\n    this.views = cloneGrid\n  }\n\n  spawnBuilding(options) {\n    const building = this.createBuilding(options)\n    if (this.isPlayed) {\n      let hasSentVillager = false\n      let hasSentOther = false\n\n      for (let i = 0; i < this.selectedUnits.length; i++) {\n        const unit = this.selectedUnits[i]\n        if (unit.type === 'Villager') {\n          if (getActionCondition(unit, building, 'build')) {\n            hasSentVillager = true\n            unit.sendToBuilding(building)\n          }\n        } else {\n          unit.sendTo(building)\n          hasSentOther = true\n        }\n      }\n      if (hasSentVillager) {\n        drawInstanceBlinkingSelection(building)\n      }\n      if (hasSentOther) {\n        const voice = randomItem(['5075', '5076', '5128', '5164'])\n        sound.play(voice)\n        return\n      } else if (hasSentVillager) {\n        const voice = this.config.units.Villager.sounds.build\n        sound.play(voice)\n        return\n      }\n    }\n\n    return building\n  }\n\n  onAgeChange() {\n    const {\n      context: { players, menu },\n    } = this\n    if (this.isPlayed) {\n      sound.play('5169')\n    }\n    for (let i = 0; i < this.buildings.length; i++) {\n      const building = this.buildings[i]\n      if (building.isBuilt && !building.isDead) {\n        building.finalTexture()\n      }\n    }\n    for (let i = 0; i < players.length; i++) {\n      const player = players[i]\n      if (player.type === 'Human') {\n        if (player.selectedUnit && player.selectedUnit.owner.name === this.name) {\n          menu.setBottombar(player.selectedUnit)\n        } else if (player.selectedBuilding && player.selectedBuilding.owner.name === this.name) {\n          menu.setBottombar(player.selectedBuilding)\n        } else if (player.selectedOther && player.selectedOther.owner.name === this.name) {\n          menu.setBottombar(player.selectedOther)\n        }\n      }\n    }\n  }\n\n  otherPlayers() {\n    const {\n      context: { players },\n    } = this\n    const others = [...players]\n    others.splice(players.indexOf(this), 1)\n    return others\n  }\n\n  updateConfig(operations) {\n    for (let i = 0; i < operations.length; i++) {\n      const operation = operations[i]\n      const types = Array.isArray(operation.type) ? operation.type : [operation.type]\n      for (let j = 0; j < types.length; j++) {\n        const type = types[j]\n        if (Object.keys(this.config.buildings).includes(type)) {\n          this.config.buildings[type] && updateObject(this.config.buildings[type], operation)\n        } else if (Object.keys(this.config.units).includes(type)) {\n          this.config.units[type] && updateObject(this.config.units[type], operation)\n        }\n      }\n    }\n  }\n\n  buyBuilding(i, j, type) {\n    const {\n      context: { menu, map },\n    } = this\n    const config = this.config.buildings[type]\n    if (\n      canAfford(this, config.cost) &&\n      (!config.conditions || config.conditions.every(condition => isValidCondition(condition, this)))\n    ) {\n      this.spawnBuilding({ i, j, type, isBuilt: map.devMode })\n      payCost(this, config.cost)\n      this.isPlayed && menu.updateTopbar()\n      return true\n    }\n    return false\n  }\n\n  createUnit(options) {\n    const { context } = this\n    let unit = context.map.addChild(new Unit({ ...options, owner: this }, context))\n    canUpdateMinimap(unit, context.player) && context.menu.updatePlayerMiniMapEvt(this)\n    return unit\n  }\n\n  createBuilding(options) {\n    const { context } = this\n    const building = context.map.addChild(new Building({ ...options, owner: this }, context))\n    this.buildings.push(building)\n    canUpdateMinimap(building, context.player) && context.menu.updatePlayerMiniMapEvt(this)\n    return building\n  }\n}\n","import { Player } from './player'\n\nimport {\n  getPlainCellsAroundPoint,\n  getValuePercentage,\n  getPositionInGridAroundInstance,\n  getClosestInstance,\n  instancesDistance,\n  getCellsAroundPoint,\n  canAfford,\n} from '../../lib'\n\nconst styleLogInfo1 = 'background: #00ff00; color: #ffff00'\nconst styleLogInfo2 = 'background: #222; color: #ff0000'\n\nexport class AI extends Player {\n  constructor({ ...props }, context) {\n    super({ ...props, isPlayed: false, type: 'AI' }, context)\n    this.foundedTrees = []\n    this.foundedBerrybushs = []\n    this.foundedGolds = []\n    this.foundedStones = []\n    this.foundedEnemyBuildings = []\n    this.interval = setInterval(() => this.step(), 4000)\n    this.selectedUnits = []\n    this.selectedUnit = null\n    this.selectedBuilding = null\n    this.selectedOther = null\n    this.distSpread = 1\n    this.cellViewed = 0\n\n    this.nextAge = {\n      1: 'ToolAge',\n      2: 'BronzeAge',\n      3: 'IronAge',\n    }\n    this.maxVillagerPerAge = {\n      0: 16,\n      1: 24,\n      2: 40,\n      3: 50,\n    }\n    this.villageTargetPercentageByAge = {\n      0: {\n        wood: 40,\n        food: 60,\n        gold: 0,\n        stone: 0,\n      },\n      1: {\n        wood: 45,\n        food: 45,\n        gold: 10,\n        stone: 0,\n      },\n      2: {\n        wood: 35,\n        food: 35,\n        gold: 20,\n        stone: 10,\n      },\n      3: {\n        wood: 30,\n        food: 30,\n        gold: 25,\n        stone: 15,\n      },\n    }\n    this.maxBuildingByAge = {\n      0: {\n        StoragePit: 1,\n        Granary: 1,\n        Barracks: 1,\n        Market: 1,\n      },\n      1: {\n        StoragePit: 2,\n        Granary: 2,\n        Farm: 4,\n        Barracks: 1,\n        Market: 1,\n      },\n      2: {\n        StoragePit: 3,\n        Granary: 3,\n        Farm: 6,\n        Barracks: 2,\n        Market: 1,\n      },\n      3: {\n        StoragePit: 4,\n        Granary: 4,\n        Farm: 10,\n        Barracks: 2,\n        Market: 1,\n      },\n    }\n  }\n\n  hasNotReachBuildingLimit(buildingType, buildings) {\n    return (\n      !this.maxBuildingByAge[this.age][buildingType] || buildings.length < this.maxBuildingByAge[this.age][buildingType]\n    )\n  }\n\n  buildingsByTypes(types) {\n    return this.buildings.filter(b => types.includes(b.type))\n  }\n\n  getUnitExtraOptions(type) {\n    const me = this\n    return {\n      handleSetDest: target => {\n        const { map } = me.context\n        if (type === 'Villager' && target.family === 'resource') {\n          const buildingType = target.type === 'Berrybush' ? 'Granary' : 'StoragePit'\n          const buildings = me.buildingsByTypes([buildingType])\n          if (\n            canAfford(me, me.config.buildings[buildingType]) &&\n            me.hasNotReachBuildingLimit(buildingType, buildings)\n          ) {\n            const closestBuilding = getClosestInstance(target, [...buildings, ...me.buildingsByTypes(['TownCenter'])])\n            if (!closestBuilding || instancesDistance(closestBuilding, target) > 5) {\n              const pos = getPositionInGridAroundInstance(target, map.grid, [1, 5], 1)\n              if (pos && me.buyBuilding(pos.i, pos.j, buildingType)) {\n                console.log(`Building ${buildingType} at: ${pos}`)\n              }\n            }\n          }\n        }\n      },\n    }\n  }\n\n  step() {\n    const { map, paused } = this.context\n    if (paused) {\n      return\n    }\n\n    const maxVillagers = this.maxVillagerPerAge[this.age]\n    const maxVillagersOnConstruction = 4\n    const maxClubmans = 0 //10\n    const howManyVillagerBeforeBuyingABarracks = 10\n    const howManySoldiersBeforeAttack = 5\n\n    console.log('%c ----Step started', styleLogInfo1)\n\n    console.log(\n      `%c Age: ${this.age}, Wood: ${this.wood}, Food: ${this.food}, Stone: ${this.stone}, Gold: ${this.gold}, Population: ${this.population}/${this.POPULATION_MAX}`,\n      styleLogInfo2\n    )\n\n    const filterUnitsByType = (type, condition = unit => unit.hitPoints > 0) =>\n      this.units.filter(unit => unit.type === type && condition(unit))\n\n    const villagers = filterUnitsByType('Villager')\n    const clubmans = filterUnitsByType('Clubman')\n\n    console.log(\n      `%c Villagers: ${villagers.length}/${maxVillagers}, Clubmans: ${clubmans.length}/${maxClubmans}`,\n      styleLogInfo2\n    )\n\n    const towncenters = this.buildingsByTypes(['TownCenter'])\n    const storagepits = this.buildingsByTypes(['StoragePit'])\n    const houses = this.buildingsByTypes(['House'])\n    const granarys = this.buildingsByTypes(['Granary'])\n    const barracks = this.buildingsByTypes(['Barracks'])\n    const markets = this.buildingsByTypes(['Market'])\n    const farms = this.buildingsByTypes(['Farm'])\n    const emptyFarms = farms.filter(({ isUsedBy }) => !isUsedBy)\n\n    console.log(\n      `%c Towncenters: ${towncenters.length}, Houses: ${houses.length}, StoragePits: ${storagepits.length}, Granaries: ${granarys.length}, Barracks: ${barracks.length}, Markets: ${markets}`,\n      styleLogInfo2\n    )\n\n    const notBuiltBuildings = this.buildings.filter(\n      b => !b.isBuilt || (b.hitPoints > 0 && b.hitPoints < b.totalHitPoints)\n    )\n    const notBuiltHouses = notBuiltBuildings.filter(b => b.type === 'House')\n\n    const villagersByWork = works => villagers.filter(v => !v.inactif && works.includes(v.work))\n    const inactifVillagers = villagers.filter(v => v.inactif && v.action !== 'attack')\n\n    const villagersOnWood = villagersByWork(['woodcutter'])\n    const villagersOnFood = villagersByWork(['forager', 'farmer', 'hunter'])\n    const villagersOnGold = villagersByWork(['goldminer'])\n    const villagersOnStone = villagersByWork(['stoneminer'])\n    const builderVillagers = villagersByWork(['builder'])\n\n    const maxVillagersOnWood = getValuePercentage(villagers.length, this.villageTargetPercentageByAge[this.age]['wood'])\n    const maxVillagersOnFood = getValuePercentage(villagers.length, this.villageTargetPercentageByAge[this.age]['food'])\n    const maxVillagersOnGold = getValuePercentage(villagers.length, this.villageTargetPercentageByAge[this.age]['gold'])\n    const maxVillagersOnStone = getValuePercentage(\n      villagers.length,\n      this.villageTargetPercentageByAge[this.age]['stone']\n    )\n\n    console.log(\n      `%c Villagers on Wood: ${villagersOnWood.length}/${maxVillagersOnWood}, Villagers on Food: ${villagersOnFood.length}/${maxVillagersOnFood}, Villagers on Stone: ${villagersOnStone.length}/${maxVillagersOnStone}, Villagers on Gold: ${villagersOnGold.length}/${maxVillagersOnGold}, Builder Villagers: ${builderVillagers.length}`,\n      styleLogInfo2\n    )\n\n    const inactifClubmans = clubmans.filter(c => c.inactif && c.action !== 'attack' && c.assault)\n    const waitingClubmans = clubmans.filter(c => c.inactif && c.action !== 'attack' && !c.assault)\n\n    console.log(\n      `%c Inactif Clubmans: ${inactifClubmans.length}, Waiting Clubmans: ${waitingClubmans.length}`,\n      styleLogInfo2\n    )\n\n    // Player losing condition\n    if (!this.buildings.length && !this.units.length) {\n      console.log('Player has no buildings and units. Dying...')\n      this.die()\n      return\n    }\n\n    // Cell Viewing Logic\n    if (this.cellViewed <= map.totalCells) {\n      getCellsAroundPoint(this.i, this.j, this.views, this.distSpread, cell => {\n        const globalCell = map.grid[cell.i][cell.j]\n        cell.has = globalCell.has\n        if (globalCell.has) {\n          const { has } = globalCell\n          if (has.quantity > 0) {\n            if (has.type === 'Tree' && !this.foundedTrees.includes(has)) {\n              this.foundedTrees.push(has)\n            }\n            if (has.type === 'Berrybush' && !this.foundedBerrybushs.includes(has)) {\n              this.foundedBerrybushs.push(has)\n            }\n            if (has.type === 'Stone' && !this.foundedStones.includes(has)) {\n              this.foundedStones.push(has)\n            }\n            if (has.type === 'Gold' && !this.foundedGolds.includes(has)) {\n              this.foundedGolds.push(has)\n            }\n          }\n          if (has.family === 'building' && has.owner.name !== this.name && !this.foundedEnemyBuildings.includes(has)) {\n            this.foundedEnemyBuildings.push(has)\n          }\n        }\n        if (!cell.viewed) {\n          this.cellViewed++\n          cell.viewed = true\n        }\n      })\n      this.distSpread++\n    }\n\n    // Utility function to assign villagers to resources\n    const assignVillagersToResource = (villagers, resourceList, maxVillagers, actionCallback) => {\n      if (resourceList.length) {\n        if (villagers.length < maxVillagers) {\n          for (let i = 0; i < Math.min(maxVillagers, inactifVillagers.length); i++) {\n            const resource = getClosestInstance(inactifVillagers[i], resourceList)\n            actionCallback(inactifVillagers[i], resource)\n          }\n        } else {\n          for (let i = 0; i < villagers.length - maxVillagers; i++) {\n            villagers[i].stop()\n          }\n        }\n      } else {\n        for (let i = 0; i < villagers.length; i++) {\n          villagers[i].stop()\n        }\n      }\n    }\n\n    // Food Gathering Logic\n    assignVillagersToResource(villagersOnFood, this.foundedBerrybushs, maxVillagersOnFood, (villager, bush) => {\n      villager.sendToBerrybush(bush)\n    })\n\n    // Wood Gathering Logic\n    assignVillagersToResource(villagersOnWood, this.foundedTrees, maxVillagersOnWood, (villager, tree) => {\n      villager.sendToTree(tree)\n    })\n\n    // Stone Gathering Logic\n    assignVillagersToResource(villagersOnStone, this.foundedStones, maxVillagersOnStone, (villager, stone) => {\n      villager.sendToStone(stone)\n    })\n\n    // Gold Gathering Logic\n    assignVillagersToResource(villagersOnGold, this.foundedGolds, maxVillagersOnGold, (villager, gold) => {\n      villager.sendToGold(gold)\n    })\n\n    for (let i = 0; i < emptyFarms.length; i++) {\n      const villager = getClosestInstance(emptyFarms[i], inactifVillagers)\n      villager && villager.sendToFarm(emptyFarms[i])\n    }\n\n    // Construction Logic\n    if (notBuiltBuildings.length) {\n      for (const building of notBuiltBuildings) {\n        if (builderVillagers.length >= maxVillagersOnConstruction) break\n        const availableVillagers = villagers.filter(v => v.work !== 'builder' || v.inactif)\n        const villager = getClosestInstance(building, availableVillagers)\n        if (villager) {\n          console.log('Villager sent to build:', building)\n          villager.sendToBuilding(building)\n        }\n      }\n    }\n\n    // Attack Logic\n    const sendToAttack = (clubmans, target) => {\n      console.log('Sending clubmans to attack:', target)\n      clubmans.forEach(clubman => clubman.sendTo(target, 'attack'))\n    }\n\n    if (waitingClubmans.length >= howManySoldiersBeforeAttack) {\n      const target =\n        this.foundedEnemyBuildings[0] ||\n        map.grid[randomRange(0, map.grid.length - 1)][randomRange(0, map.grid[0].length - 1)]\n      console.log('Clubman attack target:', target)\n      sendToAttack(waitingClubmans, target)\n    }\n\n    if (inactifClubmans.length && this.foundedEnemyBuildings.length) {\n      console.log('Inactif clubmans attacking founded enemy building...')\n      sendToAttack(inactifClubmans, this.foundedEnemyBuildings[0])\n    }\n\n    // Unit Purchasing Logic\n    const buyUnits = (currentCount, maxCount, buildingList, unitType, extra) => {\n      // Calculate how many more units can be bought\n      const unitsNeeded = maxCount - currentCount\n      let unitsBought = 0\n\n      if (unitsNeeded <= 0) {\n        return\n      }\n      // Iterate over the buildings until we reach the needed count\n      for (const building of buildingList) {\n        if (unitsBought >= unitsNeeded) break // Stop if we've bought enough units\n\n        if (building && building.buyUnit(unitType, false, false, extra)) {\n          unitsBought++\n          console.log(`Buying ${unitType} from ${building.type}, Total Bought: ${unitsBought}`)\n        }\n      }\n    }\n\n    buyUnits(villagers.length, maxVillagers, towncenters, 'Villager')\n    buyUnits(clubmans.length, maxClubmans, barracks, 'Clubman')\n\n    // Building Purchasing Logic\n    const buyBuildingIfNeeded = (condition, buildingType, positionCallback) => {\n      const list = {\n        House: houses,\n        Farm: farms,\n        Barracks: barracks,\n        Granary: granarys,\n        StoragePit: storagepits,\n        Market: markets,\n      }\n      const building = this.config.buildings[buildingType]\n      if (\n        condition &&\n        canAfford(this, building.cost) &&\n        this.hasNotReachBuildingLimit(buildingType, list[buildingType])\n      ) {\n        const pos = positionCallback()\n        if (pos && this.buyBuilding(pos.i, pos.j, buildingType)) {\n          console.log(`Buying building: ${buildingType} at position:`, pos)\n        }\n      }\n    }\n\n    // Buy House\n    buyBuildingIfNeeded(this.population + 2 > this.POPULATION_MAX && !notBuiltHouses.length, 'House', () =>\n      getPositionInGridAroundInstance(towncenters[0], map.grid, [6, 10], 0)\n    )\n\n    // Buy Barracks\n    buyBuildingIfNeeded(villagers.length > howManyVillagerBeforeBuyingABarracks, 'Barracks', () =>\n      getPositionInGridAroundInstance(towncenters[0], map.grid, [6, 20], 1, false, cell =>\n        this.otherPlayers().every(\n          player => instancesDistance(cell, player) <= instancesDistance(towncenters[0], player)\n        )\n      )\n    )\n\n    // Buy Markets\n    buyBuildingIfNeeded(markets.length === 0, 'Market', () =>\n      getPositionInGridAroundInstance(towncenters[0], map.grid, [6, 20], 1, false, cell =>\n        this.otherPlayers().every(\n          player => instancesDistance(cell, player) <= instancesDistance(towncenters[0], player)\n        )\n      )\n    )\n\n    // Buy Farm\n    buyBuildingIfNeeded(true, 'Farm', () => {\n      const buildings = [...granarys, ...towncenters] // Combine both granarys and towncenters\n\n      for (const building of buildings) {\n        // Try to find a valid position around each building\n        const position = getPositionInGridAroundInstance(\n          building,\n          map.grid,\n          [2, 10],\n          2,\n          false,\n          cell =>\n            this.otherPlayers().every(player => instancesDistance(cell, player) <= instancesDistance(building, player)),\n          false\n        )\n\n        if (position) {\n          return position // If a valid position is found, return and break the loop\n        }\n      }\n\n      return null // If no valid position is found after looping through all buildings\n    })\n\n    // Unit Purchasing Logic\n    const buyTechnology = (buildingList, technologyType) => {\n      // Iterate over the buildings until we reach the needed count\n      for (const building of buildingList) {\n        if (building && building.buyTechnology(technologyType)) {\n          console.log(`Buying ${technologyType} from ${building.type}`)\n        }\n      }\n    }\n    if (this.nextAge[this.age + 1]) {\n      buyTechnology(towncenters, this.nextAge[this.age + 1])\n    }\n\n    console.log('%c ----Step ended', styleLogInfo1)\n  }\n\n  die() {\n    const {\n      context: { players },\n    } = this\n    clearInterval(this.interval)\n    players.splice(players.indexOf(this), 1)\n  }\n}\n","import { sound } from '@pixi/sound'\nimport { Container, Assets, AnimatedSprite, Graphics } from 'pixi.js'\nimport { ACCELERATOR, STEP_TIME, CORPSE_TIME, COLOR_WHITE } from '../constants'\nimport {\n  getInstanceZIndex,\n  randomRange,\n  renderCellOnInstanceSight,\n  getIconPath,\n  getInstancePath,\n  instancesDistance,\n  moveTowardPoint,\n  clearCellOnInstanceSight,\n  getInstanceClosestFreeCellPath,\n  instanceContactInstance,\n  getInstanceDegree,\n  drawInstanceBlinkingSelection,\n  findInstancesInSight,\n  getClosestInstanceWithPath,\n  getCellsAroundPoint,\n  instanceIsInPlayerSight,\n  getActionCondition,\n  pointsDistance,\n  getHitPointsWithDamage,\n  uuidv4,\n  CustomTimeout,\n  setUnitTexture,\n} from '../lib'\n\nexport class Animal extends Container {\n  constructor(options, context) {\n    super()\n\n    this.context = context\n\n    const {\n      context: { map },\n    } = this\n    this.name = uuidv4()\n    this.family = 'animal'\n\n    this.dest = null\n    this.realDest = null\n    this.previousDest = null\n    this.path = []\n    this.selected = false\n    this.degree = randomRange(1, 360)\n    this.action = null\n    this.currentFrame = 0\n    this.currentSheet = 'standingSheet'\n    this.inactif = true\n    this.isDead = false\n    this.isDestroyed = false\n    this.timeout\n    this.x = null\n    this.y = null\n    this.z = null\n\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n    Object.keys(this.owner.config.animals[this.type]).forEach(prop => {\n      this[prop] = this.owner.config.animals[this.type][prop]\n    })\n\n    this.size = 1\n    this.visible = false\n    this.x = this.x ?? map.grid[this.i][this.j].x\n    this.y = this.y ?? map.grid[this.i][this.j].y\n    this.z = this.z ?? map.grid[this.i][this.j].z\n    this.zIndex = getInstanceZIndex(this)\n\n    this.currentCell = map.grid[this.i][this.j]\n    this.currentCell.has = this\n    this.currentCell.solid = true\n\n    this.hitPoints = this.hitPoints ?? this.totalHitPoints\n    this.quantity = this.quantity ?? this.totalQuantity\n\n    for (const [key, value] of Object.entries(this.assets)) {\n      this[key] = Assets.cache.get(value)\n    }\n\n    this.interface = {\n      info: element => {\n        const data = this.owner.config.animals[this.type]\n        this.setDefaultInterface(element, data)\n      },\n    }\n\n    this.allowMove = false\n    this.eventMode = 'static'\n    this.sprite = new AnimatedSprite(this.standingSheet.animations['south'])\n    this.sprite.name = 'sprite'\n    this.sprite.allowMove = false\n    this.sprite.eventMode = 'auto'\n    this.sprite.allowClick = false\n    this.sprite.roundPixels = true\n    this.sprite.loop = this.loop ?? true\n    if (this.isDead) {\n      this.currentSheet === 'corpseSheet' ? this.decompose() : this.death()\n    } else {\n      this.setTextures(this.currentSheet)\n    }\n    this.sprite.currentFrame = this.currentFrame\n\n    this.on('pointerup', evt => {\n      const {\n        context: { controls, player, menu },\n      } = this\n      if (controls.mouseBuilding || controls.mouseRectangle || !controls.isMouseInApp(evt)) {\n        return\n      }\n      controls.mouse.prevent = true\n      let drawDestinationRectangle = false\n      let hasSentVillager = false\n      let hasSentOther = false\n\n      if (player.selectedUnits.length) {\n        for (let i = 0; i < player.selectedUnits.length; i++) {\n          const playerUnit = player.selectedUnits[i]\n          if (playerUnit.type === 'Villager') {\n            if (getActionCondition(playerUnit, this, 'hunt')) {\n              playerUnit.sendToHunt(this)\n              hasSentVillager = true\n              drawDestinationRectangle = true\n            } else if (getActionCondition(playerUnit, this, 'takemeat')) {\n              playerUnit.sendToTakeMeat(this)\n              hasSentVillager = true\n              drawDestinationRectangle = true\n            }\n          } else if (getActionCondition(playerUnit, this, 'attack')) {\n            playerUnit.sendTo(this, 'attack')\n            drawDestinationRectangle = true\n            hasSentOther = true\n          }\n        }\n      } else if (player.selectedBuilding && player.selectedBuilding.range) {\n        if (\n          getActionCondition(player.selectedBuilding, this, 'attack') &&\n          instancesDistance(player.selectedBuilding, this) <= player.selectedBuilding.range\n        ) {\n          player.selectedBuilding.attackAction(this)\n          drawDestinationRectangle = true\n        }\n      } else if ((instanceIsInPlayerSight(this, player) || map.revealEverything) && this.quantity > 0) {\n        player.unselectAll()\n        this.select()\n        menu.setBottombar(this)\n        player.selectedOther = this\n      }\n\n      if (hasSentOther) {\n        const voice = randomItem(['5075', '5076', '5128', '5164'])\n        sound.play(voice)\n      } else if (hasSentVillager) {\n        const voice = Assets.cache.get('config').units.Villager.sounds.hunt\n        sound.play(voice)\n      }\n      if (drawDestinationRectangle) {\n        drawInstanceBlinkingSelection(this)\n      }\n    })\n\n    this.interval = null\n    this.sprite.updateAnchor = true\n    this.addChild(this.sprite)\n\n    renderCellOnInstanceSight(this)\n  }\n\n  startInterval(callback, time, immediate = true) {\n    const finalCb = () => {\n      const { paused } = this.context\n      if (paused) {\n        return\n      }\n      callback()\n    }\n    this.stopInterval()\n    immediate && finalCb()\n    this.interval = setInterval(finalCb, time)\n  }\n\n  stopInterval() {\n    if (this.interval) {\n      clearInterval(this.interval)\n      this.interval = null\n    }\n  }\n\n  select() {\n    if (this.selected) {\n      return\n    }\n\n    this.selected = true\n    const selection = new Graphics()\n    selection.name = 'selection'\n    selection.zIndex = 3\n    const path = [-32 * 0.5, 0, 0, -16 * 0.5, 32 * 0.5, 0, 0, 16 * 0.5]\n    selection.poly(path)\n    selection.stroke(COLOR_WHITE)\n    this.addChildAt(selection, 0)\n  }\n\n  unselect() {\n    if (!this.selected) {\n      return\n    }\n\n    this.selected = false\n    const selection = this.getChildByName('selection')\n    if (selection) {\n      this.removeChild(selection)\n    }\n  }\n\n  hasPath() {\n    return this.path.length > 0\n  }\n\n  setDest(dest) {\n    if (!dest) {\n      this.stop()\n      return\n    }\n    this.dest = dest\n    this.realDest = {\n      i: dest.i,\n      j: dest.j,\n    }\n  }\n\n  pause() {\n    this.timeout?.pause()\n    this.sprite?.stop()\n  }\n\n  resume() {\n    this.timeout?.resume()\n    this.sprite?.play()\n  }\n\n  setPath(path) {\n    if (!path.length) {\n      this.stop()\n      return\n    }\n\n    this.setTextures('walkingSheet')\n    this.inactif = false\n    this.path = path\n    this.startInterval(() => this.step(), STEP_TIME, true)\n  }\n\n  isAnimalAtDest(action, dest) {\n    if (!action) {\n      return false\n    }\n    if (!dest) {\n      this.affectNewDest()\n      return false\n    }\n    return instanceContactInstance(this, dest)\n  }\n\n  sendTo(dest, action) {\n    const {\n      context: { map },\n    } = this\n    this.stopInterval()\n    let path = []\n    // No instance we cancel the destination\n    if (!dest) {\n      this.stop()\n      return\n    }\n    // Animal is already beside our target\n    if (\n      this.isAnimalAtDest(action, dest) &&\n      (!map.grid[this.i][this.j].solid ||\n        (map.grid[this.i][this.j].solid && map.grid[this.i][this.j].has?.name === this.name))\n    ) {\n      this.setDest(dest)\n      this.action = action\n      this.degree = getInstanceDegree(this, dest.x, dest.y)\n      this.getAction(action)\n      return\n    }\n    // Set animal path\n    if (map.grid[dest.i] && map.grid[dest.i][dest.j] && map.grid[dest.i][dest.j].solid) {\n      path = getInstanceClosestFreeCellPath(this, dest, map)\n    } else {\n      path = getInstancePath(this, dest.i, dest.j, map)\n    }\n    // Animal found a path, set the action and play walking animation\n    if (path.length) {\n      this.setDest(dest)\n      this.action = action\n      this.setPath(path)\n    } else {\n      this.stop()\n    }\n  }\n\n  getActionCondition(target) {\n    return getActionCondition(this, target, this.action)\n  }\n\n  getAction(name) {\n    const {\n      context: { menu, player },\n    } = this\n    switch (name) {\n      case 'attack':\n        if (!this.getActionCondition(this.dest)) {\n          this.affectNewDest()\n          return\n        }\n        this.setTextures('actionSheet')\n        this.startInterval(\n          () => {\n            if (!this.getActionCondition(this.dest)) {\n              if (this.dest && this.dest.hitPoints <= 0) {\n                this.dest.die()\n              }\n              this.affectNewDest()\n              return\n            }\n            if (this.destHasMoved()) {\n              this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n              this.setTextures('actionSheet')\n            }\n            if (!instanceContactInstance(this, this.dest)) {\n              this.sendTo(this.dest, 'attack')\n              return\n            }\n\n            this.sounds && this.sounds.hit && this.visible && sound.play(this.sounds.hit)\n\n            if (this.dest.hitPoints > 0) {\n              this.dest.hitPoints = getHitPointsWithDamage(this, this.dest)\n              if (\n                this.dest.selected &&\n                player &&\n                (player.selectedUnit === this.dest || player.selectedBuilding === this.dest)\n              ) {\n                menu.updateInfo('hitPoints', this.dest.hitPoints + '/' + this.dest.totalHitPoints)\n              }\n              this.dest.isAttacked(this)\n            }\n\n            if (this.dest.hitPoints <= 0) {\n              this.dest.die()\n              this.affectNewDest()\n            }\n          },\n          this.rateOfFire * 1000,\n          false\n        )\n        break\n      default:\n        this.stop()\n    }\n  }\n\n  affectNewDest() {\n    this.stopInterval()\n    const targets = findInstancesInSight(this, instance => this.getActionCondition(instance))\n    if (targets.length) {\n      const target = getClosestInstanceWithPath(this, targets)\n      if (target) {\n        if (instanceContactInstance(this, target)) {\n          this.degree = getInstanceDegree(this, target.x, target.y)\n          this.getAction(this.action)\n          return\n        }\n        this.setDest(target.instance)\n        this.setPath(target.path)\n        return\n      }\n    }\n    this.stop()\n    return\n  }\n\n  destHasMoved() {\n    return (\n      (this.dest.i !== this.realDest.i || this.dest.j !== this.realDest.j) &&\n      instancesDistance(this, this.dest) <= this.sight\n    )\n  }\n\n  moveToPath() {\n    const {\n      context: { map },\n    } = this\n    const next = this.path[this.path.length - 1]\n    const nextCell = map.grid[next.i][next.j]\n    if (!this.dest || this.dest.isDestroyed) {\n      this.affectNewDest()\n      return\n    }\n    // Collision with another walking unit, we block the mouvement\n    if (\n      nextCell.has &&\n      nextCell.has.family === 'animal' &&\n      nextCell.has.name !== this.name &&\n      nextCell.has.hasPath() &&\n      instancesDistance(this, nextCell.has) <= 1 &&\n      nextCell.has.sprite.playing\n    ) {\n      this.sprite.stop()\n      return\n    }\n    if (nextCell.solid && this.dest) {\n      this.sendTo(this.dest, this.action)\n      return\n    }\n\n    if (!this.sprite.playing) {\n      this.sprite.play()\n    }\n\n    this.zIndex = getInstanceZIndex(this)\n    if (instancesDistance(this, nextCell, false) < this.speed) {\n      clearCellOnInstanceSight(this)\n\n      this.z = nextCell.z\n      this.i = nextCell.i\n      this.j = nextCell.j\n\n      if (this.currentCell.has === this) {\n        this.currentCell.has = null\n        this.currentCell.solid = false\n      }\n      this.currentCell = map.grid[this.i][this.j]\n      if (this.currentCell.has === null) {\n        this.currentCell.has = this\n        this.currentCell.solid = true\n      }\n\n      renderCellOnInstanceSight(this)\n      this.path.pop()\n\n      // Destination moved\n      if (this.destHasMoved()) {\n        this.sendTo(this.dest, this.action)\n        return\n      }\n      if (this.isAnimalAtDest(this.action, this.dest)) {\n        this.path = []\n        this.stopInterval()\n        this.degree = getInstanceDegree(this, this.dest.x, this.dest.y)\n        this.getAction(this.action)\n        return\n      }\n\n      if (!this.path.length) {\n        this.stop()\n      }\n    } else {\n      // Move to next\n      const oldDeg = this.degree\n      moveTowardPoint(this, nextCell.x, nextCell.y, this.speed)\n      if (degreeToDirection(oldDeg) !== degreeToDirection(this.degree)) {\n        // Change animation according to degree\n        this.setTextures('walkingSheet')\n      }\n    }\n  }\n\n  getReaction(instance) {\n    if (this.strategy === 'runaway') {\n      this.runaway(instance)\n    } else {\n      this.sendTo(instance, 'attack')\n    }\n  }\n\n  detect(instance) {\n    if (this.strategy && instance && instance.family === 'unit' && !this.isDead && !this.path.length && !this.dest) {\n      this.getReaction(instance)\n    }\n  }\n\n  isAttacked(instance) {\n    if (!instance || this.dest || this.isDead) {\n      return\n    }\n    this.getReaction(instance)\n  }\n\n  stop() {\n    if (this.currentCell.has.name !== this.name && this.currentCell.solid) {\n      this.sendTo(this.currentCell)\n      return\n    }\n    this.inactif = true\n    this.action = null\n    this.dest = null\n    this.realDest = null\n    this.currentCell.has = this\n    this.currentCell.solid = true\n    this.path = []\n    this.stopInterval()\n    this.setTextures('standingSheet')\n  }\n\n  step() {\n    if (this.hitPoints <= 0) {\n      this.die()\n    } else if (this.hasPath()) {\n      this.moveToPath()\n    }\n  }\n\n  runaway(instance) {\n    const {\n      context: { map },\n    } = this\n    let dest = null\n    getCellsAroundPoint(this.i, this.j, map.grid, this.sight, cell => {\n      if (\n        !cell.solid &&\n        (!dest ||\n          pointsDistance(cell.i, cell.j, instance.i, instance.j) >\n            pointsDistance(dest.i, dest.j, instance.i, instance.j))\n      ) {\n        dest = this.owner.views[cell.i][cell.j]\n        return\n      }\n    })\n    if (dest) {\n      this.sendTo(dest)\n    } else {\n      this.stop()\n    }\n  }\n\n  decompose() {\n    const {\n      context: { player, menu },\n    } = this\n    this.setTextures('corpseSheet')\n    this.sprite.animationSpeed = 0\n    this.startInterval(() => {\n      if (this.quantity > 0) {\n        this.quantity--\n        if (this.selected && player.selectedOther === this) {\n          menu.updateInfo('quantity-text', this.quantity)\n        }\n      }\n      this.updateTexture()\n    }, 5000)\n  }\n\n  death() {\n    this.setTextures('dyingSheet')\n    this.zIndex--\n    this.sprite.loop = false\n    this.sprite.onComplete = () => {\n      this.decompose()\n    }\n  }\n\n  die() {\n    if (this.isDead) {\n      return\n    }\n    if (this.sounds && this.visible) {\n      this.sounds.die && sound.play(this.sounds.die)\n      this.sounds.fall && sound.play(this.sounds.fall)\n    }\n    clearCellOnInstanceSight(this)\n\n    this.owner.population--\n    this.stopInterval()\n    this.isDead = true\n    this.zIndex--\n    this.path = []\n    this.action = null\n    this.death()\n  }\n\n  updateTexture() {\n    const {\n      context: { player, map },\n    } = this\n    const percentage = getPercentage(this.quantity, this.totalQuantity)\n\n    if (percentage > 25 && percentage < 50) {\n      this.sprite.currentFrame = 1\n    } else if (percentage > 0 && percentage <= 25) {\n      this.sprite.currentFrame = 2\n    } else if (percentage <= 0) {\n      this.stopInterval()\n      if (map.grid[this.i][this.j].has === this) {\n        map.grid[this.i][this.j].has = null\n        map.grid[this.i][this.j].corpses.push(this)\n        map.grid[this.i][this.j].solid = false\n      }\n      if (this.selected && player.selectedOther === this) {\n        player.unselectAll()\n      }\n      this.sprite.currentFrame = 3\n      this.timeout = new CustomTimeout(() => {\n        this.clear()\n      }, CORPSE_TIME * 1000)\n    }\n  }\n\n  clear() {\n    const {\n      context: { map },\n    } = this\n    this.isDestroyed = true\n    // Remove from map corpses\n    const corpsesIndex = map.grid[this.i][this.j].corpses.indexOf(this)\n    corpsesIndex >= 0 && map.grid[this.i][this.j].corpses.splice(corpsesIndex, 1)\n    map.removeChild(this)\n    this.destroy({ child: true, texture: true })\n  }\n\n  setTextures(sheet) {\n    setUnitTexture(sheet, this, ACCELERATOR)\n  }\n\n  setDefaultInterface(element, data) {\n    const {\n      context: { menu },\n    } = this\n\n    const civDiv = document.createElement('div')\n    civDiv.id = 'civ'\n    civDiv.textContent = ''\n    element.appendChild(civDiv)\n\n    const typeDiv = document.createElement('div')\n    typeDiv.id = 'type'\n    typeDiv.textContent = this.type\n    element.appendChild(typeDiv)\n\n    const iconImg = document.createElement('img')\n    iconImg.id = 'icon'\n    iconImg.src = getIconPath(data.icon)\n    element.appendChild(iconImg)\n\n    const hitPointsDiv = document.createElement('div')\n    hitPointsDiv.id = 'hitPoints'\n    hitPointsDiv.textContent = this.hitPoints + '/' + this.totalHitPoints\n    element.appendChild(hitPointsDiv)\n\n    const quantityDiv = document.createElement('div')\n    quantityDiv.id = 'quantity'\n    quantityDiv.className = 'resource-quantity'\n    const smallIconImg = document.createElement('img')\n    smallIconImg.src = menu.icons['food']\n    smallIconImg.className = 'resource-quantity-icon'\n    const textDiv = document.createElement('div')\n    textDiv.id = 'quantity-text'\n    textDiv.textContent = this.quantity\n    quantityDiv.appendChild(smallIconImg)\n    quantityDiv.appendChild(textDiv)\n    element.appendChild(quantityDiv)\n  }\n}\n","import { Animal } from '../animal'\nimport { Player } from './player'\n\nexport class Gaia extends Player {\n  constructor(context) {\n    super({ i: 0, j: 0, type: 'Gaia' }, context)\n  }\n  createAnimal(options) {\n    const { context } = this\n    let unit = context.map.addChild(new Animal({ ...options, owner: this }, context))\n    this.units.push(unit)\n    return unit\n  }\n}\n","import { Player } from './player'\n\nexport class Human extends Player {\n  constructor({ ...props }, context) {\n    super({ ...props, type: 'Human' }, context)\n    this.selectedUnits = []\n    this.selectedUnit = null\n    this.selectedBuilding = null\n    this.selectedOther = null\n  }\n\n  unselectUnit(unit) {\n    const {\n      context: { menu },\n    } = this\n    const index = this.selectedUnits.indexOf(unit)\n    this.selectedUnits.splice(index, 1)\n\n    if (!this.selectedUnits.length) {\n      this.selectedUnit = null\n      this.selectedUnits = []\n      menu.setBottombar()\n      return\n    }\n\n    let nextVillager\n    if (this.selectedUnit === unit) {\n      for (let i = 0; i < this.selectedUnits.length; i++) {\n        if (this.selectedUnits[i].type === 'Villager') {\n          nextVillager = this.selectedUnits[i].type\n          break\n        }\n      }\n    }\n    this.selectedUnit = nextVillager || this.selectedUnits[0]\n    menu.setBottombar(this.selectedUnit)\n  }\n\n  unselectAllUnits() {\n    const {\n      context: { menu },\n    } = this\n    for (let i = 0; i < this.selectedUnits.length; i++) {\n      this.selectedUnits[i].unselect()\n    }\n    this.selectedUnit = null\n    this.selectedUnits = []\n    menu.setBottombar()\n  }\n\n  unselectAll() {\n    if (this.selectedBuilding) {\n      this.selectedBuilding.unselect()\n      this.selectedBuilding = null\n    }\n    if (this.selectedOther) {\n      this.selectedOther.unselect()\n      this.selectedOther = null\n    }\n    this.unselectAllUnits()\n  }\n}\n","import { Container, Assets, Sprite } from 'pixi.js'\nimport {\n  randomRange,\n  formatNumber,\n  cartesianToIsometric,\n  getCellsAroundPoint,\n  instanceIsInPlayerSight,\n  instancesDistance,\n  getInstanceZIndex,\n  getBuildingAsset,\n  getTexture,\n  changeSpriteColorDirectly,\n} from '../lib'\nimport { CELL_DEPTH, COLOR_FOG, COLOR_WHITE } from '../constants'\n\nexport class Cell extends Container {\n  constructor(options, context) {\n    super()\n\n    this.context = context\n\n    const {\n      context: { map },\n    } = this\n    this.family = 'cell'\n    this.map = map\n\n    this.solid = false\n    this.visible = false\n    this.zIndex = 0\n    this.inclined = false\n    this.border = false\n    this.waterBorder = false\n    this.z = 0\n    this.viewed = false\n    this.viewBy = []\n    this.has = null\n    this.corpses = []\n    this.fogSprites = []\n\n    Object.keys(options).forEach(prop => {\n      this[prop] = options[prop]\n    })\n    Object.keys(Assets.cache.get('config').cells[this.type]).forEach(prop => {\n      this[prop] = Assets.cache.get('config').cells[this.type][prop]\n    })\n    const pos = cartesianToIsometric(this.i, this.j)\n\n    this.x = pos[0]\n    this.y = pos[1] - this.z * CELL_DEPTH\n\n    const textureName = randomItem(this.assets)\n    const resourceName = textureName.split('_')[1]\n    const textureFile = textureName + '.png'\n    const spritesheet = Assets.cache.get(resourceName)\n    const texture = spritesheet.textures[textureFile]\n    this.sprite = Sprite.from(texture)\n    this.sprite.name = 'sprite'\n    this.sprite.anchor.set(0.5, 0.5)\n    this.sprite.roundPixels = true\n    this.sprite.allowMove = false\n    this.sprite.eventMode = 'none'\n    this.sprite.allowClick = false\n    this.addChild(this.sprite)\n\n    this.fogSprites.forEach(sprite => this.addFogBuilding(...Object.values(sprite)))\n\n    this.eventMode = 'none'\n    this.allowMove = false\n    this.allowClick = false\n  }\n\n  updateVisible() {\n    const {\n      context: { map, player },\n    } = this\n\n    function updateChild(instance) {\n      if (\n        map.revealEverything ||\n        !instance.owner ||\n        instance.owner.isPlayed ||\n        instanceIsInPlayerSight(instance, player)\n      ) {\n        instance.visible = true\n      }\n    }\n\n    if (!map.revealEverything && !player.views[this.i][this.j].viewed) {\n      return\n    }\n    this.visible = true\n    if (this.has) {\n      updateChild(this.has)\n    }\n    if (this.corpses.length) {\n      for (let i = 0; i < this.corpses.length; i++) {\n        updateChild(this.corpses[i])\n      }\n    }\n  }\n\n  setDesertBorder(direction) {\n    const resourceName = '20002'\n    const { sprite: cellSprite } = this\n    const cellSpriteTextureName = cellSprite.texture.label\n    const cellSpriteIndex = cellSpriteTextureName.split('_')[0]\n    let val = {}\n    let index\n    let cpt = 0\n    for (let i = 0; i < 25; i++) {\n      val[i] = []\n      if (i < 9) {\n        val[i].push(0, 1, 2, 3)\n      } else {\n        for (let j = cpt; j < cpt + 4; j++) {\n          val[i].push(j + 4)\n        }\n        cpt += 4\n      }\n    }\n    switch (direction) {\n      case 'west':\n        index = val[cellSpriteIndex * 1][0]\n        break\n      case 'north':\n        index = val[cellSpriteIndex * 1][1]\n        break\n      case 'south':\n        index = val[cellSpriteIndex * 1][2]\n        break\n      case 'est':\n        index = val[cellSpriteIndex * 1][3]\n        break\n    }\n    const spritesheet = Assets.cache.get(resourceName)\n    const texture = spritesheet.textures[formatNumber(index) + '_' + resourceName + '.png']\n    const sprite = Sprite.from(texture)\n    sprite.direction = direction\n    sprite.anchor.set(0.5, 0.5)\n    sprite.type = 'border'\n    this.addChild(sprite)\n  }\n\n  setWaterBorder(resourceName, index) {\n    const { sprite } = this\n    const spritesheet = Assets.cache.get(resourceName)\n    const texture = spritesheet.textures[index + '_' + resourceName + '.png']\n    this.type = 'Desert'\n    this.border = true\n    this.waterBorder = true\n    if (this.has && typeof this.has.die === 'function') {\n      this.has.die(true)\n    }\n    sprite.texture = texture\n  }\n\n  setReliefBorder(index, elevation = 0) {\n    const { sprite } = this\n    const resourceName = sprite.texture.label.split('_')[1].split('.')[0]\n    const spritesheet = Assets.cache.get(resourceName)\n    const texture = spritesheet.textures[index + '_' + resourceName + '.png']\n    if (elevation) {\n      this.y -= elevation\n    }\n    this.inclined = true\n    if (this.has) {\n      this.has.zIndex = getInstanceZIndex(this.has)\n    }\n    sprite.name = 'sprite'\n    sprite.anchor.set(0.5, 0.5)\n    sprite.texture = texture\n  }\n\n  setWater() {\n    const index = formatNumber(randomRange(0, 3))\n    const resourceName = '15002'\n    const spritesheet = Assets.cache.get(resourceName)\n    this.sprite.texture = spritesheet.textures[index + '_' + resourceName + '.png']\n    this.type = 'Water'\n    this.category = 'Water'\n  }\n  fillWaterCellsAroundCell() {\n    const grid = this.parent.grid\n    if (this.type === 'Water' && !this.sprite.texture.label.includes('15002')) {\n      this.setWater()\n    }\n    getCellsAroundPoint(this.i, this.j, grid, 2, cell => {\n      if (cell.type === 'Water' && this.type === 'Water') {\n        const dist = instancesDistance(this, cell)\n        const velX = Math.round((this.i - cell.i) / dist)\n        const velY = Math.round((this.j - cell.j) / dist)\n        if (grid[cell.i + velX] && grid[cell.i + velX][cell.j + velY]) {\n          const target = grid[cell.i + velX][cell.j + velY]\n          const aside = grid[this.i + cell.i - target.i][this.j + cell.j - target.j]\n          if (target.type !== this.type && aside.type !== this.type) {\n            if (Math.floor(instancesDistance(this, cell)) === 2) {\n              cell.setWater()\n              target.setWater()\n            }\n          }\n        }\n      }\n    })\n  }\n\n  fillReliefCellsAroundCell() {\n    const grid = this.parent.grid\n    getCellsAroundPoint(this.i, this.j, grid, 2, cell => {\n      if (cell.z === this.z) {\n        const dist = instancesDistance(this, cell)\n        const velX = Math.round((this.i - cell.i) / dist)\n        const velY = Math.round((this.j - cell.j) / dist)\n        if (grid[cell.i + velX] && grid[cell.i + velX][cell.j + velY]) {\n          const target = grid[cell.i + velX][cell.j + velY]\n          const aside = grid[this.i + cell.i - target.i][this.j + cell.j - target.j]\n          if (target.z <= this.z && target.z !== this.z && aside.z !== this.z) {\n            if (Math.floor(instancesDistance(this, cell)) === 2) {\n              target.setCellLevel(target.z + 1)\n            }\n          }\n        }\n      }\n    })\n  }\n\n  setCellLevel(level, cpt = 1) {\n    if (level === 0) {\n      this.y += CELL_DEPTH\n      this.z = level\n      return\n    }\n    const grid = this.parent.grid\n    getCellsAroundPoint(this.i, this.j, grid, level - cpt, cell => {\n      if (cell.z < cpt) {\n        cell.y -= (cpt - cell.z) * CELL_DEPTH\n        cell.z = cpt\n        cell.fillReliefCellsAroundCell(grid)\n      }\n    })\n    if (cpt + 1 < level) {\n      this.setCellLevel(level, cpt + 1)\n    }\n    if (this.has) {\n      this.has.zIndex = getInstanceZIndex(this.has)\n    }\n  }\n\n  addFogBuilding(textureSheet, colorSheet, colorName) {\n    const sprite = Sprite.from(getTexture(textureSheet, Assets))\n    sprite.name = 'buildingFog'\n    sprite.tint = COLOR_FOG\n    sprite.anchor.set(sprite.texture.defaultAnchor.x, sprite.texture.defaultAnchor.y)\n    this.addChild(sprite)\n    this.fogSprites.push({ sprite, textureSheet, colorSheet, colorName })\n    if (colorSheet) {\n      const spriteColor = Sprite.from(getTexture(colorSheet, Assets))\n      spriteColor.name = 'buildingColorFog'\n      spriteColor.tint = COLOR_FOG\n      changeSpriteColorDirectly(spriteColor, colorName)\n      this.addChild(spriteColor)\n      this.fogSprites.push({ sprite: spriteColor, textureSheet, colorSheet, colorName })\n    } else {\n      changeSpriteColorDirectly(sprite, colorName)\n    }\n    this.zIndex = 100\n  }\n\n  removeFogBuilding(instance) {\n    const { map } = this.context\n    if (instance.owner && !instance.owner.isPlayed && instance.family === 'building') {\n      let i = 0\n      const localCell = map.grid[instance.i][instance.j]\n      while (i < localCell.fogSprites.length) {\n        if (localCell.fogSprites[i]) {\n          localCell.fogSprites[i].sprite?.destroy() // Destroy the sprite\n          localCell.fogSprites.splice(i, 1) // Remove the destroyed sprite from the array\n        } else {\n          i++ // Only increment if no sprite is destroyed, to avoid skipping elements\n        }\n      }\n    }\n  }\n\n  setFogChildren(instance, init) {\n    const { player, map } = this.context\n    if (!instanceIsInPlayerSight(instance, player)) {\n      if (instance.owner && !instance.owner.isPlayed) {\n        if (!init && instance.family === 'building') {\n          const assets = getBuildingAsset(instance.type, instance.owner, Assets)\n          const localCell = map.grid[instance.i][instance.j]\n          localCell.addFogBuilding(assets.images.final, assets.images.color, instance.owner.color)\n        }\n        instance.visible = false\n      } else {\n        for (let i = 0; i < instance.children.length; i++) {\n          if (instance.children[i].tint) {\n            instance.children[i].tint = COLOR_FOG\n          }\n        }\n      }\n    }\n  }\n\n  setFog(init) {\n    if (this.has) {\n      this.setFogChildren(this.has, init)\n    }\n    for (let i = 0; i < this.children.length; i++) {\n      if (this.children[i].tint) {\n        this.children[i].tint = COLOR_FOG\n      }\n    }\n    if (this.corpses.length) {\n      for (let i = 0; i < this.corpses.length; i++) {\n        this.setFogChildren(this.corpses[i], init)\n      }\n    }\n  }\n\n  removeFog() {\n    const {\n      context: { controls },\n    } = this\n    function setRemoveChildren(instance) {\n      if (controls.instanceInCamera(instance)) {\n        instance.visible = true\n      }\n      for (let i = 0; i < instance.children.length; i++) {\n        if (instance.children[i].tint) {\n          instance.children[i].tint = COLOR_WHITE\n        }\n      }\n    }\n    if (!this.visible) {\n      this.visible = true\n    }\n\n    this.zIndex = 0\n    for (let i = 0; i < this.children.length; i++) {\n      if (this.children[i].tint) {\n        this.children[i].tint = COLOR_WHITE\n      }\n    }\n    if (this.has) {\n      this.removeFogBuilding(this.has)\n      setRemoveChildren(this.has)\n    }\n    if (this.corpses.length) {\n      for (let i = 0; i < this.corpses.length; i++) {\n        setRemoveChildren(this.corpses[i])\n      }\n    }\n  }\n}\n","import { Container, Assets, Sprite } from 'pixi.js'\nimport { Resource } from './resource'\nimport { Human, AI, Gaia } from './players'\nimport {\n  randomRange,\n  getZoneInGridWithCondition,\n  randomItem,\n  getPlainCellsAroundPoint,\n  getCellsAroundPoint,\n  colors,\n  renderCellOnInstanceSight,\n} from '../lib'\nimport { CELL_DEPTH } from '../constants'\nimport { Cell } from './cell'\n\n/**\n * \n *  Map size\t      Tiny\t      Small\t    Medium\t    Normal\t    Large\t\n    Player count\t  2\t          3\t        4\t          6\t          8\n    Dimensions\t    120×120\t    144×144 \t168×168\t    200×200\t    220×220\n */\n\nexport default class Map extends Container {\n  constructor(context) {\n    super()\n\n    this.context = context\n    this.size\n    this.reliefRange = [\n      1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2,\n      3,\n    ]\n    this.chanceOfRelief = 0.06\n    this.chanceOfSets = 0.02\n\n    this.ready = false\n    this.grid = []\n    this.sortableChildren = true\n\n    this.allTechnologies = false\n    this.noAI = false\n\n    this.devMode = false\n    this.revealEverything = true || this.devMode || false\n    this.revealTerrain = this.devMode || false\n\n    this.x = 0\n    this.y = 0\n    this.startingUnits = 3\n\n    this.playersPos = []\n    this.positionsCount = 2\n    this.gaia = null\n    this.resources = []\n\n    this.eventMode = 'auto'\n    this.allowMove = false\n    this.allowClick = false\n    this.totalCells\n  }\n\n  setCoordinate(x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  generateFromJSON({ map, players, camera, resources, animals }) {\n    const classMap = {\n      Human,\n      AI,\n    }\n    const { menu, controls } = this.context\n    this.removeChildren()\n    this.size = map.length - 1\n\n    this.gaia = new Gaia(this.context)\n\n    for (let i = 0; i <= this.size; i++) {\n      const line = map[i]\n      for (let j = 0; j <= this.size; j++) {\n        if (!this.grid[i]) {\n          this.grid[i] = []\n        }\n        const cell = line[j]\n        const newCell = new Cell({ i, j, z: cell.z, type: cell.type, fogSprites: cell.fogSprites }, this.context)\n        this.addChild(newCell)\n        this.grid[i][j] = newCell\n        if (!this.revealEverything) {\n          this.grid[i][j].setFog()\n        }\n      }\n    }\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        this.grid[i][j].fillWaterCellsAroundCell()\n      }\n    }\n    this.resources = resources.map(resource => this.addChild(new Resource(resource, this.context)))\n\n    this.formatCellsRelief()\n    this.formatCellsWaterBorder()\n    this.formatCellsDesert()\n\n    this.context.players = players.map(player => {\n      const p = new classMap[player.type](\n        {\n          ...player,\n          corpses: [],\n          buildings: [],\n          units: [],\n        },\n        this.context\n      )\n      if (player.isPlayed) {\n        this.context.player = p\n      }\n      return p\n    })\n    controls.setCamera(camera.x, camera.y, true)\n    menu.init()\n    menu.updateResourcesMiniMap()\n\n    this.context.players.forEach((player, index) => {\n      const { buildings, units, corpses } = players[index]\n      player.buildings = buildings.map(building => player.createBuilding(building))\n      player.units = units.map(unit => player.createUnit(unit))\n      player.corpses = corpses.map(unit => player.createUnit(unit))\n    })\n    animals.forEach(animal => this.gaia.createAnimal(animal))\n\n    function getDest(val, map) {\n      if (val) {\n        if (Array.isArray(val)) {\n          return val[2] ? map.getChildByName(val[2]) : map.grid[val[0]][val[1]]\n        } else {\n          return map.getChildByName(val)\n        }\n      }\n      return null\n    }\n\n    function processUnit(unit, context) {\n      if (unit.previousDest) {\n        unit.previousDest = getDest(unit.previousDest, context)\n      }\n      if (unit.dest && !unit.isDead) {\n        const dest = getDest(unit.dest, context)\n        if (dest) {\n          unit.commonSendTo ? unit.commonSendTo(dest, unit.work, unit.action, true) : unit.sendTo(dest, unit.action)\n        } else {\n          unit.stop()\n        }\n      }\n    }\n\n    this.gaia.units.forEach(animal => processUnit(animal, this))\n\n    this.context.players.forEach(player => {\n      for (let i = 0; i <= this.size; i++) {\n        const line = player.views[i]\n        for (let j = 0; j <= this.size; j++) {\n          const cell = line[j]\n          if (cell.viewed) {\n            cell.onViewed()\n          }\n          cell.viewBy = cell.viewBy.map(name => getDest(name, this)).filter(Boolean)\n          if (player.isPlayed && cell.viewed) {\n            if (!cell.viewBy.length) {\n              this.grid[i][j].setFog(true)\n            } else {\n              this.grid[i][j].removeFog()\n            }\n          }\n        }\n      }\n      player.units.forEach(unit => processUnit(unit, this))\n    })\n\n    this.ready = true\n  }\n\n  generateMap(repeat = 0) {\n    this.removeChildren()\n    this.generateCells()\n\n    switch (this.size) {\n      case 120:\n        this.positionsCount = 2\n        break\n      case 144:\n        this.positionsCount = 3\n        break\n      case 168:\n        this.positionsCount = 4\n        break\n      case 200:\n        this.positionsCount = 4\n        break\n      case 220:\n        this.positionsCount = 4\n        break\n      default:\n        this.positionsCount = 2\n    }\n\n    this.totalCells = Math.pow(this.size, 2)\n\n    this.playersPos = this.findPlayerPlaces()\n\n    if (this.playersPos.length < this.positionsCount) {\n      if (repeat >= 10) {\n        alert('Error while generating the map')\n        return\n      }\n      this.generateMap(repeat + 1)\n      return\n    }\n\n    this.generateResourcesAroundPlayers(this.playersPos)\n  }\n\n  stylishMap() {\n    const {\n      context: { menu, player },\n    } = this\n\n    this.gaia = new Gaia(this.context)\n\n    //this.generateMapRelief()\n    //this.formatCellsRelief()\n\n    this.generateSets()\n\n    if (!this.revealEverything) {\n      for (let i = 0; i <= this.size; i++) {\n        for (let j = 0; j <= this.size; j++) {\n          this.grid[i][j].setFog()\n        }\n      }\n      for (let i = 0; i < player.buildings.length; i++) {\n        const building = player.buildings[i]\n        renderCellOnInstanceSight(building)\n      }\n      for (let i = 0; i < player.units.length; i++) {\n        const unit = player.units[i]\n        renderCellOnInstanceSight(unit)\n      }\n    }\n\n    this.ready = true\n    menu.updateResourcesMiniMap()\n  }\n\n  generatePlayers() {\n    const { context } = this\n\n    const players = []\n    const poses = []\n    const randoms = Array.from(Array(this.playersPos.length).keys())\n\n    for (let i = 0; i < this.playersPos.length; i++) {\n      const pos = randomItem(randoms)\n      poses.push(pos)\n      randoms.splice(randoms.indexOf(pos), 1)\n    }\n\n    for (let i = 0; i < this.positionsCount; i++) {\n      const posI = this.playersPos[poses[i]]?.i\n      const posJ = this.playersPos[poses[i]]?.j\n      if (posI && posJ) {\n        const color = colors[i]\n        if (!i) {\n          players.push(\n            new Human(\n              {\n                i: posI,\n                j: posJ,\n                age: 0,\n                civ: 'Greek',\n                color,\n                isPlayed: true,\n              },\n              context\n            )\n          )\n        } else if (!this.noAI) {\n          players.push(new AI({ i: posI, j: posJ, age: 0, civ: 'Greek', color }, context))\n        }\n      }\n    }\n    return players\n  }\n\n  placePlayers() {\n    const {\n      context: { players },\n    } = this\n\n    // Place a town center\n    for (let i = 0; i < players.length; i++) {\n      const player = players[i]\n      const towncenter = player.spawnBuilding({ i: player.i, j: player.j, type: 'TownCenter', isBuilt: true })\n      for (let i = 0; i < this.startingUnits; i++) {\n        towncenter.placeUnit('Villager')\n      }\n    }\n  }\n\n  generateForestAroundPlayer(\n    player,\n    treeCount,\n    clusterCount = 12,\n    minClusterRadius = 5,\n    maxClusterRadius = 10,\n    safeDistance = 20,\n    clearingProbability = 0.6\n  ) {\n    const { grid } = this\n    const { i: playerI, j: playerJ } = player\n    const gridWidth = grid.length\n    const gridHeight = grid[0].length\n    const forestCells = []\n    const pathCells = new Set()\n\n    // Function to calculate the distance between two points\n    function distance(x1, y1, x2, y2) {\n      return Math.sqrt((x1 - x2) ** 2 + (y1 - y2) ** 2)\n    }\n\n    // Function to create a circle of points within a grid, checking boundaries\n    function createCircle(centerI, centerJ, radius, density = 0.7, edgeNoise = 0) {\n      const circleCells = []\n      for (let x = -radius; x <= radius; x++) {\n        for (let y = -radius; y <= radius; y++) {\n          const distFromCenter = Math.sqrt(x * x + y * y)\n          const noise = Math.random() * edgeNoise - edgeNoise / 2 // Random edge noise\n          if (distFromCenter + noise <= radius) {\n            // If within noisy circle\n            const cellI = centerI + x\n            const cellJ = centerJ + y\n            if (\n              cellI >= 0 &&\n              cellI < gridWidth && // Ensure cell is within grid bounds\n              cellJ >= 0 &&\n              cellJ < gridHeight &&\n              !grid[cellI][cellJ].solid && // Ensure the cell is not solid\n              grid[cellI][cellJ].category !== 'Water' && // Ensure not water\n              grid[cellI][cellJ].type !== 'Border' && // Ensure not border\n              !grid[cellI][cellJ].inclined && // Ensure not inclined\n              Math.random() < density // Tree density control\n            ) {\n              circleCells.push({ i: cellI, j: cellJ })\n            }\n          }\n        }\n      }\n      return circleCells\n    }\n\n    // Create forest clusters\n    for (let cluster = 0; cluster < clusterCount; cluster++) {\n      let clusterCenterI, clusterCenterJ\n      let tries = 0\n      const clusterRadius = Math.floor(Math.random() * (maxClusterRadius - minClusterRadius + 1)) + minClusterRadius // Random radius\n      const clusterDensity = Math.random() * 0.5 + 0.5 // Density between 0.5 and 1\n      const edgeNoise = Math.random() * 2 // Noise for organic shapes\n\n      // Ensure the cluster is far from the player and within bounds\n      do {\n        clusterCenterI = playerI + Math.floor(Math.random() * 60 - 30) // Random offset\n        clusterCenterJ = playerJ + Math.floor(Math.random() * 60 - 30)\n        tries++\n        if (tries > 100) break // Safety exit\n      } while (\n        distance(clusterCenterI, clusterCenterJ, playerI, playerJ) < safeDistance ||\n        clusterCenterI < 0 ||\n        clusterCenterI >= gridWidth ||\n        clusterCenterJ < 0 ||\n        clusterCenterJ >= gridHeight || // Stay within grid bounds\n        grid[clusterCenterI][clusterCenterJ].category === 'Water' || // Avoid water cells\n        grid[clusterCenterI][clusterCenterJ].solid || // Avoid solid cells\n        grid[clusterCenterI][clusterCenterJ].inclined // Avoid inclined cells\n      )\n\n      if (tries <= 100) {\n        const treeCluster = createCircle(clusterCenterI, clusterCenterJ, clusterRadius, clusterDensity, edgeNoise)\n        treeCluster.forEach(cell => forestCells.push(cell))\n      }\n    }\n\n    // Scattered solo trees (20% of total trees)\n    const scatteredTreeCount = Math.floor(treeCount * 0.2)\n    for (let i = 0; i < scatteredTreeCount; i++) {\n      let soloI, soloJ\n      let tries = 0\n\n      do {\n        soloI = playerI + Math.floor(Math.random() * 60 - 30) // Random offset within [-30, 30]\n        soloJ = playerJ + Math.floor(Math.random() * 60 - 30)\n        tries++\n        if (tries > 50) break // Safety exit to avoid infinite loop\n      } while (\n        distance(soloI, soloJ, playerI, playerJ) < safeDistance ||\n        soloI < 0 ||\n        soloI >= gridWidth ||\n        soloJ < 0 ||\n        soloJ >= gridHeight || // Stay within grid bounds\n        grid[soloI][soloJ].category === 'Water' || // Avoid water cells\n        grid[soloI][soloJ].solid || // Avoid solid cells\n        grid[soloI][soloJ].inclined // Avoid inclined cells\n      )\n\n      if (tries <= 50) {\n        forestCells.push({ i: soloI, j: soloJ })\n      }\n    }\n\n    // Generate random clearings based on clearingProbability\n    for (let clearing = 0; clearing < clusterCount; clearing++) {\n      if (Math.random() < clearingProbability) {\n        let clearingCenterI, clearingCenterJ\n        let tries = 0\n        const clearingRadius = Math.floor(Math.random() * 8) + 5 // Random clearing radius between 5 and 13\n        const edgeNoise = Math.random() * 1.5\n\n        do {\n          clearingCenterI = playerI + Math.floor(Math.random() * 60 - 30) // Random offset\n          clearingCenterJ = playerJ + Math.floor(Math.random() * 60 - 30)\n          tries++\n          if (tries > 100) break\n        } while (\n          distance(clearingCenterI, clearingCenterJ, playerI, playerJ) < safeDistance ||\n          clearingCenterI < 0 ||\n          clearingCenterI >= gridWidth ||\n          clearingCenterJ < 0 ||\n          clearingCenterJ >= gridHeight || // Stay within grid bounds\n          grid[clearingCenterI][clearingCenterJ].category === 'Water' || // Avoid water cells\n          grid[clearingCenterI][clearingCenterJ].solid || // Avoid solid cells\n          grid[clearingCenterI][clearingCenterJ].inclined // Avoid inclined cells\n        )\n\n        if (tries <= 100) {\n          const clearingCells = createCircle(clearingCenterI, clearingCenterJ, clearingRadius, 0, edgeNoise)\n          clearingCells.forEach(clearedCell => {\n            const index = forestCells.findIndex(cell => cell.i === clearedCell.i && cell.j === clearedCell.j)\n            if (index > -1) {\n              forestCells.splice(index, 1) // Remove tree from clearing\n            }\n          })\n        }\n      }\n    }\n\n    // Generate diagonal paths\n    const pathLength = 20\n    const pathDirection = Math.random() > 0.5 ? 1 : -1 // Random path direction\n\n    for (let step = 0; step < pathLength; step++) {\n      let offsetX, offsetY\n      let tries = 0\n\n      do {\n        offsetX = step * pathDirection\n        offsetY = step\n        tries++\n        if (tries > 50) break\n      } while (\n        distance(playerI + offsetX, playerJ + offsetY, playerI, playerJ) < safeDistance ||\n        playerI + offsetX < 0 ||\n        playerI + offsetX >= gridWidth ||\n        playerJ + offsetY < 0 ||\n        playerJ + offsetY >= gridHeight\n      )\n\n      if (tries <= 50) {\n        const randOffsetX = Math.random() > 0.5 ? 1 : -1\n        const randOffsetY = Math.random() > 0.5 ? 1 : -1\n        pathCells.add(`${playerI + offsetX + randOffsetX},${playerJ + offsetY + randOffsetY}`)\n      }\n    }\n\n    // Remove path cells from forestCells\n    forestCells.forEach(cell => {\n      if (pathCells.has(`${cell.i},${cell.j}`)) {\n        forestCells.splice(forestCells.indexOf(cell), 1)\n      }\n    })\n\n    // Select and place trees in the forest cells\n    const cellsToPlace = []\n    for (let i = 0; i < treeCount; i++) {\n      if (forestCells.length === 0) break\n      const itemIndex = Math.floor(Math.random() * forestCells.length)\n      const cell = forestCells[itemIndex]\n      cellsToPlace.push(cell)\n      forestCells.splice(itemIndex, 1)\n    }\n\n    // Place the trees in the selected cells\n    for (const cell of cellsToPlace) {\n      // Ensure again that we're not placing trees on Water, Border, or Solid cells\n      if (\n        grid[cell.i][cell.j].category !== 'Water' &&\n        !grid[cell.i][cell.j].waterBorder &&\n        !grid[cell.i][cell.j].solid &&\n        !grid[cell.i][cell.j].inclined\n      ) {\n        let isFree = true\n        getPlainCellsAroundPoint(cell.i, cell.j, grid, 3, cell => {\n          if (['Berrybush', 'Gold', 'Stone'].includes(cell.has?.type)) {\n            isFree = false\n          }\n        })\n        isFree && this.resources.push(this.addChild(new Resource({ i: cell.i, j: cell.j, type: 'Tree' }, this.context)))\n      }\n    }\n  }\n\n  generateResourcesAroundPlayers(playersPos) {\n    for (let i = 0; i < playersPos.length; i++) {\n      this.placeResourceGroup(playersPos[i], 'Berrybush', 8, [7, 14])\n      this.placeResourceGroup(playersPos[i], 'Berrybush', 8, [14, 22])\n      this.placeResourceGroup(playersPos[i], 'Berrybush', 8, [22, 29])\n      this.placeResourceGroup(playersPos[i], 'Stone', 7, [7, 14])\n      this.placeResourceGroup(playersPos[i], 'Stone', 7, [14, 22])\n      this.placeResourceGroup(playersPos[i], 'Stone', 7, [22, 29])\n      this.placeResourceGroup(playersPos[i], 'Gold', 7, [7, 14])\n      this.placeResourceGroup(playersPos[i], 'Gold', 7, [14, 22])\n      this.placeResourceGroup(playersPos[i], 'Gold', 7, [22, 29])\n      this.generateForestAroundPlayer(playersPos[i], this.size * 4)\n    }\n  }\n\n  generateTerrain(gridSize = 120, mapModel = 'plain') {\n    const terrainMap = []\n\n    // Initialize the map with default grass (0)\n    for (let i = 0; i < gridSize; i++) {\n      terrainMap[i] = []\n      for (let j = 0; j < gridSize; j++) {\n        terrainMap[i][j] = 0 // Default to grass\n      }\n    }\n\n    // Helper function to generate terrain clusters around a point\n    function generateTerrainCluster(x, y, radius, type) {\n      for (let i = -radius; i <= radius; i++) {\n        for (let j = -radius; j <= radius; j++) {\n          const nx = x + i\n          const ny = y + j\n          if (nx >= 0 && nx < gridSize && ny >= 0 && ny < gridSize && i * i + j * j <= radius * radius) {\n            terrainMap[nx][ny] = type\n          }\n        }\n      }\n    }\n\n    // Generate water with a smoother, randomized approach\n    function generateWater() {\n      if (mapModel === 'continent') {\n        const edgeSize = 10 // Base edge size for water\n        const roundFactor = 0.15 // Controls the \"smoothness\" of the water edge\n\n        // Loop through the map and set water in a rounded pattern with random noise\n        for (let i = 0; i < gridSize; i++) {\n          for (let j = 0; j < gridSize; j++) {\n            const distFromCenter = Math.abs(i - gridSize / 2) + Math.abs(j - gridSize / 2) // Distance from center\n\n            // Add smooth water around the edges with randomized borders\n            const edgeDist = Math.min(i, j, gridSize - i, gridSize - j)\n            const randomOffset = Math.random() * 5 - 2.5 // Randomize water edge for more natural look\n\n            if (edgeDist < edgeSize + Math.sin(distFromCenter * roundFactor) * 5 + randomOffset) {\n              terrainMap[i][j] = 2 // Water\n            }\n          }\n        }\n      } else if (mapModel === 'lac') {\n        const centerX = Math.floor(gridSize / 2)\n        const centerY = Math.floor(gridSize / 2)\n        const baseRadius = Math.floor(gridSize / 4) // Base radius for the lake\n        const roundFactor = 0.6 // Adjust this for more/less rounding\n\n        // Create a lake with a smoother, randomized border\n        for (let i = -baseRadius; i <= baseRadius; i++) {\n          for (let j = -baseRadius; j <= baseRadius; j++) {\n            const nx = centerX + i\n            const ny = centerY + j\n            const distanceFromCenter = Math.sqrt(i * i + j * j)\n            const noise = Math.sin(distanceFromCenter * roundFactor) * 2 // Create smooth noise\n            const randomOffset = Math.random() * 3 - 1.5 // Add randomness to the lake shape\n\n            if (\n              nx >= 0 &&\n              nx < gridSize &&\n              ny >= 0 &&\n              ny < gridSize &&\n              distanceFromCenter < baseRadius + noise + randomOffset\n            ) {\n              terrainMap[nx][ny] = 2 // Water\n            }\n          }\n        }\n      }\n      // 'plain' model: no water, so do nothing\n    }\n\n    // Generate clusters of desert (1) and jungle (3)\n    function generateLandTerrain() {\n      // Generate desert areas (1)\n      generateClusters(1, 8, 5, 10)\n\n      // Generate jungle areas (3)\n      generateClusters(3, 10, 4, 8)\n    }\n\n    // Generic function to generate clustered terrain types\n    function generateClusters(type, clusterCount, clusterSizeMin, clusterSizeMax) {\n      for (let i = 0; i < clusterCount; i++) {\n        const clusterX = Math.floor(Math.random() * gridSize)\n        const clusterY = Math.floor(Math.random() * gridSize)\n        const radius = Math.floor(Math.random() * (clusterSizeMax - clusterSizeMin)) + clusterSizeMin\n\n        // Ensure we avoid water if generating jungle/desert in the 'lac' or 'continent' models\n        if (type !== 2 && terrainMap[clusterX][clusterY] === 2) {\n          continue // Skip if this area is water\n        }\n\n        generateTerrainCluster(clusterX, clusterY, radius, type)\n      }\n    }\n\n    // Generate water based on the map model\n    generateWater()\n\n    // Generate desert and jungle clusters\n    generateLandTerrain()\n\n    return terrainMap\n  }\n\n  generateCells() {\n    const z = 0\n    const terrain = this.generateTerrain(121)\n    this.size = terrain.length - 1\n\n    // Map terrain numbers to cell types\n    const terrainMap = {\n      0: 'Grass',\n      1: 'Desert',\n      2: 'Water',\n      3: 'Jungle',\n    }\n\n    for (let i = 0; i <= this.size; i++) {\n      if (!this.grid[i]) this.grid[i] = []\n      for (let j = 0; j <= this.size; j++) {\n        const type = terrainMap[terrain[i][j]]\n        const cell = new Cell({ i, j, z, type }, this.context)\n        this.addChild(cell) // ensures cell.parent is set\n        this.grid[i][j] = cell\n      }\n    }\n\n    // Post-processing\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        this.grid[i][j].fillWaterCellsAroundCell()\n      }\n    }\n\n    this.formatCellsWaterBorder()\n    this.formatCellsDesert()\n  }\n\n  generateSets() {\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        if (getCellsAroundPoint(i, j, this.grid, 1, neighbour => neighbour.solid).length > 0) {\n          continue\n        }\n        if (!cell.has && !cell.solid && !cell.border && !cell.inclined) {\n          if (cell.category !== 'Water' && Math.random() < 0.03 && i > 1 && j > 1 && i < this.size && j < this.size) {\n            const randomSpritesheet = randomRange(292, 301).toString()\n            const spritesheet = Assets.cache.get(randomSpritesheet)\n            const texture = spritesheet.textures['000_' + randomSpritesheet + '.png']\n            const floor = Sprite.from(texture)\n            floor.name = 'floor'\n            floor.roundPixels = true\n            floor.allowMove = false\n            floor.eventMode = 'none'\n            floor.allowClick = false\n            floor.updateAnchor = true\n            cell.addChild(floor)\n          }\n          if (Math.random() < this.chanceOfSets) {\n            if (cell.category !== 'Water') {\n              const type = randomItem(['tree', 'rock', 'animal'])\n              switch (type) {\n                case 'rock':\n                  const randomSpritesheet = randomRange(531, 534).toString()\n                  const spritesheet = Assets.cache.get(randomSpritesheet)\n                  const texture = spritesheet.textures['000_' + randomSpritesheet + '.png']\n                  const rock = Sprite.from(texture)\n                  rock.name = 'set'\n                  rock.roundPixels = true\n                  rock.allowMove = false\n                  rock.eventMode = 'none'\n                  rock.allowClick = false\n                  rock.updateAnchor = true\n                  cell.addChild(rock)\n                  break\n                case 'animal':\n                  const animals = Assets.cache.get('config').animals\n                  const type = randomItem(Object.keys(animals))\n                  this.gaia.createAnimal({ i, j, type })\n                  break\n              }\n            } else {\n              this.resources.push(this.addChild(new Resource({ i, j, type: 'Salmon' }, this.context)))\n            }\n          }\n        }\n      }\n    }\n  }\n\n  generateMapRelief() {\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        if (Math.random() < this.chanceOfRelief) {\n          const level = randomItem(this.reliefRange)\n          let canGenerate = true\n          if (\n            getPlainCellsAroundPoint(i, j, this.grid, level * 2, cell => {\n              if (cell.category === 'Water' || (cell.has && cell.has.family === 'building')) {\n                canGenerate = false\n              }\n            })\n          );\n          if (canGenerate) {\n            cell.setCellLevel(level)\n          }\n        }\n      }\n    }\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        if (cell.z === 1) {\n          let toRemove = true\n          let cpt = 0\n          if (\n            getCellsAroundPoint(i, j, this.grid, 1, cell => {\n              if (cell.z > 0) {\n                cpt++\n              }\n              if (cpt >= 3) {\n                toRemove = false\n              }\n            })\n          );\n          if (toRemove) {\n            cell.setCellLevel(0)\n          }\n        }\n      }\n    }\n    // Format cell's relief\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        cell.fillReliefCellsAroundCell()\n      }\n    }\n  }\n\n  formatCellsRelief() {\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        // Side\n        if (\n          this.grid[i - 1] &&\n          this.grid[i - 1][j].z - cell.z === 1 &&\n          (!this.grid[i + 1] || this.grid[i + 1][j].z <= cell.z) &&\n          (!this.grid[i][j - 1] || this.grid[i][j - 1].z <= cell.z) &&\n          (!this.grid[i][j + 1] || this.grid[i][j + 1].z <= cell.z)\n        ) {\n          cell.setReliefBorder('014', CELL_DEPTH / 2)\n        } else if (\n          this.grid[i + 1] &&\n          this.grid[i + 1][j].z - cell.z === 1 &&\n          (!this.grid[i - 1] || this.grid[i - 1][j].z <= cell.z) &&\n          (!this.grid[i][j - 1] || this.grid[i][j - 1].z <= cell.z) &&\n          (!this.grid[i][j + 1] || this.grid[i][j + 1].z <= cell.z)\n        ) {\n          cell.setReliefBorder('015', CELL_DEPTH / 2)\n        } else if (\n          this.grid[i][j - 1] &&\n          this.grid[i][j - 1].z - cell.z === 1 &&\n          (!this.grid[i + 1] || this.grid[i + 1][j].z <= cell.z) &&\n          (!this.grid[i][j + 1] || this.grid[i][j + 1].z <= cell.z) &&\n          (!this.grid[i - 1] || this.grid[i - 1][j].z <= cell.z)\n        ) {\n          cell.setReliefBorder('016', CELL_DEPTH / 2)\n        } else if (\n          this.grid[i][j + 1] &&\n          this.grid[i][j + 1].z - cell.z === 1 &&\n          (!this.grid[i + 1] || this.grid[i + 1][j].z <= cell.z) &&\n          (!this.grid[i][j - 1] || this.grid[i][j - 1].z <= cell.z) &&\n          (!this.grid[i - 1] || this.grid[i - 1][j].z <= cell.z)\n        ) {\n          cell.setReliefBorder('013', CELL_DEPTH / 2)\n        } // Corner\n        else if (\n          this.grid[i - 1] &&\n          this.grid[i - 1][j - 1] &&\n          this.grid[i - 1][j - 1].z - cell.z === 1 &&\n          (!this.grid[i][j - 1] || this.grid[i][j - 1].z <= cell.z) &&\n          (!this.grid[i - 1] || this.grid[i - 1][j].z <= cell.z)\n        ) {\n          cell.setReliefBorder('010', CELL_DEPTH / 2)\n        } else if (\n          this.grid[i + 1] &&\n          this.grid[i + 1][j - 1] &&\n          this.grid[i + 1][j - 1].z - cell.z === 1 &&\n          (!this.grid[i][j - 1] || this.grid[i][j - 1].z <= cell.z) &&\n          (!this.grid[i + 1] || this.grid[i + 1][j].z <= cell.z)\n        ) {\n          cell.setReliefBorder('012')\n        } else if (\n          this.grid[i - 1] &&\n          this.grid[i - 1][j + 1] &&\n          this.grid[i - 1][j + 1].z - cell.z === 1 &&\n          (!this.grid[i][j + 1] || this.grid[i][j + 1].z <= cell.z) &&\n          (!this.grid[i - 1] || this.grid[i - 1][j].z <= cell.z)\n        ) {\n          cell.setReliefBorder('011')\n        } else if (\n          this.grid[i + 1] &&\n          this.grid[i + 1][j + 1] &&\n          this.grid[i + 1][j + 1].z - cell.z === 1 &&\n          (!this.grid[i][j + 1] || this.grid[i][j + 1].z <= cell.z) &&\n          (!this.grid[i + 1] || this.grid[i + 1][j].z <= cell.z)\n        ) {\n          cell.setReliefBorder('009', CELL_DEPTH / 2)\n        }\n        // Deep corner\n        else if (\n          this.grid[i][j - 1] &&\n          this.grid[i][j - 1].z - cell.z === 1 &&\n          this.grid[i - 1] &&\n          this.grid[i - 1][j].z - cell.z === 1\n        ) {\n          cell.setReliefBorder('022', CELL_DEPTH / 2)\n        } else if (\n          this.grid[i][j + 1] &&\n          this.grid[i][j + 1].z - cell.z === 1 &&\n          this.grid[i + 1] &&\n          this.grid[i + 1][j].z - cell.z === 1\n        ) {\n          cell.setReliefBorder('021', CELL_DEPTH / 2)\n        } else if (\n          this.grid[i][j - 1] &&\n          this.grid[i][j - 1].z - cell.z === 1 &&\n          this.grid[i + 1] &&\n          this.grid[i + 1][j].z - cell.z === 1\n        ) {\n          cell.setReliefBorder('023', CELL_DEPTH)\n        } else if (\n          this.grid[i][j + 1] &&\n          this.grid[i][j + 1].z - cell.z === 1 &&\n          this.grid[i - 1] &&\n          this.grid[i - 1][j].z - cell.z === 1\n        ) {\n          cell.setReliefBorder('024', CELL_DEPTH)\n        }\n      }\n    }\n  }\n\n  formatCellsWaterBorder() {\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        if (cell.type !== 'Water') {\n          // Side\n          if (\n            this.grid[i - 1] &&\n            this.grid[i - 1][j].type === 'Water' &&\n            (!this.grid[i + 1] || this.grid[i + 1][j].type !== 'Water') &&\n            (!this.grid[i][j - 1] || this.grid[i][j - 1].type !== 'Water') &&\n            (!this.grid[i][j + 1] || this.grid[i][j + 1].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '008')\n          } else if (\n            this.grid[i + 1] &&\n            this.grid[i + 1][j].type === 'Water' &&\n            (!this.grid[i - 1] || this.grid[i - 1][j].type !== 'Water') &&\n            (!this.grid[i][j - 1] || this.grid[i][j - 1].type !== 'Water') &&\n            (!this.grid[i][j + 1] || this.grid[i][j + 1].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '009')\n          } else if (\n            this.grid[i][j - 1] &&\n            this.grid[i][j - 1].type === 'Water' &&\n            (!this.grid[i + 1] || this.grid[i + 1][j].type !== 'Water') &&\n            (!this.grid[i][j + 1] || this.grid[i][j + 1].type !== 'Water') &&\n            (!this.grid[i - 1] || this.grid[i - 1][j].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '011')\n          } else if (\n            this.grid[i][j + 1] &&\n            this.grid[i][j + 1].type === 'Water' &&\n            (!this.grid[i + 1] || this.grid[i + 1][j].type !== 'Water') &&\n            (!this.grid[i][j - 1] || this.grid[i][j - 1].type !== 'Water') &&\n            (!this.grid[i - 1] || this.grid[i - 1][j].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '010')\n          } // Corner\n          else if (\n            this.grid[i - 1] &&\n            this.grid[i - 1][j - 1] &&\n            this.grid[i - 1][j - 1].type === 'Water' &&\n            (!this.grid[i][j - 1] || this.grid[i][j - 1].type !== 'Water') &&\n            (!this.grid[i - 1] || this.grid[i - 1][j].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '005')\n          } else if (\n            this.grid[i + 1] &&\n            this.grid[i + 1][j - 1] &&\n            this.grid[i + 1][j - 1].type === 'Water' &&\n            (!this.grid[i][j - 1] || this.grid[i][j - 1].type !== 'Water') &&\n            (!this.grid[i + 1] || this.grid[i + 1][j].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '007')\n          } else if (\n            this.grid[i - 1] &&\n            this.grid[i - 1][j + 1] &&\n            this.grid[i - 1][j + 1].type === 'Water' &&\n            (!this.grid[i][j + 1] || this.grid[i][j + 1].type !== 'Water') &&\n            (!this.grid[i - 1] || this.grid[i - 1][j].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '004')\n          } else if (\n            this.grid[i + 1] &&\n            this.grid[i + 1][j + 1] &&\n            this.grid[i + 1][j + 1].type === 'Water' &&\n            (!this.grid[i][j + 1] || this.grid[i][j + 1].type !== 'Water') &&\n            (!this.grid[i + 1] || this.grid[i + 1][j].type !== 'Water')\n          ) {\n            cell.setWaterBorder('20000', '006')\n          }\n          // Deep corner\n          else if (\n            this.grid[i][j - 1] &&\n            this.grid[i][j - 1].type === 'Water' &&\n            this.grid[i - 1] &&\n            this.grid[i - 1][j].type === 'Water'\n          ) {\n            cell.setWaterBorder('20000', '001')\n          } else if (\n            this.grid[i][j + 1] &&\n            this.grid[i][j + 1].type === 'Water' &&\n            this.grid[i + 1] &&\n            this.grid[i + 1][j].type === 'Water'\n          ) {\n            cell.setWaterBorder('20000', '002')\n          } else if (\n            this.grid[i][j - 1] &&\n            this.grid[i][j - 1].type === 'Water' &&\n            this.grid[i + 1] &&\n            this.grid[i + 1][j].type === 'Water'\n          ) {\n            cell.setWaterBorder('20000', '003')\n          } else if (\n            this.grid[i][j + 1] &&\n            this.grid[i][j + 1].type === 'Water' &&\n            this.grid[i - 1] &&\n            this.grid[i - 1][j].type === 'Water'\n          ) {\n            cell.setWaterBorder('20000', '000')\n          }\n        }\n      }\n    }\n  }\n  formatCellsDesert() {\n    for (let i = 0; i <= this.size; i++) {\n      for (let j = 0; j <= this.size; j++) {\n        const cell = this.grid[i][j]\n        const typeToFormat = ['Grass', 'Jungle']\n        if (cell.type === 'Desert') {\n          if (this.grid[i - 1] && this.grid[i - 1][j] && typeToFormat.includes(this.grid[i - 1][j].type)) {\n            this.grid[i - 1][j].setDesertBorder('est')\n          }\n          if (this.grid[i + 1] && this.grid[i + 1][j] && typeToFormat.includes(this.grid[i + 1][j].type)) {\n            this.grid[i + 1][j].setDesertBorder('west')\n          }\n          if (this.grid[i][j - 1] && typeToFormat.includes(this.grid[i][j - 1].type)) {\n            this.grid[i][j - 1].setDesertBorder('south')\n          }\n          if (this.grid[i][j + 1] && typeToFormat.includes(this.grid[i][j + 1].type)) {\n            this.grid[i][j + 1].setDesertBorder('north')\n          }\n        }\n      }\n    }\n  }\n  findPlayerPlaces() {\n    const results = []\n    const outBorder = 20\n    const inBorder = Math.floor(this.size / 4)\n    const zones = [\n      {\n        minX: outBorder,\n        minY: this.size / 2 + inBorder,\n        maxX: this.size / 2 - inBorder,\n        maxY: this.size - outBorder,\n      },\n      {\n        minX: outBorder,\n        minY: outBorder,\n        maxX: this.size / 2 - inBorder,\n        maxY: this.size / 2 - inBorder,\n      },\n      {\n        minX: this.size / 2 + inBorder,\n        minY: outBorder,\n        maxX: this.size - outBorder,\n        maxY: this.size / 2 - inBorder,\n      },\n      {\n        minX: this.size / 2 + inBorder,\n        minY: this.size / 2 + inBorder,\n        maxX: this.size - outBorder,\n        maxY: this.size - outBorder,\n      },\n    ]\n    for (let i = 0; i < zones.length; i++) {\n      const pos = getZoneInGridWithCondition(zones[i], this.grid, 5, cell => {\n        return !cell.border && !cell.solid && !cell.inclined\n      })\n      if (pos) {\n        results.push(pos)\n      }\n    }\n    return results\n  }\n\n  placeResourceGroup(player, instance, quantity, range) {\n    const { context, grid } = this\n\n    // Function to get valid cells around a center point within a specific distance\n    function getValidCells(centerI, centerJ, dist) {\n      const cells = []\n      // Check surrounding cells within the specified distance\n      for (let dx = -dist; dx <= dist; dx++) {\n        for (let dy = -dist; dy <= dist; dy++) {\n          const newI = centerI + dx\n          const newJ = centerJ + dy\n\n          // Ensure the new coordinates are within the grid bounds\n          if (grid[newI] && grid[newI][newJ]) {\n            const cell = grid[newI][newJ]\n            let isFree = true\n            getPlainCellsAroundPoint(cell.i, cell.j, grid, 3, cell => {\n              if (['Berrybush', 'Gold', 'Stone'].includes(cell.has?.type)) {\n                isFree = false\n              }\n            })\n            // Check if the cell is valid\n            if (isFree && !cell.solid && cell.category !== 'Water' && !cell.has && !cell.border && !cell.inclined) {\n              cells.push({ i: newI, j: newJ })\n            }\n          }\n        }\n      }\n      return cells\n    }\n\n    // Get a random center point around the player's position within the specified range\n    const randomDistance = randomRange(range[0], range[1])\n    const centerI = player.i + randomItem([-randomDistance, randomDistance])\n    const centerJ = player.j + randomItem([-randomDistance, randomDistance])\n\n    // Gather valid cells around the center point\n    const validCells = getValidCells(centerI, centerJ, 2) // Adjust distance to suit clustering\n\n    // Check if we have enough valid cells to place the required quantity of resources\n    if (validCells.length < quantity) {\n      console.warn('Not enough valid cells found for resource placement.')\n      return // Exit if not enough valid cells found\n    }\n\n    // Randomly select the required number of cells from the valid cells\n    const cellsToPlace = []\n    for (let i = 0; i < quantity; i++) {\n      const itemIndex = Math.floor(Math.random() * validCells.length)\n      const cell = validCells[itemIndex]\n      cellsToPlace.push(cell) // Store the selected cell for placement\n      validCells.splice(itemIndex, 1) // Remove it from valid cells to avoid duplicates\n    }\n\n    // Place resources in the selected cells\n    for (const cell of cellsToPlace) {\n      this.resources.push(this.addChild(new Resource({ i: cell.i, j: cell.j, type: instance }, context)))\n    }\n  }\n}\n","import { Assets } from 'pixi.js'\nimport {\n  getIconPath,\n  canAfford,\n  refundCost,\n  throttle,\n  canvasDrawDiamond,\n  canvasDrawRectangle,\n  canvasDrawStrokeRectangle,\n  isValidCondition,\n  getBuildingAsset,\n  Modal,\n} from '../lib'\nimport { CELL_WIDTH, CELL_HEIGHT, LONG_CLICK_DURATION, IS_MOBILE } from '../constants'\nimport { sound } from '@pixi/sound'\n\nexport default class Menu {\n  constructor(context) {\n    this.context = context\n    this.topbar = document.createElement('div')\n    this.topbar.id = 'topbar'\n    this.topbar.className = 'topbar bar'\n    this.icons = {\n      wood: getIconPath('000_50732'),\n      food: getIconPath('002_50732'),\n      stone: getIconPath('001_50732'),\n      gold: getIconPath('003_50732'),\n    }\n    this.infoIcons = {\n      wood: getIconPath('000_50731'),\n      stone: getIconPath('001_50731'),\n      food: getIconPath('002_50731'),\n      gold: getIconPath('003_50731'),\n    }\n\n    this.longClick = false\n    this.mouseHoldTimeout\n\n    this.resources = document.createElement('div')\n    this.resources.className = 'topbar-resources'\n    ;['wood', 'food', 'stone', 'gold'].forEach(res => {\n      this.setResourceBox(res)\n    })\n\n    this.age = document.createElement('div')\n    this.age.className = 'topbar-age'\n    const options = document.createElement('div')\n    options.className = 'topbar-options'\n    const menu = document.createElement('div')\n    menu.className = 'topbar-options-menu'\n    menu.innerText = 'Menu'\n    menu.addEventListener('pointerdown', () => {\n      this.context.pause()\n      const content = document.createElement('div')\n      content.className = 'modal-menu'\n      const modal = new Modal(content)\n      const save = document.createElement('button')\n      save.innerText = 'Save'\n      save.addEventListener('pointerdown', () => {\n        this.context.save()\n        modal.close()\n        this.context.resume()\n      })\n      const load = document.createElement('div')\n      const input = document.createElement('input')\n      input.type = 'file'\n      input.accept = 'application/JSON'\n      input.addEventListener('change', evt => {\n        var reader = new FileReader()\n        reader.onload = ({ target: { result } }) => {\n          this.context.load(JSON.parse(result))\n          modal.close()\n          this.context.resume()\n        }\n        reader.readAsText(evt.target.files[0])\n      })\n      load.className = 'input-file'\n      load.innerText = 'Load'\n      load.appendChild(input)\n      const cancel = document.createElement('button')\n      cancel.innerText = 'Cancel'\n      cancel.addEventListener('pointerdown', () => {\n        modal.close()\n        this.context.resume()\n      })\n      content.appendChild(save)\n      content.appendChild(load)\n      content.appendChild(cancel)\n    })\n    options.appendChild(menu)\n\n    this.topbar.appendChild(this.resources)\n    this.topbar.appendChild(this.age)\n    this.topbar.appendChild(options)\n    document.body.prepend(this.topbar)\n\n    this.bottombar = document.createElement('div')\n    this.bottombar.className = 'bottombar bar'\n    this.bottombarInfo = document.createElement('div')\n    this.bottombarInfo.className = 'bottombar-info'\n    this.bottombarMenu = document.createElement('div')\n    this.bottombarMenu.className = 'bottombar-menu'\n    const bottombarMapWrap = document.createElement('div')\n    bottombarMapWrap.className = 'bottombar-map-wrap'\n    this.bottombarMap = document.createElement('div')\n    this.bottombarMap.className = 'bottombar-map'\n    this.bottombarMap.addEventListener('pointerdown', evt => {\n      const {\n        context: { controls },\n      } = this\n      this.mouseHoldTimeout = setTimeout(() => {\n        this.longClick = true\n        const minimapFactor = this.getMinimapFactor()\n        const rect = evt.target.getBoundingClientRect()\n        const x = (evt.clientX - rect.left - rect.width / 2) * minimapFactor\n        const y = (evt.clientY - rect.top - 3) * minimapFactor\n        controls.updateVisibleCells()\n        controls.setCamera(x, y)\n      }, LONG_CLICK_DURATION)\n    })\n    this.bottombarMap.addEventListener('pointerup', evt => {\n      const {\n        context: { player, controls, map },\n      } = this\n      clearTimeout(this.mouseHoldTimeout)\n      if (controls.mouseBuilding || controls.mouseRectangle || this.longClick) {\n        this.longClick = false\n        return\n      }\n      this.longClick = false\n      const minimapFactor = this.getMinimapFactor()\n      const rect = evt.target.getBoundingClientRect()\n      const x = (evt.clientX - rect.left - rect.width / 2) * minimapFactor\n      const y = (evt.clientY - rect.top - 3) * minimapFactor\n\n      if (player?.selectedUnits?.length) {\n        const pos = isometricToCartesian(x, y)\n        const i = Math.min(Math.max(pos[0], 0), map.size)\n        const j = Math.min(Math.max(pos[1], 0), map.size)\n        if (map.grid[i] && map.grid[i][j]) {\n          const cell = map.grid[i][j]\n          controls.sendUnits(cell)\n        }\n      } else {\n        controls.updateVisibleCells()\n        controls.setCamera(x, y)\n      }\n    })\n    bottombarMapWrap.appendChild(this.bottombarMap)\n\n    this.terrainMinimap = document.createElement('canvas')\n    this.playersMinimap = []\n    this.resourcesMinimap = document.createElement('canvas')\n    this.cameraMinimap = document.createElement('canvas')\n    this.cameraMinimap.style.zIndex = 1\n\n    this.bottombarMap.appendChild(this.terrainMinimap)\n    this.bottombarMap.appendChild(this.resourcesMinimap)\n    this.bottombarMap.appendChild(this.cameraMinimap)\n    this.bottombar.appendChild(this.bottombarInfo)\n    this.bottombar.appendChild(this.bottombarMenu)\n    this.bottombar.appendChild(bottombarMapWrap)\n    document.body.appendChild(this.bottombar)\n\n    this.toggled = false\n    this.toggle = document.createElement('div')\n    this.toggle.className = 'toggle'\n    this.toggle.innerText = 'x'\n    this.toggle.addEventListener('pointerdown', evt => {\n      evt.preventDefault()\n      if (this.toggled) {\n        this.toggle.innerText = 'x'\n        this.bottombar.style.display = 'grid'\n        this.toggled = false\n      } else {\n        this.bottombar.style.display = 'none'\n        this.toggle.innerText = 'o'\n        this.toggled = true\n      }\n      evt.stopPropagation()\n    })\n    IS_MOBILE && document.body.prepend(this.toggle)\n\n    this.updatePlayerMiniMap = throttle(this.updatePlayerMiniMapEvt, 500)\n    this.updateResourcesMiniMap = throttle(this.updateResourcesMiniMapEvt, 500)\n    this.updateCameraMiniMap = throttle(this.updateCameraMiniMapEvt, 100)\n\n    this.miniMapAlpha = 1.284\n    this.updateTopbar()\n  }\n\n  destroy() {\n    this.bottombar.remove()\n    this.topbar.remove()\n  }\n\n  init() {\n    this.initMiniMap()\n    this.updateTopbar()\n  }\n\n  getMinimapFactor() {\n    const {\n      context: { map },\n    } = this\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    return (mapWidth / 234) * 2\n  }\n\n  initMiniMap() {\n    const {\n      context: { map },\n    } = this\n\n    const context = this.terrainMinimap.getContext('2d')\n    const cameraContext = this.cameraMinimap.getContext('2d')\n    const resourceContext = this.resourcesMinimap.getContext('2d')\n\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n    context.translate(translate, 0)\n    cameraContext.translate(translate, 0)\n    resourceContext.translate(translate, 0)\n\n    if (map.revealEverything || map.revealTerrain) {\n      this.revealTerrainMinimap()\n    }\n  }\n\n  revealTerrainMinimap() {\n    const {\n      context: { map },\n    } = this\n\n    const canvas = this.terrainMinimap\n    const context = canvas.getContext('2d')\n\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n\n    context.clearRect(-translate, 0, canvas.width, canvas.height)\n\n    for (let i = 0; i <= map.size; i++) {\n      for (let j = 0; j <= map.size; j++) {\n        const cell = map.grid[i][j]\n        const x = cell.x\n        const y = cell.y\n        canvasDrawDiamond(\n          context,\n          x / minimapFactor + translate,\n          y / minimapFactor,\n          CELL_WIDTH / minimapFactor + 1,\n          CELL_HEIGHT / minimapFactor + 1,\n          cell.color\n        )\n      }\n    }\n  }\n\n  updateTerrainMiniMap(i, j) {\n    const {\n      context: { map },\n    } = this\n\n    const canvas = this.terrainMinimap\n    const context = canvas.getContext('2d')\n\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n\n    const cell = map.grid[i][j]\n    let color = cell.color\n\n    const x = cell.x\n    const y = cell.y\n    canvasDrawDiamond(\n      context,\n      x / minimapFactor + translate,\n      y / minimapFactor,\n      CELL_WIDTH / minimapFactor + 1,\n      CELL_HEIGHT / minimapFactor + 1,\n      color\n    )\n\n    if (cell.has && cell.has.family === 'resource') {\n      this.updateResourceMiniMap(cell.has)\n    }\n  }\n\n  updateResourceMiniMap(resource) {\n    const {\n      context: { map },\n    } = this\n\n    const canvas = this.resourcesMinimap\n    const context = canvas.getContext('2d')\n\n    const squareSize = 4\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n\n    const finalX = resource.x / minimapFactor - squareSize / 2\n    const finalY = resource.y / minimapFactor - squareSize / 2\n    canvasDrawRectangle(context, finalX + translate, finalY, squareSize, squareSize, resource.color)\n  }\n\n  updateResourcesMiniMapEvt() {\n    const {\n      context: { map, player },\n    } = this\n\n    const canvas = this.resourcesMinimap\n    const context = canvas.getContext('2d')\n\n    const squareSize = 4\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n\n    context.clearRect(-translate, 0, canvas.width, canvas.height)\n\n    map.resources.forEach(resource => {\n      const cell = player?.views?.[resource.i]?.[resource.j]\n      if (resource.color && (cell?.viewed || map.revealEverything)) {\n        const finalX = resource.x / minimapFactor - squareSize / 2\n        const finalY = resource.y / minimapFactor - squareSize / 2\n        canvasDrawRectangle(context, finalX + translate, finalY, squareSize, squareSize, resource.color)\n      }\n    })\n  }\n\n  updateCameraMiniMapEvt() {\n    const {\n      context: { app, map, controls },\n    } = this\n\n    const canvas = this.cameraMinimap\n    const context = canvas.getContext('2d')\n\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n\n    context.clearRect(-translate, 0, canvas.width, canvas.height)\n\n    const x = controls.camera.x / minimapFactor\n    const y = controls.camera.y / minimapFactor\n    const w = app.screen.width / minimapFactor\n    const h = app.screen.height / minimapFactor\n    canvasDrawStrokeRectangle(context, x + translate, y, w, h, 'white')\n  }\n\n  updatePlayerMiniMapEvt(owner) {\n    if (!owner) {\n      return\n    }\n\n    const {\n      context: { map },\n    } = this\n\n    const squareSize = 4\n    const playerMinimap = this.playersMinimap.find(({ id }) => id === `minimap-${owner.name}`)\n    const color = owner.colorHex\n\n    let canvas\n    let context\n\n    const minimapFactor = this.getMinimapFactor() / this.miniMapAlpha\n    const mapWidth = CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2\n    const translate = mapWidth / 2 / minimapFactor\n\n    if (playerMinimap) {\n      canvas = playerMinimap.canvas\n      context = playerMinimap.context\n    } else {\n      canvas = document.createElement('canvas')\n      context = canvas.getContext('2d')\n      context.translate(translate, 0)\n      this.playersMinimap.push({\n        id: `minimap-${owner.name}`,\n        canvas,\n        context,\n      })\n      this.bottombarMap.appendChild(canvas)\n    }\n\n    context.clearRect(-translate, 0, canvas.width, canvas.height)\n\n    owner.buildings.forEach(({ x, y, size, selected }) => {\n      const finalSize = squareSize + size\n      const finalX = x / minimapFactor - finalSize / 2\n      const finalY = y / minimapFactor - finalSize / 2\n      canvasDrawRectangle(context, finalX + translate, finalY, finalSize, finalSize, selected ? 'white' : color)\n    })\n\n    owner.units.forEach(({ x, y, selected }) => {\n      const finalX = x / minimapFactor - squareSize / 2\n      const finalY = y / minimapFactor - squareSize / 2\n      canvasDrawRectangle(context, finalX + translate, finalY, squareSize, squareSize, selected ? 'white' : color)\n    })\n  }\n\n  getMessage(cost) {\n    const {\n      context: { player },\n    } = this\n    const resource = Object.keys(cost).find(prop => player[prop] < cost[prop])\n    return `You need more ${resource} !`\n  }\n\n  showMessage(message) {\n    const {\n      context: { gamebox },\n    } = this\n    if (document.getElementById('msg')) {\n      document.getElementById('msg').remove()\n    }\n    const box = document.createElement('div')\n    box.id = 'msg'\n    box.className = 'message'\n    Object.assign(box.style, {\n      bottom: this.bottombar.clientHeight + 5 + 'px',\n    })\n    const msg = document.createElement('span')\n    msg.textContent = message\n    msg.className = 'message-content'\n\n    box.appendChild(msg)\n    gamebox.appendChild(box)\n    setTimeout(() => {\n      box.remove()\n    }, 3000)\n  }\n\n  setResourceBox(name) {\n    const box = document.createElement('div')\n    box.className = 'resource'\n\n    const img = document.createElement('img')\n    img.className = 'resource-content'\n    img.src = this.icons[name]\n\n    this[name] = document.createElement('div')\n    box.appendChild(img)\n    box.appendChild(this[name])\n    this.resources.appendChild(box)\n  }\n\n  updateBottombar() {\n    const {\n      context: { player },\n    } = this\n    if (player.selectedBuilding || player.selectedUnit) {\n      this.setBottombar(player.selectedBuilding || player.selectedUnit)\n    }\n  }\n\n  updateTopbar() {\n    const {\n      context: { player },\n    } = this\n    const t = {\n      0: 'Stone Age',\n      1: 'Tool Age',\n      2: 'Bronze Age',\n      3: 'Iron Age',\n    }\n    ;['wood', 'food', 'stone', 'gold', 'age'].forEach(prop => {\n      const val = Math.min((player && player[prop]) || 0, 99999)\n      this[prop].textContent = prop === 'age' ? t[val] : val\n    })\n  }\n\n  resetInfo() {\n    this.bottombarInfo.textContent = ''\n    this.bottombarInfo.style.background = 'transparent'\n  }\n\n  generateInfo(selection) {\n    this.resetInfo()\n    this.bottombarInfo.style.background = 'black'\n    if (typeof selection.interface.info === 'function') {\n      selection.interface.info(this.bottombarInfo)\n    }\n  }\n\n  updateInfo(target, action) {\n    const targetElement = this.bottombarInfo.querySelector(`[id=${target}]`)\n    if (!targetElement) {\n      return\n    }\n    return typeof action !== 'function' ? (targetElement.textContent = action) : action(targetElement)\n  }\n\n  updateButtonContent(target, action) {\n    const targetElement = this.bottombarMenu.querySelector(`[id=${target}]`)\n    if (!targetElement) {\n      return\n    }\n    const contentElement = targetElement.querySelector('[id=content]')\n    if (!contentElement) {\n      return\n    }\n    return typeof action !== 'function' ? (contentElement.textContent = action) : action(contentElement)\n  }\n\n  toggleButtonCancel(target, value) {\n    const element = this.bottombarMenu.querySelector(`[id=${target}-cancel]`)\n    if (!element) {\n      return\n    }\n    element.style.display = value ? 'block' : 'none'\n  }\n\n  setBottombar(selection = null) {\n    const {\n      context: { controls, player },\n    } = this\n\n    this.resetInfo()\n    this.bottombarMenu.textContent = ''\n    this.selection = selection\n    if (controls.mouseBuilding) {\n      controls.removeMouseBuilding()\n    }\n    if (selection && selection.interface) {\n      this.generateInfo(selection)\n      if (selection.family === 'building') {\n        if (!selection.isBuilt) {\n          setMenuRecurs(selection, this.bottombarMenu, [])\n        } else if (selection.technology) {\n          setMenuRecurs(selection, this.bottombarMenu, [\n            {\n              icon: 'assets/interface/50721/003_50721.png',\n              id: `${type}-cancel`,\n              onClick: selection => {\n                sound.play('5036')\n                selection.cancelTechnology()\n              },\n            },\n          ])\n        } else {\n          setMenuRecurs(selection, this.bottombarMenu, selection.interface.menu || [])\n        }\n      } else {\n        setMenuRecurs(selection, this.bottombarMenu, selection.interface.menu || [])\n      }\n    }\n    function setMenuRecurs(selection, element, menu, parent) {\n      menu\n        .filter(btn => !btn.hide || !btn.hide())\n        .forEach((btn, index) => {\n          const box = document.createElement('div')\n          box.className = 'bottombar-menu-box'\n          box.id = btn.id || `btn-${index}`\n          if (typeof btn.onCreate === 'function') {\n            btn.onCreate(selection, box)\n          } else {\n            const img = document.createElement('img')\n            img.src = typeof btn.icon === 'function' ? btn.icon() : btn.icon\n            img.className = 'img'\n            box.appendChild(img)\n          }\n\n          if (btn.children) {\n            box.addEventListener('pointerup', () => {\n              sound.play('5036')\n              element.textContent = ''\n              controls.removeMouseBuilding()\n              setMenuRecurs(selection, element, btn.children, menu)\n            })\n          } else if (typeof btn.onClick === 'function') {\n            box.addEventListener('pointerup', evt => {\n              sound.play('5036')\n              btn.onClick(selection, evt)\n            })\n          }\n          element.appendChild(box)\n        })\n      if (parent || selection.selected) {\n        const back = document.createElement('div')\n        back.className = 'bottombar-menu-box'\n        const img = document.createElement('img')\n        img.className = 'img'\n        back.id = 'interfaceBackBtn'\n        img.src = 'assets/interface/50721/010_50721.png'\n        if (parent) {\n          back.addEventListener('pointerup', () => {\n            sound.play('5036')\n            element.textContent = ''\n            controls.removeMouseBuilding()\n            setMenuRecurs(selection, element, parent)\n          })\n        } else {\n          back.addEventListener('pointerup', () => {\n            sound.play('5036')\n            controls.removeMouseBuilding()\n            player.unselectAll()\n          })\n        }\n        back.appendChild(img)\n        element.appendChild(back)\n      }\n    }\n  }\n\n  getUnitButton(type) {\n    const {\n      context: { player },\n    } = this\n    const unit = player.config.units[type]\n    return {\n      id: type,\n      icon: () => getIconPath(unit.icon),\n      hide: () => (unit.conditions || []).some(condition => !isValidCondition(condition, player)),\n      onCreate: (selection, element) => {\n        const div = document.createElement('div')\n        div.className = 'bottombar-menu-column'\n        const cancel = document.createElement('img')\n        cancel.id = `${type}-cancel`\n        cancel.className = 'img'\n        cancel.src = 'assets/interface/50721/003_50721.png'\n        if (!selection.queue.filter(q => q === type).length) {\n          cancel.style.display = 'none'\n        }\n        cancel.addEventListener('pointerup', () => {\n          sound.play('5036')\n          for (let i = 0; i < selection.queue.length; i++) {\n            if (selection.queue[i] === type) {\n              refundCost(player, unit.cost)\n            }\n          }\n          this.updateTopbar()\n          selection.queue = selection.queue.filter(q => q !== type)\n          if (selection.queue[0] !== type) {\n            this.updateButtonContent(type, '')\n            this.toggleButtonCancel(type, false)\n          }\n        })\n        const img = document.createElement('img')\n        img.src = getIconPath(unit.icon)\n        img.className = 'img'\n        img.addEventListener('pointerup', () => {\n          sound.play('5036')\n          if (canAfford(player, unit.cost)) {\n            if (player.population >= player.POPULATION_MAX) {\n              this.showMessage('You need to build more houses')\n            }\n            this.toggleButtonCancel(type, true)\n            selection.buyUnit(type)\n          } else {\n            this.showMessage(this.getMessage(unit.cost))\n          }\n        })\n        const queue = selection.queue.filter(queue => queue === type).length\n        const counter = document.createElement('div')\n        counter.id = 'content'\n        counter.textContent = queue || ''\n        counter.style.padding = '1px'\n        counter.style.position = 'absolute'\n        div.appendChild(img)\n        div.appendChild(cancel)\n        element.appendChild(div)\n        element.appendChild(counter)\n      },\n    }\n  }\n\n  getBuildingButton(type) {\n    const {\n      context: { controls, player },\n    } = this\n    const config = player.config.buildings[type]\n    return {\n      id: type,\n      icon: () => {\n        const assets = getBuildingAsset(type, player, Assets)\n        return getIconPath(assets.icon)\n      },\n      hide: () => (config.conditions || []).some(condition => !isValidCondition(condition, player)),\n      onClick: () => {\n        const assets = getBuildingAsset(type, player, Assets)\n        controls.removeMouseBuilding()\n        if (canAfford(player, config.cost)) {\n          controls.setMouseBuilding({ ...config, ...assets, type })\n        } else {\n          this.showMessage(this.getMessage(config.cost))\n        }\n      },\n    }\n  }\n\n  getTechnologyButton(type) {\n    const {\n      context: { controls, player },\n    } = this\n    const config = player.techs[type]\n    return {\n      icon: getIconPath(config.icon),\n      id: type,\n      hide: () =>\n        (config.conditions || []).some(\n          condition => player.technologies.includes(type) || !isValidCondition(condition, player)\n        ),\n      onClick: selection => {\n        controls.removeMouseBuilding()\n        if (canAfford(player, config.cost)) {\n          selection.buyTechnology(type)\n        } else {\n          this.showMessage(this.getMessage(config.cost))\n        }\n      },\n    }\n  }\n}\n","import { sound } from '@pixi/sound'\nimport { Container, Graphics, AnimatedSprite, Assets, Sprite } from 'pixi.js'\nimport {\n  isometricToCartesian,\n  pointIsBetweenTwoPoint,\n  pointsDistance,\n  pointInRectangle,\n  getPlainCellsAroundPoint,\n  changeSpriteColor,\n  getTexture,\n  randomItem,\n} from '../lib'\nimport { COLOR_WHITE, COLOR_RED, CELL_WIDTH, CELL_HEIGHT, MAX_SELECT_UNITS, ACCELERATOR } from '../constants'\n\nexport default class Controls extends Container {\n  constructor(context) {\n    super()\n\n    this.context = context\n\n    const { map, gamebox } = context\n\n    this.sortableChildren = true\n\n    this.mouse = {\n      x: 0,\n      y: 0,\n      prevent: false,\n    }\n\n    this.camera = {\n      x: 0,\n      y: 0,\n    }\n\n    this.visibleCells = new Set()\n\n    this.setCamera(Math.floor(map.size / 2), Math.floor(map.size / 2))\n\n    this.mouseHoldTimeout\n    this.keysPressed = {}\n    this.keyInterval\n    this.keySpeed = 0\n    this.eventMode = 'auto'\n    this.allowMove = false\n    this.allowClick = false\n    this.mouseRectangle\n    this.mouseTouch\n    this.mouseDrag = false\n    this.moveCameraInterval\n\n    this.minimapRectangle = new Graphics()\n    this.addChild(this.minimapRectangle)\n\n    document.addEventListener('mousemove', evt => this.moveCameraWithMouse(evt))\n    document.addEventListener('mouseout', () => clearInterval(this.moveCameraInterval))\n    document.addEventListener('keydown', evt => this.onKeyDown(evt))\n    document.addEventListener('keyup', evt => this.onKeyUp(evt))\n    gamebox.addEventListener('touchstart', evt => this.onTouchStart(evt))\n    gamebox.addEventListener('touchend', evt => this.onTouchEnd(evt))\n    gamebox.addEventListener('touchmove', evt => this.onTouchMove(evt))\n    gamebox.addEventListener('mousemove', evt => this.onMouseMove(evt))\n    gamebox.addEventListener('mousedown', evt => this.onMouseDown(evt))\n    gamebox.addEventListener('mouseup', evt => this.onMouseUp(evt))\n  }\n\n  destroy() {\n    document.removeEventListener('mousemove', evt => this.moveCameraWithMouse(evt))\n    document.removeEventListener('mouseout', () => clearInterval(this.moveCameraInterval))\n    document.removeEventListener('keydown', evt => this.onKeyDown(evt))\n    document.removeEventListener('keyup', evt => this.onKeyUp(evt))\n    gamebox.removeEventListener('touchstart', evt => this.onTouchStart(evt))\n    gamebox.removeEventListener('touchend', evt => this.onTouchEnd(evt))\n    gamebox.removeEventListener('touchmove', evt => this.onTouchMove(evt))\n    gamebox.removeEventListener('mousemove', evt => this.onMouseMove(evt))\n    gamebox.removeEventListener('mousedown', evt => this.onMouseDown(evt))\n    gamebox.removeEventListener('mouseup', evt => this.onMouseUp(evt))\n  }\n\n  onKeyDown(evt) {\n    if (evt.key === 'Delete' || evt.keyCode === 8) {\n      const {\n        context: { player },\n      } = this\n      for (let i = 0; i < player.selectedUnits.length; i++) {\n        player.selectedUnits[i].die()\n      }\n      if (player.selectedBuilding) {\n        player.selectedBuilding.die()\n      }\n      return\n    }\n\n    const handleMoveCamera = () => {\n      if (!this.keyInterval) {\n        this.keyInterval = setInterval(() => {\n          let double = false\n          if (Object.values(this.keysPressed).filter(Boolean).length > 1) {\n            double = true\n          }\n          if (this.keySpeed < 6) {\n            this.keySpeed += 0.5\n          }\n          if (this.keysPressed['ArrowLeft']) {\n            this.moveCamera('left', this.keySpeed, double)\n          }\n          if (this.keysPressed['ArrowUp']) {\n            this.moveCamera('up', this.keySpeed, double)\n          }\n          if (this.keysPressed['ArrowDown']) {\n            this.moveCamera('down', this.keySpeed, double)\n          }\n          if (this.keysPressed['ArrowRight']) {\n            this.moveCamera('right', this.keySpeed, double)\n          }\n        }, 1)\n      }\n    }\n    if (!evt.repeat) {\n      this.keysPressed[evt.key] = true\n    }\n    const controlsMap = ['ArrowLeft', 'ArrowRight', 'ArrowDown', 'ArrowUp']\n    if (controlsMap.includes(evt.key)) {\n      handleMoveCamera()\n    }\n  }\n\n  onKeyUp(evt) {\n    if (!evt.repeat) {\n      delete this.keysPressed[evt.key]\n    }\n    if (!Object.values(this.keysPressed).filter(Boolean).length) {\n      clearInterval(this.keyInterval)\n      this.keyInterval = null\n      this.keySpeed = 0\n    }\n  }\n\n  onTouchStart(evt) {\n    const touch = evt.touches[0]\n    if (evt.touches.length === 2) {\n      this.mouseTouch = {\n        x: touch.pageX,\n        y: touch.pageY,\n      }\n    } else {\n      this.onMouseDown(touch)\n    }\n  }\n\n  onTouchMove(evt) {\n    const touch = evt.touches[0]\n    if (evt.touches.length === 2) {\n      this.mouse.x = touch.pageX\n      this.mouse.y = touch.pageY\n\n      if (this.mouseTouch) {\n        const speedX = Math.abs(this.mouse.x - this.mouseTouch.x) * 2\n        const speedY = Math.abs(this.mouse.y - this.mouseTouch.y) * 2\n        if (this.mouse.x > this.mouseTouch.x) {\n          this.moveCamera('left', speedX, false)\n        }\n        if (this.mouse.y > this.mouseTouch.y) {\n          this.moveCamera('up', speedY, false)\n        }\n        if (this.mouse.y < this.mouseTouch.y) {\n          this.moveCamera('down', speedY, false)\n        }\n        if (this.mouse.x < this.mouseTouch.x) {\n          this.moveCamera('right', speedX, false)\n        }\n      }\n      this.mouseTouch = {\n        x: this.mouse.x,\n        y: this.mouse.y,\n      }\n    } else {\n      this.onMouseMove(touch)\n    }\n  }\n\n  onTouchEnd(evt) {\n    const touch = evt.changedTouches[0]\n    if (evt.changedTouches.length === 1) {\n      this.onMouseUp(touch)\n    }\n  }\n\n  onMouseDown(evt) {\n    this.mouse.x = evt.pageX\n    this.mouse.y = evt.pageY\n    if (!this.isMouseInApp(evt)) {\n      return\n    }\n    this.pointerStart = {\n      x: this.mouse.x,\n      y: this.mouse.y,\n    }\n  }\n\n  onMouseMove(evt) {\n    const {\n      context: { map, player, app },\n    } = this\n\n    this.mouse.x = evt.pageX\n    this.mouse.y = evt.pageY\n\n    // Mouse building to place construction\n    if (this.mouseBuilding) {\n      const pos = isometricToCartesian(\n        this.mouse.x - map.x,\n        this.mouse.y >= app.screen.height ? app.screen.height - map.y : this.mouse.y - map.y\n      )\n      const i = Math.min(Math.max(pos[0], 0), map.size)\n      const j = Math.min(Math.max(pos[1], 0), map.size)\n      if (map.grid[i] && map.grid[i][j]) {\n        const cell = map.grid[i][j]\n        this.mouseBuilding.x = cell.x - this.camera.x\n        this.mouseBuilding.y = cell.y - this.camera.y\n        let isFree = true\n\n        const dist = this.mouseBuilding.size === 3 ? 1 : 0\n        if (this.mouseBuilding.buildOnWater) {\n          let waterBorderedCells = 0\n          let waterCells = 0\n          getPlainCellsAroundPoint(i, j, map.grid, dist, cell => {\n            if (cell.inclined || cell.solid || !cell.visible) {\n              isFree = false\n              return\n            }\n            if (cell.waterBorder) {\n              waterBorderedCells++\n            } else if (cell.category === 'Water') {\n              waterCells++\n            }\n          })\n          if (waterBorderedCells < 2 && waterCells < 4) {\n            isFree = false\n          }\n        } else {\n          getPlainCellsAroundPoint(i, j, map.grid, dist, cell => {\n            if (cell.category === 'Water' || cell.solid || cell.inclined || cell.border || !cell.visible) {\n              isFree = false\n              return\n            }\n          })\n        }\n        // Color image of mouse building depend on buildable or not\n        const sprite = this.mouseBuilding.getChildByName('sprite')\n        const color = this.mouseBuilding.getChildByName('color')\n        if (isFree) {\n          sprite.tint = COLOR_WHITE\n          if (color) {\n            color.tint = COLOR_WHITE\n          }\n        } else {\n          sprite.tint = COLOR_RED\n          if (color) {\n            color.tint = COLOR_RED\n          }\n        }\n        this.mouseBuilding.isFree = isFree\n      }\n      return\n    }\n\n    // Create and draw mouse selection\n    if (\n      !this.mouseRectangle &&\n      this.pointerStart &&\n      pointsDistance(this.mouse.x, this.mouse.y, this.pointerStart.x, this.pointerStart.y) > 5\n    ) {\n      this.mouseRectangle = {\n        x: this.pointerStart.x,\n        y: this.pointerStart.y,\n        width: 0,\n        height: 0,\n        graph: new Graphics(),\n      }\n      app.stage.addChild(this.mouseRectangle.graph)\n    }\n\n    if (this.mouseRectangle && !this.mouseBuilding) {\n      if (player.selectedUnits.length || player.selectedBuilding) {\n        player.unselectAll()\n      }\n      const graph = this.mouseRectangle.graph\n      graph.clear()\n\n      this.mouseRectangle.width = this.mouse.x - this.mouseRectangle.x\n      this.mouseRectangle.height = this.mouse.y - this.mouseRectangle.y\n\n      const x = Math.min(this.mouseRectangle.x, this.mouseRectangle.x + this.mouseRectangle.width)\n      const y = Math.min(this.mouseRectangle.y, this.mouseRectangle.y + this.mouseRectangle.height)\n      const w = Math.abs(this.mouseRectangle.width)\n      const h = Math.abs(this.mouseRectangle.height)\n\n      graph.rect(x, y, w, h).stroke(COLOR_WHITE)\n    }\n  }\n\n  onMouseUp(evt) {\n    const {\n      context: { menu, map, player },\n    } = this\n    this.pointerStart = null\n    clearTimeout(this.mouseHoldTimeout)\n    if (!this.isMouseInApp(evt) || this.mouse.prevent || this.mouseDrag) {\n      this.mouse.prevent = false\n      return\n    }\n    player?.selectedBuilding && player.unselectAll()\n    // Select units on mouse rectangle\n    if (this.mouseRectangle) {\n      let selectVillager\n      let countSelect = 0\n      player.unselectAll()\n      // Select units inside the rectangle\n      for (let i = 0; i < player.units.length; i++) {\n        const unit = player.units[i]\n        if (\n          player.selectedUnits.length < MAX_SELECT_UNITS &&\n          pointInRectangle(\n            unit.x - this.camera.x,\n            unit.y - this.camera.y,\n            this.mouseRectangle.x,\n            this.mouseRectangle.y,\n            this.mouseRectangle.width,\n            this.mouseRectangle.height,\n            true\n          )\n        ) {\n          unit.select()\n          countSelect++\n          if (unit.type === 'Villager') {\n            selectVillager = unit\n          }\n          player.selectedUnits.push(unit)\n        }\n      }\n      // Set our bottombar\n      if (countSelect) {\n        if (selectVillager) {\n          player.selectedUnit = selectVillager\n          menu.setBottombar(selectVillager)\n        } else {\n          // TODO SELECT UNITS THAT HAVE THE MOST FREQUENCY\n          player.selectedUnit = player.selectedUnits[0]\n          menu.setBottombar(player.selectedUnits[0])\n        }\n      }\n      // Reset mouse selection\n      if (this.mouseRectangle) {\n        this.mouseRectangle.graph.destroy(true)\n        this.mouseRectangle = null\n      }\n      return\n    }\n    if (this.isMouseInApp(evt)) {\n      const pos = isometricToCartesian(this.mouse.x - map.x, this.mouse.y - map.y)\n      const i = Math.min(Math.max(pos[0], 0), map.size)\n      const j = Math.min(Math.max(pos[1], 0), map.size)\n      if (map.grid[i] && map.grid[i][j]) {\n        const cell = map.grid[i][j]\n        if ((cell.solid || cell.has) && cell.visible) {\n          return\n        }\n        if (this.mouseBuilding) {\n          if (cell.inclined || cell.border) {\n            return\n          }\n          if (this.mouseBuilding.isFree) {\n            if (player.buyBuilding(i, j, this.mouseBuilding.type)) {\n              this.removeMouseBuilding()\n              if (menu.selection) {\n                menu.setBottombar(menu.selection)\n              }\n            }\n          }\n        } else if (player?.selectedUnits.length) {\n          // Pointer animation\n          const pointerSheet = Assets.cache.get('50405')\n          const pointer = new AnimatedSprite(pointerSheet.animations['animation'])\n          pointer.animationSpeed = 0.2 * ACCELERATOR\n          pointer.loop = false\n          pointer.anchor.set(0.5, 0.5)\n          pointer.x = this.mouse.x\n          pointer.y = this.mouse.y\n          pointer.allowMove = false\n          pointer.allowClick = false\n          pointer.eventMode = 'auto'\n          pointer.roundPixels = true\n          pointer.onComplete = () => {\n            pointer.destroy()\n          }\n          pointer.play()\n          this.addChild(pointer)\n          // Send units\n          this.sendUnits(cell)\n        }\n      }\n    }\n  }\n\n  sendUnits(cell) {\n    const {\n      context: { player, map },\n    } = this\n    const minX = Math.min(...player.selectedUnits.map(unit => unit.i))\n    const minY = Math.min(...player.selectedUnits.map(unit => unit.j))\n    const maxX = Math.max(...player.selectedUnits.map(unit => unit.i))\n    const maxY = Math.max(...player.selectedUnits.map(unit => unit.j))\n    const centerX = minX + Math.round((maxX - minX) / 2)\n    const centerY = minY + Math.round((maxY - minY) / 2)\n    let hasSentVillager = false\n    let hasSentSoldier = false\n    for (let u = 0; u < player.selectedUnits.length; u++) {\n      const unit = player.selectedUnits[u]\n      const distCenterX = unit.i - centerX\n      const distCenterY = unit.j - centerY\n      const finalX = cell.i + distCenterX\n      const finalY = cell.j + distCenterY\n      if (unit.type === 'Villager') {\n        hasSentVillager = true\n      } else {\n        hasSentSoldier = true\n      }\n      if (map.grid[finalX] && map.grid[finalX][finalY]) {\n        player.selectedUnits[u].sendTo(map.grid[finalX][finalY])\n      } else {\n        player.selectedUnits[u].sendTo(cell)\n      }\n    }\n    if (hasSentSoldier) {\n      const voice = randomItem(['5075', '5076', '5128', '5164'])\n      sound.play(voice)\n    } else if (hasSentVillager) {\n      sound.play('5006')\n    }\n  }\n\n  isMouseInApp(evt) {\n    return evt.target && (!evt.target.tagName || evt.target.closest('#game'))\n  }\n\n  removeMouseBuilding() {\n    if (!this.mouseBuilding) {\n      return\n    }\n    this.removeChild(this.mouseBuilding)\n    this.mouseBuilding.destroy()\n    this.mouseBuilding = null\n  }\n\n  setMouseBuilding(building) {\n    const {\n      context: { player },\n    } = this\n    this.mouseBuilding = new Container()\n    const sprite = Sprite.from(getTexture(building.images.final, Assets))\n    sprite.name = 'sprite'\n    this.mouseBuilding.addChild(sprite)\n    Object.keys(building).forEach(prop => {\n      this.mouseBuilding[prop] = building[prop]\n    })\n    this.mouseBuilding.x = this.mouse.x\n    this.mouseBuilding.y = this.mouse.y\n    this.mouseBuilding.name = 'mouseBuilding'\n    if (building.images.color) {\n      const color = Sprite.from(getTexture(building.images.color, Assets))\n      color.name = 'color'\n      changeSpriteColor(color, player.color)\n      this.mouseBuilding.addChild(color)\n    } else {\n      changeSpriteColor(sprite, player.color)\n    }\n    this.addChild(this.mouseBuilding)\n  }\n\n  moveCamera(dir, moveSpeed, isSpeedDivided) {\n    /**\n     * \t/A\\\n     * /   \\\n     *B     D\n     * \\   /\n     *  \\C/\n     */\n\n    const {\n      context: { map, app, menu },\n    } = this\n\n    const dividedSpeed = isSpeedDivided ? 1.5 : 1\n    const speed = (moveSpeed || 20) / dividedSpeed\n    const A = { x: CELL_WIDTH / 2 - this.camera.x, y: -this.camera.y }\n    const B = {\n      x: CELL_WIDTH / 2 - (map.size * CELL_WIDTH) / 2 - this.camera.x,\n      y: (map.size * CELL_HEIGHT) / 2 - this.camera.y,\n    }\n    const D = {\n      x: CELL_WIDTH / 2 + (map.size * CELL_WIDTH) / 2 - this.camera.x,\n      y: (map.size * CELL_HEIGHT) / 2 - this.camera.y,\n    }\n    const C = { x: CELL_WIDTH / 2 - this.camera.x, y: map.size * CELL_HEIGHT - this.camera.y }\n    const cameraCenter = {\n      x: this.camera.x + app.screen.width / 2 - this.camera.x,\n      y: this.camera.y + app.screen.height / 2 - this.camera.y,\n    }\n\n    if (dir === 'left') {\n      if (cameraCenter.x - 100 > B.x && pointIsBetweenTwoPoint(A, B, cameraCenter, 50)) {\n        this.camera.y += speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x -= speed\n      } else if (cameraCenter.x - 100 > B.x && pointIsBetweenTwoPoint(B, C, cameraCenter, 50)) {\n        this.camera.y -= speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x -= speed\n      } else if (cameraCenter.x - 100 > B.x) {\n        this.camera.x -= speed\n      }\n    } else if (dir === 'right') {\n      if (cameraCenter.x + 100 < D.x && pointIsBetweenTwoPoint(A, D, cameraCenter, 50)) {\n        this.camera.y += speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x += speed\n      } else if (cameraCenter.x + 100 < D.x && pointIsBetweenTwoPoint(D, C, cameraCenter, 50)) {\n        this.camera.y -= speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x += speed\n      } else if (cameraCenter.x + 100 < D.x) {\n        this.camera.x += speed\n      }\n    }\n    if (dir === 'up') {\n      if (cameraCenter.y - 50 > A.y && pointIsBetweenTwoPoint(A, B, cameraCenter, 50)) {\n        this.camera.y -= speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x += speed\n      } else if (cameraCenter.y - 50 > A.y && pointIsBetweenTwoPoint(A, D, cameraCenter, 50)) {\n        this.camera.y -= speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x -= speed\n      } else if (cameraCenter.y - 50 > A.y) {\n        this.camera.y -= speed\n      }\n    } else if (dir === 'down') {\n      if (cameraCenter.y + 50 < C.y && pointIsBetweenTwoPoint(D, C, cameraCenter, 50)) {\n        this.camera.y += speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x -= speed\n      } else if (cameraCenter.y + 50 < C.y && pointIsBetweenTwoPoint(B, C, cameraCenter, 50)) {\n        this.camera.y += speed / (CELL_WIDTH / CELL_HEIGHT)\n        this.camera.x += speed\n      } else if (cameraCenter.y + 100 < C.y) {\n        this.camera.y += speed\n      }\n    }\n\n    menu.updateCameraMiniMap()\n    map.setCoordinate(-this.camera.x, -this.camera.y)\n    this.updateVisibleCells()\n  }\n\n  moveCameraWithMouse(evt) {\n    clearInterval(this.moveCameraInterval)\n    const dir = []\n    const mouse = {\n      x: evt.pageX,\n      y: evt.pageY,\n    }\n    const coef = 1\n    const moveDist = 10\n\n    const calcs = {\n      left: (0 + moveDist - mouse.x) * coef,\n      right: (mouse.x - (window.innerWidth - moveDist)) * coef,\n      up: (0 + moveDist - mouse.y) * coef,\n      down: (mouse.y - (window.innerHeight - moveDist)) * coef,\n    }\n    if (mouse.x >= 0 && mouse.x <= 0 + moveDist && mouse.y >= 0 && mouse.y <= window.innerHeight) {\n      dir.push('left')\n    } else if (\n      mouse.x > window.innerWidth - moveDist &&\n      mouse.x <= window.innerWidth &&\n      mouse.y >= 0 &&\n      mouse.y <= window.innerHeight\n    ) {\n      dir.push('right')\n    }\n    if (mouse.x >= 0 && mouse.x <= window.innerWidth && mouse.y >= 0 && mouse.y <= 0 + moveDist) {\n      dir.push('up')\n    } else if (\n      mouse.x >= 0 &&\n      mouse.x <= window.innerWidth &&\n      mouse.y > window.innerHeight - moveDist &&\n      mouse.y <= window.innerHeight\n    ) {\n      dir.push('down')\n    }\n    if (dir.length) {\n      this.moveCameraInterval = setInterval(() => {\n        dir.forEach(prop => {\n          this.moveCamera(prop, calcs[prop])\n        })\n      }, 20)\n    }\n  }\n\n  instanceInCamera(instance) {\n    const {\n      context: { app },\n    } = this\n    return pointInRectangle(instance.x, instance.y, this.camera.x, this.camera.y, app.screen.width, app.screen.height)\n  }\n\n  getCellOnCamera(callback) {\n    const {\n      context: { map, app },\n    } = this\n\n    const cameraFloor = {\n      x: Math.floor(this.camera.x),\n      y: Math.floor(this.camera.y),\n    }\n    const margin = CELL_WIDTH\n\n    for (let i = cameraFloor.x - margin; i <= cameraFloor.x + app.screen.width + margin; i += CELL_WIDTH / 2) {\n      for (let j = cameraFloor.y - margin; j <= cameraFloor.y + app.screen.height + margin; j += CELL_HEIGHT / 2) {\n        const [cartesianX, cartesianY] = isometricToCartesian(i, j)\n        const x = Math.min(Math.max(cartesianX, 0), map.size - 1) // Adjust for index bounds\n        const y = Math.min(Math.max(cartesianY, 0), map.size - 1)\n\n        // Ensure the coordinates are within bounds and call the callback\n        if (map.grid[x] && map.grid[x][y]) {\n          callback(map.grid[x][y])\n        }\n      }\n    }\n  }\n\n  updateVisibleCells() {\n    const { map, app } = this.context\n    const newVisible = new Set()\n    const margin = CELL_WIDTH // extra padding for offscreen cells\n\n    const startX = Math.floor(this.camera.x - margin)\n    const endX = Math.floor(this.camera.x + app.screen.width + margin)\n    const startY = Math.floor(this.camera.y - margin)\n    const endY = Math.floor(this.camera.y + app.screen.height + margin)\n\n    for (let i = startX; i <= endX; i += CELL_WIDTH / 2) {\n      for (let j = startY; j <= endY; j += CELL_HEIGHT / 2) {\n        const [cartX, cartY] = isometricToCartesian(i, j)\n        const x = Math.min(Math.max(cartX, 0), map.size - 1)\n        const y = Math.min(Math.max(cartY, 0), map.size - 1)\n\n        const cell = map.grid[x]?.[y]\n        if (cell) {\n          newVisible.add(cell)\n        }\n      }\n    }\n\n    // Hide cells that left the viewport\n    for (let cell of this.visibleCells) {\n      if (!newVisible.has(cell)) {\n        cell.visible = false\n        if (cell.has) cell.has.visible = false\n      }\n    }\n\n    // Show newly visible cells\n    for (let cell of newVisible) {\n      if (!this.visibleCells.has(cell)) {\n        cell.updateVisible()\n      }\n    }\n\n    this.visibleCells = newVisible\n  }\n\n  init() {\n    const {\n      context: { player, map },\n    } = this\n    // Set camera to player building else unit\n    if (player?.buildings?.length) {\n      this.setCamera(player.buildings[0].x, player.buildings[0].y)\n    } else if (player?.units?.length) {\n      this.setCamera(player.units[0].x, player.units[0].y)\n    } else {\n      this.setCamera(map.size / 2, map.size / 2)\n    }\n  }\n\n  setCamera(x, y, direct) {\n    const {\n      context: { map, app, menu },\n    } = this\n    this.camera = {\n      x: direct ? x : x - app.screen.width / 2,\n      y: direct ? y : y - app.screen.height / 2,\n    }\n    menu && menu.updateCameraMiniMap()\n    map.setCoordinate(-this.camera.x, -this.camera.y)\n    this.updateVisibleCells()\n  }\n}\n","import { Container } from 'pixi.js'\nimport Map from '../classes/map'\nimport Menu from '../classes/menu'\nimport Controls from '../classes/controls'\nimport { filterObject } from '../lib'\n\n/**\n * Main Display Object\n * @exports Game\n * @extends Container\n */\n\nexport default class Game extends Container {\n  constructor(app, gamebox) {\n    super()\n    this.context = {\n      app,\n      gamebox,\n      menu: null,\n      player: null,\n      players: [],\n      map: null,\n      controls: null,\n      paused: false,\n      save: () => this.save(),\n      load: evt => this.load(evt),\n      pause: () => this.togglePause(true),\n      resume: () => this.togglePause(false),\n    }\n    this.start()\n  }\n\n  start() {\n    const { context } = this\n\n    context.map = new Map(context)\n    context.controls = new Controls(context)\n    context.menu = new Menu(context)\n\n    context.map.generateMap()\n\n    context.players = context.map.generatePlayers()\n    context.player = context.players[0]\n    context.menu.init()\n    context.map.placePlayers()\n    context.map.stylishMap()\n    context.controls.init()\n\n    this.addChild(context.map)\n    this.addChild(context.controls)\n\n    window.addEventListener('keydown', evt => {\n      if (evt.key === 'p') {\n        this.context.paused ? context.resume() : context.pause()\n      }\n    })\n    window.addEventListener('resize', () => {\n      if (context.controls) {\n        context.controls.updateVisibleCells()\n      }\n      if (context.menu) {\n        context.menu.updateCameraMiniMap()\n      }\n    })\n  }\n\n  save() {\n    const cleanContext = context => {\n      const resourceData = resource => ({\n        ...filterObject(resource, [\n          'name',\n          'i',\n          'j',\n          'selected',\n          'type',\n          'isDead',\n          'quantity',\n          'isDestroyed',\n          'size',\n          'hitPoints',\n        ]),\n        textureName: (resource.textureName || '').split('.')[0],\n      })\n      const animalData = animal => ({\n        ...filterObject(animal, [\n          'name',\n          'type',\n          'i',\n          'j',\n          'x',\n          'y',\n          'z',\n          'hitPoints',\n          'path',\n          'work',\n          'realDest',\n          'path',\n          'zIndex',\n          'selected',\n          'degree',\n          'action',\n          'direction',\n          'currentSheet',\n          'size',\n          'inactif',\n          'isDead',\n          'isDestroyed',\n          'quantity',\n        ]),\n        currentFrame: animal.sprite?.currentFrame,\n        loop: animal.sprite?.loop,\n        dest: animal.dest && [animal.dest.i, animal.dest.i, animal.dest?.name],\n        previousDest: animal.previousDest && [animal.previousDest.i, animal.previousDest.i, animal.previousDest?.name],\n      })\n      const unitData = unit => ({\n        ...filterObject(unit, [\n          'name',\n          'type',\n          'i',\n          'j',\n          'x',\n          'y',\n          'z',\n          'hitPoints',\n          'path',\n          'work',\n          'realDest',\n          'path',\n          'selected',\n          'degree',\n          'action',\n          'loading',\n          'loadingType',\n          'direction',\n          'currentSheet',\n          'size',\n          'inactif',\n          'isDead',\n          'isDestroyed',\n        ]),\n        currentFrame: unit.sprite?.currentFrame,\n        loop: unit.sprite?.loop,\n        dest: unit.dest && [unit.dest.i, unit.dest.i, unit.dest?.name],\n        previousDest: unit.previousDest && [unit.previousDest.i, unit.previousDest.i, unit.previousDest?.name],\n      })\n      const buildingData = building => ({\n        ...filterObject(building, [\n          'name',\n          'i',\n          'j',\n          'type',\n          'selected',\n          'queue',\n          'technology',\n          'loading',\n          'isDead',\n          'isDestroyed',\n          'isBuilt',\n          'hitPoints',\n          'quantity',\n        ]),\n        isUsedBy: building.isUsedBy?.iname,\n      })\n      const playerData = player => ({\n        ...filterObject(player, [\n          'name',\n          'age',\n          'type',\n          'wood',\n          'food',\n          'stone',\n          'gold',\n          'civ',\n          'color',\n          'population',\n          'POPULATION_MAX',\n          'technologies',\n          'cellViewed',\n          'isPlayed',\n          'hasBuilt',\n        ]),\n        buildings: player.buildings.map(building => buildingData(building)),\n        units: player.units.map(unit => unitData(unit)),\n        corpses: player.corpses.map(corpse => unitData(corpse)),\n        views: player.views.map(view =>\n          view.map(cell => ({\n            ...filterObject(cell, ['i', 'j', 'viewed']),\n            viewBy: (cell.viewBy || []).map(unit => unit.name),\n          }))\n        ),\n      })\n      const cellData = cell => ({\n        ...filterObject(cell, [\n          'z',\n          'type',\n          'viewed',\n          'solid',\n          'visible',\n          'category',\n          'inclined',\n          'border',\n          'waterBorder',\n        ]),\n        has: cell.has?.name,\n        fogSprites: cell.fogSprites.map(({ textureSheet, colorSheet, colorName }) => ({\n          textureSheet,\n          colorSheet,\n          colorName,\n        })),\n      })\n      return {\n        camera: context.controls.camera,\n        players: context.players.map(player => playerData(player)),\n        resources: context.map.resources.map(resource => resourceData(resource)),\n        map: context.map.grid.map(line => line.map(cell => cellData(cell))),\n        animals: context.map.gaia.units.map(animal => animalData(animal)),\n      }\n    }\n\n    const json = cleanContext(this.context)\n    const dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(json))\n    const downloadAnchorNode = document.createElement('a')\n    downloadAnchorNode.setAttribute('href', dataStr)\n    downloadAnchorNode.setAttribute('download', `save_${new Date().toLocaleString('en-GB', { timeZone: 'UTC' })}.json`)\n    document.body.appendChild(downloadAnchorNode)\n    downloadAnchorNode.click()\n    downloadAnchorNode.remove()\n  }\n\n  load(json) {\n    this.context.controls.destroy()\n    this.context.menu.destroy()\n    this.removeChildren()\n    this.context = {\n      ...this.context,\n      player: null,\n      players: [],\n      map: null,\n      controls: null,\n      paused: false,\n    }\n    const { context } = this\n\n    context.map = new Map(context)\n    context.controls = new Controls(context)\n    context.menu = new Menu(context)\n\n    context.map.generateFromJSON(json)\n\n    this.addChild(context.map)\n    this.addChild(context.controls)\n  }\n\n  togglePause(pause) {\n    const { map, players } = this.context\n    if (pause) {\n      const div = document.createElement('div')\n      div.id = 'pause'\n      div.innerText = 'Pause'\n      document.body.appendChild(div)\n    } else {\n      document.getElementById('pause')?.remove()\n    }\n    for (let i = 0; i < map.gaia.units.length; i++) {\n      pause ? map.gaia.units[i].pause() : map.gaia.units[i].resume()\n    }\n    for (let i = 0; i < players.length; i++) {\n      const player = players[i]\n      for (let j = 0; j < player?.units?.length; j++) {\n        pause ? player.units[j].pause() : player.units[j].resume()\n      }\n      for (let j = 0; j < player?.buildings?.length; j++) {\n        pause ? player.buildings[j].pause() : player.buildings[j].resume()\n      }\n    }\n    this.context.paused = pause\n  }\n}\n","import { Assets, Container } from 'pixi.js'\n\n/**\n * Loading Screen\n *\n * @exports LoaderScreen\n */\n\nexport default class LoaderScreen extends Container {\n  constructor() {\n    super()\n    this.app\n\n    this.loadingDiv = document.createElement('div')\n    this.loadingDiv.className = 'loading'\n    document.body.prepend(this.loadingDiv)\n    this.done = () => {}\n  }\n\n  async start() {\n    Assets.addBundle('config', {\n      config: 'assets/config.json',\n      greek: 'assets/greek.json',\n      technology: 'assets/technology.json',\n    })\n\n    Assets.addBundle('interface', {\n      50405: 'assets/interface/50405/texture.json',\n    })\n\n    Assets.addBundle('seeds', {\n      0: 'assets/seeds/0.txt',\n    })\n\n    Assets.addBundle('terrain', {\n      15000: 'assets/terrain/15000/texture.json',\n      15001: 'assets/terrain/15001/texture.json',\n      15002: 'assets/terrain/15002/texture.json',\n    })\n\n    Assets.addBundle('border', {\n      20000: 'assets/border/20000/texture.json',\n      20002: 'assets/border/20002/texture.json',\n    })\n\n    const graphics = [\n      '60',\n      '61',\n      '62',\n      '63',\n      '64',\n      '65',\n      '66',\n      '67',\n      '68',\n      '69',\n      '70',\n      '71',\n      '72',\n      '73',\n      '75',\n      '78',\n      '79',\n      '80',\n      '81',\n      '82',\n      '83',\n      '84',\n      '85',\n      '86',\n      '87',\n      '88',\n      '89',\n      '90',\n      '91',\n      '92',\n      '94',\n      '153',\n      '154',\n      '155',\n      '203',\n      '204',\n      '205',\n      '206',\n      '212',\n      '215',\n      '217',\n      '218',\n      '219',\n      '220',\n      '222',\n      '223',\n      '224',\n      '225',\n      '227',\n      '230',\n      '231',\n      '232',\n      '233',\n      '234',\n      '235',\n      '236',\n      '237',\n      '239',\n      '240',\n      '254',\n      '256',\n      '258',\n      '261',\n      '271',\n      '272',\n      '273',\n      '274',\n      '280',\n      '281',\n      '292',\n      '293',\n      '294',\n      '295',\n      '296',\n      '297',\n      '298',\n      '299',\n      '300',\n      '301',\n      '308',\n      '309',\n      '311',\n      '312',\n      '314',\n      '315',\n      '321',\n      '324',\n      '326',\n      '327',\n      '328',\n      '330',\n      '331',\n      '332',\n      '333',\n      '334',\n      '336',\n      '337',\n      '339',\n      '340',\n      '343',\n      '347',\n      '355',\n      '356',\n      '367',\n      '368',\n      '370',\n      '371',\n      '373',\n      '374',\n      '380',\n      '386',\n      '388',\n      '389',\n      '390',\n      '391',\n      '392',\n      '393',\n      '394',\n      '395',\n      '397',\n      '398',\n      '399',\n      '400',\n      '401',\n      '403',\n      '413',\n      '414',\n      '415',\n      '416',\n      '418',\n      '419',\n      '425',\n      '428',\n      '430',\n      '431',\n      '432',\n      '433',\n      '435',\n      '436',\n      '437',\n      '439',\n      '440',\n      '441',\n      '442',\n      '445',\n      '447',\n      '450',\n      '452',\n      '458',\n      '463',\n      '464',\n      '465',\n      '466',\n      '473',\n      '478',\n      '479',\n      '480',\n      '481',\n      '489',\n      '492',\n      '493',\n      '494',\n      '497',\n      '500',\n      '503',\n      '509',\n      '527',\n      '531',\n      '532',\n      '533',\n      '534',\n      '593',\n      '594',\n      '609',\n      '622',\n      '623',\n      '624',\n      '625',\n      '626',\n      '628',\n      '630',\n      '631',\n      '632',\n      '633',\n      '636',\n      '651',\n      '652',\n      '653',\n      '654',\n      '655',\n      '657',\n      '658',\n      '664',\n      '667',\n      '670',\n      '672',\n      '673',\n      '676',\n      '677',\n      '678',\n      '680',\n      '681',\n      '682',\n      '683',\n      '684',\n      '688',\n    ]\n\n    Assets.addBundle(\n      'graphics',\n      graphics.reduce(\n        (acc, g) => ({\n          ...acc,\n          [g]: `assets/graphics/${g}/texture.json`,\n        }),\n        {}\n      )\n    )\n\n    const sounds = [\n      '5002',\n      '5003',\n      '5005',\n      '5006',\n      '5008',\n      '5009',\n      '5010',\n      '5011',\n      '5012',\n      '5022',\n      '5027',\n      '5036',\n      '5044',\n      '5048',\n      '5054',\n      '5055',\n      '5056',\n      '5057',\n      '5058',\n      '5059',\n      '5060',\n      '5061',\n      '5062',\n      '5063',\n      '5064',\n      '5070',\n      '5075',\n      '5076',\n      '5085',\n      '5096',\n      '5107',\n      '5108',\n      '5118',\n      '5123',\n      '5125',\n      '5126',\n      '5128',\n      '5129',\n      '5132',\n      '5133',\n      '5138',\n      '5139',\n      '5140',\n      '5159',\n      '5142',\n      '5144',\n      '5164',\n      '5166',\n      '5169',\n      '5176',\n      '5178',\n      '5180',\n      '5186',\n      '5196',\n      '5201',\n      '5216',\n      '5217',\n      '5239',\n    ]\n\n    Assets.addBundle(\n      'sounds',\n      sounds.reduce(\n        (acc, g) => ({\n          ...acc,\n          [g]: `assets/sounds/${g}.wav`,\n        }),\n        {}\n      )\n    )\n\n    this.loadingDiv.innerHTML = 'Loading config..'\n    await Assets.loadBundle('config')\n    this.loadingDiv.innerHTML = 'Loading interface..'\n    await Assets.loadBundle('interface')\n    this.loadingDiv.innerHTML = 'Loading seeds..'\n    await Assets.loadBundle('seeds')\n    this.loadingDiv.innerHTML = 'Loading terrain..'\n    await Assets.loadBundle('terrain')\n    this.loadingDiv.innerHTML = 'Loading border..'\n    await Assets.loadBundle('border')\n    this.loadingDiv.innerHTML = 'Loading graphics..'\n    await Assets.loadBundle('graphics')\n    this.loadingDiv.innerHTML = 'Loading sounds..'\n    await Assets.loadBundle('sounds')\n\n    this.onComplete()\n  }\n\n  onComplete() {\n    this.loadingDiv.remove()\n    this.done()\n  }\n\n  onLoaded(callback = () => {}) {\n    this.done = callback\n  }\n}\n","import { Application } from 'pixi.js'\nimport './styles.css'\nimport Game from './screens/Game'\nimport Loader from './screens/Loader'\n;(async () => {\n  // Create a new PixiJS application\n  const app = new Application()\n\n  // Initialize the app with background color and auto-resize\n  await app.init({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    background: 0x000000, // black background\n    resizeTo: window,\n    antialias: false, // faster\n    resolution: window.devicePixelRatio || 1,\n    autoDensity: true, // adjusts canvas for resolution\n    powerPreference: 'high-performance', // GPU hint\n  })\n\n  // Append the canvas to your game container\n  const gamebox = document.getElementById('game')\n  if (!gamebox) {\n    console.error('No #game container found')\n    return\n  }\n  gamebox.appendChild(app.canvas)\n\n  // Initialize loader\n  const loader = new Loader()\n  app.stage.addChild(loader)\n  loader.start()\n\n  // Once assets are loaded, remove loader and start game\n  loader.onLoaded(() => {\n    const game = new Game(app, gamebox)\n    app.stage.removeChild(loader)\n    app.stage.addChild(game)\n  })\n\n  // Optional: global pointermove listener\n  app.stage.on('pointermove', event => {\n    // event.data.global.x, event.data.global.y\n  })\n})()\n"],"names":["inProgress","dataWebpackPrefix","promise","async","detectVideoAlphaMode","gl","get","createCanvas","getContext","video","Promise","resolve","video2","document","createElement","onloadeddata","onerror","autoplay","crossOrigin","preload","src","load","texture","createTexture","bindTexture","TEXTURE_2D","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","texImage2D","RGBA","UNSIGNED_BYTE","pixel","Uint8Array","readPixels","deleteFramebuffer","deleteTexture","getExtension","loseContext","repetitionMap","repeat","addressModeU","addressModeV","FillPattern","constructor","repetition","this","uid","_tick","transform","scale","frame","width","height","source","style","setTransform","copyFrom","invert","_texture","value","styleKey","destroy","contextSettings","willReadFrequently","_CanvasTextMetrics","experimentalLetterSpacingSupported","result","_experimentalLetterSpacingSupported","proto","getCanvasRenderingContext2D","prototype","text","lines","lineWidths","lineHeight","maxLineWidth","fontProperties","measureText","canvas","_canvas","wordWrap","textKey","_measurementCache","has","font","measureFont","fontSize","ascent","context","__context","_wordWrap","split","Array","length","i","lineWidth","_measureText","letterSpacing","Math","max","strokeWidth","_stroke","dropShadow","distance","leading","measurements","set","useExperimentalLetterSpacing","experimentalLetterSpacing","textLetterSpacing","metrics","metricWidth","actualBoundingBoxLeft","boundsWidth","actualBoundingBoxRight","val","graphemeSegmenter","line","cache","Object","create","whiteSpace","collapseSpaces","_collapseSpaces","collapseNewlines","_collapseNewlines","canPrependSpaces","wordWrapWidth","tokens","_tokenize","token","_isNewline","_addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","_getFromCache","canBreakWords","breakWords","characters","wordWrapSplit","j","char","lastChar","k","nextChar","canBreakChars","characterWidth","isLastToken","newLine","_trimRight","key","slice","_newlines","includes","charCodeAt","_nextChar","_breakingSpaces","push","_token","_char","_index","_breakWords","_fonts","_context","METRICS_STRING","BASELINE_SYMBOL","properties","actualBoundingBoxAscent","descent","actualBoundingBoxDescent","clearMetrics","__canvas","c","OffscreenCanvas","_cx","BASELINE_MULTIPLIER","HEIGHT_MULTIPLIER","Intl","Segmenter","segmenter","s","segments","segment","CanvasTextMetrics","tempMat","TextureMatrix","clampMargin","mapCoord","uClampFrame","Float32Array","uClampOffset","_textureID","_updateID","clampOffset","isSimple","removeListener","update","addListener","multiplyUvs","uvs","out","mat","x","y","a","tx","b","d","ty","tex","x1","x0","y1","y0","x3","y3","orig","trim","append","texBase","margin","_resolution","offset","pixelWidth","pixelHeight","rotate","RenderGroup","renderPipeId","root","canBundle","renderGroupParent","renderGroupChildren","worldTransform","worldColorAlpha","worldColor","worldAlpha","childrenToUpdate","updateTick","gcTick","childrenRenderablesToUpdate","list","index","structureDidChange","instructionSet","_onRenderContainers","textureNeedsUpdate","isCachedAsTexture","_matrixDirty","init","_onRender","addOnRender","didChange","children","child","_updateFlags","addChild","enableCacheAsTexture","options","textureOptions","disableCacheAsTexture","returnTexture","updateCacheTexture","cachedParent","_parentCacheAsTextureRenderGroup","reset","childrenAtDepth","fill","localTransform","addRenderGroupChild","renderGroupChild","_removeRenderGroupChild","indexOf","splice","parentRenderGroup","parent","relativeRenderGroupDepth","onChildUpdate","renderGroup","removeChild","removeOnRender","removeChildren","updateRenderable","renderable","globalDisplayStatus","renderPipes","didViewUpdate","onChildViewUpdate","isRenderable","localDisplayStatus","container","runOnRender","renderer","getChildren","_getChildren","invalidateMatrices","inverseWorldTransform","_inverseWorldTransform","textureOffsetInverseTransform","_textureOffsetInverseTransform","translate","_textureBounds","inverseParentTextureTransform","_inverseParentTextureTransform","parentCacheAsTexture","prepend","cacheToLocalTransform","matrixPool","getPool","boundsPool","CanvasSource","resource","autoDensity","resolution","super","uploadMethodId","resizeCanvas","transparent","resize","didResize","test","globalThis","HTMLCanvasElement","context2D","_context2D","extension","TextureSource","genericFontFamilies","fontStringFromTextStyle","fontSizeString","fontFamilies","fontFamily","isArray","fontStyle","fontVariant","fontWeight","join","_Spritesheet","optionsOrTexture","arg1","linkedSheets","data","cachePrefix","Texture","textureSource","textures","animations","metaResolution","parseFloat","meta","_frames","frames","_frameKeys","keys","_batchIndex","_callback","parse","BATCH_SIZE","_processFrames","_processAnimations","_parseComplete","_nextBatch","initialFrameIndex","frameIndex","maxFrames","rect","sourceSize","trimmed","Rectangle","floor","w","h","rotated","spriteSourceSize","defaultAnchor","anchor","defaultBorders","borders","label","toString","animName","frameName","callback","call","setTimeout","destroyBase","Spritesheet","validImages","getCacheableAssets","asset","ignoreMultiPack","forEach","basePath","path","dirname","item","out2","related_multi_packs","assign","spritesheetAsset","Asset","resolver","type","ResolveParser","name","pop","format","Resolver","RETINA_PREFIX","exec","loader","id","LoadParser","priority","LoaderParser","Normal","extname","toLowerCase","imageTexture","imageFilename","lastIndexOf","imagePath","copySearchParams","image","spritesheet","multiPacks","promises","itemUrl","res","all","concat","filter","sp","unload","_resolvedAsset","_sourceOrigin","add","WHITE_BGR","multiplyColors","localBGRColor","parentBGRColor","updateQuadBounds","bounds","sourceWidth","sourceHeight","minX","_x","maxX","minY","_y","maxY","idHash","_TextureStyle","_resourceType","_touched","_maxAnisotropy","destroyed","defaultOptions","addressMode","addressModeW","scaleMode","magFilter","minFilter","mipmapFilter","lodMinClamp","lodMaxClamp","compare","maxAnisotropy","wrapMode","min","_resourceId","_sharedResourceId","_generateResourceId","emit","bigKey","createResourceIdFromString","removeAllListeners","TextureStyle","roundPixelsBit","vertex","header","roundPixelsBitGl","Shader","_uniformBindMap","_ownedBindGroups","gpuProgram","glProgram","groups","resources","compatibleRenderers","groupMap","WEBGPU","WEBGL","nameHash","Error","uniformName","group","binding","groupData","structsAndGroups","bindTick","setResource","_buildResourceAccessor","addResource","groupIndex","bindIndex","_a","_b","uniformsOut","defineProperty","getResource","destroyPrograms","bindGroup","from","gpu","rest","module","exports","content","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","sourceMapping","getTestContext","isContextLost","UNIFORM_TYPES_VALUES","UNIFORM_TYPES_MAP","reduce","acc","getDefaultUniformValue","size","_UniformGroup","uniformStructures","isUniformGroup","_dirtyId","uniforms","uniformData","arrayMatch","match","innerType","ubo","isStatic","_signature","createIdFromString","map","UniformGroup","WGSL_TO_VERTEX_TYPES","f32","vec2f","vec3f","vec4f","i32","u32","bool","extractStructAndGroups","wgsl","groupPattern","bindingPattern","namePattern","typePattern","structMemberPattern","structName","parseInt","isUniform","structs","struct","members","member","name2","some","ShaderStage","ShaderStage2","programCache","GpuProgram","_layoutKey","_attributeLocationsKey","fragment","layout","gpuLayout","vertexStructsAndGroups","fragmentStructsAndGroups","structNameSet","Set","dupeGroupKeySet","removeStructAndGroupDuplicates","generateLayoutHash","visibility","VERTEX","FRAGMENT","buffer","sampler","sampleType","viewDimension","multisampled","generateGpuLayoutGroups","autoAssignGlobalUniforms","globalUniforms","autoAssignLocalUniforms","localUniforms","_generateProgramKey","entryPoint","attributeData","_attributeData","results","mainVertStart","arrowFunctionStart","functionArgsSubstring","substring","inputsRegex","location","stride","getAttributeInfoFromFormat","instance","start","extractAttributesFromGpuProgram","_cacheKey","styleElement","nonce","setAttribute","getGlobalBounds","target","skipUpdateTransform","parentTransform","pooledMatrix","clear","identity","updateTransformBackwards","IDENTITY","_getGlobalBounds","return","isValid","visible","measurable","updateLocalTransform","appendFrom","parentBounds","preserveBounds","effects","boundsArea","addRect","renderableBounds","isEmpty","matrix","addBounds","hasOwnProperty","prefix","Events","EE","fn","once","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","a1","a2","a3","a4","a5","args","len","arguments","undefined","apply","on","off","prefixed","defaultMatrix","Bounds","Infinity","rectangle","_rectangle","copyFromBounds","addFrame","addBoundsMask","mask","applyMatrix","fit","left","right","top","bottom","fitBounds","pad","paddingX","paddingY","ceil","clone","isPositive","addVertexData","vertexData","beginOffset","endOffset","localX","localY","containsPoint","colorBit","main","colorBitGl","tempPoints","Number","EMPTY","copyTo","contains","strokeContains","alignment","strokeWidthOuter","strokeWidthInner","intersects","other","x02","y02","lt","lb","rt","rb","sign","nx","ny","n00","n10","n01","n11","mx","my","m00","m10","m01","m11","x2","y2","eps","enlarge","getBounds","containsRect","LRU","ttl","resetTtl","first","items","last","prev","next","entries","evict","bypass","expiresAt","expiry","Date","now","delete","moveToEnd","setWithEvicted","evicted","values","lru","isNaN","Buffer","usage","shrinkToFit","_dataInt32","_data","byteLength","mappedAtCreation","descriptor","setDataWithSize","dataInt32","Int32Array","static","STATIC","syncGPU","_updateSize","BYTES_PER_ELEMENT","oldData","sizeInBytes","ExtensionType","ExtensionType2","normalizeExtension","ext","ref","normalizeExtensionPriority","defaultPriority","extensions","_addHandlers","_removeHandlers","_queue","remove","extensions2","queue","handle","onAdd","onRemove","addHandlers","removeHandlers","handleByMap","handleByNamedList","findIndex","sort","handleByList","mixin","Target","sources","defineProperties","getOwnPropertyDescriptors","r","grad","turn","rad","PI","t","n","pow","round","e","u","isFinite","g","o","v","f","p","m","string","substr","object","N","M","H","$","parsed","rgba","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","saturate","desaturate","grayscale","lighten","darken","hue","alpha","isEqual","S","white","bisque","blue","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","black","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","gray","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","magenta","green","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","tan","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","red","yellow","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","_Color","_value","_components","_int","setValue","_cloneSource","_isSourceEqual","_normalize","ArrayBuffer","isView","value1","value2","type1","every","keys1","keys2","toRgba","toRgbaString","toUint8RgbArray","_arrayRgb","toArray","_arrayRgba","toRgbArray","toNumber","toBgrNumber","toLittleEndianNumber","multiply","_temp","_refreshInt","premultiply","applyToRGB","toPremultiplied","hexString","toHexa","alphaString","setAlpha","_clamp","Uint8ClampedArray","HEX_PATTERN","color","isColorLike","shared","Color","getLocalBounds","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","addLocalBounds","Pool","ClassType","initialSize","_pool","_count","_classType","prepopulate","total","totalSize","totalFree","totalUsed","BigPool","_poolsByClass","Map","Class","stats","pool","ID","free","used","GlobalResourceRegistry","register","_VideoSource","isReady","_autoUpdate","_isConnectedToTicker","_updateFPS","updateFPS","_msToNextUpdate","autoPlay","alphaMode","_videoFrameRequestCallback","bind","_videoFrameRequestCallbackHandle","_load","_resolve","_reject","_onCanPlay","_onCanPlayThrough","_onError","_onPlayStart","_onPlayStop","_onSeeked","autoLoad","updateFrame","elapsedMS","playbackRate","requestVideoFrameCallback","videoWidth","videoHeight","readyState","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","complete","addEventListener","_isSourceReady","_mediaReady","reject","preloadTimeoutMs","_preloadTimeout","ErrorEvent","removeEventListener","_isSourcePlaying","paused","ended","_configureAutoUpdate","clearTimeout","play","pause","autoUpdate","cancelVideoFrameCallback","HTMLVideoElement","crossorigin","loop","muted","playsinline","MIME_TYPES","ogv","mov","m4v","VideoSource","transformVertices","vertices","buildCircle","ShapeBuilder","build","shape","points","dx","dy","rx","ry","circle","radius","ellipse","halfWidth","halfHeight","roundedRect","sqrt","j1","j2","j3","j4","y22","cos","sin","x12","x22","y12","triangulate","verticesStride","verticesOffset","indices","indicesOffset","centerX","centerY","count","centerIndex","buildEllipse","buildRoundedRectangle","closePointEps","square","innerWeight","outerWeight","clockwise","verts","exx","eyy","eix","eiy","eox","eoy","cx","cy","sx","sy","ex","ey","cx2p0x","cy2p0y","angle0","atan2","angle1","startAngle","angleDiff","absAngleDiff","abs","segCount","angleInc","angle","earcut","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","triangles","invSize","steiner","getLeftmost","compareXYSlope","eliminateHole","eliminateHoles","earcutLinked","end","sum","signedArea","insertNode","equals","removeNode","filterPoints","again","ear","pass","z","zOrder","prevZ","nextZ","numMerges","inSize","tail","q","pSize","qSize","sortLinked","indexCurve","stop","isEarHashed","isEar","cureLocalIntersections","splitEarcut","ax","bx","ay","by","pointInTriangleExceptFirst","minZ","maxZ","locallyInside","isValidDiagonal","splitPolygon","hole","bridge","hx","hy","qx","tanMin","pointInTriangle","sectorContainsSector","findHoleBridge","bridgeReverse","leftmost","px","py","intersectsPolygon","inside","middleInside","p1","p2","q1","q2","o1","o2","o3","o4","onSegment","num","createNode","b2","an","bp","triangulateWithHoles","holes","emptyArray","buildPolygon","buildRectangle","rectData","verticesIndex","buildTriangle","tempTextureMatrix","Matrix","tempRect","shapeBuilders","addTextureToGeometryData","batches","geometryData","dw","dh","indexOffset","vertOffset","textureUvs","graphicsBatch","BatchableGraphics","indexSize","attributeOffset","attributeSize","baseColor","addShapePathToGeometryData","shapePath","isStroke","shapePrimitives","topology","close","closePath","lineStyle","pixelLine","closed","fx","fy","lx","ly","indexStart","buildPixelLine","flipAlignment","orientation","area","getOrientationOfPoints","firstPoint","Point","lastPoint","closedShape","closedPath","midPointX","midPointY","unshift","indexCount","widthSquared","miterLimitSquared","miterLimit","perpX","perpY","perp1x","perp1y","dist","cap","dx0","dy0","dx1","dy1","dot","cross","c1","c2","pDist","imx","imy","omx","omy","insideWeight","curveEps","buildLine","otherPoints","holePrimitives","holeArrays","holePrimitive","holePoints","getHoleArrays","uvsOffset","WHITE","textureMatrix","textureSpace","mTx","mTy","b1","d1","sourceStyle","FillGradient","generateTextureMatrix","uvsStride","buildUvs","buildSimpleUvs","GpuGraphicsContext","GraphicsContextRenderData","instructions","InstructionSet","maxTextures","batcher","DefaultBatcher","geometry","deprecation","_GraphicsContextSystem","_gpuContextHash","_graphicsDataContextHash","_renderer","renderableGC","addManagedHash","bezierSmoothness","getContextRenderData","_initContextRenderData","updateGpuContext","gpuContext","_initContext","dirty","_cleanGraphicsContextData","instruction","action","buildContextBatches","batchMode","customShader","isBatchable","getGpuContext","graphicsData","limits","maxBatchableTextures","vertexSize","applyTransform","ensureAttributeBuffer","ensureIndexBuffer","begin","batch","finish","indexBuffer","buffers","attributeBuffer","float32View","drawBatches","getTextureBatchBindGroup","onGraphicsContextDestroy","WebGLSystem","WebGPUSystem","CanvasSystem","GraphicsContextSystem","_Filter","enabled","_state","for2d","blendMode","padding","antialias","blendRequired","clipToViewport","filterManager","input","output","clearMode","applyFilter","Filter","VERSION","squaredDistanceToLineSegment","lenSq","xx","yy","param","Polygon","flat","il","isClockwise","containsPolygon","polygon","thisBounds","otherBounds","tempRect2","xi","yi","xj","yj","strokeWidthSquared","rightWidthSquared","leftWidthSquared","iterationLength","pointsDesc","currentPoint","lastX","lastY","startX","startY","TexturePool","_poolKeyHash","_texturePool","enableFullScreen","textureStyle","autoGarbageCollect","getOptimalTexture","frameWidth","frameHeight","po2Width","po2Height","updateUvs","getSameSizeTexture","renderTexture","resetStyle","destroyTextures","maxTexturesPerBatchCache","BatchTextureArray","ids","Batch","gpuBindGroup","batchPool","batchPoolIndex","getBatchFromPool","returnBatchToPool","BATCH_TICK","_Batcher","batchIndex","_elements","getParameter","MAX_TEXTURE_IMAGE_UNITS","checkMaxIfStatementsInShader","getMaxTexturesPerBatch","attributesInitialSize","indicesInitialSize","ViewableBuffer","Uint16Array","elementSize","elementStart","_batchIndexStart","_batchIndexSize","batchableObject","_indexStart","_attributeStart","_batcher","checkAndUpdateTexture","textureId","_batch","_source","_textureId","updateElement","packAsQuad","packQuadAttributes","uint32View","packAttributes","elements","textureBatch","firstElement","getAdjustedBlendModeBlend","_resizeAttributeBuffer","_resizeIndexBuffer","element","adjustedBlendMode","breakRequired","_batchTick","_finishBatch","_textureBindLocation","packQuadIndex","packIndex","break","newSize","newArrayBuffer","fastCopy","rawBinaryData","newIndexBuffer","Uint32Array","Batcher","placeHolderBufferData","placeHolderIndexData","BatchGeometry","Geometry","COPY_DST","attributes","aPosition","aUV","aColor","aTextureIdAndRound","INDEX","DefaultShader","bits","generateTextureBatchBit","batchSamplers","getBatchSamplersUniformGroup","defaultShader","_DefaultBatcher","shader","textureIdAndRound","roundPixels","wt","positions","argb","i2","w0","w1","h0","h1","PRECISION","getCanvasFillStyle","fillStyle","textMetrics","pattern","createPattern","tempMatrix","fillPattern","fillGradient","isLinear","isLocal","gradient","isNearlyVertical","createLinearGradient","center","innerRadius","outerCenter","outerRadius","createRadialGradient","ratio","colorStops","globalStop","addColorStop","_TextStyle","oldStyle","defaults","TextStyle","defaultDropShadow","dropShadowAlpha","dropShadowAngle","blur","dropShadowBlur","dropShadowColor","dropShadowDistance","strokeThickness","stroke","obj","fillGradientStops","gradientFill","fills","convertV7Tov8Style","fullStyle","defaultTextStyle","align","_align","_dropShadow","_createProxy","_fontFamily","_fontSize","_fontStyle","_fontVariant","_fontWeight","_leading","_letterSpacing","_lineHeight","_padding","filters","_filters","freeze","_trim","textBaseline","_textBaseline","_whiteSpace","_wordWrapWidth","_originalFill","_isFillStyle","defaultFillStyle","_fill","_originalStroke","defaultStrokeStyle","defaultStyle","_getFinalPadding","filterPadding","destroyTextureSource","cb","Proxy","property","newValue","ObservablePoint","observer","_observer","_onUpdate","ImageSource","HTMLImageElement","ImageBitmap","VideoFrame","BufferImageSource","Int16Array","Int8Array","fragTemplate","generateIfTestSrc","maxIfs","createShader","FRAGMENT_SHADER","fragmentSrc","replace","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","deleteShader","_","command","numbers","number","parseValues","targetUrl","sourceUrl","searchParams","removeItems","arr","startIdx","removeCount","NOOP","dynamic","noFrame","isTexture","_textureMatrix","nX","nY","nW","nH","w2","h2","cX","cY","groupD8","NW","uX","uY","destroySource","baseTexture","css","styleSheet","cssText","firstChild","appendChild","createTextNode","unsafeEval","unsafeEvalSupported","func","Function","_e","array","fromArray","transpose","pos","newPos","applyInverse","tx1","d2","pivotX","pivotY","scaleX","scaleY","rotation","skewX","skewY","decompose","pivot","delta","skew","position","isIdentity","identityMatrix","getBitmapTextLayout","chars","trimEnd","layoutData","offsetY","baseMeasurementFontSize","charPositions","spaceWidth","spacesIndex","baseLineOffset","currentLine","previousChar","firstWord","currentWord","spaceWord","adjustedLetterSpacing","adjustedWordWrapWidth","adjustedLineHeight","nextWord","word","nextLine","xAdvance","checkIsOverflow","isEnd","charData","kerning","nextCharWidth","measurementData","alignCenter","alignRight","indy","spaceIndex","totalSpaces","alignJustify","uidCache","default","BindGroup","_dirty","_updateKey","keyParts","_key","currentResource","onResourceChange","_touch","tick","Graphics","_ownedContext","onViewUpdate","allowChildren","updateBounds","point","_callContextMethod","method","setFillStyle","setStrokeStyle","beginPath","cut","arc","arcTo","arcToSvg","bezierCurveTo","lineTo","moveTo","quadraticCurveTo","roundRect","poly","regularPoly","roundPoly","roundShape","filletRect","chamferRect","star","svg","restore","save","getTransform","resetTransform","rotateTransform","scaleTransform","translateTransform","strokeStyle","deep","beginFill","endFill","drawCircle","drawEllipse","drawPolygon","drawRect","drawRoundedRect","drawStar","currentAdapter","createImage","Image","CanvasRenderingContext2D","getWebGLRenderingContext","WebGLRenderingContext","getNavigator","navigator","getBaseUrl","baseURI","window","href","getFontFaceSet","fonts","fetch","url","parseXML","xml","DOMParser","parseFromString","DOMAdapter","adapter","warnCount","maxWarnings","warn","console","insertStyleElement","supports","media","needLayer","layer","sourceMap","styleTagTransform","parentNode","removeStyleElement","cachedGroups","imul","bindGroupResources","generateTextureBatchBindGroup","CanvasPool","canvasOptions","_canvasPool","_createCanvasAndContext","getOptimalCanvasAndContext","minWidth","minHeight","canvasAndContext","returnCanvasAndContext","clearRect","LoaderParserPriority","LoaderParserPriority2","cssWithMappingToString","modules","dedupe","alreadyImportedModules","_k","tempPoint","nextPow2","isPow2","UPDATE_PRIORITY","UPDATE_PRIORITY2","instructionSize","renderables","log","table","batcherName","groupBlendMode","rgb","bgr","groupColor","groupAlpha","groupTransform","gpuBuffer","memo","insert","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","CLEAR","CLEAR2","Cache","_parsers","_cache","_cacheMap","cacheableAssets","parsers","parser","cacheableMap","key2","cacheKeys","cachedAssets","cacheMap","Sprite","batched","_visualBounds","_anchor","skipCache","currentTexture","_width","_setWidth","_height","_setHeight","visualBounds","sourceBounds","_bounds","_gpuData","getSize","setSize","SystemRunner","_name","a0","a6","a7","removeAll","empty","emptyColorStops","_FillGradient","textureSize","defaultLinearOptions","ensureGradientOptions","defaultRadialOptions","_textureSize","_wrapMode","buildLinearGradient","flip","temp","defaultSize","getCanvas","addColorStops","fillRect","buildGradient","buildRadialGradient","r0","r1","ox","oy","blendModeIds","normal","screen","overlay","erase","_State","polygonOffset","blend","depthMask","offsets","cullMode","culling","clockwiseFrontFace","depthTest","_blendMode","_blendModeId","_polygonOffset","state","default2d","State","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","indexByIdentifier","references","updater","addElementStyle","byIndex","api","domAPI","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","idCounts","groupId","TickerListener","previous","_destroyed","_fn","_once","ticker","redirect","connect","hard","_Ticker","autoStart","deltaTime","lastTime","speed","started","_requestId","_maxElapsedMS","_minElapsedMS","_protected","_lastFrame","_head","deltaMS","targetFPMS","time","requestAnimationFrame","_requestIfNeeded","performance","_cancelIfNeeded","cancelAnimationFrame","_startIfPossible","NORMAL","_addListener","addOnce","current","currentTime","FPS","minFPS","fps","maxFPS","minFPMS","_shared","system","_system","Ticker","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","row","_ux","_uy","_vx","_vy","E","SE","SW","W","NE","MIRROR_VERTICAL","MAIN_DIAGONAL","MIRROR_HORIZONTAL","REVERSE_DIAGONAL","ind","vX","vY","inv","rotationSecond","rotationFirst","sub","rotate180","isVertical","byDirection","matrixAppendRotationInv","transformRectCoords","sourceFrame","frameX","frameY","cacheAsTextureMixin","cacheAsTexture","disableRenderGroup","enableRenderGroup","cacheAsBitmap","childrenHelperMixin","beginIndex","endIndex","range","removed","parentRenderLayer","detach","_didViewChangeTick","RangeError","removeChildAt","getChildAt","setChildIndex","getChildIndex","addChildAt","currentIndex","sortableChildren","sortDirty","swapChildren","child2","index1","index2","_didContainerChangeTick","removeFromParent","reparentChild","reparentChildAt","childMat","newMatrix","setFromMatrix","replaceChild","oldChild","newChild","collectRenderablesMixin","collectRenderables","currentLayer","includeInBuild","sortChildren","collectRenderablesSimple","addRenderGroup","collectRenderablesWithEffects","effect","pipe","MaskEffectManager","_effectClasses","_tests","_initialized","maskClass","getMaskEffect","returnMaskEffect","MaskEffect","effectsMixin","_maskEffect","_maskOptions","inverse","_filterEffect","_markStructureAsChanged","addEffect","_updateIsSimple","removeEffect","setMask","FilterEffect","hasFilters","filterArea","findMixin","getChildByName","getChildByLabel","RegExp","found","getChildrenByLabel","getFastGlobalBoundsMixin","getFastGlobalBounds","factorRenderLayers","_getGlobalBoundsRecursive","localBounds","manageEffects","viewBounds","advanced","relativeGroupTransform","bgr2rgb","getGlobalMixin","getGlobalAlpha","skipUpdate","getGlobalTransform","getGlobalTint","localColor","tint","checkChildrenDidChange","previousData","measureMixin","_localBoundsCacheId","_localBoundsCacheData","localWidth","localHeight","localBoundsCacheData","onRenderMixin","onRender","sortMixin","_zIndex","zIndex","depthOfChildModified","toLocalGlobalMixin","getGlobalPosition","toGlobal","_position","globalMatrix","toLocal","defaultSkew","defaultPivot","defaultScale","defaultOrigin","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","Container","parentRenderGroupIndex","_scale","_pivot","_origin","_skew","_sx","_cy","_sy","_rotation","localAlpha","groupColorAlpha","localBlendMode","_didLocalTransformChangeId","ignore","assignWithIgnore","_didChangeId","_updateSkew","isRenderGroup","_worldTransform","origin","updateTransform","opts","originX","originY","localTransformChangeId","valueNumber","culled","oldChildren","cullArea","cullable","cullableChildren","ensureIsBuffer","instanceCount","_boundsDirty","addAttribute","addIndex","onBufferUpdate","getAttribute","getIndex","getBuffer","attribute","attributeOption","ensureIsAttribute","attributeId","byteSize","getGeometryBounds","destroyBuffers","_DynamicBitmapFont","AbstractBitmapFont","pages","_measureCache","_currentChars","_currentX","_currentY","_currentMaxCharHeight","_currentPageIndex","_skipKerning","dynamicOptions","_mipmap","mipmap","overrideFill","applyFillAsTint","requestedFontSize","overrideSize","baseRenderedFontSize","_style","skipKerning","_textureStyle","fontMetrics","ensureCharacters","charList","self","pageData","_nextPage","currentX","currentY","currentMaxCharHeight","fontScale","skipTexture","maxTextureWidth","maxTextureHeight","paddedWidth","paddedHeight","pageData2","codePointAt","xOffset","yOffset","_drawGlyph","_applyKerning","pageTextures","newChars","measureCache","second","amount","textureResolution","_setupContext","autoGenerateMipmaps","lineJoin","shadowOptions","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","removeShadow","strokeText","fillText","DynamicBitmapFont","fontCount","BitmapFontManager","ALPHA","NUMERIC","ALPHANUMERIC","ASCII","getFont","fontFamilyKey","styleCopy","fnt","dynamicFont","getLayout","bitmapFont","install","textStyle","dynamicFill","_canUseTintForStyle","flatChars","startCode","endCode","String","fromCharCode","resolveCharacters","uninstall","cacheKey","processX","depth","tags","createStringVariations","vars","_defaultBundleIdentifierOptions","connector","createBundleAssetId","bundleId","assetId","_bundleIdConnector","extractAssetIdFromBundle","assetBundleId","_createBundleAssetId","_extractAssetIdFromBundle","_assetMap","_preferredOrder","_resolverHash","_bundles","setBundleIdentifier","bundleIdentifier","prefer","preferOrders","params","_basePath","rootPath","_rootPath","_manifest","_defaultSearchParams","setDefaultSearchParams","queryValues","getAlias","alias","convertToList","addManifest","manifest","bundles","bundle","addBundle","assets","assetNames","convertedAssets","srcs","aliases","bundleAssetId","bundleIds","keyCheck","hasKey","loadParser","userDefinedLoadParser","userDefinedParser","srcsToUse","src2","aliasesToUse","resolvedAssets","formattedAsset","_buildResolvedAsset","resolveBundle","singleAsset","isSingleItem","resolveUrl","preferredOrder","_getPreferredOrder","priorityKey","filteredAssets","hasBundle","preferred","find","preference","_appendDefaultSearchParams","assetData","toAbsolute","shift","BufferUsage","BufferUsage2","___CSS_LOADER_EXPORT___","BLEND_TO_NPM","STENCIL_MODES","STENCIL_MODES2","ViewContainer","_roundPixels","_lastUsed","pushBlendMode","addRenderable","popBlendMode","environments","Environment","defaultRunners","_AbstractRenderer","config","runners","_initOptions","_systemsHash","combinedRunners","_addRunners","_unsafeEvalCheck","skip","skipExtensionImports","manageImports","env","loadEnvironmentExtensions","_addSystems","systems","_addPipes","renderPipeAdaptors","systemName","render","deprecated","view","renderTarget","_lastObjectRendered","clearColor","background","colorRgba","clearBeforeRender","isRGBAArray","prerender","renderStart","renderEnd","postrender","desiredScreenWidth","desiredScreenHeight","previousResolution","resolutionChange","ALL","lastObjectRendered","renderingToScreen","runnerIds","runnerId","_addSystem","ClassRef","pipes","pipeAdaptors","adaptors","adaptor","PipeClass","Adaptor","reverse","runner","releaseGlobalResources","release","generateTexture","textureGenerator","resetState","failIfMajorPerformanceCaveat","AbstractRenderer","isFillPattern","isFillGradient","handleFillPattern","handleFillGradient","toFillStyle","objectStyle","handleColorLike","handleTexture","handleFillObject","toStrokeStyle","batchSamplersUniformGroupHash","batchSamplersUniformGroup","sampleValues","uTextures","multiplyHexColors","color1","color2","definedProps","attributeFormatData","uint8x2","normalised","uint8x4","sint8x2","sint8x4","unorm8x2","unorm8x4","snorm8x2","snorm8x4","uint16x2","uint16x4","sint16x2","sint16x4","unorm16x2","unorm16x4","snorm16x2","snorm16x4","float16x2","float16x4","float32","float32x2","float32x3","float32x4","uint32","uint32x2","uint32x3","uint32x4","sint32","sint32x2","sint32x3","sint32x4","maxFragmentPrecision","getMaxFragmentPrecision","getShaderPrecisionFormat","shaderFragment","HIGH_FLOAT","precision","fragmentNameCache","VertexNameCache","processes","stripVersion","isES300","ensurePrecision","isFragment","maxSupportedPrecision","maxSupportedFragmentPrecision","maxSupportedVertexPrecision","requestedFragmentPrecision","requestedVertexPrecision","addProgramDefines","setProgramName","nameCache","insertVersion","_GlProgram","preprocessorOptions","preferredFragmentPrecision","preferredVertexPrecision","processKey","processOptions","transformFeedbackVaryings","_uniformData","_uniformBlockData","GlProgram","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","Float64Array","remainingBytes","sourceUint8View","PI_2","RAD_TO_DEG","DEG_TO_RAD","setAttributes","ApplicationInitHook","__PIXI_APP_INIT__","Application","RendererInitHook","__PIXI_RENDERER_INIT__","addBits","srcParts","parts","part","toLocaleLowerCase","sanitisedPart","findHooksRx","compileHooks","programSrc","hook","extractInputs","fragmentSource","regex","compileInputs","fragments","template","mainInput","finalString","inValue","cleanedString","extractOutputs","injectBits","templateSrc","fragmentParts","bitCacheMap","CACHE_UID","compileHighShaderGl","cacheId","generateCacheId","compileBits","highFragment","vertexParts","shaderBit","vertexGPUTemplate","fragmentGPUTemplate","vertexGlTemplate","fragmentGlTemplate","globalUniformsBit","globalUniformsBitGl","compileHighShaderGpuProgram","vertexFragments","fragmentFragments","compiledVertex","mainStruct","mainStart","mainEnd","extractVariableName","compiledCode","compileOutputs","compileInputsAndOutputs","compileHighShader","compileHighShaderGlProgram","Circle","r2","outerWidth","Ellipse","normx","normy","strokeOuterWidth","strokeInnerWidth","innerHorizontal","innerVertical","outerHorizontal","outerVertical","normalizedX","normalizedY","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","rightBound","bottomBound","FLT_EPSILON","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","distanceTolerance","recursive","x4","y4","level","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","buildAdaptiveQuadratic","buildArc","steps","TAU","ang1","ang2","mapToEllipse","cosPhi","sinPhi","xp","yp","approxUnitArc","vectorAngle","acos","tempRectangle","ShapePath","graphicsPath2D","_currentPoly","_graphicsPath2D","signed","checkForHoles","startPoly","_ensurePoly","fromX","fromY","endAngle","counterclockwise","mm","dd","cc","tt","k1","k2","qy","buildArcTo","xAxisRotation","largeArcFlag","sweepFlag","pxp","pyp","lambda","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","getArcCenter","outCurvePoint","curve","buildArcToSvg","currentPoly","smoothing","endPoly","addPath","mainShape","shapePrimitive","mainPolygon","copyWithin","drawShape","sides","corner","sideLength","internalAngle","useQuadratic","pointLerp","numPoints","thisPoint","pRadius","nextPoint","lastEdgeLength","nextEdgeLength","roundedShapeQuadraticCurve","vecFrom","pp","sharpCorner","p3","v1","v2","asin","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeArc","fillet","maxFillet","inset","dir","chamfer","radiusX","radiusY","lastShape","tempX","buildPath","boundsRect","GraphicsPath","svgPath","commands","subpaths","currentSubPath","bezierCurveToShort","quadraticCurveToShort","parseSVGPath","_shapePath","getLastPoint","cpx1","cpy1","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","parseSVGFloatAttribute","defaultValue","parseLinearGradient","gradientUnit","parseRadialGradient","_child","extractSvgUrlId","styleAttributes","opacity","parseSVGStyle","session","useFill","useStroke","parseAttribute","styleParts","stylePart","startsWith","id2","defs","calculatePathArea","pathData","coords","xs","ys","appendSVGPath","graphicsPath","tempPath","renderChildren","f1","s1","noStyle","pointsString","nodeName","fillRule","hasExplicitEvenodd","hasMultipleSubpaths","subpathsWithArea","subpath","useMultipleHolesApproach","areas","largestArea","secondArea","smallestArea","checkForNestedPattern","isMainShape","newPath","isHole","tmpPoint","_GraphicsContext","_activePath","_transform","_fillStyle","_strokeStyle","_stateStack","onUpdate","_initNextPathLocation","holePath","transformedX","transformedY","cpx","cpy","graphicsContext","div","innerHTML","definitions","querySelectorAll","definition","parseSVGDefinitions","SVGParser","outerPadding","hasHit","shapes","transformedPoint","holeShapes","GraphicsContext","RendererType","RendererType2","sizeOrBuffer","int8View","_int8View","uint8View","_uint8View","int16View","_int16View","int32View","_int32View","float64View","_float64Array","bigUint64View","_bigUint64Array","BigUint64Array","uint16View","sizeOf","forceTransform","_TextureSource","sampleCount","mipLevelCount","dimension","resourceWidth","resourceHeight","dimensions","_refreshPOT","_onStyleChange","repeatMode","naturalWidth","displayWidth","naturalHeight","displayHeight","newPixelWidth","newPixelHeight","updateMipmaps","isPowerOfTwo","_resource","tempBounds","addMaskBounds","boundsToMask","addMaskLocalBounds","localRoot","relativeMask","getMatrixRelativeToParent","AlphaMask","renderMaskToTexture","hitTestFn","ColorMask","StencilMask","_registeredResources","unregister","registeredCount","isRegistered","textureBatchBitGpuCache","generateBindingSrc","bindingIndex","generateSampleSrc","textureBatchBitGlCache","generateSampleGlSrc","generateTextureBatchBitGl","textureSourceFrom","hasResource","Source","resourceToTexture","assertPath","path2","removeUrlParams","toPosix","isUrl","isDataUrl","isBlobUrl","hasProtocol","getProtocol","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","rootname","isAbsolute","normalize","protocol","trailingSeparator","endsWith","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","normalizeStringPosix","joined","arg","prevArg","joinExtensions","hasRoot","matchedSlash","origpath","basename","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","ret","sep","delimiter","distanceField","distanceFieldRange","distanceFieldType","page","warnings","v8_0_0","v8_3_4","deprecationState","quiet","noColor","version","message","ignoreDepth","stack","deprecationMessage","useGroup","groupCollapsed","groupEnd","enumerable","configurable","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","chunkId","prop","done","script","needAttach","scripts","getElementsByTagName","charset","timeout","nc","onScriptComplete","onload","doneFns","Symbol","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","installedChunks","installedChunkData","error","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","browserExt","webworkerExt","WorkerGlobalScope","_isWebGLSupported","_isWebGPUSupported","isWebGLSupported","contextOptions","stencil","success","getContextAttributes","isWebGPUSupported","requestAdapter","requestDevice","renderPriority","_Application","stage","RendererClass","finalOptions","rendererType","WebGPURenderer","webgpu","WebGLRenderer","webgl","autoDetectRenderer","_plugins","plugin","rendererDestroyOptions","plugins","BitmapFont","textureFrame","textureRotate","bitmapFontTextParser","txt","rawData","info","common","kernings","attributeList","itemData","strValue","floatValue","distanceRange","fieldType","face","file","charNode","letter","xoffset","yoffset","xadvance","bitmapFontXMLParser","bitmapFontXMLStringParser","validExtensions","bitmapFontCachePlugin","CacheParser","loadBitmapFont","bitmapFontData","textureUrls","pageFile","loadedTextures","_options","response","BackgroundLoader","verbose","_loader","_assetList","_isLoading","_maxConcurrent","assetUrls","_isActive","_next","toLoad","toLoadAmount","active","cacheTextureArray","testImageFormat","imageData","blob","createImageBitmap","detectAvif","DetectionParser","formats","imageFormats","detectDefaults","inWorker","testVideoFormat","mimeType","canPlayType","detectMp4","detectOgv","detectWebm","detectWebp","Loader","_parsersValidated","promiseCache","_getLoadPromiseAndParser","_parserHash","parserX","parser2","testParse","assetsToLoadIn","onProgress","_validateParsers","assetsToLoad","assetsToUnloadIn","loadPromise","loadedAsset","hash","checkDataUrl","mimes","mime","checkExtension","tempURL","loadJson","Low","json","loadTxt","validWeights","validFontExtensions","validFontMIMEs","CSS_IDENT_TOKEN_REGEX","validURICharactersRegex","encodeURIWhenNeeded","uri","encodeURI","loadWebFont","fontFaces","family","nameTokens","charAt","valid","fontFamilyName","getFontFamilyName","weights","weight","FontFace","faces","cached","entry","getResolutionOfUrl","loadSvg","parseAsGraphicsContext","svgSource","loadAsGraphics","decode","canvasWidth","canvasHeight","imageSmoothingEnabled","imageSmoothingQuality","drawImage","_p","loadAsTexture","WORKER_URL","WorkerInstance","URL","createObjectURL","Blob","worker","Worker","revokeObjectURL","MAX_WORKERS","UUID","WorkerManager","_createdWorkers","_workerPool","_resolveHash","isImageBitmapSupported","_isImageBitmapSupported","terminate","loadImageBitmap","_run","_initWorkers","_getWorker","hardwareConcurrency","_complete","_returnWorker","uuid","toDo","postMessage","validImageExtensions","validImageMIMEs","loadTextures","High","preferWorkers","preferCreateImageBitmap","ok","status","statusText","imageBlob","premultiplyAlpha","potentialVideoExtensions","validVideoExtensions","validVideoMIMEs","loadVideoTextures","ve","validVideoMime","vm","supportedExtensions","supportedMimes","getBrowserSupportedVideoExtensions","isValidDataUrl","isValidExtension","videoElement","attributeMap","loc","parsedUrl","hostname","port","determineCrossOrigin","sourceElement","onCanPlay","loaded","cleanup","err","resolveTextureUrl","resolveJsonUrl","Assets","_detections","_backgroundLoader","defaultSearchParams","resolutionPref","texturePreference","_detectFormats","preferredFormats","skipDetections","detections","preferences","setPreferences","urls","urlArray","resolveResults","_mapLoadToResolve","loadBundle","_onProgress","resolveResult","totalAssetsToLoad","then","resolveResult2","backgroundLoad","backgroundLoadBundle","resolveArray","loadedAssets","_unloadFromResolved","unloadBundle","detection","assetKeyMap","AnimatedSprite","animationSpeed","onComplete","onFrameChange","onLoop","updateAnchor","firstFrame","_textures","_durations","_currentTime","_playing","_previousFrame","HIGH","gotoAndStop","frameNumber","currentFrame","gotoAndPlay","elapsed","previousFrame","lag","_updateTexture","fromFrames","fromImages","images","totalFrames","playing","getInstance","locals","destination","disconnect","WebAudioUtils","setParamValue","setValueAtTime","audioContext","_EqualizerFilter","f64","f125","f250","f500","f1k","f2k","f4k","f8k","f16k","bands","equalizerBands","F32","gain","F64","F125","F250","F500","F1K","F2K","F4K","F8K","F16K","useLegacy","band","node","createBiquadFilter","Q","frequency","bandsMap","setGain","getGain","EqualizerFilter","HTMLAudioContext","volume","refresh","refreshPaused","toggleMute","togglePause","_HTMLAudioInstance","progress","_duration","_paused","_onPlay","_onPause","duration","cloneNode","onplay","onpause","_media","_internalStop","onended","_speed","_volume","_loop","_muted","global","sound","globalVolume","soundVolume","instanceVolume","pausedReal","_pausedReal","_end","assert","_start","PADDING","onloadedmetadata","_onComplete","HTMLAudioInstance","HTMLAudioMedia","Audio","isPlayable","isLoaded","autoPlayStart","onLoad","removeListeners","onAbort","onError","SoundSprite","supported","overrides","m4a","oga","opus","caf","audio","no","canByExt","canByType","validateFormats","WebAudioInstance","_elapsed","_update","_gain","applyFilters","nodes","cloneBufferSource","_lastUpdate","_now","loopEnd","loopStart","enableTicker","_updateListener","_progress","force","soundLength","Filterable","_output","_input","prevFilter","_WebAudioNodes","bufferSource","createBufferSource","createGain","analyser","createAnalyser","_script","createScriptProcessor","BUFFER_SIZE","bufferSize","WebAudioNodes","_nodes","_decode","_loadUrl","arrayBuffer","audioBufferReadyFn","AudioBuffer","_Sound","HTMLAudioElement","singleInstance","_instances","_sprites","_autoPlayOptions","_preloadQueue","isPlaying","preferUrl","sprites","addSprites","_preload","resume","sprite","_removeInstances","removeSprites","resolve2","_createInstance","instances","_poolInstance","WebAudioContext","win","ctx","AudioContext","compressor","createDynamicsCompressor","autoPause","_ctx","_offlineCtx","OfflineAudioContext","sampleRate","_locked","_unlock","onFocus","onBlur","_pausedOnBlur","playEmptySound","createBuffer","webkitAudioContext","webkitOfflineAudioContext","offlineContext","suspend","handleError","decodeAudioData","catch","soundAsset","sound2","_sound","setInstance","_webAudioContext","_htmlAudioContext","_sounds","filtersAll","sourceOptions","options2","_getOptions","_useLegacy","legacy","disableAutoPause","exists","volumeAll","speedAll","togglePauseAll","pauseAll","resumeAll","toggleMuteAll","muteAll","unmuteAll","stopAll","CELL_WIDTH","CELL_HEIGHT","CELL_DEPTH","ACCELERATOR","IS_MOBILE","innerWidth","innerHeight","WORK_FOOD_TYPES","LOADING_FOOD_TYPES","COLOR_WHITE","COLOR_RED","COLOR_FOG","TYPE_ACTION","Stone","Gold","Berrybush","Tree","Fish","POPULATION_MAX","__defProp","__publicField","writable","__defNormalProp","_MultiColorReplaceFilter","replacements","tolerance","maxColors","DEFAULT_OPTIONS","toFixed","multiColorReplaceUniforms","uOriginalColors","uTargetColors","uTolerance","_maxColors","originals","targets","colorCount","pair","_replacements","epsilon","MultiColorReplaceFilter","iterator","Generator","_regeneratorDefine2","G","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","_regenerator","_invoke","asyncGeneratorStep","_arrayLikeToArray","getIconPath","getBuildingAsset","owner","civ","buildings","age","getTexture","_name$split2","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","textureName","hitArea","colors","changeSpriteColorDirectly","targetColors","getImageData","sourceColorMap","targetColor","putImageData","newTexture","changeSpriteColor","drawInstanceBlinkingSelection","selection","blink","blinkSequence","_ref","_callee","_throw","canvasDrawRectangle","canvasDrawDiamond","onSpriteLoopAtFrame","refundCost","player","cost","_typeof","payCost","canAfford","uuidv4","randomValue","crypto","getRandomValues","formatNumber","nbr","cartesianToIsometric","isometricToCartesian","getPercentage","getValuePercentage","perc","average","pointIsBetweenTwoPoint","line1","line2","pnt","lineThickness","L2","hypot","randomRange","random","randomItem","instancesDistance","pointsDistance","getInstanceZIndex","diff","getInstanceDegree","getPointsDegree","tX","tY","degreesToRadians","degrees","pointInRectangle","cellIsDiag","degreeToDirection","degree","instanceContactInstance","isDestroyed","moveTowardPoint","velX","velY","getFreeCellAroundPoint","grid","condition","cells","getCellsAroundPoint","getInstanceClosestFreeCellPath","paths","cell","getInstancePath","shortest","isCellReachable","solid","category","cloneGrid","isFinish","openCells","closedCells","cloneEnd","cloneStart","lowestF","neighbour","validDiag","tempG","getZoneInGridWithCondition","zone","_grid$i","_step","isFree","_iterator","_createForOfIteratorHelper","getPlainCellsAroundPoint","findInstancesInSight","instX","instY","sight","renderCellOnInstanceSight","_instance$context","controls","revealEverything","instanceInCamera","instanceIsInPlayerSight","isPlayed","views","pointDistance","globalCell","detect","viewBy","viewed","cellViewed","onViewed","removeFog","quantity","foundedTrees","foundedBerrybushs","hitPoints","foundedEnemyBuildings","updateAIKnowledge","clearCellOnInstanceSight","idx","setFog","getPositionInGridAroundInstance","space","allowInclined","extraCondition","_space","_slicedToArray","minSpace","maxSpace","cellCondition","border","inclined","attempts","attempt","_grid$randomX","randomX","randomY","_step2","_iterator2","getRandomZoneInGridWithCondition","isInSight","_grid$startX","startCell","dyMax","getClosestInstance","_step3","closestInstance","closestDistance","_iterator3","targetInstance","getClosestInstanceWithPath","_step4","_iterator4","setUnitTexture","sheet","_instance$sheet$data$","currentSheet","walkingSheet","goto","direction","standingSheet","corpseSheet","filterObject","_ref2","exported","Modal","HTMLElement","open","modal","className","modalContent","body","getElementById","CustomTimeout","delay","_this","timerId","remaining","throttle","wait","immediate","initialCall","_this2","_len","getWorkWithLoadingType","loadingType","wood","berry","stone","meat","fish","getHitPointsWithDamage","defaultDamage","damage","meleeAttack","pierceAttack","meleeArmor","pierceArmor","getDamage","updateObject","operation","op","setToValue","canUpdateMinimap","isValidCondition","expectedValue","arraysEqual","sortedA","sortedB","getActionCondition","props","conditions","delivery","loading","isBuilt","buildingTypes","takemeat","isDead","fishing","allowAction","hunt","chopwood","farm","_target$owner","isUsedBy","forageberry","minestone","minegold","_target$owner2","totalHitPoints","attack","_target$owner3","heal","_target$owner4","Resource","_Container","_this$quantity","_this$hitPoints","_classCallCheck","_callSuper","selected","totalQuantity","eventMode","allowClick","allowMove","setDefaultInterface","isAnimated","spritesheetJump","jump","resourceName","textureFile","_this3$context","menu","selectedUnits","unselectAll","select","setBottombar","selectedOther","_this4$context","mouseBuilding","mouseRectangle","isMouseInApp","mouse","prevent","hasVillager","hasOther","unit","sendToFunc","sendTo","voice","units","Villager","sounds","_inherits","_this$context","players","listName","updateResourcesMiniMap","onTreeDie","corpses","corpseIndex","typeDiv","textContent","iconImg","icon","hitPointsDiv","iconToUse","quantityDiv","infoIcons","smallIconImg","textDiv","Projectile","projectiles","targetX","targetY","interval","setInterval","onHit","clearInterval","die","updateInfo","isAttacked","Building","technology","attackInterval","buyUnit","buyTechnology","spriteSheet","getBuildingTextureNameWithSize","getUnitButton","technologies","getTechnologyButton","displayPopulation","populationDiv","populationIcon","populationSpan","population","getLoadingElement","devMode","_toConsumableArray","_this2$context","hasSentVillager","hasSentOther","accept","previousDest","sendToBuilding","sendToFarm","selectedBuilding","playerUnit","sendToAttack","finalTexture","onBuilt","_this3","startAttackInterval","projectile","stopAttackInterval","rateOfFire","_this4","stopInterval","_this5","finalCb","_this$timeout","_this$timeout2","stopTimeout","attackAction","updateHitPoints","percentage","buildSpritesheetId","buildSpritesheet","hasBuilt","increasePopulation","spriteColor","spritesheetFire","spriteFire","fire","generateFire","updateTexture","building","spriteId","newFire","poses","_this6","deco","rubbleSheet","getBuildingRubbleTextureNameWithSize","startTimeout","updatePlayerMiniMapEvt","_this7","_this$context2","updateInterfaceLoading","_this$context3","spawnCell","_this$context4","extra","getUnitExtraOptions","createUnit","_objectSpread","_this8","alreadyPaid","_this$context5","updateButtonContent","updateTopbar","hasShowedMessage","startInterval","still","toggleButtonCancel","placeUnit","showMessage","trainingTime","_this9","loadingDiv","_this$context6","updateBottombar","_i4","_Object$entries","_Object$entries$_i","_this0","_this$context7","techs","_this0$technology","upgrade","technconfigology","updateConfig","operations","functionName","capitalizeFirstLetter","researchTime","civDiv","icons","getActionSheet","work","actionSheet","allAssets","Unit","_this$x","_this$y","_this$z","_this$loop","dest","realDest","inactif","currentCell","_i2","_Object$entries2","_Object$entries2$_i","ready","showLoading","showBuildings","getBuildingButton","death","loadedSheet","setTextures","sendToEvt","clicked","getCellOnCamera","doubleClicked","hasSentHealer","selectedUnit","hasSentAttacker","_this$sprite","_this$sprite2","handleSetDest","step","_map$grid$this$i$this","handleChangeDest","isUnitAtDest","setDest","getAction","allowWaterCellCategory","affectNewDest","setPath","sendToTakeMeat","goBackToPrevious","loadingMax","sendToDelivery","gatheringRate","setCuttedTreeTexture","constructionTime","depst","destHasMoved","oldDeg","hit","healing","firstTargets","harvestSheet","secondTargets","_Object$entries3","_Object$entries3$_i","_i5","_Object$entries4","_Object$entries4$_i","handleSuccess","handleAffectNewDestHunter","nextCell","hasPath","updatePlayerMiniMap","currentDest","sendToHunt","moveToPath","_this1","_this10","unselectUnit","unselect","corpsesIndex","_this11","keepPrevious","workFromLoading","dyingSheet","_this12","Granary","StoragePit","_i6","_Object$entries5","_Object$entries5$_i","commonSendTo","infosDiv","infos","infoDiv","attackImg","attackDiv","Player","food","colorHex","_loop2","_this$views$i$j$viewB","_this$views","_this$views$i$j$viewe","_this$views2","updateTerrainMiniMap","revealTerrain","createBuilding","others","types","spawnBuilding","styleLogInfo1","styleLogInfo2","AI","_Player","_extends","_objectDestructuringEmpty","foundedGolds","foundedStones","distSpread","nextAge","maxVillagerPerAge","villageTargetPercentageByAge","maxBuildingByAge","Barracks","Market","Farm","buildingType","me","buildingsByTypes","hasNotReachBuildingLimit","closestBuilding","buyBuilding","maxVillagers","filterUnitsByType","villagers","clubmans","towncenters","storagepits","houses","granarys","barracks","markets","farms","emptyFarms","notBuiltBuildings","notBuiltHouses","villagersByWork","works","inactifVillagers","villagersOnWood","villagersOnFood","villagersOnGold","villagersOnStone","builderVillagers","maxVillagersOnWood","maxVillagersOnFood","maxVillagersOnGold","maxVillagersOnStone","inactifClubmans","assault","waitingClubmans","totalCells","assignVillagersToResource","resourceList","actionCallback","villager","bush","sendToBerrybush","tree","sendToTree","sendToStone","sendToGold","clubman","buyUnits","currentCount","maxCount","buildingList","unitType","unitsNeeded","unitsBought","buyBuildingIfNeeded","positionCallback","House","otherPlayers","_ret","technologyType","Animal","animals","drawDestinationRectangle","isAnimalAtDest","strategy","runaway","getReaction","fall","CORPSE_TIME","Gaia","Human","nextVillager","unselectAllUnits","Cell","waterBorder","fogSprites","addFogBuilding","updateChild","cellSpriteIndex","cpt","elevation","setWater","aside","setCellLevel","fillReliefCellsAroundCell","textureSheet","colorSheet","colorName","localCell","_localCell$fogSprites","setFogChildren","setRemoveChildren","removeFogBuilding","reliefRange","chanceOfRelief","chanceOfSets","allTechnologies","noAI","startingUnits","playersPos","positionsCount","gaia","camera","classMap","newCell","fillWaterCellsAroundCell","getDest","processUnit","formatCellsRelief","formatCellsWaterBorder","formatCellsDesert","setCamera","_players$index","animal","createAnimal","Boolean","generateCells","findPlayerPlaces","alert","generateMap","generateResourcesAroundPlayers","generateSets","randoms","_this$playersPos$pose","_this$playersPos$pose2","posI","posJ","towncenter","treeCount","clusterCount","minClusterRadius","maxClusterRadius","safeDistance","clearingProbability","playerI","playerJ","gridWidth","gridHeight","forestCells","pathCells","createCircle","centerI","centerJ","density","edgeNoise","circleCells","cellI","cellJ","cluster","clusterCenterI","clusterCenterJ","tries","clusterRadius","clusterDensity","scatteredTreeCount","soloI","soloJ","clearing","clearingCenterI","clearingCenterJ","clearingRadius","clearedCell","pathDirection","offsetX","randOffsetX","randOffsetY","cellsToPlace","itemIndex","_cellsToPlace","_i8","_cell$has","placeResourceGroup","generateForestAroundPlayer","gridSize","mapModel","terrainMap","generateTerrainCluster","generateClusters","clusterSizeMin","clusterSizeMax","clusterX","clusterY","distFromCenter","edgeDist","randomOffset","baseRadius","distanceFromCenter","noise","generateWater","terrain","generateTerrain","randomSpritesheet","rock","canGenerate","_loop3","toRemove","setReliefBorder","setWaterBorder","typeToFormat","setDesertBorder","outBorder","inBorder","zones","randomDistance","validCells","_loop4","newI","newJ","_cell$has2","getValidCells","_i14","_cellsToPlace2","Menu","topbar","longClick","mouseHoldTimeout","setResourceBox","innerText","reader","FileReader","readAsText","files","cancel","bottombar","bottombarInfo","bottombarMenu","bottombarMapWrap","bottombarMap","minimapFactor","getMinimapFactor","getBoundingClientRect","clientX","clientY","updateVisibleCells","_player$selectedUnits","sendUnits","terrainMinimap","playersMinimap","resourcesMinimap","cameraMinimap","toggled","toggle","preventDefault","display","stopPropagation","updateResourcesMiniMapEvt","updateCameraMiniMap","updateCameraMiniMapEvt","miniMapAlpha","initMiniMap","cameraContext","resourceContext","revealTerrainMinimap","updateResourceMiniMap","squareSize","_player$views","finalX","finalY","app","strokeRect","canvasDrawStrokeRectangle","playerMinimap","_ref3","finalSize","_ref4","gamebox","box","clientHeight","msg","img","resetInfo","targetElement","contentElement","setMenuRecurs","btn","hide","onCreate","removeMouseBuilding","onClick","back","generateInfo","cancelTechnology","getMessage","counter","setMouseBuilding","Controls","visibleCells","keysPressed","keyInterval","keySpeed","mouseTouch","mouseDrag","moveCameraInterval","minimapRectangle","moveCameraWithMouse","onKeyDown","onKeyUp","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseDown","onMouseUp","keyCode","double","moveCamera","touch","touches","pageX","pageY","speedX","speedY","changedTouches","pointerStart","buildOnWater","waterBorderedCells","waterCells","graph","selectVillager","countSelect","pointerSheet","pointer","hasSentSoldier","distCenterX","distCenterY","moveSpeed","isSpeedDivided","A","B","D","C","cameraCenter","setCoordinate","calcs","up","down","cameraFloor","_isometricToCartesian2","cartesianX","cartesianY","newVisible","endX","endY","_map$grid$x","_isometricToCartesian4","cartX","cartY","updateVisible","_player$buildings","_player$units","direct","_this$context8","Game","generatePlayers","placePlayers","stylishMap","unitData","playerData","_unit$sprite","_unit$sprite2","_unit$dest","_unit$previousDest","_building$isUsedBy","iname","buildingData","corpse","resourceData","cellData","_animal$sprite","_animal$sprite2","_animal$dest","_animal$previousDest","animalData","dataStr","downloadAnchorNode","toLocaleString","timeZone","click","generateFromJSON","_document$getElementB","ownKeys","getOwnPropertyDescriptor","_defineProperty","_toPropertyKey","_defineProperties","toPrimitive","_toPrimitive","_isNativeReflectConstruct","valueOf","Reflect","construct","_getPrototypeOf","_setPrototypeOf","LoaderScreen","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","graphics","greek","resizeTo","devicePixelRatio","powerPreference","onLoaded","game"],"sourceRoot":""}